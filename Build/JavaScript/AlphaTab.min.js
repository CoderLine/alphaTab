<<<<<<< HEAD
function $CombineDelegates(del1,del2){if(null==del1)return del2;if(null==del2)return del1;var del=$CreateMulticastDelegateFunction();if(del.delegates=[],del1.isMulticastDelegate)for(var i=0;i<del1.delegates.length;i++)del.delegates.push(del1.delegates[i]);else del.delegates.push(del1);if(del2.isMulticastDelegate)for(var i=0;i<del2.delegates.length;i++)del.delegates.push(del2.delegates[i]);else del.delegates.push(del2);return del}function $CreateMulticastDelegateFunction(){var del2=null,del=function(){for(var x=void 0,i=0;i<del2.delegates.length;i++){var del3=del2.delegates[i];x=del3.apply(null,arguments)}return x};return del.isMulticastDelegate=!0,del2=del,del}function $RemoveDelegate(delOriginal,delToRemove){if(null==delToRemove||null==delOriginal)return delOriginal;if(delOriginal.isMulticastDelegate){if(delToRemove.isMulticastDelegate)throw new Error("Multicast to multicast delegate removal is not implemented yet");for(var del=$CreateMulticastDelegateFunction(),i=0;i<delOriginal.delegates.length;i++){var del2=delOriginal.delegates[i];del2!=delToRemove&&(null==del.delegates&&(del.delegates=[]),del.delegates.push(del2))}return null==del.delegates?null:1==del.delegates.length?del.delegates[0]:del}if(delToRemove.isMulticastDelegate)throw new Error("single to multicast delegate removal is not supported");return delOriginal==delToRemove?null:delOriginal}var $StaticConstructors=[],$StaticConstructor=function(f){$StaticConstructors.push(f)};if("undefined"==typeof $Inherit)var $Inherit=function(ce,ce2){if("undefined"==typeof Object.getOwnPropertyNames){for(var p in ce2.prototype)("undefined"==typeof ce.prototype[p]||ce.prototype[p]==Object.prototype[p])&&(ce.prototype[p]=ce2.prototype[p]);for(var p in ce2)"undefined"==typeof ce[p]&&(ce[p]=ce2[p]);ce.$baseCtor=ce2}else{for(var props=Object.getOwnPropertyNames(ce2.prototype),i=0;i<props.length;i++)"undefined"==typeof Object.getOwnPropertyDescriptor(ce.prototype,props[i])&&Object.defineProperty(ce.prototype,props[i],Object.getOwnPropertyDescriptor(ce2.prototype,props[i]));for(var p in ce2)"undefined"==typeof ce[p]&&(ce[p]=ce2[p]);ce.$baseCtor=ce2}};if("undefined"==typeof $CreateException)var $CreateException=function(ex,error){null==error&&(error=new Error),null==ex&&(ex=new System.Exception.ctor),error.message=ex.message,error.exception=ex;for(var p in ex)error[p]=ex[p];return error};if("undefined"==typeof $CreateAnonymousDelegate)var $CreateAnonymousDelegate=function(target,func){if(null==target||null==func)return func;var delegate=function(){return func.apply(target,arguments)};return delegate.func=func,delegate.target=target,delegate.isDelegate=!0,delegate};if("undefined"==typeof $CreateDelegate){if("undefined"==typeof $iKey)var $iKey=0;if("undefined"==typeof $pKey)var $pKey=String.fromCharCode(1);var $CreateDelegate=function(target,func){if(null==target||null==func)return func;if(func.target==target&&func.func==func)return func;null==target.$delegateCache&&(target.$delegateCache={}),null==func.$key&&(func.$key=$pKey+String(++$iKey));var delegate;return null!=target.$delegateCache&&(delegate=target.$delegateCache[func.$key]),null==delegate&&(delegate=function(){return func.apply(target,arguments)},delegate.func=func,delegate.target=target,delegate.isDelegate=!0,null!=target.$delegateCache&&(target.$delegateCache[func.$key]=delegate)),delegate}}var Int32Array=Int32Array||Array,Uint8Array=Uint8Array||Array,Float32Array=Float32Array||Array,AlphaTab=AlphaTab||{};AlphaTab.Environment=function(){},AlphaTab.Environment.PlatformInit=function(){AlphaTab.Environment.RenderEngines["default"]=function(){return new AlphaTab.Platform.Svg.SvgCanvas},AlphaTab.Environment.RenderEngines.html5=function(){return new AlphaTab.Platform.JavaScript.Html5Canvas},AlphaTab.Environment.FileLoaders["default"]=function(){return new AlphaTab.Platform.JavaScript.JsFileLoader}},$StaticConstructor(function(){AlphaTab.Environment.RenderEngines=null,AlphaTab.Environment.FileLoaders=null,AlphaTab.Environment.LayoutEngines=null,AlphaTab.Environment.StaveFactories=null,AlphaTab.Environment.RenderEngines={},AlphaTab.Environment.FileLoaders={},AlphaTab.Environment.LayoutEngines={},AlphaTab.Environment.StaveFactories={},AlphaTab.Environment.PlatformInit(),AlphaTab.Environment.RenderEngines.svg=function(){return new AlphaTab.Platform.Svg.SvgCanvas},AlphaTab.Environment.LayoutEngines["default"]=function(r){return new AlphaTab.Rendering.Layout.PageViewLayout(r)},AlphaTab.Environment.LayoutEngines.page=function(r){return new AlphaTab.Rendering.Layout.PageViewLayout(r)},AlphaTab.Environment.LayoutEngines.horizontal=function(r){return new AlphaTab.Rendering.Layout.HorizontalScreenLayout(r)},AlphaTab.Environment.StaveFactories.marker=function(){return new AlphaTab.Rendering.EffectBarRendererFactory(new AlphaTab.Rendering.Effects.MarkerEffectInfo)},AlphaTab.Environment.StaveFactories.tempo=function(){return new AlphaTab.Rendering.EffectBarRendererFactory(new AlphaTab.Rendering.Effects.TempoEffectInfo)},AlphaTab.Environment.StaveFactories.text=function(){return new AlphaTab.Rendering.EffectBarRendererFactory(new AlphaTab.Rendering.Effects.TextEffectInfo)},AlphaTab.Environment.StaveFactories.chords=function(){return new AlphaTab.Rendering.EffectBarRendererFactory(new AlphaTab.Rendering.Effects.ChordsEffectInfo)},AlphaTab.Environment.StaveFactories.trill=function(){return new AlphaTab.Rendering.EffectBarRendererFactory(new AlphaTab.Rendering.Effects.TrillEffectInfo)},AlphaTab.Environment.StaveFactories["beat-vibrato"]=function(){return new AlphaTab.Rendering.EffectBarRendererFactory(new AlphaTab.Rendering.Effects.BeatVibratoEffectInfo)},AlphaTab.Environment.StaveFactories["note-vibrato"]=function(){return new AlphaTab.Rendering.EffectBarRendererFactory(new AlphaTab.Rendering.Effects.NoteVibratoEffectInfo)},AlphaTab.Environment.StaveFactories["alternate-endings"]=function(){return new AlphaTab.Rendering.AlternateEndingsBarRendererFactory},AlphaTab.Environment.StaveFactories.score=function(){return new AlphaTab.Rendering.ScoreBarRendererFactory},AlphaTab.Environment.StaveFactories.crescendo=function(){return new AlphaTab.Rendering.EffectBarRendererFactory(new AlphaTab.Rendering.Effects.CrescendoEffectInfo)},AlphaTab.Environment.StaveFactories.dynamics=function(){return new AlphaTab.Rendering.EffectBarRendererFactory(new AlphaTab.Rendering.Effects.DynamicsEffectInfo)},AlphaTab.Environment.StaveFactories.tap=function(){return new AlphaTab.Rendering.EffectBarRendererFactory(new AlphaTab.Rendering.Effects.TapEffectInfo)},AlphaTab.Environment.StaveFactories["fade-in"]=function(){return new AlphaTab.Rendering.EffectBarRendererFactory(new AlphaTab.Rendering.Effects.FadeInEffectInfo)},AlphaTab.Environment.StaveFactories["let-ring"]=function(){return new AlphaTab.Rendering.EffectBarRendererFactory(new AlphaTab.Rendering.Effects.LetRingEffectInfo)},AlphaTab.Environment.StaveFactories["palm-mute"]=function(){return new AlphaTab.Rendering.EffectBarRendererFactory(new AlphaTab.Rendering.Effects.PalmMuteEffectInfo)},AlphaTab.Environment.StaveFactories.tab=function(){return new AlphaTab.Rendering.TabBarRendererFactory},AlphaTab.Environment.StaveFactories["pick-stroke"]=function(){return new AlphaTab.Rendering.EffectBarRendererFactory(new AlphaTab.Rendering.Effects.PickStrokeEffectInfo)},AlphaTab.Environment.StaveFactories["rhythm-up"]=function(){return new AlphaTab.Rendering.RhythmBarRendererFactory(AlphaTab.Rendering.Utils.BeamDirection.Down)},AlphaTab.Environment.StaveFactories["rhythm-down"]=function(){return new AlphaTab.Rendering.RhythmBarRendererFactory(AlphaTab.Rendering.Utils.BeamDirection.Up)}}),AlphaTab.Model=AlphaTab.Model||{},AlphaTab.Model.JsonConverter=function(){},AlphaTab.Model.JsonConverter.prototype={ScoreToJsObject:function(score){var score2={};AlphaTab.Model.Score.CopyTo(score,score2),score2.MasterBars=[],score2.Tracks=[];for(var i=0;i<score.MasterBars.length;i++){var masterBar=score.MasterBars[i],masterBar2={};AlphaTab.Model.MasterBar.CopyTo(masterBar,masterBar2),null!=masterBar.TempoAutomation&&(masterBar2.TempoAutomation={},AlphaTab.Model.Automation.CopyTo(masterBar.TempoAutomation,masterBar2.TempoAutomation)),null!=masterBar.VolumeAutomation&&(masterBar2.VolumeAutomation={},AlphaTab.Model.Automation.CopyTo(masterBar.VolumeAutomation,masterBar2.VolumeAutomation)),null!=masterBar.Section&&(masterBar2.Section={},AlphaTab.Model.Section.CopyTo(masterBar.Section,masterBar2.Section)),score2.MasterBars.push(masterBar2)}for(var t=0;t<score.Tracks.length;t++){var track=score.Tracks[t],track2={};track2.Color={},AlphaTab.Model.Track.CopyTo(track,track2),track2.PlaybackInfo={},AlphaTab.Model.PlaybackInformation.CopyTo(track.PlaybackInfo,track2.PlaybackInfo),track2.Chords={};for(var $i2=0,$t2=Object.keys(track.Chords),$l2=$t2.length,key=$t2[$i2];$l2>$i2;$i2++,key=$t2[$i2]){var chord=track.Chords[key],chord2={};AlphaTab.Model.Chord.CopyTo(chord,chord2),track2.Chords[key]=chord}track2.Bars=[];for(var b=0;b<track.Bars.length;b++){var bar=track.Bars[b],bar2={};AlphaTab.Model.Bar.CopyTo(bar,bar2),bar2.Voices=[];for(var v=0;v<bar.Voices.length;v++){var voice=bar.Voices[v],voice2={};AlphaTab.Model.Voice.CopyTo(voice,voice2),voice2.Beats=[];for(var bb=0;bb<voice.Beats.length;bb++){var beat=voice.Beats[bb],beat2={};AlphaTab.Model.Beat.CopyTo(beat,beat2),beat2.Automations=[];for(var a=0;a<beat.Automations.length;a++){var automation={};AlphaTab.Model.Automation.CopyTo(beat.Automations[a],automation),beat2.Automations.push(automation)}beat2.WhammyBarPoints=[];for(var i=0;i<beat.WhammyBarPoints.length;i++){var point={};AlphaTab.Model.BendPoint.CopyTo(beat.WhammyBarPoints[i],point),beat2.WhammyBarPoints.push(point)}beat2.Notes=[];for(var n=0;n<beat.Notes.length;n++){var note=beat.Notes[n],note2={};AlphaTab.Model.Note.CopyTo(note,note2),note2.BendPoints=[];for(var i=0;i<note.BendPoints.length;i++){var point={};AlphaTab.Model.BendPoint.CopyTo(note.BendPoints[i],point),note2.BendPoints.push(point)}beat2.Notes.push(note2)}voice2.Beats.push(beat2)}bar2.Voices.push(voice2)}track2.Bars.push(bar2)}score2.Tracks.push(track2)}return score2},JsObjectToScore:function(score){var score2=new AlphaTab.Model.Score;AlphaTab.Model.Score.CopyTo(score,score2);for(var i=0;i<score.MasterBars.length;i++){var masterBar=score.MasterBars[i],masterBar2=new AlphaTab.Model.MasterBar;AlphaTab.Model.MasterBar.CopyTo(masterBar,masterBar2),null!=masterBar.TempoAutomation&&(masterBar2.TempoAutomation=new AlphaTab.Model.Automation,AlphaTab.Model.Automation.CopyTo(masterBar.TempoAutomation,masterBar2.TempoAutomation)),null!=masterBar.VolumeAutomation&&(masterBar2.VolumeAutomation=new AlphaTab.Model.Automation,AlphaTab.Model.Automation.CopyTo(masterBar.VolumeAutomation,masterBar2.VolumeAutomation)),null!=masterBar.Section&&(masterBar2.Section=new AlphaTab.Model.Section,AlphaTab.Model.Section.CopyTo(masterBar.Section,masterBar2.Section)),score2.AddMasterBar(masterBar2)}for(var t=0;t<score.Tracks.length;t++){var track=score.Tracks[t],track2=new AlphaTab.Model.Track;AlphaTab.Model.Track.CopyTo(track,track2),score2.AddTrack(track2),AlphaTab.Model.PlaybackInformation.CopyTo(track.PlaybackInfo,track2.PlaybackInfo);for(var $i3=0,$t3=Object.keys(track.Chords),$l3=$t3.length,key=$t3[$i3];$l3>$i3;$i3++,key=$t3[$i3]){var chord=track.Chords[key],chord2=new AlphaTab.Model.Chord;AlphaTab.Model.Chord.CopyTo(chord,chord2),track2.Chords[key]=chord2}for(var b=0;b<track.Bars.length;b++){var bar=track.Bars[b],bar2=new AlphaTab.Model.Bar;AlphaTab.Model.Bar.CopyTo(bar,bar2),track2.AddBar(bar2);for(var v=0;v<bar.Voices.length;v++){var voice=bar.Voices[v],voice2=new AlphaTab.Model.Voice;AlphaTab.Model.Voice.CopyTo(voice,voice2),bar2.AddVoice(voice2);for(var bb=0;bb<voice.Beats.length;bb++){var beat=voice.Beats[bb],beat2=new AlphaTab.Model.Beat;AlphaTab.Model.Beat.CopyTo(beat,beat2),voice2.AddBeat(beat2);for(var a=0;a<beat.Automations.length;a++){var automation=new AlphaTab.Model.Automation;AlphaTab.Model.Automation.CopyTo(beat.Automations[a],automation),beat2.Automations.push(automation)}for(var i=0;i<beat.WhammyBarPoints.length;i++){var point=new AlphaTab.Model.BendPoint(0,0);AlphaTab.Model.BendPoint.CopyTo(beat.WhammyBarPoints[i],point),beat2.WhammyBarPoints.push(point)}for(var n=0;n<beat.Notes.length;n++){var note=beat.Notes[n],note2=new AlphaTab.Model.Note;AlphaTab.Model.Note.CopyTo(note,note2),beat2.AddNote(note2);for(var i=0;i<note.BendPoints.length;i++){var point=new AlphaTab.Model.BendPoint(0,0);AlphaTab.Model.BendPoint.CopyTo(note.BendPoints[i],point),note2.BendPoints.push(point)}}}}}}return score2.Finish(),score2},NewObject:function(){return null}},AlphaTab.Model.TuningParser=function(){},$StaticConstructor(function(){AlphaTab.Model.TuningParser.TuningRegex=new RegExp("([a-g]b?)([0-9])","i")}),AlphaTab.Model.TuningParser.IsTuning=function(name){return null!=AlphaTab.Model.TuningParser.TuningRegex.exec(name)},AlphaTab.Model.TuningParser.GetTuningForText=function(str){var b=0,note=null,octave=0,m=AlphaTab.Model.TuningParser.TuningRegex.exec(str.toLowerCase());if(null!=m&&(note=m[1],octave=AlphaTab.Platform.Std.ParseInt(m[2])),AlphaTab.Platform.Std.IsNullOrWhiteSpace(note))return-1;switch(note){case"c":b=0;break;case"db":b=1;break;case"d":b=2;break;case"eb":b=3;break;case"e":b=4;break;case"f":b=5;break;case"gb":b=6;break;case"g":b=7;break;case"ab":b=8;break;case"a":b=9;break;case"bb":b=10;break;case"b":b=11;break;default:return-1}return b+=12*octave},AlphaTab.Platform=AlphaTab.Platform||{},AlphaTab.Platform.JavaScript=AlphaTab.Platform.JavaScript||{},AlphaTab.Platform.JavaScript.JsApiBase=function(element,options){this.Element=null,this.CanvasElement=null,this.TrackIndexes=null,this.Renderer=null,this.Score=null,this.Element=element;var tracksData,dataset=this.Element.dataset,settings=AlphaTab.Settings.FromJson(options);tracksData=null!=options&&options.tracks?options.tracks:null!=element&&null!=element.dataset&&null!=dataset.tracks?dataset.tracks:0,this.SetTracks(tracksData,!1);var contents="";null!=element&&(null!=element.dataset&&null!=dataset.tex&&element.innerText&&(contents=element.innerText.trim(),element.innerHTML=""),this.CanvasElement=document.createElement("div"),this.CanvasElement.className="alphaTabSurface",element.appendChild(this.CanvasElement)),this.Renderer=this.CreateScoreRenderer(settings,options,this.CanvasElement),this.Renderer.add_RenderFinished($CreateAnonymousDelegate(this,function(){this.TriggerEvent("rendered",null)})),this.Renderer.add_PostRenderFinished($CreateAnonymousDelegate(this,function(){this.TriggerEvent("post-rendered",null)})),this.Renderer.add_PreRender($CreateAnonymousDelegate(this,function(){this.CanvasElement.innerHTML=""})),this.Renderer.add_PartialRenderFinished($CreateAnonymousDelegate(this,function(result){var itemToAppend;if("string"==typeof result.RenderResult){var partialResult=document.createElement("div");partialResult.innerHTML=result.RenderResult,itemToAppend=partialResult.firstChild}else itemToAppend=result.RenderResult;this.CanvasElement.style.width=result.TotalWidth+"px",this.CanvasElement.style.height=result.TotalHeight+"px",this.CanvasElement.appendChild(itemToAppend)})),this.Renderer.add_RenderFinished($CreateAnonymousDelegate(this,function(result){this.CanvasElement.style.width=result.TotalWidth+"px",this.CanvasElement.style.height=result.TotalHeight+"px"})),null!=contents&&0!=contents.length?this.Tex(contents):options&&options.file?this.Load(options.file):null!=this.Element&&null!=this.Element.dataset&&null!=dataset.file&&0!=dataset.file.length&&this.Load(dataset.file)},AlphaTab.Platform.JavaScript.JsApiBase.prototype={SetTracks:function(tracksData,render){var tracks=[];if("string"==typeof tracksData)try{tracksData=JSON.parse(tracksData)}catch($$e1){tracksData=new Int32Array([0])}if("number"==typeof tracksData)tracks.push(tracksData);else if(tracksData.length)for(var i=0;i<tracksData.length;i++){var value;value="number"==typeof tracksData[i]?tracksData[i]:AlphaTab.Platform.Std.ParseInt(tracksData[i].ToString()),value>=0&&tracks.push(value)}this.TrackIndexes=tracks.slice(0),render&&this.Render()},ScoreLoaded:function(score){this.Score=score,this.TriggerEvent("loaded",score),this.Render()},TriggerEvent:function(name,details){if(null!=this.Element){var e=document.createEvent("CustomEvent");e.initCustomEvent(name,!1,!1,details),this.Element.dispatchEvent(e)}}},AlphaTab.Platform.JavaScript.JsWorkerApi=function(element,options){AlphaTab.Platform.JavaScript.JsApiBase.call(this,element,options)},AlphaTab.Platform.JavaScript.JsWorkerApi.prototype={CreateScoreRenderer:function(settings,rawSettings){var renderer=new AlphaTab.Platform.JavaScript.WorkerScoreRenderer(this,rawSettings);return renderer.add_PostRenderFinished($CreateAnonymousDelegate(this,function(){this.Element.className=this.Element.className.replace(" loading","").replace(" rendering","")})),renderer},Load:function(data){this.Element.className+=" loading",this.Renderer.Load(data,this.TrackIndexes)},Render:function(){null!=this.Renderer&&(this.Element.className+=" rendering",this.Renderer.RenderMultiple(this.TrackIndexes))},Tex:function(contents){this.Element.className+=" loading",this.Renderer.Tex(contents)}},$Inherit(AlphaTab.Platform.JavaScript.JsWorkerApi,AlphaTab.Platform.JavaScript.JsApiBase),AlphaTab.Platform.JavaScript.JsWorker=function(main,options){this._renderer=null,this._main=null,this._trackIndexes=null,this._includeScoreInLoadedEvent=!1,this.Score=null,this._main=main,this._includeScoreInLoadedEvent=options.scoreInLoadedEvent,this._main.addEventListener("message",$CreateDelegate(this,this.HandleMessage),!1);var settings=AlphaTab.Settings.FromJson(options);this._renderer=new AlphaTab.Rendering.ScoreRenderer(settings,null),this._renderer.add_PartialRenderFinished($CreateAnonymousDelegate(this,function(result){this._main.postMessage({cmd:"partialRenderFinished",result:result})})),this._renderer.add_RenderFinished($CreateAnonymousDelegate(this,function(result){this._main.postMessage({cmd:"renderFinished",result:result})})),this._renderer.add_PostRenderFinished($CreateAnonymousDelegate(this,function(){this._main.postMessage({cmd:"postRenderFinished"})})),this._renderer.add_PreRender($CreateAnonymousDelegate(this,function(){this._main.postMessage({cmd:"preRender"})}))},AlphaTab.Platform.JavaScript.JsWorker.prototype={get_Tracks:function(){for(var tracks=[],$i4=0,$t4=this._trackIndexes,$l4=$t4.length,track=$t4[$i4];$l4>$i4;$i4++,track=$t4[$i4])track>=0&&track<this.Score.Tracks.length&&tracks.push(this.Score.Tracks[track]);return 0==tracks.length&&this.Score.Tracks.length>0&&tracks.push(this.Score.Tracks[0]),tracks.slice(0)},HandleMessage:function(e){var data=e.data,cmd=data.cmd;switch(cmd){case"load":this.Load(data.data,data.indexes);break;case"tex":this.Tex(data.data);break;case"renderMultiple":this.RenderMultiple(data.data)}},RenderMultiple:function(trackIndexes){this._trackIndexes=trackIndexes,this.Render()},Tex:function(contents){try{var parser=new AlphaTab.Importer.AlphaTexImporter,data=AlphaTab.IO.ByteBuffer.FromBuffer(AlphaTab.Platform.Std.StringToByteArray(contents));parser.Init(data),this.ScoreLoaded(parser.ReadScore())}catch(e){this.Error(e)}},Load:function(data,trackIndexes){try{this._trackIndexes=trackIndexes,data instanceof ArrayBuffer?this.ScoreLoaded(AlphaTab.Importer.ScoreLoader.LoadScoreFromBytes(new Uint8Array(data))):data instanceof Uint8Array?this.ScoreLoaded(AlphaTab.Importer.ScoreLoader.LoadScoreFromBytes(data)):"string"==typeof data&&AlphaTab.Importer.ScoreLoader.LoadScoreAsync(data,$CreateDelegate(this,this.ScoreLoaded),$CreateDelegate(this,this.Error))}catch(e){this.Error(e)}},Error:function(e){this._main.postMessage({cmd:"error",exception:e})},ScoreLoaded:function(score){if(this.Score=score,this._includeScoreInLoadedEvent){var json=new AlphaTab.Model.JsonConverter;this._main.postMessage({cmd:"loaded",score:json.ScoreToJsObject(score)})}else this._main.postMessage({cmd:"loaded"});this.Render()},Render:function(){this._renderer.RenderMultiple(this.get_Tracks())}},AlphaTab.Platform.JavaScript.Html5Canvas=function(){this._canvas=null,this._context=null,this._color=null,this._font=null,this._Resources=null},AlphaTab.Platform.JavaScript.Html5Canvas.prototype={get_Resources:function(){return this._Resources},set_Resources:function(value){this._Resources=value},BeginRender:function(width,height){this._canvas=document.createElement("canvas"),this._canvas.width=0|width,this._canvas.height=0|height,this._canvas.style.width=width+"px",this._canvas.style.height=height+"px",this._context=this._canvas.getContext("2d"),this._context.textBaseline="top"},EndRender:function(){var result=this._canvas;return this._canvas=null,result},get_Color:function(){return this._color},set_Color:function(value){this._color=value,this._context.strokeStyle=value.ToRgbaString(),this._context.fillStyle=value.ToRgbaString()},get_LineWidth:function(){return this._context.lineWidth},set_LineWidth:function(value){this._context.lineWidth=value},FillRect:function(x,y,w,h){this._context.fillRect(x-.5,y-.5,w,h)},StrokeRect:function(x,y,w,h){this._context.strokeRect(x-.5,y-.5,w,h)},BeginPath:function(){this._context.beginPath()},ClosePath:function(){this._context.closePath()},MoveTo:function(x,y){this._context.moveTo(x-.5,y-.5)},LineTo:function(x,y){this._context.lineTo(x-.5,y-.5)},QuadraticCurveTo:function(cpx,cpy,x,y){this._context.quadraticCurveTo(cpx,cpy,x,y)},BezierCurveTo:function(cp1x,cp1y,cp2x,cp2y,x,y){this._context.bezierCurveTo(cp1x,cp1y,cp2x,cp2y,x,y)},FillCircle:function(x,y,radius){this._context.arc(x,y,radius,0,6.28318530717959,!0),this.Fill()},Fill:function(){this._context.fill()},Stroke:function(){this._context.stroke()},get_Font:function(){return this._font},set_Font:function(value){this._font=value,this._context.font=value.ToCssString()},get_TextAlign:function(){switch(this._context.textAlign){case"left":return AlphaTab.Platform.Model.TextAlign.Left;case"center":return AlphaTab.Platform.Model.TextAlign.Center;case"right":return AlphaTab.Platform.Model.TextAlign.Right;default:return AlphaTab.Platform.Model.TextAlign.Left}},set_TextAlign:function(value){switch(value){case AlphaTab.Platform.Model.TextAlign.Left:this._context.textAlign="left";break;case AlphaTab.Platform.Model.TextAlign.Center:this._context.textAlign="center";break;case AlphaTab.Platform.Model.TextAlign.Right:this._context.textAlign="right"}},get_TextBaseline:function(){switch(this._context.textBaseline){case"top":return AlphaTab.Platform.Model.TextBaseline.Top;case"middel":return AlphaTab.Platform.Model.TextBaseline.Middle;case"bottom":return AlphaTab.Platform.Model.TextBaseline.Bottom;default:return AlphaTab.Platform.Model.TextBaseline.Top}},set_TextBaseline:function(value){switch(value){case AlphaTab.Platform.Model.TextBaseline.Top:this._context.textBaseline="top";break;case AlphaTab.Platform.Model.TextBaseline.Middle:this._context.textBaseline="middle";break;case AlphaTab.Platform.Model.TextBaseline.Bottom:this._context.textBaseline="bottom"}},FillText:function(text,x,y){this._context.fillText(text,x,y)},MeasureText:function(text){return this._context.measureText(text).width},FillMusicFontSymbol:function(x,y,scale,symbol){if(symbol!=AlphaTab.Rendering.Glyphs.MusicFontSymbol.None){var glyph=new AlphaTab.Rendering.Utils.SvgRenderer(AlphaTab.Rendering.Glyphs.MusicFont.SymbolLookup[symbol],scale,scale);glyph.Paint(x,y,this)}}},AlphaTab.Platform.JavaScript.JsApi=function(element,options){AlphaTab.Platform.JavaScript.JsApiBase.call(this,element,options)},AlphaTab.Platform.JavaScript.JsApi.prototype={get_Tracks:function(){for(var tracks=[],$i5=0,$t5=this.TrackIndexes,$l5=$t5.length,track=$t5[$i5];$l5>$i5;$i5++,track=$t5[$i5])track>=0&&track<this.Score.Tracks.length&&tracks.push(this.Score.Tracks[track]);return 0==tracks.length&&this.Score.Tracks.length>0&&tracks.push(this.Score.Tracks[0]),tracks.slice(0)},CreateScoreRenderer:function(settings,rawSettings,canvasElement){return new AlphaTab.Rendering.ScoreRenderer(settings,canvasElement)},Load:function(data){try{data instanceof ArrayBuffer?this.ScoreLoaded(AlphaTab.Importer.ScoreLoader.LoadScoreFromBytes(new Uint8Array(data))):data instanceof Uint8Array?this.ScoreLoaded(AlphaTab.Importer.ScoreLoader.LoadScoreFromBytes(data)):"string"==typeof data&&AlphaTab.Importer.ScoreLoader.LoadScoreAsync(data,$CreateDelegate(this,this.ScoreLoaded),$CreateAnonymousDelegate(this,function(e){console.error(e)}))}catch(e){console.error(e)}},Tex:function(contents){try{var parser=new AlphaTab.Importer.AlphaTexImporter,data=AlphaTab.IO.ByteBuffer.FromBuffer(AlphaTab.Platform.Std.StringToByteArray(contents));parser.Init(data),this.ScoreLoaded(parser.ReadScore())}catch(e){console.error(e)}},Render:function(){null!=this.Renderer&&this.Renderer.RenderMultiple(this.get_Tracks())}},$Inherit(AlphaTab.Platform.JavaScript.JsApi,AlphaTab.Platform.JavaScript.JsApiBase),AlphaTab.Platform.JavaScript.JsFileLoader=function(){},AlphaTab.Platform.JavaScript.JsFileLoader.prototype={LoadBinary:function(path){var ie=AlphaTab.Platform.JavaScript.JsFileLoader.GetIEVersion();if(ie>=0&&9>=ie){for(var vbArr=VbAjaxLoader("GET",path),fileContents=vbArr.toArray(),data=new Array,i=0;i<fileContents.length-1;)data.push(String.fromCharCode(fileContents[i])),i++;var reader=AlphaTab.Platform.JavaScript.JsFileLoader.GetBytesFromString(data.join(""));return reader}var xhr=new XMLHttpRequest;if(xhr.open("GET",path,!1),xhr.responseType="arraybuffer",xhr.send(),200==xhr.status){var reader=new Uint8Array(xhr.response);return reader}if(0==xhr.status)throw $CreateException(new AlphaTab.IO.FileLoadException("You are offline!!\n Please Check Your Network."),new Error);if(404==xhr.status)throw $CreateException(new AlphaTab.IO.FileLoadException("Requested URL not found."),new Error);if(500==xhr.status)throw $CreateException(new AlphaTab.IO.FileLoadException("Internel Server Error."),new Error);if("parsererror"==xhr.statusText)throw $CreateException(new AlphaTab.IO.FileLoadException("Error.\nParsing JSON Request failed."),new Error);if("timeout"==xhr.statusText)throw $CreateException(new AlphaTab.IO.FileLoadException("Request Time out."),new Error);throw $CreateException(new AlphaTab.IO.FileLoadException("Unknow Error: "+xhr.responseText),new Error)},LoadBinaryAsync:function(path,success,error){var ie=AlphaTab.Platform.JavaScript.JsFileLoader.GetIEVersion();if(ie>=0&&9>=ie){for(var vbArr=VbAjaxLoader("GET",path),fileContents=vbArr.toArray(),data=new Array,i=0;i<fileContents.length-1;)data.push(fileContents[i]),i++;var reader=AlphaTab.Platform.JavaScript.JsFileLoader.GetBytesFromString(data.join(""));success(reader)}else{var xhr=new XMLHttpRequest;xhr.onreadystatechange=$CreateAnonymousDelegate(this,function(){if(4==xhr.readyState)if(200==xhr.status){var reader=new Uint8Array(xhr.response);success(reader)}else error(0==xhr.status?new AlphaTab.IO.FileLoadException("You are offline!!\n Please Check Your Network."):404==xhr.status?new AlphaTab.IO.FileLoadException("Requested URL not found."):500==xhr.status?new AlphaTab.IO.FileLoadException("Internel Server Error."):"parsererror"==xhr.statusText?new AlphaTab.IO.FileLoadException("Error.\nParsing JSON Request failed."):"timeout"==xhr.statusText?new AlphaTab.IO.FileLoadException("Request Time out."):new AlphaTab.IO.FileLoadException("Unknow Error: "+xhr.responseText))}),xhr.open("GET",path,!0),xhr.responseType="arraybuffer",xhr.send()}}},AlphaTab.Platform.JavaScript.JsFileLoader.GetIEVersion=function(){var rv=-1,appName=navigator.appName,agent=navigator.userAgent;if("Microsoft Internet Explorer"==appName){var r=new RegExp("MSIE ([0-9]{1,}[\\.0-9]{0,})"),m=r.exec(agent);null!=m&&(rv=AlphaTab.Platform.Std.ParseFloat(m[1]))}return rv},AlphaTab.Platform.JavaScript.JsFileLoader.GetBytesFromString=function(s){for(var b=new Uint8Array(s.length),i=0;i<s.length;i++)b[i]=s.charCodeAt(i);return b},AlphaTab.Platform.JavaScript.WorkerScoreRenderer=function(workerApi,rawSettings){this._workerApi=null,this._atRoot=null,this._worker=null,this.PreRender=null,this.PartialRenderFinished=null,this.RenderFinished=null,this.PostRenderFinished=null,this._workerApi=workerApi;var atRoot=rawSettings.atRoot;""!=atRoot&&atRoot.lastIndexOf("/")!=atRoot.length-"/".length&&(atRoot+="/"),this._atRoot=atRoot,this._worker=new Worker(atRoot+"AlphaTab.worker.js");var root=new Array;root.push(window.location.protocol),root.push("//"),root.push(window.location.hostname),window.location.port&&(root.push(":"),root.push(window.location.port)),root.push(this._atRoot),this._worker.postMessage({cmd:"initialize",root:root.join(""),settings:rawSettings}),this._worker.addEventListener("message",$CreateDelegate(this,this.HandleWorkerMessage),!1)},AlphaTab.Platform.JavaScript.WorkerScoreRenderer.prototype={get_IsSvg:function(){return!0},Load:function(data,trackIndexes){this._worker.postMessage({cmd:"load",data:data,indexes:trackIndexes})},HandleWorkerMessage:function(e){var data=e.data,cmd=data.cmd;switch(cmd){case"preRender":this.OnPreRender();break;case"partialRenderFinished":this.OnPartialRenderFinished(data.result);break;case"renderFinished":this.OnRenderFinished(data.result);break;case"postRenderFinished":this.OnPostRenderFinished();break;case"error":console.error(data.exception);break;case"loaded":var score=data.score;if(score){var jsonConverter=new AlphaTab.Model.JsonConverter;score=jsonConverter.JsObjectToScore(score)}this._workerApi.TriggerEvent("loaded",score)}},RenderMultiple:function(trackIndexes){this._worker.postMessage({cmd:"renderMultiple",data:trackIndexes})},add_PreRender:function(value){this.PreRender=$CombineDelegates(this.PreRender,value)},remove_PreRender:function(value){this.PreRender=$RemoveDelegate(this.PreRender,value)},OnPreRender:function(){var handler=this.PreRender;null!=handler&&handler()},add_PartialRenderFinished:function(value){this.PartialRenderFinished=$CombineDelegates(this.PartialRenderFinished,value)},remove_PartialRenderFinished:function(value){this.PartialRenderFinished=$RemoveDelegate(this.PartialRenderFinished,value)},OnPartialRenderFinished:function(obj){var handler=this.PartialRenderFinished;null!=handler&&handler(obj)},add_RenderFinished:function(value){this.RenderFinished=$CombineDelegates(this.RenderFinished,value)},remove_RenderFinished:function(value){this.RenderFinished=$RemoveDelegate(this.RenderFinished,value)},OnRenderFinished:function(obj){var handler=this.RenderFinished;null!=handler&&handler(obj)},add_PostRenderFinished:function(value){this.PostRenderFinished=$CombineDelegates(this.PostRenderFinished,value)},remove_PostRenderFinished:function(value){this.PostRenderFinished=$RemoveDelegate(this.PostRenderFinished,value)},OnPostRenderFinished:function(){var handler=this.PostRenderFinished;null!=handler&&handler()},Tex:function(contents){this._worker.postMessage({cmd:"tex",data:contents})}},AlphaTab.Platform.Std=function(){},$StaticConstructor(function(){AlphaTab.Platform.Std._parseXml=null}),AlphaTab.Platform.Std.ParseFloat=function(s){return parseFloat(s)},AlphaTab.Platform.Std.ParseInt=function(s){return parseInt(s)},AlphaTab.Platform.Std.CloneArray=function(){return new Int32Array(0)},AlphaTab.Platform.Std.BlockCopy=function(){},AlphaTab.Platform.Std.IsNullOrWhiteSpace=function(s){return null==s||0==s.trim().length},AlphaTab.Platform.Std.StringFromCharCode=function(){return""},AlphaTab.Platform.Std.Foreach=function(T,e,c){for(var t in e)c(e[t])},AlphaTab.Platform.Std.LoadXml=function(xml){if(null==AlphaTab.Platform.Std._parseXml){var parseXml=null;if("undefined"!=typeof window.DOMParser)parseXml=function(xmlStr){return(new window.DOMParser).parseFromString(xmlStr,"text/xml")};else{if("undefined"==typeof window.ActiveXObject||!new window.ActiveXObject("Microsoft.XMLDOM"))throw new Error("No XML parser found");parseXml=function(xmlStr){var xmlDoc=new window.ActiveXObject("Microsoft.XMLDOM");return xmlDoc.async="false",xmlDoc.loadXML(xmlStr),xmlDoc}}AlphaTab.Platform.Std._parseXml=parseXml}return new AlphaTab.Xml.XmlDocumentWrapper(AlphaTab.Platform.Std._parseXml(xml));

},AlphaTab.Platform.Std.ReadSignedByte=function(readable){var n=readable.ReadByte();return n>=128?n-256:n},AlphaTab.Platform.Std.ToString=function(data){for(var s=new Array,i=0;i<data.length;){var c=data[i++];if(128>c){if(0==c)break;s.push(String.fromCharCode(c))}else if(224>c)s.push(String.fromCharCode((63&c)<<6|127&data[i++]));else if(240>c)s.push(String.fromCharCode((31&c)<<12|(127&data[i++])<<6|127&data[i++]));else{var u=(15&c)<<18|(127&data[i++])<<12|(127&data[i++])<<6|127&data[i++];s.push(String.fromCharCode((u>>18)+55232)),s.push(String.fromCharCode(1023&u|56320))}}return s.join("")},AlphaTab.Platform.Std.StringToByteArray=function(contents){for(var byteArray=new Uint8Array(contents.length),i=0;i<contents.length;i++)byteArray[i]=contents.charCodeAt(i);return byteArray},AlphaTab.Platform.Std.S4=function(){var num=Math.floor(65536*(1+Math.random()));return num.toString(16).substring(1)},AlphaTab.Platform.Std.NewGuid=function(){return AlphaTab.Platform.Std.S4()+AlphaTab.Platform.Std.S4()+"-"+AlphaTab.Platform.Std.S4()+"-"+AlphaTab.Platform.Std.S4()+"-"+AlphaTab.Platform.Std.S4()+"-"+AlphaTab.Platform.Std.S4()+AlphaTab.Platform.Std.S4()+AlphaTab.Platform.Std.S4()},AlphaTab.Platform.Std.IsException=function(){return!1},AlphaTab.Platform.Std.IsStringNumber=function(s,allowSign){if(0==s.length)return!1;var c=s.charCodeAt(0);return AlphaTab.Platform.Std.IsCharNumber(c,allowSign)},AlphaTab.Platform.Std.IsCharNumber=function(c,allowSign){return allowSign&&45==c||c>=48&&57>=c},AlphaTab.Platform.Std.IsWhiteSpace=function(c){return 32==c||11==c||13==c||10==c},AlphaTab.Platform.Std.ToHexString=function(n){var s="",hexChars="0123456789ABCDEF";do s=String.fromCharCode(hexChars.charCodeAt(15&n))+s,n>>=4;while(n>0);return s},AlphaTab.Platform.Std.GetNodeValue=function(n){if(n.get_NodeType()==AlphaTab.Xml.XmlNodeType.Element||n.get_NodeType()==AlphaTab.Xml.XmlNodeType.Document){var txt=new Array;return AlphaTab.Platform.Std.IterateChildren(n,function(c){txt.push(AlphaTab.Platform.Std.GetNodeValue(c))}),txt.join("").trim()}return n.get_Value()},AlphaTab.Platform.Std.IterateChildren=function(n,action){for(var i=0;i<n.get_ChildNodes().get_Count();i++)action(n.get_ChildNodes().Get(i))},AlphaTab.Settings=function(){this.Scale=0,this.Width=0,this.Height=0,this.Engine=null,this.Layout=null,this.Staves=null},AlphaTab.Settings.FromJson=function(json){if(json instanceof AlphaTab.Settings)return json;var settings=AlphaTab.Settings.get_Defaults();if(!json)return settings;if("scale"in json&&(settings.Scale=json.scale),"width"in json&&(settings.Width=json.width),"height"in json&&(settings.Height=json.height),"engine"in json&&(settings.Engine=json.engine),"layout"in json)if("string"==typeof json.layout)settings.Layout.Mode=json.layout;else if(json.layout.mode&&(settings.Layout.Mode=json.layout.mode),json.layout.additionalSettings)for(var keys=Object.keys(json.layout.additionalSettings),$i6=0,$l6=keys.length,key=keys[$i6];$l6>$i6;$i6++,key=keys[$i6])settings.Layout.AdditionalSettings[key]=json.layout.additionalSettings[key];if("staves"in json){settings.Staves=[];for(var keys=Object.keys(json.staves),$i7=0,$l7=keys.length,key=keys[$i7];$l7>$i7;$i7++,key=keys[$i7]){var val=json.staves[key];if("string"==typeof val)settings.Staves.push(new AlphaTab.StaveSettings(val));else if(val.id){var staveSettings=new AlphaTab.StaveSettings(val.id);if(val.additionalSettings)for(var keys2=Object.keys(val.additionalSettings),$i8=0,$l8=keys2.length,key2=keys2[$i8];$l8>$i8;$i8++,key2=keys2[$i8])staveSettings.AdditionalSettings[key2]=val.additionalSettings[key2];settings.Staves.push(staveSettings)}}}return settings},AlphaTab.Settings.get_Defaults=function(){var settings=new AlphaTab.Settings;return settings.Scale=1,settings.Width=600,settings.Height=200,settings.Engine="default",settings.Layout=AlphaTab.LayoutSettings.get_Defaults(),settings.Staves=[],settings.Staves.push(new AlphaTab.StaveSettings("marker")),settings.Staves.push(new AlphaTab.StaveSettings("tempo")),settings.Staves.push(new AlphaTab.StaveSettings("text")),settings.Staves.push(new AlphaTab.StaveSettings("chords")),settings.Staves.push(new AlphaTab.StaveSettings("trill")),settings.Staves.push(new AlphaTab.StaveSettings("beat-vibrato")),settings.Staves.push(new AlphaTab.StaveSettings("note-vibrato")),settings.Staves.push(new AlphaTab.StaveSettings("alternate-endings")),settings.Staves.push(new AlphaTab.StaveSettings("score")),settings.Staves.push(new AlphaTab.StaveSettings("crescendo")),settings.Staves.push(new AlphaTab.StaveSettings("dynamics")),settings.Staves.push(new AlphaTab.StaveSettings("trill")),settings.Staves.push(new AlphaTab.StaveSettings("beat-vibrato")),settings.Staves.push(new AlphaTab.StaveSettings("note-vibrato")),settings.Staves.push(new AlphaTab.StaveSettings("tap")),settings.Staves.push(new AlphaTab.StaveSettings("fade-in")),settings.Staves.push(new AlphaTab.StaveSettings("let-ring")),settings.Staves.push(new AlphaTab.StaveSettings("palm-mute")),settings.Staves.push(new AlphaTab.StaveSettings("tab")),settings.Staves.push(new AlphaTab.StaveSettings("pick-stroke")),settings},AlphaTab.Xml=AlphaTab.Xml||{},AlphaTab.Xml.XmlAttributeCollectionWrapper=function(attributes){this._attributes=null,this._attributes=attributes},AlphaTab.Xml.XmlAttributeCollectionWrapper.prototype={Get:function(key){return new AlphaTab.Xml.XmlNodeWrapper(this._attributes.getNamedItem(key))}},AlphaTab.Xml.XmlDocumentWrapper=function(document){this._document=null,this._document=document},AlphaTab.Xml.XmlDocumentWrapper.prototype={get_DocumentElement:function(){return new AlphaTab.Xml.XmlNodeWrapper(this._document.documentElement)}},AlphaTab.Xml.XmlNodeCollectionWrapper=function(xmlNodeList){this._xmlNodeList=null,this._xmlNodeList=xmlNodeList},AlphaTab.Xml.XmlNodeCollectionWrapper.prototype={get_Count:function(){return this._xmlNodeList.length},Get:function(index){return new AlphaTab.Xml.XmlNodeWrapper(this._xmlNodeList[index])}},AlphaTab.Xml.XmlNodeWrapper=function(node){this._node=null,this._node=node},AlphaTab.Xml.XmlNodeWrapper.prototype={get_NodeType:function(){return this._node.nodeType},get_LocalName:function(){return this._node.localName},get_Value:function(){return this._node.nodeValue},get_ChildNodes:function(){return new AlphaTab.Xml.XmlNodeCollectionWrapper(this._node.childNodes)},get_FirstChild:function(){return new AlphaTab.Xml.XmlNodeWrapper(this._node.firstChild)},get_Attributes:function(){return new AlphaTab.Xml.XmlAttributeCollectionWrapper(this._node.attributes)},GetAttribute:function(name){return this._node.getAttribute(name)},GetElementsByTagName:function(nodeName){return new AlphaTab.Xml.XmlNodeCollectionWrapper(this._node.getElementsByTagName(nodeName))}},AlphaTab.Audio=AlphaTab.Audio||{},AlphaTab.Audio.GeneralMidi=function(){},$StaticConstructor(function(){AlphaTab.Audio.GeneralMidi._values=null}),AlphaTab.Audio.GeneralMidi.GetValue=function(name){return null==AlphaTab.Audio.GeneralMidi._values&&(AlphaTab.Audio.GeneralMidi._values={},AlphaTab.Audio.GeneralMidi._values.acousticgrandpiano=0,AlphaTab.Audio.GeneralMidi._values.brightacousticpiano=1,AlphaTab.Audio.GeneralMidi._values.electricgrandpiano=2,AlphaTab.Audio.GeneralMidi._values.honkytonkpiano=3,AlphaTab.Audio.GeneralMidi._values.electricpiano1=4,AlphaTab.Audio.GeneralMidi._values.electricpiano2=5,AlphaTab.Audio.GeneralMidi._values.harpsichord=6,AlphaTab.Audio.GeneralMidi._values.clavinet=7,AlphaTab.Audio.GeneralMidi._values.celesta=8,AlphaTab.Audio.GeneralMidi._values.glockenspiel=9,AlphaTab.Audio.GeneralMidi._values.musicbox=10,AlphaTab.Audio.GeneralMidi._values.vibraphone=11,AlphaTab.Audio.GeneralMidi._values.marimba=12,AlphaTab.Audio.GeneralMidi._values.xylophone=13,AlphaTab.Audio.GeneralMidi._values.tubularbells=14,AlphaTab.Audio.GeneralMidi._values.dulcimer=15,AlphaTab.Audio.GeneralMidi._values.drawbarorgan=16,AlphaTab.Audio.GeneralMidi._values.percussiveorgan=17,AlphaTab.Audio.GeneralMidi._values.rockorgan=18,AlphaTab.Audio.GeneralMidi._values.churchorgan=19,AlphaTab.Audio.GeneralMidi._values.reedorgan=20,AlphaTab.Audio.GeneralMidi._values.accordion=21,AlphaTab.Audio.GeneralMidi._values.harmonica=22,AlphaTab.Audio.GeneralMidi._values.tangoaccordion=23,AlphaTab.Audio.GeneralMidi._values.acousticguitarnylon=24,AlphaTab.Audio.GeneralMidi._values.acousticguitarsteel=25,AlphaTab.Audio.GeneralMidi._values.electricguitarjazz=26,AlphaTab.Audio.GeneralMidi._values.electricguitarclean=27,AlphaTab.Audio.GeneralMidi._values.electricguitarmuted=28,AlphaTab.Audio.GeneralMidi._values.overdrivenguitar=29,AlphaTab.Audio.GeneralMidi._values.distortionguitar=30,AlphaTab.Audio.GeneralMidi._values.guitarharmonics=31,AlphaTab.Audio.GeneralMidi._values.acousticbass=32,AlphaTab.Audio.GeneralMidi._values.electricbassfinger=33,AlphaTab.Audio.GeneralMidi._values.electricbasspick=34,AlphaTab.Audio.GeneralMidi._values.fretlessbass=35,AlphaTab.Audio.GeneralMidi._values.slapbass1=36,AlphaTab.Audio.GeneralMidi._values.slapbass2=37,AlphaTab.Audio.GeneralMidi._values.synthbass1=38,AlphaTab.Audio.GeneralMidi._values.synthbass2=39,AlphaTab.Audio.GeneralMidi._values.violin=40,AlphaTab.Audio.GeneralMidi._values.viola=41,AlphaTab.Audio.GeneralMidi._values.cello=42,AlphaTab.Audio.GeneralMidi._values.contrabass=43,AlphaTab.Audio.GeneralMidi._values.tremolostrings=44,AlphaTab.Audio.GeneralMidi._values.pizzicatostrings=45,AlphaTab.Audio.GeneralMidi._values.orchestralharp=46,AlphaTab.Audio.GeneralMidi._values.timpani=47,AlphaTab.Audio.GeneralMidi._values.stringensemble1=48,AlphaTab.Audio.GeneralMidi._values.stringensemble2=49,AlphaTab.Audio.GeneralMidi._values.synthstrings1=50,AlphaTab.Audio.GeneralMidi._values.synthstrings2=51,AlphaTab.Audio.GeneralMidi._values.choiraahs=52,AlphaTab.Audio.GeneralMidi._values.voiceoohs=53,AlphaTab.Audio.GeneralMidi._values.synthvoice=54,AlphaTab.Audio.GeneralMidi._values.orchestrahit=55,AlphaTab.Audio.GeneralMidi._values.trumpet=56,AlphaTab.Audio.GeneralMidi._values.trombone=57,AlphaTab.Audio.GeneralMidi._values.tuba=58,AlphaTab.Audio.GeneralMidi._values.mutedtrumpet=59,AlphaTab.Audio.GeneralMidi._values.frenchhorn=60,AlphaTab.Audio.GeneralMidi._values.brasssection=61,AlphaTab.Audio.GeneralMidi._values.synthbrass1=62,AlphaTab.Audio.GeneralMidi._values.synthbrass2=63,AlphaTab.Audio.GeneralMidi._values.sopranosax=64,AlphaTab.Audio.GeneralMidi._values.altosax=65,AlphaTab.Audio.GeneralMidi._values.tenorsax=66,AlphaTab.Audio.GeneralMidi._values.baritonesax=67,AlphaTab.Audio.GeneralMidi._values.oboe=68,AlphaTab.Audio.GeneralMidi._values.englishhorn=69,AlphaTab.Audio.GeneralMidi._values.bassoon=70,AlphaTab.Audio.GeneralMidi._values.clarinet=71,AlphaTab.Audio.GeneralMidi._values.piccolo=72,AlphaTab.Audio.GeneralMidi._values.flute=73,AlphaTab.Audio.GeneralMidi._values.recorder=74,AlphaTab.Audio.GeneralMidi._values.panflute=75,AlphaTab.Audio.GeneralMidi._values.blownbottle=76,AlphaTab.Audio.GeneralMidi._values.shakuhachi=77,AlphaTab.Audio.GeneralMidi._values.whistle=78,AlphaTab.Audio.GeneralMidi._values.ocarina=79,AlphaTab.Audio.GeneralMidi._values.lead1square=80,AlphaTab.Audio.GeneralMidi._values.lead2sawtooth=81,AlphaTab.Audio.GeneralMidi._values.lead3calliope=82,AlphaTab.Audio.GeneralMidi._values.lead4chiff=83,AlphaTab.Audio.GeneralMidi._values.lead5charang=84,AlphaTab.Audio.GeneralMidi._values.lead6voice=85,AlphaTab.Audio.GeneralMidi._values.lead7fifths=86,AlphaTab.Audio.GeneralMidi._values.lead8bassandlead=87,AlphaTab.Audio.GeneralMidi._values.pad1newage=88,AlphaTab.Audio.GeneralMidi._values.pad2warm=89,AlphaTab.Audio.GeneralMidi._values.pad3polysynth=90,AlphaTab.Audio.GeneralMidi._values.pad4choir=91,AlphaTab.Audio.GeneralMidi._values.pad5bowed=92,AlphaTab.Audio.GeneralMidi._values.pad6metallic=93,AlphaTab.Audio.GeneralMidi._values.pad7halo=94,AlphaTab.Audio.GeneralMidi._values.pad8sweep=95,AlphaTab.Audio.GeneralMidi._values.fx1rain=96,AlphaTab.Audio.GeneralMidi._values.fx2soundtrack=97,AlphaTab.Audio.GeneralMidi._values.fx3crystal=98,AlphaTab.Audio.GeneralMidi._values.fx4atmosphere=99,AlphaTab.Audio.GeneralMidi._values.fx5brightness=100,AlphaTab.Audio.GeneralMidi._values.fx6goblins=101,AlphaTab.Audio.GeneralMidi._values.fx7echoes=102,AlphaTab.Audio.GeneralMidi._values.fx8scifi=103,AlphaTab.Audio.GeneralMidi._values.sitar=104,AlphaTab.Audio.GeneralMidi._values.banjo=105,AlphaTab.Audio.GeneralMidi._values.shamisen=106,AlphaTab.Audio.GeneralMidi._values.koto=107,AlphaTab.Audio.GeneralMidi._values.kalimba=108,AlphaTab.Audio.GeneralMidi._values.bagpipe=109,AlphaTab.Audio.GeneralMidi._values.fiddle=110,AlphaTab.Audio.GeneralMidi._values.shanai=111,AlphaTab.Audio.GeneralMidi._values.tinklebell=112,AlphaTab.Audio.GeneralMidi._values.agogo=113,AlphaTab.Audio.GeneralMidi._values.steeldrums=114,AlphaTab.Audio.GeneralMidi._values.woodblock=115,AlphaTab.Audio.GeneralMidi._values.taikodrum=116,AlphaTab.Audio.GeneralMidi._values.melodictom=117,AlphaTab.Audio.GeneralMidi._values.synthdrum=118,AlphaTab.Audio.GeneralMidi._values.reversecymbal=119,AlphaTab.Audio.GeneralMidi._values.guitarfretnoise=120,AlphaTab.Audio.GeneralMidi._values.breathnoise=121,AlphaTab.Audio.GeneralMidi._values.seashore=122,AlphaTab.Audio.GeneralMidi._values.birdtweet=123,AlphaTab.Audio.GeneralMidi._values.telephonering=124,AlphaTab.Audio.GeneralMidi._values.helicopter=125,AlphaTab.Audio.GeneralMidi._values.applause=126,AlphaTab.Audio.GeneralMidi._values.gunshot=127),name=name.toLowerCase().replace(" ",""),AlphaTab.Audio.GeneralMidi._values.hasOwnProperty(name)?AlphaTab.Audio.GeneralMidi._values[name]:0},AlphaTab.Audio.Generator=AlphaTab.Audio.Generator||{},AlphaTab.Audio.Generator.MidiFileGenerator=function(score,handler,generateMetronome){this._score=null,this._handler=null,this._currentTempo=0,this.GenerateMetronome=!1,this._score=score,this._currentTempo=this._score.Tempo,this._handler=handler,this.GenerateMetronome=generateMetronome},AlphaTab.Audio.Generator.MidiFileGenerator.prototype={Generate:function(){for(var i=0,j=this._score.Tracks.length;j>i;i++)this.GenerateTrack(this._score.Tracks[i]);for(var controller=new AlphaTab.Audio.Generator.MidiPlaybackController(this._score),previousMasterBar=null;!controller.get_Finished();){var index=controller.Index,bar=this._score.MasterBars[index],currentTick=controller.CurrentTick;if(controller.ProcessCurrent(),controller.ShouldPlay){this.GenerateMasterBar(bar,previousMasterBar,currentTick);for(var i=0,j=this._score.Tracks.length;j>i;i++)this.GenerateBar(this._score.Tracks[i].Bars[index],currentTick)}controller.MoveNext(),previousMasterBar=bar}},GenerateTrack:function(track){this.GenerateChannel(track,track.PlaybackInfo.PrimaryChannel,track.PlaybackInfo),track.PlaybackInfo.PrimaryChannel!=track.PlaybackInfo.SecondaryChannel&&this.GenerateChannel(track,track.PlaybackInfo.SecondaryChannel,track.PlaybackInfo)},GenerateChannel:function(track,channel,playbackInfo){var volume=AlphaTab.Audio.Generator.MidiFileGenerator.ToChannelShort(playbackInfo.Volume),balance=AlphaTab.Audio.Generator.MidiFileGenerator.ToChannelShort(playbackInfo.Balance);this._handler.AddControlChange(track.Index,0,channel,7,volume),this._handler.AddControlChange(track.Index,0,channel,10,balance),this._handler.AddControlChange(track.Index,0,channel,11,127),this._handler.AddProgramChange(track.Index,0,channel,playbackInfo.Program)},GenerateMasterBar:function(masterBar,previousMasterBar,currentTick){if((null==previousMasterBar||previousMasterBar.TimeSignatureDenominator!=masterBar.TimeSignatureDenominator||previousMasterBar.TimeSignatureNumerator!=masterBar.TimeSignatureNumerator)&&this._handler.AddTimeSignature(currentTick,masterBar.TimeSignatureNumerator,masterBar.TimeSignatureDenominator),null==previousMasterBar?(this._handler.AddTempo(currentTick,masterBar.Score.Tempo),this._currentTempo=masterBar.Score.Tempo):null!=masterBar.TempoAutomation&&(this._handler.AddTempo(currentTick,0|masterBar.TempoAutomation.Value),this._currentTempo=0|masterBar.TempoAutomation.Value),this.GenerateMetronome)for(var start=currentTick,length=AlphaTab.Audio.MidiUtils.ValueToTicks(masterBar.TimeSignatureDenominator),i=0;i<masterBar.TimeSignatureNumerator;i++)this._handler.AddMetronome(start,length),start+=length},GenerateBar:function(bar,barStartTick){for(var i=0,j=bar.Voices.length;j>i;i++)this.GenerateVoice(bar.Voices[i],barStartTick)},GenerateVoice:function(voice,barStartTick){for(var i=0,j=voice.Beats.length;j>i;i++)this.GenerateBeat(voice.Beats[i],barStartTick)},GenerateBeat:function(beat,barStartTick){for(var beatStart=beat.Start,duration=beat.CalculateDuration(),track=beat.Voice.Bar.Track,i=0,j=beat.Automations.length;j>i;i++)this.GenerateAutomation(beat,beat.Automations[i],barStartTick);if(beat.get_IsRest())this._handler.AddRest(track.Index,barStartTick+beatStart,track.PlaybackInfo.PrimaryChannel);else for(var brushInfo=this.GetBrushInfo(beat),i=0,j=beat.Notes.length;j>i;i++){var n=beat.Notes[i];n.IsTieDestination||this.GenerateNote(n,barStartTick+beatStart,duration,brushInfo)}},GenerateNote:function(note,beatStart,beatDuration,brushInfo){var track=note.Beat.Voice.Bar.Track,noteKey=track.Capo+note.get_RealValue(),noteStart=beatStart+brushInfo[note.String-1],noteDuration=this.GetNoteDuration(note,beatDuration)-brushInfo[note.String-1],dynamicValue=this.GetDynamicValue(note);return note.Beat.FadeIn&&this.GenerateFadeIn(note,noteStart,noteDuration,noteKey,dynamicValue),note.get_IsTrill()&&!track.IsPercussion?void this.GenerateTrill(note,noteStart,noteDuration,noteKey,dynamicValue):note.Beat.get_IsTremolo()?void this.GenerateTremoloPicking(note,noteStart,noteDuration,noteKey,dynamicValue):(note.get_HasBend()?this.GenerateBend(note,noteStart,noteDuration,noteKey,dynamicValue):note.Beat.get_HasWhammyBar()?this.GenerateWhammyBar(note,noteStart,noteDuration,noteKey,dynamicValue):note.SlideType!=AlphaTab.Model.SlideType.None?this.GenerateSlide(note,noteStart,noteDuration,noteKey,dynamicValue):note.Vibrato!=AlphaTab.Model.VibratoType.None&&this.GenerateVibrato(note,noteStart,noteDuration,noteKey,dynamicValue),note.HarmonicType!=AlphaTab.Model.HarmonicType.None&&this.GenerateHarmonic(note,noteStart,noteDuration,noteKey,dynamicValue),void this._handler.AddNote(track.Index,noteStart,noteDuration,noteKey,dynamicValue,track.PlaybackInfo.PrimaryChannel))},GetNoteDuration:function(note,beatDuration){return this.ApplyDurationEffects(note,beatDuration)},ApplyDurationEffects:function(note,duration){return note.IsDead?this.ApplyStaticDuration(30,duration):note.IsPalmMute?this.ApplyStaticDuration(80,duration):note.IsStaccato?duration/2|0:duration},ApplyStaticDuration:function(duration,maximum){var value=this._currentTempo*duration/60|0;return Math.min(value,maximum)},GetDynamicValue:function(note){var dynamicValue=note.Dynamic;switch(note.Beat.Voice.Bar.Track.IsPercussion||null==note.HammerPullOrigin||dynamicValue--,note.IsGhost&&dynamicValue--,note.Accentuated){case AlphaTab.Model.AccentuationType.Normal:dynamicValue++;break;case AlphaTab.Model.AccentuationType.Heavy:dynamicValue+=2}return dynamicValue},GenerateFadeIn:function(){},GenerateHarmonic:function(){},GenerateVibrato:function(){},GenerateSlide:function(){},GenerateWhammyBar:function(){},GenerateBend:function(){},GenerateTrill:function(note,noteStart,noteDuration,noteKey,dynamicValue){for(var track=note.Beat.Voice.Bar.Track,trillKey=track.Capo+note.get_StringTuning()+note.get_TrillFret(),trillLength=AlphaTab.Audio.MidiUtils.ToTicks(note.TrillSpeed),realKey=!0,tick=noteStart;noteStart+noteDuration>tick+10;)tick+trillLength>=noteStart+noteDuration&&(trillLength=noteStart+noteDuration-tick),this._handler.AddNote(track.Index,tick,trillLength,realKey?trillKey:noteKey,dynamicValue,track.PlaybackInfo.PrimaryChannel),realKey=!realKey,tick+=trillLength},GenerateTremoloPicking:function(note,noteStart,noteDuration,noteKey,dynamicValue){for(var track=note.Beat.Voice.Bar.Track,tpLength=AlphaTab.Audio.MidiUtils.ToTicks(note.Beat.TremoloSpeed),tick=noteStart;noteStart+noteDuration>tick+10;)tick+tpLength>=noteStart+noteDuration&&(tpLength=noteStart+noteDuration-tick),this._handler.AddNote(track.Index,tick,tpLength,noteKey,dynamicValue,track.PlaybackInfo.PrimaryChannel),tick+=tpLength},GetBrushInfo:function(beat){var brushInfo=new Int32Array(beat.Voice.Bar.Track.Tuning.length);if(beat.BrushType!=AlphaTab.Model.BrushType.None){for(var stringUsed=0,i=0,j=beat.Notes.length;j>i;i++){var n=beat.Notes[i];n.IsTieDestination||(stringUsed|=1<<n.String-1)}if(beat.Notes.length>0)for(var brushMove=0,brushIncrement=this.GetBrushIncrement(beat),i=0,j=beat.Voice.Bar.Track.Tuning.length;j>i;i++){var index=beat.BrushType==AlphaTab.Model.BrushType.ArpeggioDown||beat.BrushType==AlphaTab.Model.BrushType.BrushDown?i:brushInfo.length-1-i;0!=(stringUsed&1<<index)&&(brushInfo[index]=brushMove,brushMove=brushIncrement)}}return brushInfo},GetBrushIncrement:function(beat){if(0==beat.BrushDuration)return 0;var duration=beat.CalculateDuration();return 0==duration?0:duration/8*(4/beat.BrushDuration)|0},GenerateAutomation:function(beat,automation,startMove){switch(automation.Type){case AlphaTab.Model.AutomationType.Instrument:this._handler.AddProgramChange(beat.Voice.Bar.Track.Index,beat.Start+startMove,beat.Voice.Bar.Track.PlaybackInfo.PrimaryChannel,automation.Value),this._handler.AddProgramChange(beat.Voice.Bar.Track.Index,beat.Start+startMove,beat.Voice.Bar.Track.PlaybackInfo.SecondaryChannel,automation.Value);break;case AlphaTab.Model.AutomationType.Balance:this._handler.AddControlChange(beat.Voice.Bar.Track.Index,beat.Start+startMove,beat.Voice.Bar.Track.PlaybackInfo.PrimaryChannel,10,automation.Value),this._handler.AddControlChange(beat.Voice.Bar.Track.Index,beat.Start+startMove,beat.Voice.Bar.Track.PlaybackInfo.SecondaryChannel,10,automation.Value);break;case AlphaTab.Model.AutomationType.Volume:this._handler.AddControlChange(beat.Voice.Bar.Track.Index,beat.Start+startMove,beat.Voice.Bar.Track.PlaybackInfo.PrimaryChannel,7,automation.Value),this._handler.AddControlChange(beat.Voice.Bar.Track.Index,beat.Start+startMove,beat.Voice.Bar.Track.PlaybackInfo.SecondaryChannel,7,automation.Value)}}},AlphaTab.Audio.Generator.MidiFileGenerator.GenerateMidiFile=function(score,generateMetronome){for(var midiFile=new AlphaTab.Audio.Model.MidiFile,i=0,j=score.Tracks.length;j>i;i++)midiFile.CreateTrack();midiFile.InfoTrack=0;var handler=new AlphaTab.Audio.Generator.MidiFileHandler(midiFile),generator=new AlphaTab.Audio.Generator.MidiFileGenerator(score,handler,generateMetronome);return generator.Generate(),midiFile},AlphaTab.Audio.Generator.MidiFileGenerator.ToChannelShort=function(data){var value=Math.max(-32768,Math.min(32767,8*data-1));return Math.max(value,-1)+1},AlphaTab.Audio.Generator.MidiFileHandler=function(midiFile){this._midiFile=null,this._metronomeTrack=0,this._midiFile=midiFile,this._metronomeTrack=-1},AlphaTab.Audio.Generator.MidiFileHandler.prototype={AddEvent:function(track,tick,message){this._midiFile.Tracks[track].AddEvent(new AlphaTab.Audio.Model.MidiEvent(tick,message))},MakeCommand:function(command,channel){return 240&command|15&channel},AddTimeSignature:function(tick,timeSignatureNumerator,timeSignatureDenominator){for(var denominatorIndex=0;(timeSignatureDenominator>>=1)>0;)denominatorIndex++;this.AddEvent(this._midiFile.InfoTrack,tick,AlphaTab.Audio.Generator.MidiFileHandler.BuildMetaMessage(88,new Uint8Array([255&timeSignatureNumerator,255&denominatorIndex,48,8])))},AddRest:function(track,tick){this.AddEvent(track,tick,AlphaTab.Audio.Generator.MidiFileHandler.BuildSysExMessage(new Uint8Array([0])))},AddNote:function(track,start,length,key,dynamicValue,channel){var velocity=AlphaTab.Audio.MidiUtils.DynamicToVelocity(dynamicValue);this.AddEvent(track,start,new AlphaTab.Audio.Model.MidiMessage(new Uint8Array([this.MakeCommand(144,channel),AlphaTab.Audio.Generator.MidiFileHandler.FixValue(key),AlphaTab.Audio.Generator.MidiFileHandler.FixValue(velocity)]))),this.AddEvent(track,start+length,new AlphaTab.Audio.Model.MidiMessage(new Uint8Array([this.MakeCommand(128,channel),AlphaTab.Audio.Generator.MidiFileHandler.FixValue(key),AlphaTab.Audio.Generator.MidiFileHandler.FixValue(velocity)])))},AddControlChange:function(track,tick,channel,controller,value){this.AddEvent(track,tick,new AlphaTab.Audio.Model.MidiMessage(new Uint8Array([this.MakeCommand(176,channel),AlphaTab.Audio.Generator.MidiFileHandler.FixValue(controller),AlphaTab.Audio.Generator.MidiFileHandler.FixValue(value)])))},AddProgramChange:function(track,tick,channel,program){this.AddEvent(track,tick,new AlphaTab.Audio.Model.MidiMessage(new Uint8Array([this.MakeCommand(192,channel),AlphaTab.Audio.Generator.MidiFileHandler.FixValue(program)])))},AddTempo:function(tick,tempo){var tempoInUsq=6e7/tempo|0;this.AddEvent(this._midiFile.InfoTrack,tick,AlphaTab.Audio.Generator.MidiFileHandler.BuildMetaMessage(81,new Uint8Array([tempoInUsq>>16&255,tempoInUsq>>8&255,255&tempoInUsq])))},AddBend:function(track,tick,channel,value){this.AddEvent(track,tick,new AlphaTab.Audio.Model.MidiMessage(new Uint8Array([this.MakeCommand(224,channel),0,AlphaTab.Audio.Generator.MidiFileHandler.FixValue(value)])))},AddMetronome:function(start,length){-1==this._metronomeTrack&&(this._midiFile.CreateTrack(),this._metronomeTrack=this._midiFile.Tracks.length-1),this.AddNote(this._metronomeTrack,start,length,37,AlphaTab.Model.DynamicValue.F,9)}},$StaticConstructor(function(){AlphaTab.Audio.Generator.MidiFileHandler.DefaultMetronomeKey=37,AlphaTab.Audio.Generator.MidiFileHandler.DefaultDurationDead=30,AlphaTab.Audio.Generator.MidiFileHandler.DefaultDurationPalmMute=80,AlphaTab.Audio.Generator.MidiFileHandler.RestMessage=0}),AlphaTab.Audio.Generator.MidiFileHandler.FixValue=function(value){return value>127?127:value},AlphaTab.Audio.Generator.MidiFileHandler.BuildMetaMessage=function(metaType,data){var meta=AlphaTab.IO.ByteBuffer.Empty();return meta.WriteByte(255),meta.WriteByte(255&metaType),AlphaTab.Audio.Generator.MidiFileHandler.WriteVarInt(meta,data.length),meta.Write(data,0,data.length),new AlphaTab.Audio.Model.MidiMessage(meta.ToArray())},AlphaTab.Audio.Generator.MidiFileHandler.WriteVarInt=function(data,v){var n=0,array=new Uint8Array(4);do array[n++]=127&v&255,v>>=7;while(v>0);for(;n>0;)n--,data.WriteByte(n>0?255&(128|array[n]):array[n])},AlphaTab.Audio.Generator.MidiFileHandler.BuildSysExMessage=function(data){var sysex=AlphaTab.IO.ByteBuffer.Empty();return sysex.WriteByte(240),AlphaTab.Audio.Generator.MidiFileHandler.WriteVarInt(sysex,data.length+2),sysex.WriteByte(0),sysex.Write(data,0,data.length),sysex.WriteByte(247),new AlphaTab.Audio.Model.MidiMessage(sysex.ToArray())},AlphaTab.Audio.Generator.MidiPlaybackController=function(score){this._score=null,this._currentAlternateEndings=0,this._repeatStartIndex=0,this._repeatNumber=0,this._repeatOpen=!1,this.ShouldPlay=!1,this.Index=0,this.CurrentTick=0,this._score=score,this.ShouldPlay=!0,this.Index=0,this.CurrentTick=0},AlphaTab.Audio.Generator.MidiPlaybackController.prototype={get_Finished:function(){return this.Index>=this._score.MasterBars.length},ProcessCurrent:function(){var masterBar=this._score.MasterBars[this.Index],masterBarAlternateEndings=masterBar.AlternateEndings;masterBar.RepeatGroup.IsClosed||masterBar.RepeatGroup.Openings[masterBar.RepeatGroup.Openings.length-1]!=masterBar||(this._repeatNumber=0,this._repeatOpen=!1),!masterBar.IsRepeatStart&&0!=masterBar.Index||0!=this._repeatNumber?masterBar.IsRepeatStart&&(this.ShouldPlay=!0):(this._repeatStartIndex=this.Index,this._repeatOpen=!0),this._repeatOpen&&masterBarAlternateEndings>0&&(this.ShouldPlay=0==(masterBarAlternateEndings&1<<this._repeatNumber)?!1:!0),this.ShouldPlay&&(this.CurrentTick+=masterBar.CalculateDuration())},MoveNext:function(){var masterBar=this._score.MasterBars[this.Index],masterBarRepeatCount=(masterBar.AlternateEndings,masterBar.RepeatCount-1);this._repeatOpen&&masterBarRepeatCount>0?this._repeatNumber<masterBarRepeatCount?(this.Index=this._repeatStartIndex,this._repeatNumber++):(this._repeatNumber=0,this._repeatOpen=!1,this._currentAlternateEndings=0,this.ShouldPlay=!0,this.Index++):this.Index++}},AlphaTab.Audio.MidiUtils=function(){},$StaticConstructor(function(){AlphaTab.Audio.MidiUtils.QuarterTime=960,AlphaTab.Audio.MidiUtils.PercussionChannel=9,AlphaTab.Audio.MidiUtils.MinVelocity=15,AlphaTab.Audio.MidiUtils.VelocityIncrement=16}),AlphaTab.Audio.MidiUtils.ToTicks=function(duration){return AlphaTab.Audio.MidiUtils.ValueToTicks(duration)},AlphaTab.Audio.MidiUtils.ValueToTicks=function(duration){return 960*(4/duration)|0},AlphaTab.Audio.MidiUtils.ApplyDot=function(ticks,doubleDotted){return doubleDotted?ticks+3*(ticks/4|0):ticks+ticks/2|0},AlphaTab.Audio.MidiUtils.ApplyTuplet=function(ticks,numerator,denominator){return ticks*denominator/numerator|0},AlphaTab.Audio.MidiUtils.DynamicToVelocity=function(dyn){return 15+16*dyn},AlphaTab.Audio.MidiUtils.BuildTickLookup=function(score){for(var lookup=new AlphaTab.Audio.Model.MidiTickLookup,controller=new AlphaTab.Audio.Generator.MidiPlaybackController(score);!controller.get_Finished();){var index=controller.Index,currentTick=controller.CurrentTick;if(controller.ProcessCurrent(),controller.ShouldPlay){var bar=new AlphaTab.Audio.Model.BarTickLookup;bar.Bar=score.MasterBars[index],bar.Start=currentTick,bar.End=bar.Start+bar.Bar.CalculateDuration(),lookup.Bars.push(bar)}controller.MoveNext()}return lookup},AlphaTab.Audio.Model=AlphaTab.Audio.Model||{},AlphaTab.Audio.Model.MidiController={AllNotesOff:123,Balance:10,Chorus:93,DataEntryLsb:38,DataEntryMsb:6,Expression:11,Phaser:95,Reverb:91,RpnLsb:100,RpnMsb:101,Tremolo:92,Volume:7},AlphaTab.Audio.Model.MidiEvent=function(tick,message){this.Track=null,this.Tick=0,this.Message=null,this.NextEvent=null,this.PreviousEvent=null,this.Tick=tick,this.Message=message},AlphaTab.Audio.Model.MidiEvent.prototype={get_DeltaTicks:function(){return null==this.PreviousEvent?0:this.Tick-this.PreviousEvent.Tick},WriteTo:function(s){this.WriteVariableInt(s,this.get_DeltaTicks()),this.Message.WriteTo(s)},WriteVariableInt:function(s,value){var array=new Uint8Array(4),n=0;do array[n++]=127&value&255,value>>=7;while(value>0);for(;n>0;)n--,s.WriteByte(n>0?128|array[n]:array[n])}},AlphaTab.Audio.Model.MidiFile=function(){this.Tracks=null,this.InfoTrack=0,this.Tracks=[]},AlphaTab.Audio.Model.MidiFile.prototype={CreateTrack:function(){var track=new AlphaTab.Audio.Model.MidiTrack;return track.Index=this.Tracks.length,track.File=this,this.Tracks.push(track),track},WriteTo:function(s){var b;b=new Uint8Array([77,84,104,100]),s.Write(b,0,b.length),b=new Uint8Array([0,0,0,6]),s.Write(b,0,b.length),b=new Uint8Array([0,1]),s.Write(b,0,b.length);var v=0|this.Tracks.length;b=new Uint8Array([v>>8&255,255&v]),s.Write(b,0,b.length),v=960,b=new Uint8Array([v>>8&255,255&v]),s.Write(b,0,b.length);for(var i=0,j=this.Tracks.length;j>i;i++)this.Tracks[i].WriteTo(s)}},AlphaTab.Audio.Model.MidiMessage=function(data){this.Event=null,this.Data=null,this.Data=data},AlphaTab.Audio.Model.MidiMessage.prototype={WriteTo:function(s){s.Write(this.Data,0,this.Data.length)}},AlphaTab.Audio.Model.BarTickLookup=function(){this.Start=0,this.End=0,this.Bar=null},AlphaTab.Audio.Model.MidiTickLookup=function(){this._lastBeat=null,this.Bars=null,this.Bars=[]},AlphaTab.Audio.Model.MidiTickLookup.prototype={FindBeat:function(track,tick){if(null!=this._lastBeat&&null!=this._lastBeat.NextBeat&&this._lastBeat.Voice.Bar.Track==track&&tick>=this._lastBeat.get_AbsoluteStart()&&tick<this._lastBeat.NextBeat.get_AbsoluteStart())return this._lastBeat;var lookup=this.FindBar(tick);if(null==lookup)return null;var masterBar=lookup.Bar,bar=track.Bars[masterBar.Index];tick=tick-lookup.Start+masterBar.Start;for(var beat=null,i=0,j=bar.Voices[0].Beats.length;j>i;i++){var b=bar.Voices[0].Beats[i];if(!(null==beat||b.get_AbsoluteStart()<=tick))break;beat=b}return this._lastBeat=beat,this._lastBeat},FindBar:function(tick){for(var bottom=0,top=this.Bars.length-1;top>=bottom;){var middle=(top+bottom)/2|0,bar=this.Bars[middle];if(tick>=bar.Start&&tick<=bar.End)return bar;tick<bar.Start?top=middle-1:bottom=middle+1;

}return null}},AlphaTab.Audio.Model.MidiTrack=function(){this.Index=0,this.File=null,this.FirstEvent=null,this.LastEvent=null},AlphaTab.Audio.Model.MidiTrack.prototype={AddEvent:function(e){if(e.Track=this,null==this.FirstEvent)this.FirstEvent=e,this.LastEvent=e;else if(this.LastEvent.Tick<=e.Tick)this.LastEvent.NextEvent=e,e.PreviousEvent=this.LastEvent,this.LastEvent=e;else if(this.FirstEvent.Tick>e.Tick)e.NextEvent=this.FirstEvent,this.FirstEvent.PreviousEvent=e,this.FirstEvent=e;else{var firstDelta=e.Tick-this.FirstEvent.Tick,lastDelta=this.LastEvent.Tick-e.Tick;if(lastDelta>firstDelta){for(var previous=this.FirstEvent;null!=previous&&null!=previous.NextEvent&&previous.NextEvent.Tick<e.Tick;)previous=previous.NextEvent;if(null==previous)return;var next=previous.NextEvent;previous.NextEvent=e,e.PreviousEvent=previous,e.NextEvent=next,null!=next&&(next.PreviousEvent=e)}else{for(var next=this.LastEvent;null!=next&&null!=next.PreviousEvent&&next.PreviousEvent.Tick>e.Tick;)next=next.PreviousEvent;if(null==next)return;var previous=next.PreviousEvent;next.PreviousEvent=e,e.NextEvent=next,e.PreviousEvent=previous,null!=previous?previous.NextEvent=e:this.FirstEvent=e}}},WriteTo:function(s){for(var trackData=AlphaTab.IO.ByteBuffer.Empty(),current=this.FirstEvent,count=0;null!=current;)current.WriteTo(trackData),current=current.NextEvent,count++;var b=new Uint8Array([77,84,114,107]);s.Write(b,0,b.length);var data=trackData.ToArray(),l=data.length;b=new Uint8Array([l>>24&255,l>>16&255,l>>8&255,l>>0&255]),s.Write(b,0,b.length),s.Write(data,0,data.length)}},AlphaTab.Importer=AlphaTab.Importer||{},AlphaTab.Importer.AlphaTexException=function(position,nonTerm,expected,symbol,symbolData){this.Position=0,this.NonTerm=null,this.Expected=AlphaTab.Importer.AlphaTexSymbols.No,this.Symbol=AlphaTab.Importer.AlphaTexSymbols.No,this.SymbolData=null,this.Position=position,this.NonTerm=nonTerm,this.Expected=expected,this.Symbol=symbol,this.SymbolData=symbolData},AlphaTab.Importer.AlphaTexException.prototype={get_Message:function(){return null==this.SymbolData?this.Position+": Error on block "+this.NonTerm+", expected a "+this.Expected+" found a "+this.Symbol:this.Position+": Error on block "+this.NonTerm+", invalid value: "+this.SymbolData}},AlphaTab.Importer.ScoreImporter=function(){this._data=null},AlphaTab.Importer.ScoreImporter.prototype={Init:function(data){this._data=data}},AlphaTab.Importer.ScoreImporter.BuildImporters=function(){return[new AlphaTab.Importer.Gp3To5Importer,new AlphaTab.Importer.GpxImporter,new AlphaTab.Importer.AlphaTexImporter,new AlphaTab.Importer.MusicXml2Importer]},AlphaTab.Importer.AlphaTexImporter=function(){this._score=null,this._track=null,this._ch=0,this._curChPos=0,this._sy=AlphaTab.Importer.AlphaTexSymbols.No,this._syData=null,this._allowNegatives=!1,this._currentDuration=AlphaTab.Model.Duration.Whole,AlphaTab.Importer.ScoreImporter.call(this)},AlphaTab.Importer.AlphaTexImporter.prototype={ReadScore:function(){try{return this.CreateDefaultScore(),this._curChPos=0,this._currentDuration=AlphaTab.Model.Duration.Quarter,this.NextChar(),this.NewSy(),this.Score(),this._score.Finish(),this._score}catch(e){if(e.exception instanceof AlphaTab.Importer.AlphaTexException)throw $CreateException(e,new Error);throw $CreateException(new AlphaTab.Importer.UnsupportedFormatException,new Error)}},Error:function(nonterm,expected,symbolError){if(symbolError)throw $CreateException(new AlphaTab.Importer.AlphaTexException(this._curChPos,nonterm,expected,this._sy,null),new Error);throw $CreateException(new AlphaTab.Importer.AlphaTexException(this._curChPos,nonterm,expected,expected,this._syData),new Error)},CreateDefaultScore:function(){this._score=new AlphaTab.Model.Score,this._score.Tempo=120,this._score.TempoLabel="",this._track=new AlphaTab.Model.Track,this._track.PlaybackInfo.Program=25,this._track.PlaybackInfo.PrimaryChannel=AlphaTab.Importer.AlphaTexImporter.TrackChannels[0],this._track.PlaybackInfo.SecondaryChannel=AlphaTab.Importer.AlphaTexImporter.TrackChannels[1],this._track.Tuning=AlphaTab.Model.Tuning.GetDefaultTuningFor(6).Tunings,this._score.AddTrack(this._track)},ParseClef:function(str){switch(str.toLowerCase()){case"g2":case"treble":return AlphaTab.Model.Clef.G2;case"f4":case"bass":return AlphaTab.Model.Clef.F4;case"c3":case"tenor":return AlphaTab.Model.Clef.C3;case"c4":case"alto":return AlphaTab.Model.Clef.C4;default:return AlphaTab.Model.Clef.G2}},ParseKeySignature:function(str){switch(str.toLowerCase()){case"cb":return-7;case"gb":return-6;case"db":return-5;case"ab":return-4;case"eb":return-3;case"bb":return-2;case"f":return-1;case"c":return 0;case"g":return 1;case"d":return 2;case"a":return 3;case"e":return 4;case"b":return 5;case"f#":return 6;case"c#":return 7;default:return 0}},ParseTuning:function(str){var tuning=AlphaTab.Model.TuningParser.GetTuningForText(str);return 0>tuning&&this.Error("tuning-value",AlphaTab.Importer.AlphaTexSymbols.String,!1),tuning},NextChar:function(){var b=this._data.ReadByte();-1==b?this._ch=0:(this._ch=b,this._curChPos++)},NewSy:function(){this._sy=AlphaTab.Importer.AlphaTexSymbols.No;do if(0==this._ch)this._sy=AlphaTab.Importer.AlphaTexSymbols.Eof;else if(AlphaTab.Platform.Std.IsWhiteSpace(this._ch))this.NextChar();else if(47==this._ch)if(this.NextChar(),47==this._ch)for(;13!=this._ch&&10!=this._ch&&0!=this._ch;)this.NextChar();else if(42==this._ch)for(;0!=this._ch;)if(42==this._ch){if(this.NextChar(),47==this._ch){this.NextChar();break}}else this.NextChar();else this.Error("symbol",AlphaTab.Importer.AlphaTexSymbols.String,!1);else if(34==this._ch||39==this._ch){this.NextChar();var s=new Array;for(this._sy=AlphaTab.Importer.AlphaTexSymbols.String;34!=this._ch&&39!=this._ch&&0!=this._ch;)s.push(String.fromCharCode(this._ch)),this.NextChar();this._syData=s.join(""),this.NextChar()}else if(45==this._ch)if(this._allowNegatives&&this.IsDigit(this._ch)){var number=this.ReadNumber();this._sy=AlphaTab.Importer.AlphaTexSymbols.Number,this._syData=number}else this._sy=AlphaTab.Importer.AlphaTexSymbols.String,this._syData=this.ReadName();else if(46==this._ch)this._sy=AlphaTab.Importer.AlphaTexSymbols.Dot,this.NextChar();else if(58==this._ch)this._sy=AlphaTab.Importer.AlphaTexSymbols.DoubleDot,this.NextChar();else if(40==this._ch)this._sy=AlphaTab.Importer.AlphaTexSymbols.LParensis,this.NextChar();else if(92==this._ch){this.NextChar();var name=this.ReadName();this._sy=AlphaTab.Importer.AlphaTexSymbols.MetaCommand,this._syData=name}else if(41==this._ch)this._sy=AlphaTab.Importer.AlphaTexSymbols.RParensis,this.NextChar();else if(123==this._ch)this._sy=AlphaTab.Importer.AlphaTexSymbols.LBrace,this.NextChar();else if(125==this._ch)this._sy=AlphaTab.Importer.AlphaTexSymbols.RBrace,this.NextChar();else if(124==this._ch)this._sy=AlphaTab.Importer.AlphaTexSymbols.Pipe,this.NextChar();else if(42==this._ch)this._sy=AlphaTab.Importer.AlphaTexSymbols.Multiply,this.NextChar();else if(this.IsDigit(this._ch)){var number=this.ReadNumber();this._sy=AlphaTab.Importer.AlphaTexSymbols.Number,this._syData=number}else if(AlphaTab.Importer.AlphaTexImporter.IsLetter(this._ch)){var name=this.ReadName();AlphaTab.Model.TuningParser.IsTuning(name)?(this._sy=AlphaTab.Importer.AlphaTexSymbols.Tuning,this._syData=name.toLowerCase()):(this._sy=AlphaTab.Importer.AlphaTexSymbols.String,this._syData=name)}else this.Error("symbol",AlphaTab.Importer.AlphaTexSymbols.String,!1);while(this._sy==AlphaTab.Importer.AlphaTexSymbols.No)},IsDigit:function(code){return code>=48&&57>=code||45==code&&this._allowNegatives},ReadName:function(){var str=new Array;do str.push(String.fromCharCode(this._ch)),this.NextChar();while(AlphaTab.Importer.AlphaTexImporter.IsLetter(this._ch)||this.IsDigit(this._ch));return str.join("")},ReadNumber:function(){var str=new Array;do str.push(String.fromCharCode(this._ch)),this.NextChar();while(this.IsDigit(this._ch));return AlphaTab.Platform.Std.ParseInt(str.join(""))},Score:function(){this.MetaData(),this.Bars()},MetaData:function(){for(var anyMeta=!1;this._sy==AlphaTab.Importer.AlphaTexSymbols.MetaCommand;){var syData=this._syData.toString().toLowerCase();if("title"==syData)this.NewSy(),this._sy==AlphaTab.Importer.AlphaTexSymbols.String?this._score.Title=this._syData.toString():this.Error("title",AlphaTab.Importer.AlphaTexSymbols.String,!0),this.NewSy(),anyMeta=!0;else if("subtitle"==syData)this.NewSy(),this._sy==AlphaTab.Importer.AlphaTexSymbols.String?this._score.SubTitle=this._syData.toString():this.Error("subtitle",AlphaTab.Importer.AlphaTexSymbols.String,!0),this.NewSy(),anyMeta=!0;else if("artist"==syData)this.NewSy(),this._sy==AlphaTab.Importer.AlphaTexSymbols.String?this._score.Artist=this._syData.toString():this.Error("artist",AlphaTab.Importer.AlphaTexSymbols.String,!0),this.NewSy(),anyMeta=!0;else if("album"==syData)this.NewSy(),this._sy==AlphaTab.Importer.AlphaTexSymbols.String?this._score.Album=this._syData.toString():this.Error("album",AlphaTab.Importer.AlphaTexSymbols.String,!0),this.NewSy(),anyMeta=!0;else if("words"==syData)this.NewSy(),this._sy==AlphaTab.Importer.AlphaTexSymbols.String?this._score.Words=this._syData.toString():this.Error("words",AlphaTab.Importer.AlphaTexSymbols.String,!0),this.NewSy(),anyMeta=!0;else if("music"==syData)this.NewSy(),this._sy==AlphaTab.Importer.AlphaTexSymbols.String?this._score.Music=this._syData.toString():this.Error("music",AlphaTab.Importer.AlphaTexSymbols.String,!0),this.NewSy(),anyMeta=!0;else if("copyright"==syData)this.NewSy(),this._sy==AlphaTab.Importer.AlphaTexSymbols.String?this._score.Copyright=this._syData.toString():this.Error("copyright",AlphaTab.Importer.AlphaTexSymbols.String,!0),this.NewSy(),anyMeta=!0;else if("tempo"==syData)this.NewSy(),this._sy==AlphaTab.Importer.AlphaTexSymbols.Number?this._score.Tempo=this._syData:this.Error("tempo",AlphaTab.Importer.AlphaTexSymbols.Number,!0),this.NewSy(),anyMeta=!0;else if("capo"==syData)this.NewSy(),this._sy==AlphaTab.Importer.AlphaTexSymbols.Number?this._track.Capo=this._syData:this.Error("capo",AlphaTab.Importer.AlphaTexSymbols.Number,!0),this.NewSy(),anyMeta=!0;else if("tuning"==syData){if(this.NewSy(),this._sy==AlphaTab.Importer.AlphaTexSymbols.Tuning){var tuning=[];do tuning.push(this.ParseTuning(this._syData.toString().toLowerCase())),this.NewSy();while(this._sy==AlphaTab.Importer.AlphaTexSymbols.Tuning);this._track.Tuning=tuning.slice(0)}else this.Error("tuning",AlphaTab.Importer.AlphaTexSymbols.Tuning,!0);anyMeta=!0}else if("instrument"==syData){if(this.NewSy(),this._sy==AlphaTab.Importer.AlphaTexSymbols.Number){var instrument=this._syData;instrument>=0&&128>=instrument?this._track.PlaybackInfo.Program=this._syData:this.Error("instrument",AlphaTab.Importer.AlphaTexSymbols.Number,!1)}else if(this._sy==AlphaTab.Importer.AlphaTexSymbols.String){var instrumentName=this._syData.toString().toLowerCase();this._track.PlaybackInfo.Program=AlphaTab.Audio.GeneralMidi.GetValue(instrumentName)}else this.Error("instrument",AlphaTab.Importer.AlphaTexSymbols.Number,!0);this.NewSy(),anyMeta=!0}else this.Error("metaDataTags",AlphaTab.Importer.AlphaTexSymbols.String,!1)}anyMeta&&(this._sy!=AlphaTab.Importer.AlphaTexSymbols.Dot&&this.Error("song",AlphaTab.Importer.AlphaTexSymbols.Dot,!0),this.NewSy())},Bars:function(){for(this.Bar();this._sy!=AlphaTab.Importer.AlphaTexSymbols.Eof;)this._sy!=AlphaTab.Importer.AlphaTexSymbols.Pipe&&this.Error("bar",AlphaTab.Importer.AlphaTexSymbols.Pipe,!0),this.NewSy(),this.Bar()},Bar:function(){var master=new AlphaTab.Model.MasterBar;this._score.AddMasterBar(master);var bar=new AlphaTab.Model.Bar;this._track.AddBar(bar),master.Index>0&&(master.KeySignature=master.PreviousMasterBar.KeySignature,master.TimeSignatureDenominator=master.PreviousMasterBar.TimeSignatureDenominator,master.TimeSignatureNumerator=master.PreviousMasterBar.TimeSignatureNumerator,bar.Clef=bar.PreviousBar.Clef),this.BarMeta(bar);var voice=new AlphaTab.Model.Voice;for(bar.AddVoice(voice);this._sy!=AlphaTab.Importer.AlphaTexSymbols.Pipe&&this._sy!=AlphaTab.Importer.AlphaTexSymbols.Eof;)this.Beat(voice);if(0==voice.Beats.length){var emptyBeat=new AlphaTab.Model.Beat;emptyBeat.IsEmpty=!0,voice.AddBeat(emptyBeat)}},Beat:function(voice){if(this._sy==AlphaTab.Importer.AlphaTexSymbols.DoubleDot){this.NewSy(),this._sy!=AlphaTab.Importer.AlphaTexSymbols.Number&&this.Error("duration",AlphaTab.Importer.AlphaTexSymbols.Number,!0);var duration=this._syData;switch(duration){case 1:case 2:case 4:case 8:case 16:case 32:case 64:this._currentDuration=this.ParseDuration(this._syData);break;default:this.Error("duration",AlphaTab.Importer.AlphaTexSymbols.Number,!1)}return void this.NewSy()}var beat=new AlphaTab.Model.Beat;if(voice.AddBeat(beat),null!=voice.Bar.get_MasterBar().TempoAutomation&&1==voice.Beats.length&&beat.Automations.push(voice.Bar.get_MasterBar().TempoAutomation),this._sy==AlphaTab.Importer.AlphaTexSymbols.LParensis){for(this.NewSy(),this.Note(beat);this._sy!=AlphaTab.Importer.AlphaTexSymbols.RParensis&&this._sy!=AlphaTab.Importer.AlphaTexSymbols.Eof;)this.Note(beat);this._sy!=AlphaTab.Importer.AlphaTexSymbols.RParensis&&this.Error("note-list",AlphaTab.Importer.AlphaTexSymbols.RParensis,!0),this.NewSy()}else this._sy==AlphaTab.Importer.AlphaTexSymbols.String&&"r"==this._syData.toString().toLowerCase()?this.NewSy():this.Note(beat);if(this._sy==AlphaTab.Importer.AlphaTexSymbols.Dot){this.NewSy(),this._sy!=AlphaTab.Importer.AlphaTexSymbols.Number&&this.Error("duration",AlphaTab.Importer.AlphaTexSymbols.Number,!0);var duration=this._syData;switch(duration){case 1:case 2:case 4:case 8:case 16:case 32:case 64:this._currentDuration=this.ParseDuration(this._syData);break;default:this.Error("duration",AlphaTab.Importer.AlphaTexSymbols.Number,!1)}this.NewSy()}beat.Duration=this._currentDuration;var beatRepeat=1;this._sy==AlphaTab.Importer.AlphaTexSymbols.Multiply&&(this.NewSy(),this._sy!=AlphaTab.Importer.AlphaTexSymbols.Number?this.Error("multiplier",AlphaTab.Importer.AlphaTexSymbols.Number,!0):beatRepeat=this._syData,this.NewSy()),this.BeatEffects(beat);for(var i=0;beatRepeat-1>i;i++)voice.AddBeat(beat.Clone())},BeatEffects:function(beat){if(this._sy==AlphaTab.Importer.AlphaTexSymbols.LBrace){for(this.NewSy();this._sy==AlphaTab.Importer.AlphaTexSymbols.String;)this._syData=this._syData.toString().toLowerCase(),this.ApplyBeatEffect(beat)||this.Error("beat-effects",AlphaTab.Importer.AlphaTexSymbols.String,!1);this._sy!=AlphaTab.Importer.AlphaTexSymbols.RBrace&&this.Error("beat-effects",AlphaTab.Importer.AlphaTexSymbols.RBrace,!0),this.NewSy()}},ApplyBeatEffect:function(beat){var syData=this._syData.toString().toLowerCase();if("f"==syData)return beat.FadeIn=!0,this.NewSy(),!0;if("v"==syData)return beat.Vibrato=AlphaTab.Model.VibratoType.Slight,this.NewSy(),!0;if("s"==syData)return beat.Slap=!0,this.NewSy(),!0;if("p"==syData)return beat.Pop=!0,this.NewSy(),!0;if("dd"==syData)return beat.Dots=2,this.NewSy(),!0;if("d"==syData)return beat.Dots=1,this.NewSy(),!0;if("su"==syData)return beat.PickStroke=AlphaTab.Model.PickStrokeType.Up,this.NewSy(),!0;if("sd"==syData)return beat.PickStroke=AlphaTab.Model.PickStrokeType.Down,this.NewSy(),!0;if("tu"==syData){if(this.NewSy(),this._sy!=AlphaTab.Importer.AlphaTexSymbols.Number)return this.Error("tuplet",AlphaTab.Importer.AlphaTexSymbols.Number,!0),!1;var tuplet=this._syData;switch(tuplet){case 3:beat.TupletDenominator=3,beat.TupletNumerator=2;break;case 5:beat.TupletDenominator=5,beat.TupletNumerator=4;break;case 6:beat.TupletDenominator=6,beat.TupletNumerator=4;break;case 7:beat.TupletDenominator=7,beat.TupletNumerator=4;break;case 9:beat.TupletDenominator=9,beat.TupletNumerator=8;break;case 10:beat.TupletDenominator=10,beat.TupletNumerator=8;break;case 11:beat.TupletDenominator=11,beat.TupletNumerator=8;break;case 12:beat.TupletDenominator=12,beat.TupletNumerator=8}return this.NewSy(),!0}if("tb"==syData){if(this.NewSy(),this._sy!=AlphaTab.Importer.AlphaTexSymbols.LParensis)return this.Error("tremolobar-effect",AlphaTab.Importer.AlphaTexSymbols.LParensis,!0),!1;for(this._allowNegatives=!0,this.NewSy();this._sy!=AlphaTab.Importer.AlphaTexSymbols.RParensis&&this._sy!=AlphaTab.Importer.AlphaTexSymbols.Eof;){if(this._sy!=AlphaTab.Importer.AlphaTexSymbols.Number)return this.Error("tremolobar-effect",AlphaTab.Importer.AlphaTexSymbols.Number,!0),!1;beat.WhammyBarPoints.push(new AlphaTab.Model.BendPoint(0,this._syData)),this.NewSy()}for(;beat.WhammyBarPoints.length>60;)beat.WhammyBarPoints.splice(beat.WhammyBarPoints.length-1,1);for(var count=beat.WhammyBarPoints.length,step=60/count|0,i=0;count>i;)beat.WhammyBarPoints[i].Offset=Math.min(60,i*step),i++;return this._allowNegatives=!1,this._sy!=AlphaTab.Importer.AlphaTexSymbols.RParensis?(this.Error("tremolobar-effect",AlphaTab.Importer.AlphaTexSymbols.RParensis,!0),!1):(this.NewSy(),!0)}return!1},Note:function(beat){var syData=this._syData.toString().toLowerCase();this._sy!=AlphaTab.Importer.AlphaTexSymbols.Number&&(this._sy!=AlphaTab.Importer.AlphaTexSymbols.String||"x"!=syData&&"-"!=syData)&&this.Error("note-fret",AlphaTab.Importer.AlphaTexSymbols.Number,!0);var isDead="x"==syData,isTie="-"==syData,fret=isDead||isTie?0:this._syData;this.NewSy(),this._sy!=AlphaTab.Importer.AlphaTexSymbols.Dot&&this.Error("note",AlphaTab.Importer.AlphaTexSymbols.Dot,!0),this.NewSy(),this._sy!=AlphaTab.Importer.AlphaTexSymbols.Number&&this.Error("note-string",AlphaTab.Importer.AlphaTexSymbols.Number,!0);var string=this._syData;(1>string||string>this._track.Tuning.length)&&this.Error("note-string",AlphaTab.Importer.AlphaTexSymbols.Number,!1),this.NewSy();var note=new AlphaTab.Model.Note;this.NoteEffects(note),note.String=this._track.Tuning.length-(string-1),note.IsDead=isDead,note.IsTieDestination=isTie,isTie||(note.Fret=fret),beat.AddNote(note)},NoteEffects:function(note){if(this._sy==AlphaTab.Importer.AlphaTexSymbols.LBrace){for(this.NewSy();this._sy==AlphaTab.Importer.AlphaTexSymbols.String;){var syData=this._syData.toString().toLowerCase();if(this._syData=syData,"b"==syData){for(this.NewSy(),this._sy!=AlphaTab.Importer.AlphaTexSymbols.LParensis&&this.Error("bend-effect",AlphaTab.Importer.AlphaTexSymbols.LParensis,!0),this.NewSy();this._sy!=AlphaTab.Importer.AlphaTexSymbols.RParensis&&this._sy!=AlphaTab.Importer.AlphaTexSymbols.Eof;){this._sy!=AlphaTab.Importer.AlphaTexSymbols.Number&&this.Error("bend-effect-value",AlphaTab.Importer.AlphaTexSymbols.Number,!0);var bendValue=this._syData;note.BendPoints.push(new AlphaTab.Model.BendPoint(0,Math.abs(bendValue))),this.NewSy()}for(;note.BendPoints.length>60;)note.BendPoints.splice(note.BendPoints.length-1,1);for(var count=note.BendPoints.length,step=60/count|0,i=0;count>i;)note.BendPoints[i].Offset=Math.min(60,i*step),i++;this._sy!=AlphaTab.Importer.AlphaTexSymbols.RParensis&&this.Error("bend-effect",AlphaTab.Importer.AlphaTexSymbols.RParensis,!0),this.NewSy()}else if("nh"==syData)note.HarmonicType=AlphaTab.Model.HarmonicType.Natural,this.NewSy();else if("ah"==syData)note.HarmonicType=AlphaTab.Model.HarmonicType.Artificial,this.NewSy();else if("th"==syData)note.HarmonicType=AlphaTab.Model.HarmonicType.Tap,this.NewSy();else if("ph"==syData)note.HarmonicType=AlphaTab.Model.HarmonicType.Pinch,this.NewSy();else if("sh"==syData)note.HarmonicType=AlphaTab.Model.HarmonicType.Semi,this.NewSy();else if("gr"==syData)this.NewSy(),note.Beat.GraceType="ob"==this._syData.toString().toLowerCase()?AlphaTab.Model.GraceType.OnBeat:AlphaTab.Model.GraceType.BeforeBeat,this.NewSy();else if("tr"==syData){this.NewSy(),this._sy!=AlphaTab.Importer.AlphaTexSymbols.Number&&this.Error("trill-effect",AlphaTab.Importer.AlphaTexSymbols.Number,!0);var fret=this._syData;this.NewSy();var duration=AlphaTab.Model.Duration.Sixteenth;if(this._sy==AlphaTab.Importer.AlphaTexSymbols.Number){switch(this._syData){case 16:duration=AlphaTab.Model.Duration.Sixteenth;break;case 32:duration=AlphaTab.Model.Duration.ThirtySecond;break;case 64:duration=AlphaTab.Model.Duration.ThirtySecond;break;default:duration=AlphaTab.Model.Duration.Sixteenth}this.NewSy()}note.TrillValue=fret+note.get_StringTuning(),note.TrillSpeed=duration}else if("tp"==syData){this.NewSy();var duration=AlphaTab.Model.Duration.Eighth;if(this._sy==AlphaTab.Importer.AlphaTexSymbols.Number){switch(this._syData){case 8:duration=AlphaTab.Model.Duration.Eighth;break;case 16:duration=AlphaTab.Model.Duration.Sixteenth;break;case 32:duration=AlphaTab.Model.Duration.ThirtySecond;break;default:duration=AlphaTab.Model.Duration.Eighth}this.NewSy()}note.Beat.TremoloSpeed=duration}else"v"==syData?(this.NewSy(),note.Vibrato=AlphaTab.Model.VibratoType.Slight):"sl"==syData?(this.NewSy(),note.SlideType=AlphaTab.Model.SlideType.Legato):"ss"==syData?(this.NewSy(),note.SlideType=AlphaTab.Model.SlideType.Shift):"h"==syData?(this.NewSy(),note.IsHammerPullOrigin=!0):"g"==syData?(this.NewSy(),note.IsGhost=!0):"ac"==syData?(this.NewSy(),note.Accentuated=AlphaTab.Model.AccentuationType.Normal):"hac"==syData?(this.NewSy(),note.Accentuated=AlphaTab.Model.AccentuationType.Heavy):"pm"==syData?(this.NewSy(),note.IsPalmMute=!0):"st"==syData?(this.NewSy(),note.IsStaccato=!0):"lr"==syData?(this.NewSy(),note.IsLetRing=!0):this.ApplyBeatEffect(note.Beat)||this.Error(syData,AlphaTab.Importer.AlphaTexSymbols.String,!1)}this._sy!=AlphaTab.Importer.AlphaTexSymbols.RBrace&&this.Error("note-effect",AlphaTab.Importer.AlphaTexSymbols.RBrace,!1),this.NewSy()}},ParseDuration:function(duration){switch(duration){case 1:return AlphaTab.Model.Duration.Whole;case 2:return AlphaTab.Model.Duration.Half;case 4:return AlphaTab.Model.Duration.Quarter;case 8:return AlphaTab.Model.Duration.Eighth;case 16:return AlphaTab.Model.Duration.Sixteenth;case 32:return AlphaTab.Model.Duration.ThirtySecond;case 64:return AlphaTab.Model.Duration.SixtyFourth;default:return AlphaTab.Model.Duration.Quarter}},BarMeta:function(bar){for(var master=bar.get_MasterBar();this._sy==AlphaTab.Importer.AlphaTexSymbols.MetaCommand;){var syData=this._syData.toString().toLowerCase();if("ts"==syData)this.NewSy(),this._sy!=AlphaTab.Importer.AlphaTexSymbols.Number&&this.Error("timesignature-numerator",AlphaTab.Importer.AlphaTexSymbols.Number,!0),master.TimeSignatureNumerator=this._syData,this.NewSy(),this._sy!=AlphaTab.Importer.AlphaTexSymbols.Number&&this.Error("timesignature-denominator",AlphaTab.Importer.AlphaTexSymbols.Number,!0),master.TimeSignatureDenominator=this._syData;else if("ro"==syData)master.IsRepeatStart=!0;else if("rc"==syData)this.NewSy(),this._sy!=AlphaTab.Importer.AlphaTexSymbols.Number&&this.Error("repeatclose",AlphaTab.Importer.AlphaTexSymbols.Number,!0),master.RepeatCount=this._syData-1;else if("ks"==syData)this.NewSy(),this._sy!=AlphaTab.Importer.AlphaTexSymbols.String&&this.Error("keysignature",AlphaTab.Importer.AlphaTexSymbols.String,!0),master.KeySignature=this.ParseKeySignature(this._syData.toString().toLowerCase());else if("clef"==syData)this.NewSy(),this._sy!=AlphaTab.Importer.AlphaTexSymbols.String&&this._sy!=AlphaTab.Importer.AlphaTexSymbols.Tuning&&this.Error("clef",AlphaTab.Importer.AlphaTexSymbols.String,!0),bar.Clef=this.ParseClef(this._syData.toString().toLowerCase());else if("tempo"==syData){this.NewSy(),this._sy!=AlphaTab.Importer.AlphaTexSymbols.Number&&this.Error("tempo",AlphaTab.Importer.AlphaTexSymbols.Number,!0);var tempoAutomation=new AlphaTab.Model.Automation;tempoAutomation.IsLinear=!0,tempoAutomation.Type=AlphaTab.Model.AutomationType.Tempo,tempoAutomation.Value=this._syData,master.TempoAutomation=tempoAutomation}else this.Error("measure-effects",AlphaTab.Importer.AlphaTexSymbols.String,!1);this.NewSy()}}},$StaticConstructor(function(){AlphaTab.Importer.AlphaTexImporter.Eof=0,AlphaTab.Importer.AlphaTexImporter.TrackChannels=new Int32Array([0,1])}),AlphaTab.Importer.AlphaTexImporter.IsLetter=function(code){return!AlphaTab.Importer.AlphaTexImporter.IsTerminal(code)&&(code>=33&&47>=code||code>=58&&126>=code||code>128)},AlphaTab.Importer.AlphaTexImporter.IsTerminal=function(ch){return 46==ch||123==ch||125==ch||91==ch||93==ch||40==ch||41==ch||124==ch||39==ch||34==ch||92==ch},$Inherit(AlphaTab.Importer.AlphaTexImporter,AlphaTab.Importer.ScoreImporter),AlphaTab.Importer.AlphaTexSymbols={No:0,Eof:1,Number:2,DoubleDot:3,Dot:4,String:5,Tuning:6,LParensis:7,RParensis:8,LBrace:9,RBrace:10,Pipe:11,MetaCommand:12,Multiply:13},AlphaTab.Importer.Gp3To5Importer=function(){this._versionNumber=0,this._score=null,this._globalTripletFeel=AlphaTab.Model.TripletFeel.NoTripletFeel,this._lyricsIndex=null,this._lyrics=null,this._barCount=0,this._trackCount=0,this._playbackInfos=null,AlphaTab.Importer.ScoreImporter.call(this)},AlphaTab.Importer.Gp3To5Importer.prototype={ReadScore:function(){return this.ReadVersion(),this._score=new AlphaTab.Model.Score,this.ReadScoreInformation(),this._versionNumber<500&&(this._globalTripletFeel=this.ReadBool()?AlphaTab.Model.TripletFeel.Triplet8th:AlphaTab.Model.TripletFeel.NoTripletFeel),this._versionNumber>=400&&this.ReadLyrics(),this._versionNumber>=510&&this._data.Skip(19),this._versionNumber>=500&&(this.ReadPageSetup(),this._score.TempoLabel=this.ReadStringIntByte()),this._score.Tempo=this.ReadInt32(),this._versionNumber>=510&&this.ReadBool(),this.ReadInt32(),this._versionNumber>=400&&this._data.ReadByte(),this.ReadPlaybackInfos(),this._versionNumber>=500&&(this._data.Skip(38),this._data.Skip(4)),this._barCount=this.ReadInt32(),this._trackCount=this.ReadInt32(),this.ReadMasterBars(),this.ReadTracks(),this.ReadBars(),this._score.Finish(),this._score},ReadVersion:function(){var version=this.ReadStringByteLength(30);if(0==!version.indexOf("FICHIER GUITAR PRO "))throw $CreateException(new AlphaTab.Importer.UnsupportedFormatException,new Error);version=version.substr("FICHIER GUITAR PRO ".length+1);var dot=version.indexOf(".");this._versionNumber=100*AlphaTab.Platform.Std.ParseInt(version.substr(0,dot))+AlphaTab.Platform.Std.ParseInt(version.substr(dot+1))},ReadScoreInformation:function(){this._score.Title=this.ReadStringIntUnused(),this._score.SubTitle=this.ReadStringIntUnused(),this._score.Artist=this.ReadStringIntUnused(),this._score.Album=this.ReadStringIntUnused(),this._score.Words=this.ReadStringIntUnused(),this._score.Music=this._versionNumber>=500?this.ReadStringIntUnused():this._score.Words,this._score.Copyright=this.ReadStringIntUnused(),this._score.Tab=this.ReadStringIntUnused(),this._score.Instructions=this.ReadStringIntUnused();for(var noticeLines=this.ReadInt32(),notice=new Array,i=0;noticeLines>i;i++)i>0&&notice.push("\r\n"),notice.push(this.ReadStringIntUnused());this._score.Notices=notice.join("")},ReadLyrics:function(){this._lyrics=[],this._lyricsIndex=[],this.ReadInt32();for(var i=0;5>i;i++)this._lyricsIndex.push(this.ReadInt32()-1),this._lyrics.push(this.ReadStringInt())},ReadPageSetup:function(){this._data.Skip(30);for(var i=0;10>i;i++)this.ReadStringIntByte()},ReadPlaybackInfos:function(){this._playbackInfos=[];for(var i=0;64>i;i++){var info=new AlphaTab.Model.PlaybackInformation;info.PrimaryChannel=i,info.SecondaryChannel=i,info.Program=this.ReadInt32(),info.Volume=this._data.ReadByte(),info.Balance=this._data.ReadByte(),this._data.Skip(6),this._playbackInfos.push(info)}},ReadMasterBars:function(){for(var i=0;i<this._barCount;i++)this.ReadMasterBar()},ReadMasterBar:function(){var previousMasterBar=null;this._score.MasterBars.length>0&&(previousMasterBar=this._score.MasterBars[this._score.MasterBars.length-1]);var newMasterBar=new AlphaTab.Model.MasterBar,flags=this._data.ReadByte();if(0!=(1&flags)?newMasterBar.TimeSignatureNumerator=this._data.ReadByte():null!=previousMasterBar&&(newMasterBar.TimeSignatureNumerator=previousMasterBar.TimeSignatureNumerator),0!=(2&flags)?newMasterBar.TimeSignatureDenominator=this._data.ReadByte():null!=previousMasterBar&&(newMasterBar.TimeSignatureDenominator=previousMasterBar.TimeSignatureDenominator),newMasterBar.IsRepeatStart=0!=(4&flags),0!=(8&flags)&&(newMasterBar.RepeatCount=this._data.ReadByte()+(this._versionNumber>=500?0:1)),0!=(16&flags))if(this._versionNumber<500){for(var currentMasterBar=previousMasterBar,existentAlternatives=0;!(null==currentMasterBar||currentMasterBar.get_IsRepeatEnd()&&currentMasterBar!=previousMasterBar||currentMasterBar.IsRepeatStart);)existentAlternatives|=currentMasterBar.AlternateEndings,currentMasterBar=currentMasterBar.PreviousMasterBar;for(var repeatAlternative=0,repeatMask=this._data.ReadByte(),i=0;8>i;i++){var repeating=1<<i;repeatMask>i&&0==(existentAlternatives&repeating)&&(repeatAlternative|=repeating)}newMasterBar.AlternateEndings=repeatAlternative}else newMasterBar.AlternateEndings=this._data.ReadByte();if(0!=(32&flags)){var section=new AlphaTab.Model.Section;section.Text=this.ReadStringIntByte(),section.Marker="",this.ReadColor(),newMasterBar.Section=section}if(0!=(64&flags)?(newMasterBar.KeySignature=AlphaTab.Platform.Std.ReadSignedByte(this._data),this._data.ReadByte()):null!=previousMasterBar&&(newMasterBar.KeySignature=previousMasterBar.KeySignature),this._versionNumber>=500&&0!=(3&flags)&&this._data.Skip(4),this._versionNumber>=500&&0==(16&flags)&&(newMasterBar.AlternateEndings=this._data.ReadByte()),this._versionNumber>=500){var tripletFeel=this._data.ReadByte();switch(tripletFeel){case 1:newMasterBar.TripletFeel=AlphaTab.Model.TripletFeel.Triplet8th;break;case 2:newMasterBar.TripletFeel=AlphaTab.Model.TripletFeel.Triplet16th}this._data.ReadByte()}else newMasterBar.TripletFeel=this._globalTripletFeel;newMasterBar.IsDoubleBar=0!=(128&flags),this._score.AddMasterBar(newMasterBar)},ReadTracks:function(){for(var i=0;i<this._trackCount;i++)this.ReadTrack()},ReadTrack:function(){var newTrack=new AlphaTab.Model.Track;this._score.AddTrack(newTrack);var flags=this._data.ReadByte();newTrack.Name=this.ReadStringByteLength(40),newTrack.IsPercussion=0!=(1&flags);for(var stringCount=this.ReadInt32(),tuning=[],i=0;7>i;i++){var stringTuning=this.ReadInt32();stringCount>i&&tuning.push(stringTuning)}newTrack.Tuning=tuning.slice(0);var port=this.ReadInt32(),index=this.ReadInt32()-1,effectChannel=this.ReadInt32()-1;if(this._data.Skip(4),index>=0&&index<this._playbackInfos.length){var info=this._playbackInfos[index];info.Port=port,info.IsSolo=0!=(16&flags),info.IsMute=0!=(32&flags),info.SecondaryChannel=effectChannel,newTrack.PlaybackInfo=info}newTrack.Capo=this.ReadInt32(),newTrack.Color=this.ReadColor(),this._versionNumber>=500&&(this._data.ReadByte(),this._data.ReadByte(),this._data.Skip(43)),this._versionNumber>=510&&(this._data.Skip(4),this.ReadStringIntByte(),this.ReadStringIntByte())},ReadBars:function(){for(var i=0;i<this._barCount;i++)for(var t=0;t<this._trackCount;t++)this.ReadBar(this._score.Tracks[t])},ReadBar:function(track){var newBar=new AlphaTab.Model.Bar;track.IsPercussion&&(newBar.Clef=AlphaTab.Model.Clef.Neutral),track.AddBar(newBar);var voiceCount=1;this._versionNumber>=500&&(this._data.ReadByte(),voiceCount=2);for(var v=0;voiceCount>v;v++)this.ReadVoice(track,newBar)},ReadVoice:function(track,bar){var beatCount=this.ReadInt32();if(0!=beatCount){var newVoice=new AlphaTab.Model.Voice;bar.AddVoice(newVoice);for(var i=0;beatCount>i;i++)this.ReadBeat(track,bar,newVoice)}},ReadBeat:function(track,bar,voice){var newBeat=new AlphaTab.Model.Beat,flags=this._data.ReadByte();if(0!=(1&flags)&&(newBeat.Dots=1),0!=(64&flags)){var type=this._data.ReadByte();newBeat.IsEmpty=0==(2&type)}voice.AddBeat(newBeat);var duration=AlphaTab.Platform.Std.ReadSignedByte(this._data);switch(duration){case-2:newBeat.Duration=AlphaTab.Model.Duration.Whole;break;case-1:newBeat.Duration=AlphaTab.Model.Duration.Half;break;case 0:newBeat.Duration=AlphaTab.Model.Duration.Quarter;break;case 1:newBeat.Duration=AlphaTab.Model.Duration.Eighth;break;case 2:newBeat.Duration=AlphaTab.Model.Duration.Sixteenth;break;case 3:newBeat.Duration=AlphaTab.Model.Duration.ThirtySecond;break;case 4:newBeat.Duration=AlphaTab.Model.Duration.SixtyFourth;break;default:newBeat.Duration=AlphaTab.Model.Duration.Quarter}if(0!=(32&flags))switch(newBeat.TupletNumerator=this.ReadInt32(),newBeat.TupletNumerator){case 1:newBeat.TupletDenominator=1;break;case 3:
newBeat.TupletDenominator=2;break;case 5:case 6:case 7:newBeat.TupletDenominator=4;break;case 9:case 10:case 11:case 12:case 13:newBeat.TupletDenominator=8;break;case 2:case 4:case 8:break;default:newBeat.TupletNumerator=1,newBeat.TupletDenominator=1}0!=(2&flags)&&this.ReadChord(newBeat),0!=(4&flags)&&(newBeat.Text=this.ReadStringIntUnused()),0!=(8&flags)&&this.ReadBeatEffects(newBeat),0!=(16&flags)&&this.ReadMixTableChange(newBeat);for(var stringFlags=this._data.ReadByte(),i=6;i>=0;i--)0!=(stringFlags&1<<i)&&6-i<track.Tuning.length&&this.ReadNote(track,bar,voice,newBeat,6-i);if(this._versionNumber>=500){this._data.ReadByte();var flag=this._data.ReadByte();0!=(8&flag)&&this._data.ReadByte()}},ReadChord:function(beat){var chord=new AlphaTab.Model.Chord,chordId=AlphaTab.Platform.Std.NewGuid();if(this._versionNumber>=500){this._data.Skip(17),chord.Name=this.ReadStringByteLength(21),this._data.Skip(4),chord.FirstFret=this.ReadInt32();for(var i=0;7>i;i++){var fret=this.ReadInt32();i<chord.Strings.length&&chord.Strings.push(fret)}this._data.Skip(32)}else if(0!=this._data.ReadByte())if(this._versionNumber>=400){this._data.Skip(16),chord.Name=this.ReadStringByteLength(21),this._data.Skip(4),chord.FirstFret=this.ReadInt32();for(var i=0;7>i;i++){var fret=this.ReadInt32();i<chord.Strings.length&&chord.Strings.push(fret)}this._data.Skip(32)}else{this._data.Skip(25),chord.Name=this.ReadStringByteLength(34),chord.FirstFret=this.ReadInt32();for(var i=0;6>i;i++){var fret=this.ReadInt32();chord.Strings.push(fret)}this._data.Skip(36)}else{var strings=this._versionNumber>=406?7:6;if(chord.Name=this.ReadStringIntByte(),chord.FirstFret=this.ReadInt32(),chord.FirstFret>0)for(var i=0;strings>i;i++){var fret=this.ReadInt32();i<chord.Strings.length&&chord.Strings.push(fret)}}null!=chord.Name&&0!=chord.Name.length&&(beat.ChordId=chordId,beat.Voice.Bar.Track.Chords[beat.ChordId]=chord)},ReadBeatEffects:function(beat){var flags=this._data.ReadByte(),flags2=0;if(this._versionNumber>=400&&(flags2=this._data.ReadByte()),beat.FadeIn=0!=(16&flags),(0!=(1&flags)||0!=(2&flags))&&(beat.Vibrato=AlphaTab.Model.VibratoType.Slight),beat.HasRasgueado=0!=(1&flags2),0!=(32&flags)&&this._versionNumber>=400){var slapPop=AlphaTab.Platform.Std.ReadSignedByte(this._data);switch(slapPop){case 1:beat.Tap=!0;break;case 2:beat.Slap=!0;break;case 3:beat.Pop=!0}}else if(0!=(32&flags)){var slapPop=AlphaTab.Platform.Std.ReadSignedByte(this._data);switch(slapPop){case 1:beat.Tap=!0;break;case 2:beat.Slap=!0;break;case 3:beat.Pop=!0}this._data.Skip(4)}if(0!=(4&flags2)&&this.ReadTremoloBarEffect(beat),0!=(64&flags)){var strokeUp,strokeDown;this._versionNumber<500?(strokeDown=this._data.ReadByte(),strokeUp=this._data.ReadByte()):(strokeUp=this._data.ReadByte(),strokeDown=this._data.ReadByte()),strokeUp>0?(beat.BrushType=AlphaTab.Model.BrushType.BrushUp,beat.BrushDuration=AlphaTab.Importer.Gp3To5Importer.ToStrokeValue(strokeUp)):strokeDown>0&&(beat.BrushType=AlphaTab.Model.BrushType.BrushDown,beat.BrushDuration=AlphaTab.Importer.Gp3To5Importer.ToStrokeValue(strokeDown))}if(0!=(2&flags2))switch(AlphaTab.Platform.Std.ReadSignedByte(this._data)){case 0:beat.PickStroke=AlphaTab.Model.PickStrokeType.None;break;case 1:beat.PickStroke=AlphaTab.Model.PickStrokeType.Up;break;case 2:beat.PickStroke=AlphaTab.Model.PickStrokeType.Down}},ReadTremoloBarEffect:function(beat){this._data.ReadByte(),this.ReadInt32();var pointCount=this.ReadInt32();if(pointCount>0)for(var i=0;pointCount>i;i++){var point=new AlphaTab.Model.BendPoint(0,0);point.Offset=this.ReadInt32(),point.Value=this.ReadInt32()/25|0,this.ReadBool(),beat.WhammyBarPoints.push(point)}},ReadMixTableChange:function(beat){var tableChange=new AlphaTab.Importer.MixTableChange;tableChange.Instrument=this._data.ReadByte(),this._versionNumber>=500&&this._data.Skip(16),tableChange.Volume=AlphaTab.Platform.Std.ReadSignedByte(this._data),tableChange.Balance=AlphaTab.Platform.Std.ReadSignedByte(this._data);var chorus=AlphaTab.Platform.Std.ReadSignedByte(this._data),reverb=AlphaTab.Platform.Std.ReadSignedByte(this._data),phaser=AlphaTab.Platform.Std.ReadSignedByte(this._data),tremolo=AlphaTab.Platform.Std.ReadSignedByte(this._data);if(this._versionNumber>=500&&(tableChange.TempoName=this.ReadStringIntByte()),tableChange.Tempo=this.ReadInt32(),tableChange.Volume>=0&&this._data.ReadByte(),tableChange.Balance>=0&&this._data.ReadByte(),chorus>=0&&this._data.ReadByte(),reverb>=0&&this._data.ReadByte(),phaser>=0&&this._data.ReadByte(),tremolo>=0&&this._data.ReadByte(),tableChange.Tempo>=0&&(tableChange.Duration=AlphaTab.Platform.Std.ReadSignedByte(this._data),this._versionNumber>=510&&this._data.ReadByte()),this._versionNumber>=400&&this._data.ReadByte(),this._versionNumber>=500&&this._data.ReadByte(),this._versionNumber>=510&&(this.ReadStringIntByte(),this.ReadStringIntByte()),tableChange.Volume>=0){var volumeAutomation=new AlphaTab.Model.Automation;volumeAutomation.IsLinear=!0,volumeAutomation.Type=AlphaTab.Model.AutomationType.Volume,volumeAutomation.Value=tableChange.Volume,beat.Automations.push(volumeAutomation)}if(tableChange.Balance>=0){var balanceAutomation=new AlphaTab.Model.Automation;balanceAutomation.IsLinear=!0,balanceAutomation.Type=AlphaTab.Model.AutomationType.Balance,balanceAutomation.Value=tableChange.Balance,beat.Automations.push(balanceAutomation)}if(tableChange.Instrument>=0){var instrumentAutomation=new AlphaTab.Model.Automation;instrumentAutomation.IsLinear=!0,instrumentAutomation.Type=AlphaTab.Model.AutomationType.Instrument,instrumentAutomation.Value=tableChange.Instrument,beat.Automations.push(instrumentAutomation)}if(tableChange.Tempo>=0){var tempoAutomation=new AlphaTab.Model.Automation;tempoAutomation.IsLinear=!0,tempoAutomation.Type=AlphaTab.Model.AutomationType.Tempo,tempoAutomation.Value=tableChange.Tempo,beat.Automations.push(tempoAutomation),beat.Voice.Bar.get_MasterBar().TempoAutomation=tempoAutomation}},ReadNote:function(track,bar,voice,beat,stringIndex){var newNote=new AlphaTab.Model.Note;newNote.String=track.Tuning.length-stringIndex;var flags=this._data.ReadByte();if(0!=(2&flags)?newNote.Accentuated=AlphaTab.Model.AccentuationType.Heavy:0!=(64&flags)&&(newNote.Accentuated=AlphaTab.Model.AccentuationType.Normal),newNote.IsGhost=0!=(4&flags),0!=(32&flags)){var noteType=this._data.ReadByte();3==noteType?newNote.IsDead=!0:2==noteType&&(newNote.IsTieDestination=!0)}if(0!=(1&flags)&&this._versionNumber<500&&(this._data.ReadByte(),this._data.ReadByte()),0!=(16&flags)){var dynamicNumber=AlphaTab.Platform.Std.ReadSignedByte(this._data);newNote.Dynamic=this.ToDynamicValue(dynamicNumber),beat.Dynamic=newNote.Dynamic}if(0!=(32&flags)&&(newNote.Fret=AlphaTab.Platform.Std.ReadSignedByte(this._data)),0!=(128&flags)&&(newNote.LeftHandFinger=AlphaTab.Platform.Std.ReadSignedByte(this._data),newNote.RightHandFinger=AlphaTab.Platform.Std.ReadSignedByte(this._data),newNote.IsFingering=!0),this._versionNumber>=500){0!=(1&flags)&&(newNote.DurationPercent=this.ReadDouble());var flags2=this._data.ReadByte();newNote.AccidentalMode=0!=(2&flags2)?AlphaTab.Model.NoteAccidentalMode.SwapAccidentals:AlphaTab.Model.NoteAccidentalMode.Default}beat.AddNote(newNote),0!=(8&flags)&&this.ReadNoteEffects(track,voice,beat,newNote)},ToDynamicValue:function(value){switch(value){case 1:return AlphaTab.Model.DynamicValue.PPP;case 2:return AlphaTab.Model.DynamicValue.PP;case 3:return AlphaTab.Model.DynamicValue.P;case 4:return AlphaTab.Model.DynamicValue.MP;case 5:return AlphaTab.Model.DynamicValue.MF;case 6:return AlphaTab.Model.DynamicValue.F;case 7:return AlphaTab.Model.DynamicValue.FF;case 8:return AlphaTab.Model.DynamicValue.FFF;default:return AlphaTab.Model.DynamicValue.F}},ReadNoteEffects:function(track,voice,beat,note){var flags=this._data.ReadByte(),flags2=0;this._versionNumber>=400&&(flags2=this._data.ReadByte()),0!=(1&flags)&&this.ReadBend(note),0!=(16&flags)&&this.ReadGrace(voice,note),0!=(4&flags2)&&this.ReadTremoloPicking(beat),0!=(8&flags2)?this.ReadSlide(note):this._versionNumber<400&&0!=(4&flags)&&(note.SlideType=AlphaTab.Model.SlideType.Shift),0!=(16&flags2)?this.ReadArtificialHarmonic(note):this._versionNumber<400&&(0!=(4&flags)&&(note.HarmonicType=AlphaTab.Model.HarmonicType.Natural,note.HarmonicValue=this.DeltaFretToHarmonicValue(note.Fret)),0!=(8&flags)&&(note.HarmonicType=AlphaTab.Model.HarmonicType.Artificial)),0!=(32&flags2)&&this.ReadTrill(note),note.IsLetRing=0!=(8&flags),note.IsHammerPullOrigin=0!=(2&flags),0!=(64&flags2)&&(note.Vibrato=AlphaTab.Model.VibratoType.Slight),note.IsPalmMute=0!=(2&flags2),note.IsStaccato=0!=(1&flags2)},ReadBend:function(note){this._data.ReadByte(),this.ReadInt32();var pointCount=this.ReadInt32();if(pointCount>0)for(var i=0;pointCount>i;i++){var point=new AlphaTab.Model.BendPoint(0,0);point.Offset=this.ReadInt32(),point.Value=this.ReadInt32()/25|0,this.ReadBool(),note.BendPoints.push(point)}},ReadGrace:function(voice,note){var graceBeat=new AlphaTab.Model.Beat,graceNote=new AlphaTab.Model.Note;graceNote.String=note.String,graceNote.Fret=AlphaTab.Platform.Std.ReadSignedByte(this._data),graceBeat.Duration=AlphaTab.Model.Duration.ThirtySecond,graceBeat.Dynamic=this.ToDynamicValue(AlphaTab.Platform.Std.ReadSignedByte(this._data));var transition=AlphaTab.Platform.Std.ReadSignedByte(this._data);switch(transition){case 0:break;case 1:graceNote.SlideType=AlphaTab.Model.SlideType.Legato,graceNote.SlideTarget=note;break;case 2:break;case 3:graceNote.IsHammerPullOrigin=!0}if(graceNote.Dynamic=graceBeat.Dynamic,this._data.Skip(1),this._versionNumber<500)graceBeat.GraceType=AlphaTab.Model.GraceType.BeforeBeat;else{var flags=this._data.ReadByte();graceNote.IsDead=0!=(1&flags),graceBeat.GraceType=0!=(2&flags)?AlphaTab.Model.GraceType.OnBeat:AlphaTab.Model.GraceType.BeforeBeat}graceBeat.AddNote(graceNote),voice.AddGraceBeat(graceBeat)},ReadTremoloPicking:function(beat){var speed=this._data.ReadByte();switch(speed){case 1:beat.TremoloSpeed=AlphaTab.Model.Duration.Eighth;break;case 2:beat.TremoloSpeed=AlphaTab.Model.Duration.Sixteenth;break;case 3:beat.TremoloSpeed=AlphaTab.Model.Duration.ThirtySecond}},ReadSlide:function(note){if(this._versionNumber>=500){var type=AlphaTab.Platform.Std.ReadSignedByte(this._data);switch(type){case 1:note.SlideType=AlphaTab.Model.SlideType.Shift;break;case 2:note.SlideType=AlphaTab.Model.SlideType.Legato;break;case 4:note.SlideType=AlphaTab.Model.SlideType.OutDown;break;case 8:note.SlideType=AlphaTab.Model.SlideType.OutUp;break;case 16:note.SlideType=AlphaTab.Model.SlideType.IntoFromBelow;break;case 32:note.SlideType=AlphaTab.Model.SlideType.IntoFromAbove;break;default:note.SlideType=AlphaTab.Model.SlideType.None}}else{var type=AlphaTab.Platform.Std.ReadSignedByte(this._data);switch(type){case 1:note.SlideType=AlphaTab.Model.SlideType.Shift;break;case 2:note.SlideType=AlphaTab.Model.SlideType.Legato;break;case 3:note.SlideType=AlphaTab.Model.SlideType.OutDown;break;case 4:note.SlideType=AlphaTab.Model.SlideType.OutUp;break;case-1:note.SlideType=AlphaTab.Model.SlideType.IntoFromBelow;break;case-2:note.SlideType=AlphaTab.Model.SlideType.IntoFromAbove;break;default:note.SlideType=AlphaTab.Model.SlideType.None}}},ReadArtificialHarmonic:function(note){var type=this._data.ReadByte();if(this._versionNumber>=500)switch(type){case 1:note.HarmonicType=AlphaTab.Model.HarmonicType.Natural,note.HarmonicValue=this.DeltaFretToHarmonicValue(note.Fret);break;case 2:{this._data.ReadByte(),this._data.ReadByte(),this._data.ReadByte()}note.HarmonicType=AlphaTab.Model.HarmonicType.Artificial;break;case 3:note.HarmonicType=AlphaTab.Model.HarmonicType.Tap,note.HarmonicValue=this.DeltaFretToHarmonicValue(this._data.ReadByte());break;case 4:note.HarmonicType=AlphaTab.Model.HarmonicType.Pinch,note.HarmonicValue=12;break;case 5:note.HarmonicType=AlphaTab.Model.HarmonicType.Semi,note.HarmonicValue=12}else if(this._versionNumber>=400)switch(type){case 1:note.HarmonicType=AlphaTab.Model.HarmonicType.Natural;break;case 3:note.HarmonicType=AlphaTab.Model.HarmonicType.Tap;break;case 4:note.HarmonicType=AlphaTab.Model.HarmonicType.Pinch;break;case 5:note.HarmonicType=AlphaTab.Model.HarmonicType.Semi;break;case 15:note.HarmonicType=AlphaTab.Model.HarmonicType.Artificial;break;case 17:note.HarmonicType=AlphaTab.Model.HarmonicType.Artificial;break;case 22:note.HarmonicType=AlphaTab.Model.HarmonicType.Artificial}},DeltaFretToHarmonicValue:function(deltaFret){switch(deltaFret){case 2:return 2.4;case 3:return 3.2;case 4:case 5:case 7:case 9:case 12:case 16:case 17:case 19:case 24:return deltaFret;case 8:return 8.2;case 10:return 9.6;case 14:case 15:return 14.7;case 21:case 22:return 21.7;default:return 12}},ReadTrill:function(note){switch(note.TrillValue=this._data.ReadByte()+note.get_StringTuning(),this._data.ReadByte()){case 1:note.TrillSpeed=AlphaTab.Model.Duration.Sixteenth;break;case 2:note.TrillSpeed=AlphaTab.Model.Duration.ThirtySecond;break;case 3:note.TrillSpeed=AlphaTab.Model.Duration.SixtyFourth}},ReadDouble:function(){var bytes=new Uint8Array(8);this._data.Read(bytes,0,bytes.length);var sign=1-(bytes[0]>>7<<1),exp=(bytes[0]<<4&2047|bytes[1]>>4)-1023,sig=this.GetDoubleSig(bytes);return 0==sig&&-1023==exp?0:sign*(1+Math.pow(2,-52)*sig)*Math.pow(2,exp)},GetDoubleSig:function(bytes){return 4294967296*((15&bytes[1])<<16|bytes[2]<<8|bytes[3])+2147483648*(bytes[4]>>7)+((127&bytes[4])<<24|bytes[5]<<16|bytes[6]<<8|bytes[7])|0},ReadColor:function(){var r=this._data.ReadByte(),g=this._data.ReadByte(),b=this._data.ReadByte();return this._data.Skip(1),new AlphaTab.Platform.Model.Color(r,g,b,255)},ReadBool:function(){return 0!=this._data.ReadByte()},ReadInt32:function(){var bytes=new Uint8Array(4);return this._data.Read(bytes,0,4),bytes[0]|bytes[1]<<8|bytes[2]<<16|bytes[3]<<24},ReadStringIntUnused:function(){return this._data.Skip(4),this.ReadString(this._data.ReadByte())},ReadStringInt:function(){return this.ReadString(this.ReadInt32())},ReadStringIntByte:function(){var length=this.ReadInt32()-1;return this._data.ReadByte(),this.ReadString(length)},ReadString:function(length){var b=new Uint8Array(length);return this._data.Read(b,0,b.length),AlphaTab.Platform.Std.ToString(b)},ReadStringByteLength:function(length){var stringLength=this._data.ReadByte(),s=this.ReadString(stringLength);return length>stringLength&&this._data.Skip(length-stringLength),s}},$StaticConstructor(function(){AlphaTab.Importer.Gp3To5Importer.VersionString="FICHIER GUITAR PRO ",AlphaTab.Importer.Gp3To5Importer.BendStep=25}),AlphaTab.Importer.Gp3To5Importer.ToStrokeValue=function(value){switch(value){case 1:return 30;case 2:return 30;case 3:return 60;case 4:return 120;case 5:return 240;case 6:return 480;default:return 0}},$Inherit(AlphaTab.Importer.Gp3To5Importer,AlphaTab.Importer.ScoreImporter),AlphaTab.Importer.GpxFile=function(){this.FileName=null,this.FileSize=0,this.Data=null},AlphaTab.Importer.GpxFileSystem=function(){this.FileFilter=null,this.Files=null,this.Files=[],this.FileFilter=$CreateAnonymousDelegate(this,function(){return!0})},AlphaTab.Importer.GpxFileSystem.prototype={Load:function(s){var src=new AlphaTab.IO.BitReader(s);this.ReadBlock(src)},ReadHeader:function(src){return this.GetString(src.ReadBytes(4),0,4)},Decompress:function(src,skipHeader){var buffer,uncompressed=AlphaTab.IO.ByteBuffer.Empty(),expectedLength=this.GetInteger(src.ReadBytes(4),0);try{for(;uncompressed.get_Length()<expectedLength;){var flag=src.ReadBits(1);if(1==flag){var wordSize=src.ReadBits(4),offset=src.ReadBitsReversed(wordSize),size=src.ReadBitsReversed(wordSize),sourcePosition=uncompressed.get_Length()-offset,toRead=Math.min(offset,size);buffer=uncompressed.GetBuffer(),uncompressed.Write(buffer,0|sourcePosition,toRead)}else for(var size=src.ReadBitsReversed(2),i=0;size>i;i++)uncompressed.WriteByte(src.ReadByte())}}catch($$e2){}buffer=uncompressed.GetBuffer();var resultOffset=skipHeader?4:0,resultSize=uncompressed.get_Length()-resultOffset,result=new Uint8Array(0|resultSize);return result.set(buffer.subarray(resultOffset,resultOffset+resultSize|0),0),result},ReadBlock:function(data){var header=this.ReadHeader(data);if("BCFZ"==header)this.ReadUncompressedBlock(this.Decompress(data,!0));else{if("BCFS"!=header)throw $CreateException(new AlphaTab.Importer.UnsupportedFormatException,new Error);this.ReadUncompressedBlock(data.ReadAll())}},ReadUncompressedBlock:function(data){for(var sectorSize=4096,offset=sectorSize;offset+3<data.length;){var entryType=this.GetInteger(data,offset);if(2==entryType){var file=new AlphaTab.Importer.GpxFile;file.FileName=this.GetString(data,offset+4,127),file.FileSize=this.GetInteger(data,offset+140);var storeFile=null==this.FileFilter||this.FileFilter(file.FileName);storeFile&&this.Files.push(file);for(var dataPointerOffset=offset+148,sector=0,sectorCount=0,fileData=storeFile?AlphaTab.IO.ByteBuffer.WithCapactiy(file.FileSize):null;0!=(sector=this.GetInteger(data,dataPointerOffset+4*sectorCount++));)offset=sector*sectorSize,storeFile&&fileData.Write(data,offset,sectorSize);if(storeFile){file.Data=new Uint8Array(0|Math.min(file.FileSize,fileData.get_Length()));var raw=fileData.ToArray();file.Data.set(raw.subarray(0,0+file.Data.length),0)}}offset+=sectorSize}},GetString:function(data,offset,length){for(var buf=new Array,i=0;length>i;i++){var code=255&data[offset+i];if(0==code)break;buf.push(String.fromCharCode(code))}return buf.join("")},GetInteger:function(data,offset){return data[offset+3]<<24|data[offset+2]<<16|data[offset+1]<<8|data[offset]}},$StaticConstructor(function(){AlphaTab.Importer.GpxFileSystem.HeaderBcFs="BCFS",AlphaTab.Importer.GpxFileSystem.HeaderBcFz="BCFZ",AlphaTab.Importer.GpxFileSystem.ScoreGpif="score.gpif"}),AlphaTab.Importer.GpxImporter=function(){AlphaTab.Importer.ScoreImporter.call(this)},AlphaTab.Importer.GpxImporter.prototype={ReadScore:function(){var fileSystem=new AlphaTab.Importer.GpxFileSystem;fileSystem.FileFilter=$CreateAnonymousDelegate(this,function(s){return"score.gpif"==s}),fileSystem.Load(this._data);var data=fileSystem.Files[0].Data,xml=AlphaTab.Platform.Std.ToString(data);fileSystem.Files=null,fileSystem=null;var parser=new AlphaTab.Importer.GpxParser;return parser.ParseXml(xml),parser.Score.Finish(),parser.Score}},$Inherit(AlphaTab.Importer.GpxImporter,AlphaTab.Importer.ScoreImporter),AlphaTab.Importer.GpxRhythm=function(){this.Dots=0,this.TupletDenominator=0,this.TupletNumerator=0,this.Value=AlphaTab.Model.Duration.Whole,this.TupletDenominator=1,this.TupletNumerator=1,this.Value=AlphaTab.Model.Duration.Quarter},AlphaTab.Importer.GpxParser=function(){this._automations=null,this._tracksMapping=null,this._tracksById=null,this._masterBars=null,this._barsOfMasterBar=null,this._barsById=null,this._voicesOfBar=null,this._voiceById=null,this._beatsOfVoice=null,this._rhythmOfBeat=null,this._beatById=null,this._rhythmById=null,this._noteById=null,this._notesOfBeat=null,this._tappedNotes=null,this.Score=null},AlphaTab.Importer.GpxParser.prototype={ParseXml:function(xml){this._automations={},this._tracksMapping=new Array(0),this._tracksById={},this._masterBars=[],this._barsOfMasterBar=[],this._voicesOfBar={},this._barsById={},this._voiceById={},this._beatsOfVoice={},this._beatById={},this._rhythmOfBeat={},this._rhythmById={},this._notesOfBeat={},this._noteById={},this._tappedNotes={},this.ParseDom(AlphaTab.Platform.Std.LoadXml(xml))},ParseDom:function(dom){var root=dom.get_DocumentElement();if(null!=root){if("GPIF"!=root.get_LocalName())throw $CreateException(new AlphaTab.Importer.UnsupportedFormatException,new Error);this.Score=new AlphaTab.Model.Score,AlphaTab.Platform.Std.IterateChildren(root,$CreateAnonymousDelegate(this,function(n){if(n.get_NodeType()==AlphaTab.Xml.XmlNodeType.Element)switch(n.get_LocalName()){case"Score":this.ParseScoreNode(n);break;case"MasterTrack":this.ParseMasterTrackNode(n);break;case"Tracks":this.ParseTracksNode(n);break;case"MasterBars":this.ParseMasterBarsNode(n);break;case"Bars":this.ParseBars(n);break;case"Voices":this.ParseVoices(n);break;case"Beats":this.ParseBeats(n);break;case"Notes":this.ParseNotes(n);break;case"Rhythms":this.ParseRhythms(n)}})),this.BuildModel()}},ParseScoreNode:function(element){AlphaTab.Platform.Std.IterateChildren(element,$CreateAnonymousDelegate(this,function(c){if(c.get_NodeType()==AlphaTab.Xml.XmlNodeType.Element)switch(c.get_LocalName()){case"Title":this.Score.Title=this.GetValue(c.get_FirstChild());break;case"SubTitle":this.Score.SubTitle=this.GetValue(c.get_FirstChild());break;case"Artist":this.Score.Artist=this.GetValue(c.get_FirstChild());break;case"Album":this.Score.Album=this.GetValue(c.get_FirstChild());break;case"Words":this.Score.Words=this.GetValue(c.get_FirstChild());break;case"Music":this.Score.Music=this.GetValue(c.get_FirstChild());break;case"WordsAndMusic":if(null!=c.get_FirstChild()&&""!=c.get_FirstChild().toString()){var wordsAndMusic=this.GetValue(c.get_FirstChild());null==wordsAndMusic||0==wordsAndMusic.length||null!=this.Score.Words&&0!=this.Score.Words.length||(this.Score.Words=wordsAndMusic),null==wordsAndMusic||0==wordsAndMusic.length||null!=this.Score.Music&&0!=this.Score.Music.length||(this.Score.Music=wordsAndMusic)}break;case"Copyright":this.Score.Copyright=this.GetValue(c.get_FirstChild());break;case"Tabber":this.Score.Tab=this.GetValue(c.get_FirstChild());break;case"Instructions":this.Score.Instructions=this.GetValue(c.get_FirstChild());break;case"Notices":this.Score.Notices=this.GetValue(c.get_FirstChild())}}))},ParseMasterTrackNode:function(node){AlphaTab.Platform.Std.IterateChildren(node,$CreateAnonymousDelegate(this,function(c){if(c.get_NodeType()==AlphaTab.Xml.XmlNodeType.Element)switch(c.get_LocalName()){case"Automations":this.ParseAutomations(c);break;case"Tracks":this._tracksMapping=this.GetValue(c).split(" ")}}))},ParseAutomations:function(node){AlphaTab.Platform.Std.IterateChildren(node,$CreateAnonymousDelegate(this,function(c){if(c.get_NodeType()==AlphaTab.Xml.XmlNodeType.Element)switch(c.get_LocalName()){case"Automation":this.ParseAutomation(c)}}))},ParseAutomation:function(node){var type=null,isLinear=!1,barId=null,ratioPosition=0,value=0,reference=0,text=null;if(AlphaTab.Platform.Std.IterateChildren(node,$CreateAnonymousDelegate(this,function(c){if(c.get_NodeType()==AlphaTab.Xml.XmlNodeType.Element)switch(c.get_LocalName()){case"Type":type=this.GetValue(c);break;case"Linear":isLinear="true"==this.GetValue(c).toLowerCase();break;case"Bar":barId=this.GetValue(c);break;case"Position":ratioPosition=AlphaTab.Platform.Std.ParseFloat(this.GetValue(c));break;case"Value":var parts=this.GetValue(c).split(" ");value=AlphaTab.Platform.Std.ParseFloat(parts[0]),reference=AlphaTab.Platform.Std.ParseInt(parts[1]);break;case"Text":text=this.GetValue(c)}})),null!=type){var automation=null;switch(type){case"Tempo":automation=AlphaTab.Model.Automation.BuildTempoAutomation(isLinear,ratioPosition,value,reference)}null!=automation&&(automation.Text=text),null!=barId&&(this._automations.hasOwnProperty(barId)||(this._automations[barId]=[]),this._automations[barId].push(automation))}},ParseTracksNode:function(node){AlphaTab.Platform.Std.IterateChildren(node,$CreateAnonymousDelegate(this,function(c){if(c.get_NodeType()==AlphaTab.Xml.XmlNodeType.Element)switch(c.get_LocalName()){case"Track":this.ParseTrack(c)}}))},ParseTrack:function(node){var track=new AlphaTab.Model.Track,trackId=node.get_Attributes().Get("id").get_Value();AlphaTab.Platform.Std.IterateChildren(node,$CreateAnonymousDelegate(this,function(c){if(c.get_NodeType()==AlphaTab.Xml.XmlNodeType.Element)switch(c.get_LocalName()){case"Name":track.Name=this.GetValue(c);break;case"ShortName":track.ShortName=this.GetValue(c);break;case"Properties":this.ParseTrackProperties(track,c);break;case"GeneralMidi":this.ParseGeneralMidi(track,c);break;case"PlaybackState":var state=this.GetValue(c);track.PlaybackInfo.IsSolo="Solo"==state,track.PlaybackInfo.IsMute="Mute"==state}})),this._tracksById[trackId]=track},ParseDiagramCollection:function(track,node){var items=this.FindChildElement(node,"Items");AlphaTab.Platform.Std.IterateChildren(items,$CreateAnonymousDelegate(this,function(c){if(c.get_NodeType()==AlphaTab.Xml.XmlNodeType.Element)switch(c.get_LocalName()){case"Item":this.ParseDiagramItem(track,c)}}))},ParseDiagramItem:function(track,node){var chord=new AlphaTab.Model.Chord,chordId=node.get_Attributes().Get("id").get_Value();chord.Name=node.get_Attributes().Get("name").get_Value(),track.Chords[chordId]=chord},FindChildElement:function(node,name){for(var i=0;i<node.get_ChildNodes().get_Count();i++){var c=node.get_ChildNodes().Get(i);if(null!=c&&c.get_NodeType()==AlphaTab.Xml.XmlNodeType.Element&&c.get_LocalName()==name)return c}return null},ParseTrackProperties:function(track,node){AlphaTab.Platform.Std.IterateChildren(node,$CreateAnonymousDelegate(this,function(c){if(c.get_NodeType()==AlphaTab.Xml.XmlNodeType.Element)switch(c.get_LocalName()){case"Property":this.ParseTrackProperty(track,c)}}))},ParseTrackProperty:function(track,node){var propertyName=node.get_Attributes().Get("name").get_Value();switch(propertyName){case"Tuning":for(var tuningParts=this.GetValue(this.FindChildElement(node,"Pitches")).split(" "),tuning=new Int32Array(tuningParts.length),i=0;i<tuning.length;i++)tuning[tuning.length-1-i]=AlphaTab.Platform.Std.ParseInt(tuningParts[i]);track.Tuning=tuning;break;case"DiagramCollection":this.ParseDiagramCollection(track,node);break;case"CapoFret":track.Capo=AlphaTab.Platform.Std.ParseInt(this.GetValue(this.FindChildElement(node,"Fret")))}},ParseGeneralMidi:function(track,node){track.PlaybackInfo.Port=AlphaTab.Platform.Std.ParseInt(this.GetValue(this.FindChildElement(node,"Port"))),track.PlaybackInfo.Program=AlphaTab.Platform.Std.ParseInt(this.GetValue(this.FindChildElement(node,"Program"))),track.PlaybackInfo.PrimaryChannel=AlphaTab.Platform.Std.ParseInt(this.GetValue(this.FindChildElement(node,"PrimaryChannel"))),track.PlaybackInfo.SecondaryChannel=AlphaTab.Platform.Std.ParseInt(this.GetValue(this.FindChildElement(node,"SecondaryChannel"))),track.IsPercussion=null!=node.get_Attributes().Get("table")&&"Percussion"==node.get_Attributes().Get("table").get_Value()},ParseMasterBarsNode:function(node){AlphaTab.Platform.Std.IterateChildren(node,$CreateAnonymousDelegate(this,function(c){if(c.get_NodeType()==AlphaTab.Xml.XmlNodeType.Element)switch(c.get_LocalName()){case"MasterBar":this.ParseMasterBar(c)}}))},ParseMasterBar:function(node){var masterBar=new AlphaTab.Model.MasterBar;AlphaTab.Platform.Std.IterateChildren(node,$CreateAnonymousDelegate(this,function(c){if(c.get_NodeType()==AlphaTab.Xml.XmlNodeType.Element)switch(c.get_LocalName()){case"Time":var timeParts=this.GetValue(c).split("/");masterBar.TimeSignatureNumerator=AlphaTab.Platform.Std.ParseInt(timeParts[0]),masterBar.TimeSignatureDenominator=AlphaTab.Platform.Std.ParseInt(timeParts[1]);break;case"DoubleBar":masterBar.IsDoubleBar=!0;break;case"Section":masterBar.Section=new AlphaTab.Model.Section,masterBar.Section.Marker=this.GetValue(this.FindChildElement(c,"Letter")),masterBar.Section.Text=this.GetValue(this.FindChildElement(c,"Text"));break;case"Repeat":"true"==c.get_Attributes().Get("start").get_Value().toLowerCase()&&(masterBar.IsRepeatStart=!0),"true"==c.get_Attributes().Get("end").get_Value().toLowerCase()&&null!=c.get_Attributes().Get("count").get_Value()&&(masterBar.RepeatCount=AlphaTab.Platform.Std.ParseInt(c.get_Attributes().Get("count").get_Value()));break;case"AlternateEndings":for(var alternateEndings=this.GetValue(c).split(" "),i=0,k=0;k<alternateEndings.length;k++)i|=1<<-1+AlphaTab.Platform.Std.ParseInt(alternateEndings[i]);masterBar.AlternateEndings=i;break;case"Bars":this._barsOfMasterBar.push(this.GetValue(c).split(" "));break;case"TripletFeel":switch(this.GetValue(c)){case"NoTripletFeel":masterBar.TripletFeel=AlphaTab.Model.TripletFeel.NoTripletFeel;break;case"Triplet8th":masterBar.TripletFeel=AlphaTab.Model.TripletFeel.Triplet8th;break;case"Triplet16th":masterBar.TripletFeel=AlphaTab.Model.TripletFeel.Triplet16th;break;case"Dotted8th":masterBar.TripletFeel=AlphaTab.Model.TripletFeel.Dotted8th;break;case"Dotted16th":masterBar.TripletFeel=AlphaTab.Model.TripletFeel.Dotted16th;break;case"Scottish8th":masterBar.TripletFeel=AlphaTab.Model.TripletFeel.Scottish8th;break;case"Scottish16th":masterBar.TripletFeel=AlphaTab.Model.TripletFeel.Scottish16th}break;case"Key":masterBar.KeySignature=AlphaTab.Platform.Std.ParseInt(this.GetValue(this.FindChildElement(c,"AccidentalCount")))}})),this._masterBars.push(masterBar)},ParseBars:function(node){AlphaTab.Platform.Std.IterateChildren(node,$CreateAnonymousDelegate(this,function(c){if(c.get_NodeType()==AlphaTab.Xml.XmlNodeType.Element)switch(c.get_LocalName()){case"Bar":this.ParseBar(c)}}))},ParseBar:function(node){var bar=new AlphaTab.Model.Bar,barId=node.get_Attributes().Get("id").get_Value();AlphaTab.Platform.Std.IterateChildren(node,$CreateAnonymousDelegate(this,function(c){if(c.get_NodeType()==AlphaTab.Xml.XmlNodeType.Element)switch(c.get_LocalName()){case"Voices":this._voicesOfBar[barId]=this.GetValue(c).split(" ");break;case"Clef":switch(this.GetValue(c)){case"Neutral":bar.Clef=AlphaTab.Model.Clef.Neutral;break;case"G2":bar.Clef=AlphaTab.Model.Clef.G2;break;case"F4":bar.Clef=AlphaTab.Model.Clef.F4;break;case"C4":bar.Clef=AlphaTab.Model.Clef.C4;break;case"C3":bar.Clef=AlphaTab.Model.Clef.C3}}})),this._barsById[barId]=bar},ParseVoices:function(node){AlphaTab.Platform.Std.IterateChildren(node,$CreateAnonymousDelegate(this,function(c){if(c.get_NodeType()==AlphaTab.Xml.XmlNodeType.Element)switch(c.get_LocalName()){case"Voice":this.ParseVoice(c)}}))},ParseVoice:function(node){var voice=new AlphaTab.Model.Voice,voiceId=node.get_Attributes().Get("id").get_Value();AlphaTab.Platform.Std.IterateChildren(node,$CreateAnonymousDelegate(this,function(c){if(c.get_NodeType()==AlphaTab.Xml.XmlNodeType.Element)switch(c.get_LocalName()){case"Beats":this._beatsOfVoice[voiceId]=this.GetValue(c).split(" ")}})),this._voiceById[voiceId]=voice},ParseBeats:function(node){AlphaTab.Platform.Std.IterateChildren(node,$CreateAnonymousDelegate(this,function(c){if(c.get_NodeType()==AlphaTab.Xml.XmlNodeType.Element)switch(c.get_LocalName()){case"Beat":this.ParseBeat(c)}}))},ParseBeat:function(node){var beat=new AlphaTab.Model.Beat,beatId=node.get_Attributes().Get("id").get_Value();AlphaTab.Platform.Std.IterateChildren(node,$CreateAnonymousDelegate(this,function(c){if(c.get_NodeType()==AlphaTab.Xml.XmlNodeType.Element)switch(c.get_LocalName()){case"Notes":this._notesOfBeat[beatId]=this.GetValue(c).split(" ");break;case"Rhythm":this._rhythmOfBeat[beatId]=c.get_Attributes().Get("ref").get_Value();break;case"Fadding":"FadeIn"==this.GetValue(c)&&(beat.FadeIn=!0);break;case"Tremolo":switch(this.GetValue(c)){case"1/2":beat.TremoloSpeed=AlphaTab.Model.Duration.Eighth;break;case"1/4":beat.TremoloSpeed=AlphaTab.Model.Duration.Sixteenth;break;case"1/8":beat.TremoloSpeed=AlphaTab.Model.Duration.ThirtySecond}break;case"Chord":beat.ChordId=this.GetValue(c);break;case"Hairpin":switch(this.GetValue(c)){case"Crescendo":beat.Crescendo=AlphaTab.Model.CrescendoType.Crescendo;break;case"Decrescendo":beat.Crescendo=AlphaTab.Model.CrescendoType.Decrescendo}break;case"Arpeggio":beat.BrushType="Up"==this.GetValue(c)?AlphaTab.Model.BrushType.ArpeggioUp:AlphaTab.Model.BrushType.ArpeggioDown;break;case"Properties":this.ParseBeatProperties(c,beat);break;case"FreeText":beat.Text=this.GetValue(c);break;case"Dynamic":switch(this.GetValue(c)){case"PPP":beat.Dynamic=AlphaTab.Model.DynamicValue.PPP;break;case"PP":beat.Dynamic=AlphaTab.Model.DynamicValue.PP;break;case"P":beat.Dynamic=AlphaTab.Model.DynamicValue.P;break;case"MP":beat.Dynamic=AlphaTab.Model.DynamicValue.MP;break;case"MF":beat.Dynamic=AlphaTab.Model.DynamicValue.MF;break;case"F":beat.Dynamic=AlphaTab.Model.DynamicValue.F;break;case"FF":beat.Dynamic=AlphaTab.Model.DynamicValue.FF;break;case"FFF":beat.Dynamic=AlphaTab.Model.DynamicValue.FFF}break;case"GraceNotes":switch(this.GetValue(c)){case"OnBeat":beat.GraceType=AlphaTab.Model.GraceType.OnBeat;

break;case"BeforeBeat":beat.GraceType=AlphaTab.Model.GraceType.BeforeBeat}}})),this._beatById[beatId]=beat},ParseBeatProperties:function(node,beat){var isWhammy=!1,whammyOrigin=null,whammyMiddleValue=null,whammyMiddleOffset1=null,whammyMiddleOffset2=null,whammyDestination=null;if(AlphaTab.Platform.Std.IterateChildren(node,$CreateAnonymousDelegate(this,function(c){if(c.get_NodeType()==AlphaTab.Xml.XmlNodeType.Element)switch(c.get_LocalName()){case"Property":var name=c.get_Attributes().Get("name").get_Value();switch(name){case"Brush":beat.BrushType="Up"==this.GetValue(this.FindChildElement(c,"Direction"))?AlphaTab.Model.BrushType.BrushUp:AlphaTab.Model.BrushType.BrushDown;break;case"PickStroke":beat.PickStroke="Up"==this.GetValue(this.FindChildElement(c,"Direction"))?AlphaTab.Model.PickStrokeType.Up:AlphaTab.Model.PickStrokeType.Down;break;case"Slapped":null!=this.FindChildElement(c,"Enable")&&(beat.Slap=!0);break;case"Popped":null!=this.FindChildElement(c,"Enable")&&(beat.Pop=!0);break;case"VibratoWTremBar":switch(this.GetValue(this.FindChildElement(c,"Strength"))){case"Wide":beat.Vibrato=AlphaTab.Model.VibratoType.Wide;break;case"Slight":beat.Vibrato=AlphaTab.Model.VibratoType.Slight}break;case"WhammyBar":isWhammy=!0;break;case"WhammyBarExtend":case"WhammyBarOriginValue":null==whammyOrigin&&(whammyOrigin=new AlphaTab.Model.BendPoint(0,0)),whammyOrigin.Value=this.ToBendValue(AlphaTab.Platform.Std.ParseFloat(this.GetValue(this.FindChildElement(c,"Float"))));break;case"WhammyBarOriginOffset":null==whammyOrigin&&(whammyOrigin=new AlphaTab.Model.BendPoint(0,0)),whammyOrigin.Offset=this.ToBendOffset(AlphaTab.Platform.Std.ParseFloat(this.GetValue(this.FindChildElement(c,"Float"))));break;case"WhammyBarMiddleValue":whammyMiddleValue=this.ToBendValue(AlphaTab.Platform.Std.ParseFloat(this.GetValue(this.FindChildElement(c,"Float"))));break;case"WhammyBarMiddleOffset1":whammyMiddleOffset1=this.ToBendOffset(AlphaTab.Platform.Std.ParseFloat(this.GetValue(this.FindChildElement(c,"Float"))));break;case"WhammyBarMiddleOffset2":whammyMiddleOffset2=this.ToBendOffset(AlphaTab.Platform.Std.ParseFloat(this.GetValue(this.FindChildElement(c,"Float"))));break;case"WhammyBarDestinationValue":null==whammyDestination&&(whammyDestination=new AlphaTab.Model.BendPoint(60,0)),whammyDestination.Value=this.ToBendValue(AlphaTab.Platform.Std.ParseFloat(this.GetValue(this.FindChildElement(c,"Float"))));break;case"WhammyBarDestinationOffset":null==whammyDestination&&(whammyDestination=new AlphaTab.Model.BendPoint(0,0)),whammyDestination.Offset=this.ToBendOffset(AlphaTab.Platform.Std.ParseFloat(this.GetValue(this.FindChildElement(c,"Float"))))}}})),isWhammy){null==whammyOrigin&&(whammyOrigin=new AlphaTab.Model.BendPoint(0,0)),null==whammyDestination&&(whammyDestination=new AlphaTab.Model.BendPoint(60,0));var whammy=[];whammy.push(whammyOrigin),null!=whammyMiddleOffset1&&null!=whammyMiddleValue&&whammy.push(new AlphaTab.Model.BendPoint(whammyMiddleOffset1,whammyMiddleValue)),null!=whammyMiddleOffset2&&null!=whammyMiddleValue&&whammy.push(new AlphaTab.Model.BendPoint(whammyMiddleOffset2,whammyMiddleValue)),null==whammyMiddleOffset1&&null==whammyMiddleOffset2&&null!=whammyMiddleValue&&whammy.push(new AlphaTab.Model.BendPoint(30,whammyMiddleValue)),whammy.push(whammyDestination),beat.WhammyBarPoints=whammy}},ParseNotes:function(node){AlphaTab.Platform.Std.IterateChildren(node,$CreateAnonymousDelegate(this,function(c){if(c.get_NodeType()==AlphaTab.Xml.XmlNodeType.Element)switch(c.get_LocalName()){case"Note":this.ParseNote(c)}}))},ParseNote:function(node){var note=new AlphaTab.Model.Note,noteId=node.get_Attributes().Get("id").get_Value();AlphaTab.Platform.Std.IterateChildren(node,$CreateAnonymousDelegate(this,function(c){if(c.get_NodeType()==AlphaTab.Xml.XmlNodeType.Element)switch(c.get_LocalName()){case"Properties":this.ParseNoteProperties(c,note,noteId);break;case"AntiAccent":"normal"==this.GetValue(c).toLowerCase()&&(note.IsGhost=!0);break;case"LetRing":note.IsLetRing=!0;break;case"Trill":note.TrillValue=AlphaTab.Platform.Std.ParseInt(this.GetValue(c)),note.TrillSpeed=AlphaTab.Model.Duration.Sixteenth;break;case"Accent":var accentFlags=AlphaTab.Platform.Std.ParseInt(this.GetValue(c));0!=(1&accentFlags)&&(note.IsStaccato=!0),0!=(4&accentFlags)&&(note.Accentuated=AlphaTab.Model.AccentuationType.Heavy),0!=(8&accentFlags)&&(note.Accentuated=AlphaTab.Model.AccentuationType.Normal);break;case"Tie":"true"==c.get_Attributes().Get("origin").get_Value().toLowerCase()&&(note.IsTieOrigin=!0),"true"==c.get_Attributes().Get("destination").get_Value().toLowerCase()&&(note.IsTieDestination=!0);break;case"Vibrato":switch(this.GetValue(c)){case"Slight":note.Vibrato=AlphaTab.Model.VibratoType.Slight;break;case"Wide":note.Vibrato=AlphaTab.Model.VibratoType.Wide}break;case"LeftFingering":switch(note.IsFingering=!0,this.GetValue(c)){case"P":note.LeftHandFinger=AlphaTab.Model.Fingers.Thumb;break;case"I":note.LeftHandFinger=AlphaTab.Model.Fingers.IndexFinger;break;case"M":note.LeftHandFinger=AlphaTab.Model.Fingers.MiddleFinger;break;case"A":note.LeftHandFinger=AlphaTab.Model.Fingers.AnnularFinger;break;case"C":note.LeftHandFinger=AlphaTab.Model.Fingers.LittleFinger}break;case"RightFingering":switch(note.IsFingering=!0,this.GetValue(c)){case"P":note.RightHandFinger=AlphaTab.Model.Fingers.Thumb;break;case"I":note.RightHandFinger=AlphaTab.Model.Fingers.IndexFinger;break;case"M":note.RightHandFinger=AlphaTab.Model.Fingers.MiddleFinger;break;case"A":note.RightHandFinger=AlphaTab.Model.Fingers.AnnularFinger;break;case"C":note.RightHandFinger=AlphaTab.Model.Fingers.LittleFinger}}})),this._noteById[noteId]=note},ParseNoteProperties:function(node,note,noteId){var isBended=!1,bendOrigin=null,bendMiddleValue=null,bendMiddleOffset1=null,bendMiddleOffset2=null,bendDestination=null;if(AlphaTab.Platform.Std.IterateChildren(node,$CreateAnonymousDelegate(this,function(c){if(c.get_NodeType()==AlphaTab.Xml.XmlNodeType.Element)switch(c.get_LocalName()){case"Property":var name=c.get_Attributes().Get("name").get_Value();switch(name){case"String":note.String=AlphaTab.Platform.Std.ParseInt(this.GetValue(this.FindChildElement(c,"String")))+1;break;case"Fret":note.Fret=AlphaTab.Platform.Std.ParseInt(this.GetValue(this.FindChildElement(c,"Fret")));break;case"Tapped":this._tappedNotes[noteId]=!0;break;case"HarmonicType":var htype=this.FindChildElement(c,"HType");if(null!=htype)switch(this.GetValue(htype)){case"NoHarmonic":note.HarmonicType=AlphaTab.Model.HarmonicType.None;break;case"Natural":note.HarmonicType=AlphaTab.Model.HarmonicType.Natural;break;case"Artificial":note.HarmonicType=AlphaTab.Model.HarmonicType.Artificial;break;case"Pinch":note.HarmonicType=AlphaTab.Model.HarmonicType.Pinch;break;case"Tap":note.HarmonicType=AlphaTab.Model.HarmonicType.Tap;break;case"Semi":note.HarmonicType=AlphaTab.Model.HarmonicType.Semi;break;case"Feedback":note.HarmonicType=AlphaTab.Model.HarmonicType.Feedback}break;case"HarmonicFret":var hfret=this.FindChildElement(c,"HFret");null!=hfret&&(note.HarmonicValue=AlphaTab.Platform.Std.ParseFloat(this.GetValue(hfret)));break;case"Muted":null!=this.FindChildElement(c,"Enable")&&(note.IsDead=!0);break;case"PalmMuted":null!=this.FindChildElement(c,"Enable")&&(note.IsPalmMute=!0);break;case"Octave":note.Octave=AlphaTab.Platform.Std.ParseInt(this.GetValue(this.FindChildElement(c,"Number")))-1;break;case"Tone":note.Tone=AlphaTab.Platform.Std.ParseInt(this.GetValue(this.FindChildElement(c,"Step")));break;case"Bended":isBended=!0;break;case"BendOriginValue":null==bendOrigin&&(bendOrigin=new AlphaTab.Model.BendPoint(0,0)),bendOrigin.Value=this.ToBendValue(AlphaTab.Platform.Std.ParseFloat(this.GetValue(this.FindChildElement(c,"Float"))));break;case"BendOriginOffset":null==bendOrigin&&(bendOrigin=new AlphaTab.Model.BendPoint(0,0)),bendOrigin.Offset=this.ToBendOffset(AlphaTab.Platform.Std.ParseFloat(this.GetValue(this.FindChildElement(c,"Float"))));break;case"BendMiddleValue":bendMiddleValue=this.ToBendValue(AlphaTab.Platform.Std.ParseFloat(this.GetValue(this.FindChildElement(c,"Float"))));break;case"BendMiddleOffset1":bendMiddleOffset1=this.ToBendOffset(AlphaTab.Platform.Std.ParseFloat(this.GetValue(this.FindChildElement(c,"Float"))));break;case"BendMiddleOffset2":bendMiddleOffset2=this.ToBendOffset(AlphaTab.Platform.Std.ParseFloat(this.GetValue(this.FindChildElement(c,"Float"))));break;case"BendDestinationValue":null==bendDestination&&(bendDestination=new AlphaTab.Model.BendPoint(60,0)),bendDestination.Value=this.ToBendValue(AlphaTab.Platform.Std.ParseFloat(this.GetValue(this.FindChildElement(c,"Float"))));break;case"BendDestinationOffset":null==bendDestination&&(bendDestination=new AlphaTab.Model.BendPoint(0,0)),bendDestination.Offset=this.ToBendOffset(AlphaTab.Platform.Std.ParseFloat(this.GetValue(this.FindChildElement(c,"Float"))));break;case"HopoOrigin":null!=this.FindChildElement(c,"Enable")&&(note.IsHammerPullOrigin=!0);break;case"HopoDestination":break;case"Slide":var slideFlags=AlphaTab.Platform.Std.ParseInt(this.GetValue(this.FindChildElement(c,"Flags")));0!=(1&slideFlags)&&(note.SlideType=AlphaTab.Model.SlideType.Shift),0!=(2&slideFlags)&&(note.SlideType=AlphaTab.Model.SlideType.Legato),0!=(4&slideFlags)&&(note.SlideType=AlphaTab.Model.SlideType.OutDown),0!=(8&slideFlags)&&(note.SlideType=AlphaTab.Model.SlideType.OutUp),0!=(16&slideFlags)&&(note.SlideType=AlphaTab.Model.SlideType.IntoFromBelow),0!=(32&slideFlags)&&(note.SlideType=AlphaTab.Model.SlideType.IntoFromAbove)}}})),isBended){null==bendOrigin&&(bendOrigin=new AlphaTab.Model.BendPoint(0,0)),null==bendDestination&&(bendDestination=new AlphaTab.Model.BendPoint(60,0));var bend=[];bend.push(bendOrigin),null!=bendMiddleOffset1&&null!=bendMiddleValue&&bend.push(new AlphaTab.Model.BendPoint(bendMiddleOffset1,bendMiddleValue)),null!=bendMiddleOffset2&&null!=bendMiddleValue&&bend.push(new AlphaTab.Model.BendPoint(bendMiddleOffset2,bendMiddleValue)),null==bendMiddleOffset1&&null==bendMiddleOffset2&&null!=bendMiddleValue&&bend.push(new AlphaTab.Model.BendPoint(30,bendMiddleValue)),bend.push(bendDestination),note.BendPoints=bend}},ToBendValue:function(gpxValue){var converted=.04*gpxValue;return 0|converted},ToBendOffset:function(gpxOffset){var converted=.6*gpxOffset;return 0|converted},ParseRhythms:function(node){AlphaTab.Platform.Std.IterateChildren(node,$CreateAnonymousDelegate(this,function(c){if(c.get_NodeType()==AlphaTab.Xml.XmlNodeType.Element)switch(c.get_LocalName()){case"Rhythm":this.ParseRhythm(c)}}))},ParseRhythm:function(node){var rhythm=new AlphaTab.Importer.GpxRhythm,rhythmId=node.get_Attributes().Get("id").get_Value();AlphaTab.Platform.Std.IterateChildren(node,$CreateAnonymousDelegate(this,function(c){if(c.get_NodeType()==AlphaTab.Xml.XmlNodeType.Element)switch(c.get_LocalName()){case"NoteValue":switch(this.GetValue(c)){case"Whole":rhythm.Value=AlphaTab.Model.Duration.Whole;break;case"Half":rhythm.Value=AlphaTab.Model.Duration.Half;break;case"Quarter":rhythm.Value=AlphaTab.Model.Duration.Quarter;break;case"Eighth":rhythm.Value=AlphaTab.Model.Duration.Eighth;break;case"16th":rhythm.Value=AlphaTab.Model.Duration.Sixteenth;break;case"32nd":rhythm.Value=AlphaTab.Model.Duration.ThirtySecond;break;case"64th":rhythm.Value=AlphaTab.Model.Duration.SixtyFourth}break;case"PrimaryTuplet":rhythm.TupletNumerator=AlphaTab.Platform.Std.ParseInt(c.get_Attributes().Get("num").get_Value()),rhythm.TupletDenominator=AlphaTab.Platform.Std.ParseInt(c.get_Attributes().Get("den").get_Value());break;case"AugmentationDot":rhythm.Dots=AlphaTab.Platform.Std.ParseInt(c.get_Attributes().Get("count").get_Value())}})),this._rhythmById[rhythmId]=rhythm},GetValue:function(n){return AlphaTab.Platform.Std.GetNodeValue(n)},BuildModel:function(){for(var i=0,j=this._masterBars.length;j>i;i++){var masterBar=this._masterBars[i];this.Score.AddMasterBar(masterBar)}for(var trackIndex=0,$i9=0,$t9=this._tracksMapping,$l9=$t9.length,trackId=$t9[$i9];$l9>$i9;$i9++,trackId=$t9[$i9]){var track=this._tracksById[trackId];this.Score.AddTrack(track);for(var i=0,j=this._barsOfMasterBar.length;j>i;i++){var barIds=this._barsOfMasterBar[i],barId=barIds[trackIndex];"-1"!=barId&&track.AddBar(this._barsById[barId])}trackIndex++}for(var $i10=0,$t10=Object.keys(this._barsById),$l10=$t10.length,barId=$t10[$i10];$l10>$i10;$i10++,barId=$t10[$i10]){var bar=this._barsById[barId];if(this._voicesOfBar.hasOwnProperty(barId))for(var $i11=0,$t11=this._voicesOfBar[barId],$l11=$t11.length,voiceId=$t11[$i11];$l11>$i11;$i11++,voiceId=$t11[$i11])if("-1"!=voiceId)bar.AddVoice(this._voiceById[voiceId]);else{var voice=new AlphaTab.Model.Voice;bar.AddVoice(voice);var beat=new AlphaTab.Model.Beat;beat.IsEmpty=!0,beat.Duration=AlphaTab.Model.Duration.Quarter,voice.AddBeat(beat)}}for(var $i12=0,$t12=Object.keys(this._beatById),$l12=$t12.length,beatId=$t12[$i12];$l12>$i12;$i12++,beatId=$t12[$i12]){var beat=this._beatById[beatId],rhythmId=this._rhythmOfBeat[beatId],rhythm=this._rhythmById[rhythmId];if(beat.Duration=rhythm.Value,beat.Dots=rhythm.Dots,beat.TupletNumerator=rhythm.TupletNumerator,beat.TupletDenominator=rhythm.TupletDenominator,this._notesOfBeat.hasOwnProperty(beatId))for(var $i13=0,$t13=this._notesOfBeat[beatId],$l13=$t13.length,noteId=$t13[$i13];$l13>$i13;$i13++,noteId=$t13[$i13])"-1"!=noteId&&(beat.AddNote(this._noteById[noteId]),this._tappedNotes.hasOwnProperty(noteId)&&(beat.Tap=!0))}for(var $i14=0,$t14=Object.keys(this._voiceById),$l14=$t14.length,voiceId=$t14[$i14];$l14>$i14;$i14++,voiceId=$t14[$i14]){var voice=this._voiceById[voiceId];if(this._beatsOfVoice.hasOwnProperty(voiceId))for(var $i15=0,$t15=this._beatsOfVoice[voiceId],$l15=$t15.length,beatId=$t15[$i15];$l15>$i15;$i15++,beatId=$t15[$i15])"-1"!=beatId&&voice.AddBeat(this._beatById[beatId].Clone())}for(var $i16=0,$t16=Object.keys(this._automations),$l16=$t16.length,barId=$t16[$i16];$l16>$i16;$i16++,barId=$t16[$i16])for(var bar=this._barsById[barId],i=0,j=bar.Voices.length;j>i;i++){var v=bar.Voices[i];if(v.Beats.length>0)for(var k=0,l=this._automations[barId].length;l>k;k++){var automation=this._automations[barId][k];v.Beats[0].Automations.push(automation)}}for(var $i17=0,$t17=Object.keys(this._automations),$l17=$t17.length,barId=$t17[$i17];$l17>$i17;$i17++,barId=$t17[$i17])for(var automations=this._automations[barId],bar=this._barsById[barId],i=0,j=automations.length;j>i;i++){var automation=automations[i];automation.Type==AlphaTab.Model.AutomationType.Tempo&&("0"==barId&&(this.Score.Tempo=0|automation.Value,this.Score.TempoLabel=automation.Text),bar.get_MasterBar().TempoAutomation=automation)}}},$StaticConstructor(function(){AlphaTab.Importer.GpxParser.InvalidId="-1",AlphaTab.Importer.GpxParser.BendPointPositionFactor=.6,AlphaTab.Importer.GpxParser.BendPointValueFactor=.04}),AlphaTab.Importer.MixTableChange=function(){this.Volume=0,this.Balance=0,this.Instrument=0,this.TempoName=null,this.Tempo=0,this.Duration=0,this.Volume=-1,this.Balance=-1,this.Instrument=-1,this.TempoName=null,this.Tempo=-1,this.Duration=0},AlphaTab.Importer.MusicXml2Importer=function(){this._score=null,this._trackById=null,this._trackFirstMeasureNumber=0,this._maxVoices=0,AlphaTab.Importer.ScoreImporter.call(this)},AlphaTab.Importer.MusicXml2Importer.prototype={ReadScore:function(){this._trackById={};var dom,xml=AlphaTab.Platform.Std.ToString(this._data.ReadAll());try{dom=AlphaTab.Platform.Std.LoadXml(xml)}catch($$e3){throw $CreateException(new AlphaTab.Importer.UnsupportedFormatException,new Error)}return this._score=new AlphaTab.Model.Score,this._score.Tempo=120,this.ParseDom(dom),this._score.Finish(),this._score},ParseDom:function(dom){var root=dom.get_DocumentElement();if(null!=root)switch(root.get_LocalName()){case"score-partwise":this.ParsePartwise(root);break;case"score-timewise":break;default:throw $CreateException(new AlphaTab.Importer.UnsupportedFormatException,new Error)}},ParsePartwise:function(element){var version=element.GetAttribute("version");if(null!=version&&0!=version.length&&"2.0"!=version)throw $CreateException(new AlphaTab.Importer.UnsupportedFormatException,new Error);AlphaTab.Platform.Std.IterateChildren(element,$CreateAnonymousDelegate(this,function(c){if(c.get_NodeType()==AlphaTab.Xml.XmlNodeType.Element)switch(c.get_LocalName()){case"movement-title":this._score.Title=AlphaTab.Platform.Std.GetNodeValue(c.get_FirstChild());break;case"identification":this.ParseIdentification(c);break;case"part-list":this.ParsePartList(c);break;case"part":this.ParsePart(c)}}))},ParsePart:function(element){var id=element.GetAttribute("id"),track=this._trackById[id],isFirstMeasure=!0;AlphaTab.Platform.Std.IterateChildren(element,$CreateAnonymousDelegate(this,function(c){if(c.get_NodeType()==AlphaTab.Xml.XmlNodeType.Element)switch(c.get_LocalName()){case"measure":this.ParseMeasure(c,track,isFirstMeasure),isFirstMeasure=!1}}))},ParseMeasure:function(element,track,isFirstMeasure){var barIndex=0;isFirstMeasure?(this._trackFirstMeasureNumber=AlphaTab.Platform.Std.ParseInt(element.GetAttribute("number")),barIndex=0):barIndex=AlphaTab.Platform.Std.ParseInt(element.GetAttribute("number"))-this._trackFirstMeasureNumber;for(var bar=null,masterBar=null,i=track.Bars.length;barIndex>=i;i++){bar=new AlphaTab.Model.Bar,masterBar=this.GetOrCreateMasterBar(barIndex),track.AddBar(bar);for(var j=0;j<this._maxVoices;j++){var emptyVoice=new AlphaTab.Model.Voice;bar.AddVoice(emptyVoice);var emptyBeat=function(){var $v1=new AlphaTab.Model.Beat;return $v1.IsEmpty=!0,$v1}.call(this);emptyVoice.AddBeat(emptyBeat)}}var chord=!1,isFirstBeat=!0;AlphaTab.Platform.Std.IterateChildren(element,$CreateAnonymousDelegate(this,function(c){if(c.get_NodeType()==AlphaTab.Xml.XmlNodeType.Element)switch(c.get_LocalName()){case"note":chord=this.ParseNoteBeat(c,track,bar,chord,isFirstBeat),isFirstBeat=!1;break;case"forward":break;case"direction":this.ParseDirection(c,masterBar);break;case"attributes":this.ParseAttributes(c,bar,masterBar);break;case"harmony":break;case"sound":break;case"barline":}}))},ParseNoteBeat:function(element,track,bar,chord,isFirstBeat){var voiceIndex=0,voiceNodes=element.GetElementsByTagName("voice");voiceNodes.get_Count()>0&&(voiceIndex=AlphaTab.Platform.Std.ParseInt(AlphaTab.Platform.Std.GetNodeValue(voiceNodes.Get(0)))-1);var beat,voice=this.GetOrCreateVoice(bar,voiceIndex);chord||isFirstBeat&&1==voice.Beats.length?beat=voice.Beats[voice.Beats.length-1]:(beat=new AlphaTab.Model.Beat,voice.AddBeat(beat));var note=new AlphaTab.Model.Note;return beat.AddNote(note),beat.IsEmpty=!1,AlphaTab.Platform.Std.IterateChildren(element,$CreateAnonymousDelegate(this,function(c){if(c.get_NodeType()==AlphaTab.Xml.XmlNodeType.Element)switch(c.get_LocalName()){case"grace":beat.GraceType=AlphaTab.Model.GraceType.BeforeBeat,beat.Duration=AlphaTab.Model.Duration.ThirtySecond;break;case"duration":beat.Duration=AlphaTab.Platform.Std.ParseInt(AlphaTab.Platform.Std.GetNodeValue(c));break;case"tie":AlphaTab.Importer.MusicXml2Importer.ParseTied(c,note);break;case"cue":break;case"instrument":break;case"type":switch(AlphaTab.Platform.Std.GetNodeValue(c)){case"64th":beat.Duration=AlphaTab.Model.Duration.SixtyFourth;break;case"32nd":beat.Duration=AlphaTab.Model.Duration.ThirtySecond;break;case"16th":beat.Duration=AlphaTab.Model.Duration.Sixteenth;break;case"eighth":beat.Duration=AlphaTab.Model.Duration.Eighth;break;case"quarter":beat.Duration=AlphaTab.Model.Duration.Quarter;break;case"half":beat.Duration=AlphaTab.Model.Duration.Half;break;case"whole":beat.Duration=AlphaTab.Model.Duration.Whole}break;case"dot":note.IsStaccato=!0;break;case"accidental":this.ParseAccidental(c,note);break;case"time-modification":this.ParseTimeModification(c,beat);break;case"stem":break;case"notehead":"yes"==c.GetAttribute("parentheses")&&(note.IsGhost=!0);break;case"beam":break;case"notations":this.ParseNotations(c,beat,note);break;case"lyric":break;case"chord":chord=!0;break;case"pitch":this.ParsePitch(c,track,beat,note);break;case"unpitched":note.String=0,note.Fret=0;break;case"rest":beat.IsEmpty=!1}})),chord},ParseAccidental:function(element,note){switch(AlphaTab.Platform.Std.GetNodeValue(element)){case"sharp":note.AccidentalMode=AlphaTab.Model.NoteAccidentalMode.ForceSharp;break;case"natural":note.AccidentalMode=AlphaTab.Model.NoteAccidentalMode.ForceNatural;break;case"flat":note.AccidentalMode=AlphaTab.Model.NoteAccidentalMode.ForceFlat}},ParseNotations:function(element,beat,note){AlphaTab.Platform.Std.IterateChildren(element,$CreateAnonymousDelegate(this,function(c){if(c.get_NodeType()==AlphaTab.Xml.XmlNodeType.Element)switch(c.get_LocalName()){case"tied":AlphaTab.Importer.MusicXml2Importer.ParseTied(c,note);break;case"slide":"start"==c.GetAttribute("type")&&(note.SlideType=AlphaTab.Model.SlideType.Legato);break;case"dynamics":this.ParseDynamics(c,beat)}}))},ParseDynamics:function(element,beat){AlphaTab.Platform.Std.IterateChildren(element,$CreateAnonymousDelegate(this,function(c){if(c.get_NodeType()==AlphaTab.Xml.XmlNodeType.Element)switch(c.get_LocalName()){case"p":beat.Dynamic=AlphaTab.Model.DynamicValue.P;break;case"pp":beat.Dynamic=AlphaTab.Model.DynamicValue.PP;break;case"ppp":beat.Dynamic=AlphaTab.Model.DynamicValue.PPP;break;case"f":beat.Dynamic=AlphaTab.Model.DynamicValue.F;break;case"ff":beat.Dynamic=AlphaTab.Model.DynamicValue.FF;break;case"fff":beat.Dynamic=AlphaTab.Model.DynamicValue.FFF;break;case"mp":beat.Dynamic=AlphaTab.Model.DynamicValue.MP;break;case"mf":beat.Dynamic=AlphaTab.Model.DynamicValue.MF}}))},ParseTimeModification:function(element,beat){AlphaTab.Platform.Std.IterateChildren(element,$CreateAnonymousDelegate(this,function(c){if(c.get_NodeType()==AlphaTab.Xml.XmlNodeType.Element)switch(c.get_LocalName()){case"actual-notes":beat.TupletNumerator=AlphaTab.Platform.Std.ParseInt(AlphaTab.Platform.Std.GetNodeValue(c));break;case"normal-notes":beat.TupletDenominator=AlphaTab.Platform.Std.ParseInt(AlphaTab.Platform.Std.GetNodeValue(c))}}))},ParsePitch:function(element,track,beat,note){var step=null,semitones=0,octave=0;AlphaTab.Platform.Std.IterateChildren(element,$CreateAnonymousDelegate(this,function(c){if(c.get_NodeType()==AlphaTab.Xml.XmlNodeType.Element)switch(c.get_LocalName()){case"step":step=AlphaTab.Platform.Std.GetNodeValue(c);break;case"alter":semitones=AlphaTab.Platform.Std.ParseInt(AlphaTab.Platform.Std.GetNodeValue(c));break;case"octave":octave=AlphaTab.Platform.Std.ParseInt(AlphaTab.Platform.Std.GetNodeValue(c))}}));var fullNoteName=step+octave,fullNoteValue=AlphaTab.Model.TuningParser.GetTuningForText(fullNoteName)+semitones;this.ApplyNoteStringFrets(track,beat,note,fullNoteValue)},ApplyNoteStringFrets:function(track,beat,note,fullNoteValue){note.String=this.FindStringForValue(track,beat,fullNoteValue),note.Fret=fullNoteValue-AlphaTab.Model.Note.GetStringTuning(track,note.String)},FindStringForValue:function(track,beat,value){for(var takenStrings={},i=0;i<beat.Notes.length;i++){var note=beat.Notes[i];takenStrings[note.String]=!0}for(var steps=new Int32Array([14,20,2147483647]),i=0;i<steps.length;i++)for(var j=0;j<track.Tuning.length;j++)if(!takenStrings.hasOwnProperty(j)){var min=track.Tuning[j],max=track.Tuning[j]+steps[i];if(value>=min&&max>=value)return track.Tuning.length-j}return 1},GetOrCreateVoice:function(bar,index){if(index<bar.Voices.length)return bar.Voices[index];for(var i=bar.Voices.length;index>=i;i++)bar.AddVoice(new AlphaTab.Model.Voice);return this._maxVoices=Math.max(this._maxVoices,bar.Voices.length),bar.Voices[index]},ParseDirection:function(element,masterBar){AlphaTab.Platform.Std.IterateChildren(element,$CreateAnonymousDelegate(this,function(c){if(c.get_NodeType()==AlphaTab.Xml.XmlNodeType.Element)switch(c.get_LocalName()){case"sound":var tempoAutomation=new AlphaTab.Model.Automation;tempoAutomation.IsLinear=!0,tempoAutomation.Type=AlphaTab.Model.AutomationType.Tempo,tempoAutomation.Value=AlphaTab.Platform.Std.ParseInt(c.GetAttribute("tempo")),masterBar.TempoAutomation=tempoAutomation}}))},ParseAttributes:function(element,bar,masterBar){AlphaTab.Platform.Std.IterateChildren(element,$CreateAnonymousDelegate(this,function(c){if(c.get_NodeType()==AlphaTab.Xml.XmlNodeType.Element)switch(c.get_LocalName()){case"key":this.ParseKey(c,masterBar);break;case"time":this.ParseTime(c,masterBar);break;case"clef":this.ParseClef(c,bar)}}))},ParseClef:function(element,bar){var sign=null,line=null;AlphaTab.Platform.Std.IterateChildren(element,$CreateAnonymousDelegate(this,function(c){if(c.get_NodeType()==AlphaTab.Xml.XmlNodeType.Element)switch(c.get_LocalName()){case"sign":sign=AlphaTab.Platform.Std.GetNodeValue(c);break;case"line":line=AlphaTab.Platform.Std.GetNodeValue(c)}}));var clef=sign+line;switch(clef){case"G2":bar.Clef=AlphaTab.Model.Clef.G2;break;case"F4":bar.Clef=AlphaTab.Model.Clef.F4;break;case"C3":bar.Clef=AlphaTab.Model.Clef.C3;break;case"C4":bar.Clef=AlphaTab.Model.Clef.C4}},ParseTime:function(element,masterBar){AlphaTab.Platform.Std.IterateChildren(element,$CreateAnonymousDelegate(this,function(c){if(c.get_NodeType()==AlphaTab.Xml.XmlNodeType.Element)switch(c.get_LocalName()){case"beats":masterBar.TimeSignatureNumerator=AlphaTab.Platform.Std.ParseInt(AlphaTab.Platform.Std.GetNodeValue(c));break;case"beats-type":masterBar.TimeSignatureDenominator=AlphaTab.Platform.Std.ParseInt(AlphaTab.Platform.Std.GetNodeValue(c))}}))},ParseKey:function(element,masterBar){var fifths=-2147483648,keyStep=-2147483648,keyAlter=-2147483648;AlphaTab.Platform.Std.IterateChildren(element,$CreateAnonymousDelegate(this,function(c){if(c.get_NodeType()==AlphaTab.Xml.XmlNodeType.Element)switch(c.get_LocalName()){case"fifths":fifths=AlphaTab.Platform.Std.ParseInt(AlphaTab.Platform.Std.GetNodeValue(c));break;case"key-step":keyStep=AlphaTab.Platform.Std.ParseInt(AlphaTab.Platform.Std.GetNodeValue(c));break;case"key-alter":keyAlter=AlphaTab.Platform.Std.ParseInt(AlphaTab.Platform.Std.GetNodeValue(c))}})),-2147483648!=fifths&&(masterBar.KeySignature=fifths)},GetOrCreateMasterBar:function(index){if(index<this._score.MasterBars.length)return this._score.MasterBars[index];for(var i=this._score.MasterBars.length;index>=i;i++){var mb=new AlphaTab.Model.MasterBar;this._score.AddMasterBar(mb)}return this._score.MasterBars[index]},ParseIdentification:function(element){AlphaTab.Platform.Std.IterateChildren(element,$CreateAnonymousDelegate(this,function(c){if(c.get_NodeType()==AlphaTab.Xml.XmlNodeType.Element)switch(c.get_LocalName()){case"creator":"composer"==c.GetAttribute("type")&&(this._score.Music=AlphaTab.Platform.Std.GetNodeValue(c.get_FirstChild()));break;case"rights":this._score.Artist=AlphaTab.Platform.Std.GetNodeValue(c.get_FirstChild())}}))},ParsePartList:function(element){AlphaTab.Platform.Std.IterateChildren(element,$CreateAnonymousDelegate(this,function(c){if(c.get_NodeType()==AlphaTab.Xml.XmlNodeType.Element)switch(c.get_LocalName()){case"score-part":this.ParseScorePart(c)}}))},ParseScorePart:function(element){var id=element.GetAttribute("id"),track=new AlphaTab.Model.Track;this._trackById[id]=track,this._score.AddTrack(track),AlphaTab.Platform.Std.IterateChildren(element,$CreateAnonymousDelegate(this,function(c){if(c.get_NodeType()==AlphaTab.Xml.XmlNodeType.Element)switch(c.get_LocalName()){case"part-name":track.Name=AlphaTab.Platform.Std.GetNodeValue(c.get_FirstChild());break;case"part-abbreviation":track.ShortName=AlphaTab.Platform.Std.GetNodeValue(c.get_FirstChild());break;case"midi-instrument":this.ParseMidiInstrument(c,track)}})),(null==track.Tuning||0==track.Tuning.length)&&(track.Tuning=AlphaTab.Model.Tuning.GetDefaultTuningFor(6).Tunings)},ParseMidiInstrument:function(element,track){AlphaTab.Platform.Std.IterateChildren(element,$CreateAnonymousDelegate(this,function(c){if(c.get_NodeType()==AlphaTab.Xml.XmlNodeType.Element)switch(c.get_LocalName()){case"midi-channel":track.PlaybackInfo.PrimaryChannel=AlphaTab.Platform.Std.ParseInt(AlphaTab.Platform.Std.GetNodeValue(c.get_FirstChild()));break;case"midi-program":track.PlaybackInfo.Program=AlphaTab.Platform.Std.ParseInt(AlphaTab.Platform.Std.GetNodeValue(c.get_FirstChild()));break;case"midi-volume":track.PlaybackInfo.Volume=AlphaTab.Platform.Std.ParseInt(AlphaTab.Platform.Std.GetNodeValue(c.get_FirstChild()))}}))}},AlphaTab.Importer.MusicXml2Importer.ParseTied=function(element,note){"start"==element.GetAttribute("type")?note.IsTieOrigin=!0:note.IsTieDestination=!0},$Inherit(AlphaTab.Importer.MusicXml2Importer,AlphaTab.Importer.ScoreImporter),AlphaTab.Importer.NoCompatibleReaderFoundException=function(){},AlphaTab.Importer.ScoreLoader=function(){},AlphaTab.Importer.ScoreLoader.LoadScoreAsync=function(path,success,error){var loader=AlphaTab.Environment.FileLoaders["default"]();loader.LoadBinaryAsync(path,function(data){var score=null;try{score=AlphaTab.Importer.ScoreLoader.LoadScoreFromBytes(data)}catch(e){error(e)}null!=score&&success(score)},error)},AlphaTab.Importer.ScoreLoader.LoadScore=function(path){var loader=AlphaTab.Environment.FileLoaders["default"](),data=loader.LoadBinary(path);return AlphaTab.Importer.ScoreLoader.LoadScoreFromBytes(data)},AlphaTab.Importer.ScoreLoader.LoadScoreFromBytes=function(data){for(var importers=AlphaTab.Importer.ScoreImporter.BuildImporters(),score=null,bb=AlphaTab.IO.ByteBuffer.FromBuffer(data),$i18=0,$l18=importers.length,importer=importers[$i18];$l18>$i18;$i18++,importer=importers[$i18]){bb.Reset();try{importer.Init(bb),score=importer.ReadScore();break}catch(e){if(!(e.exception instanceof AlphaTab.Importer.UnsupportedFormatException))throw $CreateException(e,new Error)}}if(null!=score)return score;throw $CreateException(new AlphaTab.Importer.NoCompatibleReaderFoundException,new Error)},AlphaTab.Importer.UnsupportedFormatException=function(){},AlphaTab.IO=AlphaTab.IO||{},AlphaTab.IO.BitReader=function(source){this._currentByte=0,this._position=0,this._source=null,this._source=source,this._position=8},AlphaTab.IO.BitReader.prototype={ReadByte:function(){return this.ReadBits(8)},ReadBytes:function(count){for(var bytes=new Uint8Array(count),i=0;count>i;i++)bytes[i]=this.ReadByte();return bytes},ReadBits:function(count){for(var bits=0,i=count-1;i>=0;)bits|=this.ReadBit()<<i,i--;return bits},ReadBitsReversed:function(count){for(var bits=0,i=0;count>i;i++)bits|=this.ReadBit()<<i;return bits},ReadBit:function(){if(this._position>=8){if(this._currentByte=this._source.ReadByte(),-1==this._currentByte)throw $CreateException(new AlphaTab.IO.EndOfReaderException,new Error);this._position=0}var value=this._currentByte>>8-this._position-1&1;return this._position++,value},ReadAll:function(){var all=AlphaTab.IO.ByteBuffer.Empty();try{for(;;)all.WriteByte(this.ReadByte())}catch($$e4){}return all.ToArray()}},$StaticConstructor(function(){AlphaTab.IO.BitReader.ByteSize=8}),AlphaTab.IO.FileLoadException=function(){},AlphaTab.IO.EndOfReaderException=function(){},AlphaTab.IO.ByteBuffer=function(){this._buffer=null,this._position=0,this._length=0,this._capacity=0},AlphaTab.IO.ByteBuffer.prototype={get_Length:function(){return this._length},GetBuffer:function(){return this._buffer},Reset:function(){this._position=0},Skip:function(offset){this._position+=offset},SetCapacity:function(value){if(value!=this._capacity){if(value>0){var newBuffer=new Uint8Array(value);this._length>0&&newBuffer.set(this._buffer.subarray(0,0+this._length),0),this._buffer=newBuffer}else this._buffer=null;this._capacity=value}},ReadByte:function(){var n=this._length-this._position;return 0>=n?-1:this._buffer[this._position++]},Read:function(buffer,offset,count){var n=this._length-this._position;if(n>count&&(n=count),0>=n)return 0;if(8>=n)for(var byteCount=n;--byteCount>=0;)buffer[offset+byteCount]=this._buffer[this._position+byteCount];else buffer.set(this._buffer.subarray(this._position,this._position+n),offset);return this._position+=n,n},WriteByte:function(value){var buffer=new Uint8Array(1);buffer[0]=value,this.Write(buffer,0,1)},Write:function(buffer,offset,count){var i=this._position+count;if(i>this._length&&(i>this._capacity&&this.EnsureCapacity(i),this._length=i),8>=count&&buffer!=this._buffer)for(var byteCount=count;--byteCount>=0;)this._buffer[this._position+byteCount]=buffer[offset+byteCount];
else this._buffer.set(buffer.subarray(offset,offset+count),this._position);this._position=i},EnsureCapacity:function(value){if(value>this._capacity){var newCapacity=value;256>newCapacity&&(newCapacity=256),newCapacity<2*this._capacity&&(newCapacity=2*this._capacity),this.SetCapacity(newCapacity)}},ReadAll:function(){return this.ToArray()},ToArray:function(){var copy=new Uint8Array(this._length);return copy.set(this._buffer.subarray(0,0+this._length),0),copy}},AlphaTab.IO.ByteBuffer.Empty=function(){return AlphaTab.IO.ByteBuffer.WithCapactiy(0)},AlphaTab.IO.ByteBuffer.WithCapactiy=function(capacity){var buffer=new AlphaTab.IO.ByteBuffer;return buffer._buffer=new Uint8Array(capacity),buffer._capacity=capacity,buffer},AlphaTab.IO.ByteBuffer.FromBuffer=function(data){var buffer=new AlphaTab.IO.ByteBuffer;return buffer._buffer=data,buffer._capacity=buffer._length=data.length,buffer},AlphaTab.Model.AccentuationType={None:0,Normal:1,Heavy:2},AlphaTab.Model.AccidentalType={None:0,Natural:1,Sharp:2,Flat:3},AlphaTab.Model.Automation=function(){this.IsLinear=!1,this.Type=AlphaTab.Model.AutomationType.Tempo,this.Value=0,this.RatioPosition=0,this.Text=null},AlphaTab.Model.Automation.prototype={Clone:function(){var a=new AlphaTab.Model.Automation;return AlphaTab.Model.Automation.CopyTo(this,a),a}},AlphaTab.Model.Automation.BuildTempoAutomation=function(isLinear,ratioPosition,value,reference){(1>reference||reference>5)&&(reference=2);var references=new Float32Array([1,.5,1,1.5,2,3]),automation=new AlphaTab.Model.Automation;return automation.Type=AlphaTab.Model.AutomationType.Tempo,automation.IsLinear=isLinear,automation.RatioPosition=ratioPosition,automation.Value=value*references[reference],automation},AlphaTab.Model.Automation.CopyTo=function(src,dst){dst.IsLinear=src.IsLinear,dst.RatioPosition=src.RatioPosition,dst.Text=src.Text,dst.Type=src.Type,dst.Value=src.Value},AlphaTab.Model.AutomationType={Tempo:0,Volume:1,Instrument:2,Balance:3},AlphaTab.Model.Bar=function(){this.Index=0,this.NextBar=null,this.PreviousBar=null,this.Clef=AlphaTab.Model.Clef.Neutral,this.Track=null,this.Voices=null,this.MinDuration=null,this.MaxDuration=null,this.Voices=[],this.Clef=AlphaTab.Model.Clef.G2},AlphaTab.Model.Bar.prototype={AddVoice:function(voice){voice.Bar=this,voice.Index=this.Voices.length,this.Voices.push(voice)},get_MasterBar:function(){return this.Track.Score.MasterBars[this.Index]},get_IsEmpty:function(){for(var i=0,j=this.Voices.length;j>i;i++)if(!this.Voices[i].get_IsEmpty())return!1;return!0},Finish:function(){for(var i=0,j=this.Voices.length;j>i;i++){var voice=this.Voices[i];voice.Finish(),(null==voice.MinDuration||null==this.MinDuration||this.MinDuration>voice.MinDuration)&&(this.MinDuration=voice.MinDuration),(null==voice.MaxDuration||null==this.MaxDuration||this.MaxDuration>voice.MaxDuration)&&(this.MinDuration=voice.MaxDuration)}}},AlphaTab.Model.Bar.CopyTo=function(src,dst){dst.Index=src.Index,dst.Clef=src.Clef},AlphaTab.Model.Beat=function(){this._minNote=null,this._maxNote=null,this.PreviousBeat=null,this.NextBeat=null,this.Index=0,this.Voice=null,this.Notes=null,this.IsEmpty=!1,this.Duration=AlphaTab.Model.Duration.Whole,this.Automations=null,this.Dots=0,this.FadeIn=!1,this.Lyrics=null,this.Pop=!1,this.HasRasgueado=!1,this.Slap=!1,this.Tap=!1,this.Text=null,this.BrushType=AlphaTab.Model.BrushType.None,this.BrushDuration=0,this.TupletDenominator=0,this.TupletNumerator=0,this.WhammyBarPoints=null,this.Vibrato=AlphaTab.Model.VibratoType.None,this.ChordId=null,this.GraceType=AlphaTab.Model.GraceType.None,this.PickStroke=AlphaTab.Model.PickStrokeType.None,this.TremoloSpeed=null,this.Crescendo=AlphaTab.Model.CrescendoType.None,this.Start=0,this.Dynamic=AlphaTab.Model.DynamicValue.PPP,this.WhammyBarPoints=[],this.Notes=[],this.BrushType=AlphaTab.Model.BrushType.None,this.Vibrato=AlphaTab.Model.VibratoType.None,this.GraceType=AlphaTab.Model.GraceType.None,this.PickStroke=AlphaTab.Model.PickStrokeType.None,this.Duration=AlphaTab.Model.Duration.Quarter,this.TremoloSpeed=null,this.Automations=[],this.Dots=0,this.Start=0,this.TupletDenominator=-1,this.TupletNumerator=-1,this.Dynamic=AlphaTab.Model.DynamicValue.F,this.Crescendo=AlphaTab.Model.CrescendoType.None},AlphaTab.Model.Beat.prototype={get_MinNote:function(){return null==this._minNote&&this.RefreshNotes(),this._minNote},get_MaxNote:function(){return null==this._maxNote&&this.RefreshNotes(),this._maxNote},get_IsRest:function(){return 0==this.Notes.length},get_HasTuplet:function(){return!(-1==this.TupletDenominator&&-1==this.TupletNumerator||1==this.TupletDenominator&&1==this.TupletNumerator)},get_HasWhammyBar:function(){return this.WhammyBarPoints.length>0},get_HasChord:function(){return null!=this.ChordId},get_Chord:function(){return this.Voice.Bar.Track.Chords[this.ChordId]},get_IsTremolo:function(){return null!=this.TremoloSpeed},get_AbsoluteStart:function(){return this.Voice.Bar.get_MasterBar().Start+this.Start},Clone:function(){for(var beat=new AlphaTab.Model.Beat,i=0,j=this.WhammyBarPoints.length;j>i;i++)beat.WhammyBarPoints.push(this.WhammyBarPoints[i].Clone());for(var i=0,j=this.Notes.length;j>i;i++)beat.AddNote(this.Notes[i].Clone());AlphaTab.Model.Beat.CopyTo(this,beat);for(var i=0,j=this.Automations.length;j>i;i++)beat.Automations.push(this.Automations[i].Clone());return beat},CalculateDuration:function(){var ticks=AlphaTab.Audio.MidiUtils.ToTicks(this.Duration);return 2==this.Dots?ticks=AlphaTab.Audio.MidiUtils.ApplyDot(ticks,!0):1==this.Dots&&(ticks=AlphaTab.Audio.MidiUtils.ApplyDot(ticks,!1)),this.TupletDenominator>0&&this.TupletNumerator>=0&&(ticks=AlphaTab.Audio.MidiUtils.ApplyTuplet(ticks,this.TupletNumerator,this.TupletDenominator)),ticks},AddNote:function(note){note.Beat=this,this.Notes.push(note)},RefreshNotes:function(){for(var i=0,j=this.Notes.length;j>i;i++){var note=this.Notes[i];(null==this._minNote||note.get_RealValue()<this._minNote.get_RealValue())&&(this._minNote=note),(null==this._maxNote||note.get_RealValue()>this._maxNote.get_RealValue())&&(this._maxNote=note)}},GetAutomation:function(type){for(var i=0,j=this.Automations.length;j>i;i++){var automation=this.Automations[i];if(automation.Type==type)return automation}return null},GetNoteOnString:function(string){for(var i=0,j=this.Notes.length;j>i;i++){var note=this.Notes[i];if(note.String==string)return note}return null},Finish:function(){this.Start=0==this.Index?0:this.PreviousBeat.Start+this.PreviousBeat.CalculateDuration();for(var i=0,j=this.Notes.length;j>i;i++)this.Notes[i].Finish()}},$StaticConstructor(function(){AlphaTab.Model.Beat.WhammyBarMaxPosition=60,AlphaTab.Model.Beat.WhammyBarMaxValue=24}),AlphaTab.Model.Beat.CopyTo=function(src,dst){dst.Index=src.Index,dst.IsEmpty=src.IsEmpty,dst.Duration=src.Duration,dst.Dots=src.Dots,dst.FadeIn=src.FadeIn,dst.Lyrics=null==src.Lyrics?null:src.Lyrics.slice(),dst.Pop=src.Pop,dst.HasRasgueado=src.HasRasgueado,dst.Slap=src.Slap,dst.Tap=src.Tap,dst.Text=src.Text,dst.BrushType=src.BrushType,dst.BrushDuration=src.BrushDuration,dst.TupletDenominator=src.TupletDenominator,dst.TupletNumerator=src.TupletNumerator,dst.Vibrato=src.Vibrato,dst.ChordId=src.ChordId,dst.GraceType=src.GraceType,dst.PickStroke=src.PickStroke,dst.TremoloSpeed=src.TremoloSpeed,dst.Crescendo=src.Crescendo,dst.Start=src.Start,dst.Dynamic=src.Dynamic},AlphaTab.Model.BendPoint=function(offset,value){this.Offset=0,this.Value=0,this.Offset=offset,this.Value=value},AlphaTab.Model.BendPoint.prototype={Clone:function(){var point=new AlphaTab.Model.BendPoint(0,0);return AlphaTab.Model.BendPoint.CopyTo(this,point),point}},$StaticConstructor(function(){AlphaTab.Model.BendPoint.MaxPosition=60,AlphaTab.Model.BendPoint.MaxValue=12}),AlphaTab.Model.BendPoint.CopyTo=function(src,dst){dst.Offset=src.Offset,dst.Value=src.Value},AlphaTab.Model.BrushType={None:0,BrushUp:1,BrushDown:2,ArpeggioUp:3,ArpeggioDown:4},AlphaTab.Model.Chord=function(){this.Name=null,this.FirstFret=0,this.Strings=null,this.Strings=[]},AlphaTab.Model.Chord.CopyTo=function(src,dst){dst.FirstFret=src.FirstFret,dst.Name=src.Name,dst.Strings=src.Strings.slice()},AlphaTab.Model.Clef={Neutral:0,C3:1,C4:2,F4:3,G2:4},AlphaTab.Model.CrescendoType={None:0,Crescendo:1,Decrescendo:2},AlphaTab.Model.Duration={Whole:1,Half:2,Quarter:4,Eighth:8,Sixteenth:16,ThirtySecond:32,SixtyFourth:64},AlphaTab.Model.DynamicValue={PPP:0,PP:1,P:2,MP:3,MF:4,F:5,FF:6,FFF:7},AlphaTab.Model.Fingers={Unknown:-2,NoOrDead:-1,Thumb:0,IndexFinger:1,MiddleFinger:2,AnnularFinger:3,LittleFinger:4},AlphaTab.Model.GraceType={None:0,OnBeat:1,BeforeBeat:2},AlphaTab.Model.HarmonicType={None:0,Natural:1,Artificial:2,Pinch:3,Tap:4,Semi:5,Feedback:6},AlphaTab.Model.KeySignatureType={Major:0,Minor:1},AlphaTab.Model.MasterBar=function(){this.AlternateEndings=0,this.NextMasterBar=null,this.PreviousMasterBar=null,this.Index=0,this.KeySignature=0,this.IsDoubleBar=!1,this.IsRepeatStart=!1,this.RepeatCount=0,this.RepeatGroup=null,this.TimeSignatureNumerator=0,this.TimeSignatureDenominator=0,this.TripletFeel=AlphaTab.Model.TripletFeel.NoTripletFeel,this.Section=null,this.TempoAutomation=null,this.VolumeAutomation=null,this.Score=null,this.Start=0,this.TimeSignatureDenominator=4,this.TimeSignatureNumerator=4,this.TripletFeel=AlphaTab.Model.TripletFeel.NoTripletFeel},AlphaTab.Model.MasterBar.prototype={get_IsRepeatEnd:function(){return this.RepeatCount>0},get_IsSectionStart:function(){return null!=this.Section},CalculateDuration:function(){return this.TimeSignatureNumerator*AlphaTab.Audio.MidiUtils.ValueToTicks(this.TimeSignatureDenominator)}},$StaticConstructor(function(){AlphaTab.Model.MasterBar.MaxAlternateEndings=8}),AlphaTab.Model.MasterBar.CopyTo=function(src,dst){dst.AlternateEndings=src.AlternateEndings,dst.Index=src.Index,dst.KeySignature=src.KeySignature,dst.IsDoubleBar=src.IsDoubleBar,dst.IsRepeatStart=src.IsRepeatStart,dst.RepeatCount=src.RepeatCount,dst.TimeSignatureNumerator=src.TimeSignatureNumerator,dst.TimeSignatureDenominator=src.TimeSignatureDenominator,dst.TripletFeel=src.TripletFeel,dst.Start=src.Start},AlphaTab.Model.ModelUtils=function(){},AlphaTab.Model.ModelUtils.GetIndex=function(duration){for(var index=0,value=duration;(value>>=1)>0;)index++;return index},AlphaTab.Model.ModelUtils.KeySignatureIsFlat=function(ks){return 0>ks},AlphaTab.Model.ModelUtils.KeySignatureIsNatural=function(ks){return 0==ks},AlphaTab.Model.ModelUtils.KeySignatureIsSharp=function(ks){return ks>0},AlphaTab.Model.NoteAccidentalMode={Default:0,SwapAccidentals:1,ForceNatural:2,ForceSharp:3,ForceFlat:4},AlphaTab.Model.Note=function(){this.Accentuated=AlphaTab.Model.AccentuationType.None,this.BendPoints=null,this.Fret=0,this.String=0,this.IsHammerPullOrigin=!1,this.HammerPullOrigin=null,this.HammerPullDestination=null,this.HarmonicValue=0,this.HarmonicType=AlphaTab.Model.HarmonicType.None,this.IsGhost=!1,this.IsLetRing=!1,this.IsPalmMute=!1,this.IsDead=!1,this.IsStaccato=!1,this.SlideType=AlphaTab.Model.SlideType.None,this.SlideTarget=null,this.Vibrato=AlphaTab.Model.VibratoType.None,this.TieOrigin=null,this.TieDestination=null,this.IsTieDestination=!1,this.IsTieOrigin=!1,this.LeftHandFinger=AlphaTab.Model.Fingers.Thumb,this.RightHandFinger=AlphaTab.Model.Fingers.Thumb,this.IsFingering=!1,this.TrillValue=0,this.TrillSpeed=AlphaTab.Model.Duration.Whole,this.DurationPercent=0,this.AccidentalMode=AlphaTab.Model.NoteAccidentalMode.Default,this.Beat=null,this.Dynamic=AlphaTab.Model.DynamicValue.PPP,this.Octave=0,this.Tone=0,this.BendPoints=[],this.Dynamic=AlphaTab.Model.DynamicValue.F,this.Accentuated=AlphaTab.Model.AccentuationType.None,this.Fret=-2147483648,this.HarmonicType=AlphaTab.Model.HarmonicType.None,this.SlideType=AlphaTab.Model.SlideType.None,this.Vibrato=AlphaTab.Model.VibratoType.None,this.LeftHandFinger=AlphaTab.Model.Fingers.NoOrDead,this.RightHandFinger=AlphaTab.Model.Fingers.NoOrDead,this.TrillValue=-1,this.TrillSpeed=AlphaTab.Model.Duration.ThirtySecond,this.DurationPercent=1,this.Octave=-1},AlphaTab.Model.Note.prototype={get_HasBend:function(){return this.BendPoints.length>0},get_TrillFret:function(){return this.TrillValue-this.get_StringTuning()},get_IsTrill:function(){return this.TrillValue>=0},get_StringTuning:function(){return AlphaTab.Model.Note.GetStringTuning(this.Beat.Voice.Bar.Track,this.String)},get_RealValue:function(){return-2147483648==this.Fret?12*this.Octave+this.Tone:this.Fret+this.get_StringTuning()},Clone:function(){var n=new AlphaTab.Model.Note;AlphaTab.Model.Note.CopyTo(this,n);for(var i=0,j=this.BendPoints.length;j>i;i++)n.BendPoints.push(this.BendPoints[i].Clone());return n},Finish:function(){var nextNoteOnLine=new AlphaTab.Util.Lazy($CreateAnonymousDelegate(this,function(){return AlphaTab.Model.Note.NextNoteOnSameLine(this)})),prevNoteOnLine=new AlphaTab.Util.Lazy($CreateAnonymousDelegate(this,function(){return AlphaTab.Model.Note.PreviousNoteOnSameLine(this)}));this.IsTieDestination&&(null==prevNoteOnLine.get_Value()?this.IsTieDestination=!1:(this.TieOrigin=prevNoteOnLine.get_Value(),this.TieOrigin.IsTieOrigin=!0,this.TieOrigin.TieDestination=this,this.Fret=this.TieOrigin.Fret)),this.IsHammerPullOrigin&&(null==nextNoteOnLine.get_Value()?this.IsHammerPullOrigin=!1:(this.HammerPullDestination=nextNoteOnLine.get_Value(),this.HammerPullDestination.HammerPullOrigin=this)),this.SlideType!=AlphaTab.Model.SlideType.None&&(this.SlideTarget=nextNoteOnLine.get_Value())}},$StaticConstructor(function(){AlphaTab.Model.Note.MaxOffsetForSameLineSearch=3}),AlphaTab.Model.Note.GetStringTuning=function(track,noteString){return track.Tuning.length>0?track.Tuning[track.Tuning.length-(noteString-1)-1]:0},AlphaTab.Model.Note.CopyTo=function(src,dst){dst.Accentuated=src.Accentuated,dst.Fret=src.Fret,dst.String=src.String,dst.IsHammerPullOrigin=src.IsHammerPullOrigin,dst.HarmonicValue=src.HarmonicValue,dst.HarmonicType=src.HarmonicType,dst.IsGhost=src.IsGhost,dst.IsLetRing=src.IsLetRing,dst.IsPalmMute=src.IsPalmMute,dst.IsDead=src.IsDead,dst.IsStaccato=src.IsStaccato,dst.SlideType=src.SlideType,dst.Vibrato=src.Vibrato,dst.IsTieDestination=src.IsTieDestination,dst.LeftHandFinger=src.LeftHandFinger,dst.RightHandFinger=src.RightHandFinger,dst.IsFingering=src.IsFingering,dst.TrillValue=src.TrillValue,dst.TrillSpeed=src.TrillSpeed,dst.DurationPercent=src.DurationPercent,dst.AccidentalMode=src.AccidentalMode,dst.Dynamic=src.Dynamic,dst.Octave=src.Octave,dst.Tone=src.Tone},AlphaTab.Model.Note.NextNoteOnSameLine=function(note){for(var nextBeat=note.Beat.NextBeat;null!=nextBeat&&nextBeat.Voice.Bar.Index<=note.Beat.Voice.Bar.Index+3;){var noteOnString=nextBeat.GetNoteOnString(note.String);if(null!=noteOnString)return noteOnString;nextBeat=nextBeat.NextBeat}return null},AlphaTab.Model.Note.PreviousNoteOnSameLine=function(note){for(var previousBeat=note.Beat.PreviousBeat;null!=previousBeat&&previousBeat.Voice.Bar.Index>=note.Beat.Voice.Bar.Index-3;){var noteOnString=previousBeat.GetNoteOnString(note.String);if(null!=noteOnString)return noteOnString;previousBeat=previousBeat.PreviousBeat}return null},AlphaTab.Model.PickStrokeType={None:0,Up:1,Down:2},AlphaTab.Model.PlaybackInformation=function(){this.Volume=0,this.Balance=0,this.Port=0,this.Program=0,this.PrimaryChannel=0,this.SecondaryChannel=0,this.IsMute=!1,this.IsSolo=!1,this.Volume=15,this.Balance=8,this.Port=1},AlphaTab.Model.PlaybackInformation.CopyTo=function(src,dst){dst.Volume=src.Volume,dst.Balance=src.Balance,dst.Port=src.Port,dst.Program=src.Program,dst.PrimaryChannel=src.PrimaryChannel,dst.SecondaryChannel=src.SecondaryChannel,dst.IsMute=src.IsMute,dst.IsSolo=src.IsSolo},AlphaTab.Model.RepeatGroup=function(){this.MasterBars=null,this.Openings=null,this.Closings=null,this.IsClosed=!1,this.MasterBars=[],this.Openings=[],this.Closings=[],this.IsClosed=!1},AlphaTab.Model.RepeatGroup.prototype={AddMasterBar:function(masterBar){0==this.Openings.length&&this.Openings.push(masterBar),this.MasterBars.push(masterBar),masterBar.RepeatGroup=this,masterBar.get_IsRepeatEnd()?(this.Closings.push(masterBar),this.IsClosed=!0):this.IsClosed&&(this.IsClosed=!1,this.Openings.push(masterBar))}},AlphaTab.Model.Score=function(){this._currentRepeatGroup=null,this.Album=null,this.Artist=null,this.Copyright=null,this.Instructions=null,this.Music=null,this.Notices=null,this.SubTitle=null,this.Title=null,this.Words=null,this.Tab=null,this.Tempo=0,this.TempoLabel=null,this.MasterBars=null,this.Tracks=null,this.MasterBars=[],this.Tracks=[],this._currentRepeatGroup=new AlphaTab.Model.RepeatGroup},AlphaTab.Model.Score.prototype={AddMasterBar:function(bar){bar.Score=this,bar.Index=this.MasterBars.length,0!=this.MasterBars.length&&(bar.PreviousMasterBar=this.MasterBars[this.MasterBars.length-1],bar.PreviousMasterBar.NextMasterBar=bar,bar.Start=bar.PreviousMasterBar.Start+bar.PreviousMasterBar.CalculateDuration()),(bar.IsRepeatStart||this._currentRepeatGroup.IsClosed&&bar.AlternateEndings<=0)&&(this._currentRepeatGroup=new AlphaTab.Model.RepeatGroup),this._currentRepeatGroup.AddMasterBar(bar),this.MasterBars.push(bar)},AddTrack:function(track){track.Score=this,track.Index=this.Tracks.length,this.Tracks.push(track)},Finish:function(){for(var i=0,j=this.Tracks.length;j>i;i++)this.Tracks[i].Finish()}},AlphaTab.Model.Score.CopyTo=function(src,dst){dst.Album=src.Album,dst.Artist=src.Artist,dst.Copyright=src.Copyright,dst.Instructions=src.Instructions,dst.Music=src.Music,dst.Notices=src.Notices,dst.SubTitle=src.SubTitle,dst.Title=src.Title,dst.Words=src.Words,dst.Tab=src.Tab,dst.Tempo=src.Tempo,dst.TempoLabel=src.TempoLabel},AlphaTab.Model.Section=function(){this.Marker=null,this.Text=null},AlphaTab.Model.Section.CopyTo=function(src,dst){dst.Marker=src.Marker,dst.Text=src.Text},AlphaTab.Model.SlideType={None:0,Shift:1,Legato:2,IntoFromBelow:3,IntoFromAbove:4,OutUp:5,OutDown:6},AlphaTab.Model.Track=function(){this.Capo=0,this.Index=0,this.Name=null,this.ShortName=null,this.Tuning=null,this.TuningName=null,this.Color=null,this.PlaybackInfo=null,this.IsPercussion=!1,this.Score=null,this.Bars=null,this.Chords=null,this.Name="",this.ShortName="",this.Tuning=new Int32Array(0),this.Bars=[],this.Chords={},this.PlaybackInfo=new AlphaTab.Model.PlaybackInformation,this.Color=new AlphaTab.Platform.Model.Color(200,0,0,255)},AlphaTab.Model.Track.prototype={AddBar:function(bar){var bars=this.Bars;bar.Track=this,bar.Index=this.Bars.length,bars.length>0&&(bar.PreviousBar=bars[bars.length-1],bar.PreviousBar.NextBar=bar),bars.push(bar)},Finish:function(){(null==this.ShortName||0==this.ShortName.length)&&(this.ShortName=this.Name,this.ShortName.length>10&&(this.ShortName=this.ShortName.substr(0,10)));for(var i=0,j=this.Bars.length;j>i;i++)this.Bars[i].Finish()}},$StaticConstructor(function(){AlphaTab.Model.Track.ShortNameMaxLength=10}),AlphaTab.Model.Track.CopyTo=function(src,dst){dst.Capo=src.Capo,dst.Index=src.Index,dst.ShortName=src.ShortName,dst.Tuning=new Int32Array(src.Tuning),dst.Color.Raw=src.Color.Raw,dst.IsPercussion=src.IsPercussion},AlphaTab.Model.TripletFeel={NoTripletFeel:0,Triplet16th:1,Triplet8th:2,Dotted16th:3,Dotted8th:4,Scottish16th:5,Scottish8th:6},AlphaTab.Model.Tuning=function(name,tuning,isStandard){this.IsStandard=!1,this.Name=null,this.Tunings=null,this.IsStandard=isStandard,this.Name=name,this.Tunings=tuning},$StaticConstructor(function(){AlphaTab.Model.Tuning._sevenStrings=null,AlphaTab.Model.Tuning._sixStrings=null,AlphaTab.Model.Tuning._fiveStrings=null,AlphaTab.Model.Tuning._fourStrings=null,AlphaTab.Model.Tuning._defaultTunings=null}),AlphaTab.Model.Tuning.GetTextForTuning=function(tuning,includeOctave){var octave=tuning/12|0,note=tuning%12,notes=["C","Db","D","Eb","E","F","Gb","G","Ab","A","Bb","B"],result=notes[note];return includeOctave&&(result+=octave),result},AlphaTab.Model.Tuning.GetDefaultTuningFor=function(stringCount){return null==AlphaTab.Model.Tuning._sevenStrings&&AlphaTab.Model.Tuning.Initialize(),AlphaTab.Model.Tuning._defaultTunings.hasOwnProperty(stringCount)?AlphaTab.Model.Tuning._defaultTunings[stringCount]:null},AlphaTab.Model.Tuning.GetPresetsFor=function(stringCount){switch(null==AlphaTab.Model.Tuning._sevenStrings&&AlphaTab.Model.Tuning.Initialize(),stringCount){case 7:return AlphaTab.Model.Tuning._sevenStrings;case 6:return AlphaTab.Model.Tuning._sixStrings;case 5:return AlphaTab.Model.Tuning._fiveStrings;case 4:return AlphaTab.Model.Tuning._fourStrings}return[]},AlphaTab.Model.Tuning.Initialize=function(){AlphaTab.Model.Tuning._sevenStrings=[],AlphaTab.Model.Tuning._sixStrings=[],AlphaTab.Model.Tuning._fiveStrings=[],AlphaTab.Model.Tuning._fourStrings=[],AlphaTab.Model.Tuning._defaultTunings={},AlphaTab.Model.Tuning._defaultTunings[7]=new AlphaTab.Model.Tuning("Guitar 7 strings",new Int32Array([64,59,55,50,45,40,35]),!0),AlphaTab.Model.Tuning._sevenStrings.push(AlphaTab.Model.Tuning._defaultTunings[7]),AlphaTab.Model.Tuning._defaultTunings[6]=new AlphaTab.Model.Tuning("Guitar Standard Tuning",new Int32Array([64,59,55,50,45,40]),!0),AlphaTab.Model.Tuning._sixStrings.push(AlphaTab.Model.Tuning._defaultTunings[6]),AlphaTab.Model.Tuning._sixStrings.push(new AlphaTab.Model.Tuning("Guitar Tune down  step",new Int32Array([63,58,54,49,44,39]),!1)),AlphaTab.Model.Tuning._sixStrings.push(new AlphaTab.Model.Tuning("Guitar Tune down 1 step",new Int32Array([62,57,53,48,43,38]),!1)),AlphaTab.Model.Tuning._sixStrings.push(new AlphaTab.Model.Tuning("Guitar Tune down 2 step",new Int32Array([60,55,51,46,41,36]),!1)),AlphaTab.Model.Tuning._sixStrings.push(new AlphaTab.Model.Tuning("Guitar Dropped D Tuning",new Int32Array([64,59,55,50,45,38]),!1)),AlphaTab.Model.Tuning._sixStrings.push(new AlphaTab.Model.Tuning("Guitar Dropped D Tuning variant",new Int32Array([64,57,55,50,45,38]),!1)),AlphaTab.Model.Tuning._sixStrings.push(new AlphaTab.Model.Tuning("Guitar Double Dropped D Tuning",new Int32Array([62,59,55,50,45,38]),!1)),AlphaTab.Model.Tuning._sixStrings.push(new AlphaTab.Model.Tuning("Guitar Dropped E Tuning",new Int32Array([66,61,57,52,47,40]),!1)),AlphaTab.Model.Tuning._sixStrings.push(new AlphaTab.Model.Tuning("Guitar Dropped C Tuning",new Int32Array([62,57,53,48,43,36]),!1)),AlphaTab.Model.Tuning._sixStrings.push(new AlphaTab.Model.Tuning("Guitar Open C Tuning",new Int32Array([64,60,55,48,43,36]),!1)),AlphaTab.Model.Tuning._sixStrings.push(new AlphaTab.Model.Tuning("Guitar Open Cm Tuning",new Int32Array([63,60,55,48,43,36]),!1)),AlphaTab.Model.Tuning._sixStrings.push(new AlphaTab.Model.Tuning("Guitar Open C6 Tuning",new Int32Array([64,57,55,48,43,36]),!1)),AlphaTab.Model.Tuning._sixStrings.push(new AlphaTab.Model.Tuning("Guitar Open Cmaj7 Tuning",new Int32Array([64,59,55,52,43,36]),!1)),AlphaTab.Model.Tuning._sixStrings.push(new AlphaTab.Model.Tuning("Guitar Open D Tuning",new Int32Array([62,57,54,50,45,38]),!1)),AlphaTab.Model.Tuning._sixStrings.push(new AlphaTab.Model.Tuning("Guitar Open Dm Tuning",new Int32Array([62,57,53,50,45,38]),!1)),AlphaTab.Model.Tuning._sixStrings.push(new AlphaTab.Model.Tuning("Guitar Open D5 Tuning",new Int32Array([62,57,50,50,45,38]),!1)),AlphaTab.Model.Tuning._sixStrings.push(new AlphaTab.Model.Tuning("Guitar Open D6 Tuning",new Int32Array([62,59,54,50,45,38]),!1)),AlphaTab.Model.Tuning._sixStrings.push(new AlphaTab.Model.Tuning("Guitar Open Dsus4 Tuning",new Int32Array([62,57,55,50,45,38]),!1)),AlphaTab.Model.Tuning._sixStrings.push(new AlphaTab.Model.Tuning("Guitar Open E Tuning",new Int32Array([64,59,56,52,47,40]),!1)),AlphaTab.Model.Tuning._sixStrings.push(new AlphaTab.Model.Tuning("Guitar Open Em Tuning",new Int32Array([64,59,55,52,47,40]),!1)),AlphaTab.Model.Tuning._sixStrings.push(new AlphaTab.Model.Tuning("Guitar Open Esus11 Tuning",new Int32Array([64,59,55,52,45,40]),!1)),AlphaTab.Model.Tuning._sixStrings.push(new AlphaTab.Model.Tuning("Guitar Open F Tuning",new Int32Array([65,60,53,48,45,41]),!1)),AlphaTab.Model.Tuning._sixStrings.push(new AlphaTab.Model.Tuning("Guitar Open G Tuning",new Int32Array([62,59,55,50,43,38]),!1)),AlphaTab.Model.Tuning._sixStrings.push(new AlphaTab.Model.Tuning("Guitar Open Gm Tuning",new Int32Array([62,58,55,50,43,38]),!1)),AlphaTab.Model.Tuning._sixStrings.push(new AlphaTab.Model.Tuning("Guitar Open G6 Tuning",new Int32Array([64,59,55,50,43,38]),!1)),AlphaTab.Model.Tuning._sixStrings.push(new AlphaTab.Model.Tuning("Guitar Open Gsus4 Tuning",new Int32Array([62,60,55,50,43,38]),!1)),AlphaTab.Model.Tuning._sixStrings.push(new AlphaTab.Model.Tuning("Guitar Open A Tuning",new Int32Array([64,61,57,52,45,40]),!1)),AlphaTab.Model.Tuning._sixStrings.push(new AlphaTab.Model.Tuning("Guitar Open Am Tuning",new Int32Array([64,60,57,52,45,40]),!1)),AlphaTab.Model.Tuning._sixStrings.push(new AlphaTab.Model.Tuning("Guitar Nashville Tuning",new Int32Array([64,59,67,62,57,52]),!1)),AlphaTab.Model.Tuning._sixStrings.push(new AlphaTab.Model.Tuning("Bass 6 Strings Tuning",new Int32Array([48,43,38,33,28,23]),!1)),AlphaTab.Model.Tuning._sixStrings.push(new AlphaTab.Model.Tuning("Lute or Vihuela Tuning",new Int32Array([64,59,54,50,45,40]),!1)),AlphaTab.Model.Tuning._defaultTunings[5]=new AlphaTab.Model.Tuning("Bass 5 Strings Tuning",new Int32Array([43,38,33,28,23]),!0),AlphaTab.Model.Tuning._fiveStrings.push(AlphaTab.Model.Tuning._defaultTunings[5]),AlphaTab.Model.Tuning._fiveStrings.push(new AlphaTab.Model.Tuning("Banjo Dropped C Tuning",new Int32Array([62,59,55,48,67]),!1)),AlphaTab.Model.Tuning._fiveStrings.push(new AlphaTab.Model.Tuning("Banjo Open D Tuning",new Int32Array([62,57,54,50,69]),!1)),AlphaTab.Model.Tuning._fiveStrings.push(new AlphaTab.Model.Tuning("Banjo Open G Tuning",new Int32Array([62,59,55,50,67]),!1)),AlphaTab.Model.Tuning._fiveStrings.push(new AlphaTab.Model.Tuning("Banjo G Minor Tuning",new Int32Array([62,58,55,50,67]),!1)),AlphaTab.Model.Tuning._fiveStrings.push(new AlphaTab.Model.Tuning("Banjo G Modal Tuning",new Int32Array([62,57,55,50,67]),!1)),AlphaTab.Model.Tuning._defaultTunings[4]=new AlphaTab.Model.Tuning("Bass Standard Tuning",new Int32Array([43,38,33,28]),!0),AlphaTab.Model.Tuning._fourStrings.push(AlphaTab.Model.Tuning._defaultTunings[4]),AlphaTab.Model.Tuning._fourStrings.push(new AlphaTab.Model.Tuning("Bass Tune down  step",new Int32Array([42,37,32,27]),!1)),AlphaTab.Model.Tuning._fourStrings.push(new AlphaTab.Model.Tuning("Bass Tune down 1 step",new Int32Array([41,36,31,26]),!1)),AlphaTab.Model.Tuning._fourStrings.push(new AlphaTab.Model.Tuning("Bass Tune down 2 step",new Int32Array([39,34,29,24]),!1)),AlphaTab.Model.Tuning._fourStrings.push(new AlphaTab.Model.Tuning("Bass Dropped D Tuning",new Int32Array([43,38,33,26]),!1)),AlphaTab.Model.Tuning._fourStrings.push(new AlphaTab.Model.Tuning("Ukulele C Tuning",new Int32Array([45,40,36,43]),!1)),AlphaTab.Model.Tuning._fourStrings.push(new AlphaTab.Model.Tuning("Ukulele G Tuning",new Int32Array([52,47,43,38]),!1)),AlphaTab.Model.Tuning._fourStrings.push(new AlphaTab.Model.Tuning("Mandolin Standard Tuning",new Int32Array([64,57,50,43]),!1)),AlphaTab.Model.Tuning._fourStrings.push(new AlphaTab.Model.Tuning("Mandolin or Violin Tuning",new Int32Array([76,69,62,55]),!1)),AlphaTab.Model.Tuning._fourStrings.push(new AlphaTab.Model.Tuning("Viola Tuning",new Int32Array([69,62,55,48]),!1)),AlphaTab.Model.Tuning._fourStrings.push(new AlphaTab.Model.Tuning("Cello Tuning",new Int32Array([57,50,43,36]),!1))},AlphaTab.Model.Tuning.FindTuning=function(strings){for(var tunings=AlphaTab.Model.Tuning.GetPresetsFor(strings.length),t=0,tc=tunings.length;tc>t;t++){for(var tuning=tunings[t],equals=!0,i=0,j=strings.length;j>i;i++)if(strings[i]!=tuning.Tunings[i]){equals=!1;break}if(equals)return tuning}return null},AlphaTab.Model.VibratoType={None:0,Slight:1,Wide:2},AlphaTab.Model.Voice=function(){this.Index=0,this.Bar=null,this.Beats=null,this.MinDuration=null,this.MaxDuration=null,this.Beats=[]},AlphaTab.Model.Voice.prototype={get_IsEmpty:function(){return 0==this.Beats.length},AddBeat:function(beat){beat.Voice=this,beat.Index=this.Beats.length,this.Beats.push(beat)},Chain:function(beat){if(null!=this.Bar)if(0==this.Bar.Index&&0==beat.Index)beat.PreviousBeat=null;else if(0==beat.Index){var previousVoice=this.Bar.PreviousBar.Voices[this.Index];beat.PreviousBeat=previousVoice.Beats[previousVoice.Beats.length-1],beat.PreviousBeat.NextBeat=beat}else beat.PreviousBeat=this.Beats[beat.Index-1],beat.PreviousBeat.NextBeat=beat},AddGraceBeat:function(beat){if(0==this.Beats.length)return void this.AddBeat(beat);var lastBeat=this.Beats[this.Beats.length-1];this.Beats.splice(this.Beats.length-1,1),this.AddBeat(beat),this.AddBeat(lastBeat)},Finish:function(){for(var i=0,j=this.Beats.length;j>i;i++){var beat=this.Beats[i];this.Chain(beat)}for(var i=0,j=this.Beats.length;j>i;i++){var beat=this.Beats[i];beat.Finish(),(null==this.MinDuration||this.MinDuration>beat.Duration)&&(this.MinDuration=beat.Duration),(null==this.MaxDuration||this.MaxDuration<beat.Duration)&&(this.MaxDuration=beat.Duration)}}},AlphaTab.Model.Voice.CopyTo=function(src,dst){dst.Index=src.Index},AlphaTab.Platform.Model=AlphaTab.Platform.Model||{},AlphaTab.Platform.Model.Color=function(r,g,b,a){this.Raw=0,this.Raw=a<<24|r<<16|g<<8|b},AlphaTab.Platform.Model.Color.prototype={get_A:function(){return this.Raw>>24&255},get_R:function(){return this.Raw>>16&255},get_G:function(){return this.Raw>>8&255},get_B:function(){return 255&this.Raw},ToRgbaString:function(){return"rgba("+this.get_R()+","+this.get_G()+","+this.get_B()+","+this.get_A()/255+")"}},AlphaTab.Platform.Model.FontStyle={Plain:0,Bold:1,Italic:2},AlphaTab.Platform.Model.Font=function(family,size,style){this.Family=null,this.Size=0,this.Style=AlphaTab.Platform.Model.FontStyle.Plain,this.Family=family,this.Size=size,this.Style=style},AlphaTab.Platform.Model.Font.prototype={get_IsBold:function(){return(this.Style&AlphaTab.Platform.Model.FontStyle.Bold)!=AlphaTab.Platform.Model.FontStyle.Plain},get_IsItalic:function(){return(this.Style&AlphaTab.Platform.Model.FontStyle.Italic)!=AlphaTab.Platform.Model.FontStyle.Plain},Clone:function(){return new AlphaTab.Platform.Model.Font(this.Family,this.Size,this.Style)},ToCssString:function(){var buf=new Array;return this.get_IsBold()&&buf.push("bold "),this.get_IsItalic()&&buf.push("italic "),buf.push(this.Size),buf.push("px "),buf.push("'"),buf.push(this.Family),buf.push("'"),buf.join("")}},AlphaTab.Platform.Model.TextAlign={Left:0,Center:1,Right:2},AlphaTab.Platform.Model.TextBaseline={Default:0,Top:1,Middle:2,Bottom:3},AlphaTab.Platform.Svg=AlphaTab.Platform.Svg||{},AlphaTab.Platform.Svg.FontSizes=function(){},$StaticConstructor(function(){AlphaTab.Platform.Svg.FontSizes.TimesNewRoman=new Uint8Array([3,4,5,6,6,9,9,2,4,4,6,6,3,4,3,3,6,6,6,6,6,6,6,6,6,6,3,3,6,6,6,5,10,8,7,7,8,7,6,7,8,4,4,8,7,10,8,8,7,8,7,5,8,8,7,11,8,8,7,4,3,4,5,6,4,5,5,5,5,5,4,5,6,3,3,6,3,9,6,6,6,5,4,4,4,5,6,7,6,6,5,5,2,5,6,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,4,6,6,6,6,2,5,4,8,4,6,6,0,8,6,4,6,3,3,4,5,5,4,4,3,3,6,8,8,8,5,8,8,8,8,8,8,11,7,7,7,7,7,4,4,4,4,8,8,8,8,8,8,8,6,8,8,8,8,8,8,6,5,5,5,5,5,5,5,8,5,5,5,5,5,3,3,3,3,6,6,6,6,6,6,6,6,6,5,5,5,5,6,6]),AlphaTab.Platform.Svg.FontSizes.Arial11Pt=new Uint8Array([3,2,4,6,6,10,7,2,4,4,4,6,3,4,3,3,6,6,6,6,6,6,6,6,6,6,3,3,6,6,6,6,11,8,7,7,7,6,6,8,7,2,5,7,6,8,7,8,6,8,7,7,6,7,8,10,7,8,7,3,3,3,5,6,4,6,6,6,6,6,4,6,6,2,2,5,2,8,6,6,6,6,4,6,3,6,6,10,6,6,6,4,2,4,6,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,2,6,6,7,6,2,6,4,8,4,6,6,0,8,6,4,6,4,4,4,6,6,4,4,4,5,6,9,10,10,6,8,8,8,8,8,8,11,7,6,6,6,6,2,2,2,2,8,7,8,8,8,8,8,6,8,7,7,7,7,8,7,7,6,6,6,6,6,6,10,6,6,6,6,6,2,2,2,2,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6]),AlphaTab.Platform.Svg.FontSizes.ControlChars=32}),AlphaTab.Platform.Svg.FontSizes.MeasureString=function(s,f,size,style){var data,dataSize,factor=1;(style&AlphaTab.Platform.Model.FontStyle.Italic)!=AlphaTab.Platform.Model.FontStyle.Plain&&(factor*=1.2),(style&AlphaTab.Platform.Model.FontStyle.Bold)!=AlphaTab.Platform.Model.FontStyle.Plain&&(factor*=1.2),f==AlphaTab.Platform.Svg.SupportedFonts.TimesNewRoman?(data=AlphaTab.Platform.Svg.FontSizes.TimesNewRoman,dataSize=11):f==AlphaTab.Platform.Svg.SupportedFonts.Arial?(data=AlphaTab.Platform.Svg.FontSizes.Arial11Pt,
dataSize=11):(data=new Uint8Array([8]),dataSize=11);for(var stringSize=0,i=0;i<s.length;i++){var code=Math.min(data.length-1,s.charCodeAt(i)-32);code>=0&&(stringSize+=data[code]*size/dataSize)}return stringSize*factor},AlphaTab.Platform.Svg.SupportedFonts={TimesNewRoman:0,Arial:1},AlphaTab.Platform.Svg.SvgCanvas=function(){this._buffer=null,this._currentPath=null,this._currentPathIsEmpty=!1,this._Color=null,this._LineWidth=0,this._Font=null,this._TextAlign=AlphaTab.Platform.Model.TextAlign.Left,this._TextBaseline=AlphaTab.Platform.Model.TextBaseline.Default,this._Resources=null,this._currentPath=new Array,this._currentPathIsEmpty=!0,this.set_Color(new AlphaTab.Platform.Model.Color(255,255,255,255)),this.set_LineWidth(1),this.set_Font(new AlphaTab.Platform.Model.Font("Arial",10,AlphaTab.Platform.Model.FontStyle.Plain)),this.set_TextAlign(AlphaTab.Platform.Model.TextAlign.Left),this.set_TextBaseline(AlphaTab.Platform.Model.TextBaseline.Default)},AlphaTab.Platform.Svg.SvgCanvas.prototype={get_Color:function(){return this._Color},set_Color:function(value){this._Color=value},get_LineWidth:function(){return this._LineWidth},set_LineWidth:function(value){this._LineWidth=value},get_Font:function(){return this._Font},set_Font:function(value){this._Font=value},get_TextAlign:function(){return this._TextAlign},set_TextAlign:function(value){this._TextAlign=value},get_TextBaseline:function(){return this._TextBaseline},set_TextBaseline:function(value){this._TextBaseline=value},get_Resources:function(){return this._Resources},set_Resources:function(value){this._Resources=value},BeginRender:function(width,height){this._buffer=new Array,this._buffer.push('<svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="'),this._buffer.push(width),this._buffer.push('px" height="'),this._buffer.push(height),this._buffer.push('px" class="alphaTabSurfaceSvg">\n'),this._currentPath=new Array,this._currentPathIsEmpty=!0},EndRender:function(){return this._buffer.push("</svg>"),this._buffer.join("")},FillRect:function(x,y,w,h){this._buffer.push('<rect x="'),this._buffer.push(x-.5),this._buffer.push('" y="'),this._buffer.push(y-.5),this._buffer.push('" width="'),this._buffer.push(w),this._buffer.push('" height="'),this._buffer.push(h),this._buffer.push('" style="fill:'),this._buffer.push(this.get_Color().ToRgbaString()),this._buffer.push(';" />\n')},StrokeRect:function(x,y,w,h){this._buffer.push('<rect x="'),this._buffer.push(x-.5),this._buffer.push('" y="'),this._buffer.push(y-.5),this._buffer.push('" width="'),this._buffer.push(w),this._buffer.push('" height="'),this._buffer.push(h),this._buffer.push('" style="stroke:'),this._buffer.push(this.get_Color().ToRgbaString()),this._buffer.push("; stroke-width:"),this._buffer.push(this.get_LineWidth()),this._buffer.push(';" />\n')},BeginPath:function(){},ClosePath:function(){this._currentPath.push(" z")},MoveTo:function(x,y){this._currentPath.push(" M"),this._currentPath.push(x-.5),this._currentPath.push(","),this._currentPath.push(y-.5)},LineTo:function(x,y){this._currentPathIsEmpty=!1,this._currentPath.push(" L"),this._currentPath.push(x-.5),this._currentPath.push(","),this._currentPath.push(y-.5)},QuadraticCurveTo:function(cpx,cpy,x,y){this._currentPathIsEmpty=!1,this._currentPath.push(" Q"),this._currentPath.push(cpx),this._currentPath.push(","),this._currentPath.push(cpy),this._currentPath.push(","),this._currentPath.push(x),this._currentPath.push(","),this._currentPath.push(y)},BezierCurveTo:function(cp1x,cp1y,cp2x,cp2y,x,y){this._currentPathIsEmpty=!1,this._currentPath.push(" C"),this._currentPath.push(cp1x),this._currentPath.push(","),this._currentPath.push(cp1y),this._currentPath.push(","),this._currentPath.push(cp2x),this._currentPath.push(","),this._currentPath.push(cp2y),this._currentPath.push(","),this._currentPath.push(x),this._currentPath.push(","),this._currentPath.push(y)},FillCircle:function(x,y,radius){this._currentPathIsEmpty=!1,this._currentPath.push(" M"),this._currentPath.push(x-radius),this._currentPath.push(","),this._currentPath.push(y),this._currentPath.push(" A1,1 0 0,0 "),this._currentPath.push(x+radius),this._currentPath.push(","),this._currentPath.push(y),this._currentPath.push(" A1,1 0 0,0 "),this._currentPath.push(x-radius),this._currentPath.push(","),this._currentPath.push(y),this._currentPath.push(" z"),this.Fill()},Fill:function(){this._currentPathIsEmpty||(this._buffer.push('<path d="'),this._buffer.push(this._currentPath.join("")),this._buffer.push('" style="fill:'),this._buffer.push(this.get_Color().ToRgbaString()),this._buffer.push('" stroke="none"/>\n')),this._currentPath=new Array,this._currentPathIsEmpty=!0},Stroke:function(){this._currentPathIsEmpty||(this._buffer.push('<path d="'),this._buffer.push(this._currentPath.join("")),this._buffer.push('" style="stroke:'),this._buffer.push(this.get_Color().ToRgbaString()),this._buffer.push("; stroke-width:"),this._buffer.push(this.get_LineWidth()),this._buffer.push(';" fill="none" />\n')),this._currentPath=new Array,this._currentPathIsEmpty=!0},FillText:function(text,x,y){this._buffer.push('<text x="'),this._buffer.push(x),this._buffer.push('" y="'),this._buffer.push(y+this.GetSvgBaseLineOffset()),this._buffer.push('" style="font:'),this._buffer.push(this.get_Font().ToCssString()),this._buffer.push("; fill:"),this._buffer.push(this.get_Color().ToRgbaString()),this._buffer.push(';" '),this._buffer.push(' dominant-baseline="'),this._buffer.push(this.GetSvgBaseLine()),this._buffer.push('" text-anchor="'),this._buffer.push(this.GetSvgTextAlignment()),this._buffer.push('">\n'),this._buffer.push(text),this._buffer.push("</text>\n")},GetSvgTextAlignment:function(){switch(this.get_TextAlign()){case AlphaTab.Platform.Model.TextAlign.Left:return"start";case AlphaTab.Platform.Model.TextAlign.Center:return"middle";case AlphaTab.Platform.Model.TextAlign.Right:return"end"}return""},GetSvgBaseLineOffset:function(){switch(this.get_TextBaseline()){case AlphaTab.Platform.Model.TextBaseline.Top:return 0;case AlphaTab.Platform.Model.TextBaseline.Middle:return 0;case AlphaTab.Platform.Model.TextBaseline.Bottom:return 0;default:return this.get_Font().Size}},GetSvgBaseLine:function(){switch(this.get_TextBaseline()){case AlphaTab.Platform.Model.TextBaseline.Top:return"top";case AlphaTab.Platform.Model.TextBaseline.Middle:return"middle";case AlphaTab.Platform.Model.TextBaseline.Bottom:return"bottom";default:return"top"}},MeasureText:function(text){if(null==text||0==text.length)return 0;var font=AlphaTab.Platform.Svg.SupportedFonts.Arial;return-1!=this.get_Font().Family.indexOf("Times")&&(font=AlphaTab.Platform.Svg.SupportedFonts.TimesNewRoman),AlphaTab.Platform.Svg.FontSizes.MeasureString(text,font,this.get_Font().Size,this.get_Font().Style)},FillMusicFontSymbol:function(x,y,scale,symbol){if(symbol!=AlphaTab.Rendering.Glyphs.MusicFontSymbol.None){var glyph=new AlphaTab.Rendering.Utils.SvgRenderer(AlphaTab.Rendering.Glyphs.MusicFont.SymbolLookup[symbol],scale,scale);glyph.Paint(x,y,this)}}},AlphaTab.Rendering=AlphaTab.Rendering||{},AlphaTab.Rendering.BarRendererBase=function(bar){this.Stave=null,this.X=0,this.Y=0,this.Width=0,this.Height=0,this.Index=0,this.IsEmpty=!1,this.TopOverflow=0,this.BottomOverflow=0,this.Bar=null,this.IsLinkedToPrevious=!1,this.Bar=bar,this.IsEmpty=!0},AlphaTab.Rendering.BarRendererBase.prototype={RegisterOverflowTop:function(topOverflow){topOverflow>this.TopOverflow&&(this.TopOverflow=topOverflow)},RegisterOverflowBottom:function(bottomOverflow){bottomOverflow>this.BottomOverflow&&(this.BottomOverflow=bottomOverflow)},ApplyBarSpacing:function(){},get_Resources:function(){return this.get_Layout().Renderer.RenderingResources},get_Layout:function(){return this.Stave.StaveGroup.Layout},get_Settings:function(){return this.get_Layout().Renderer.Settings},get_Scale:function(){return this.get_Settings().Scale},get_IsFirstOfLine:function(){return 0==this.Index},get_IsLastOfLine:function(){return this.Index==this.Stave.BarRenderers.length-1},get_IsLast:function(){return this.Bar.Index==this.Stave.BarRenderers.length-1},RegisterMaxSizes:function(){},ApplySizes:function(){},FinalizeRenderer:function(){},get_TopPadding:function(){return 0},get_BottomPadding:function(){return 0},DoLayout:function(){},Paint:function(){},BuildBoundingsLookup:function(lookup,visualTop,visualHeight,realTop,realHeight,x){var barLookup=new AlphaTab.Rendering.Utils.BarBoundings;barLookup.Bar=this.Bar,barLookup.IsFirstOfLine=this.get_IsFirstOfLine(),barLookup.IsLastOfLine=this.get_IsLastOfLine(),barLookup.VisualBounds=new AlphaTab.Rendering.Utils.Bounds(x+this.Stave.X+this.X,visualTop,this.Width,visualHeight),barLookup.Bounds=new AlphaTab.Rendering.Utils.Bounds(x+this.Stave.X+this.X,realTop,this.Width,realHeight),lookup.Bars.push(barLookup)}},AlphaTab.Rendering.AlternateEndingsBarRenderer=function(bar){this._endings=null,this._endingsString=null,AlphaTab.Rendering.BarRendererBase.call(this,bar);var alternateEndings=this.Bar.get_MasterBar().AlternateEndings;this._endings=[];for(var i=0;8>i;i++)0!=(alternateEndings&1<<i)&&this._endings.push(i)},AlphaTab.Rendering.AlternateEndingsBarRenderer.prototype={FinalizeRenderer:function(layout){AlphaTab.Rendering.BarRendererBase.prototype.FinalizeRenderer.call(this,layout),this.IsEmpty=0==this._endings.length},DoLayout:function(){AlphaTab.Rendering.BarRendererBase.prototype.DoLayout.call(this),0==this.Index&&(this.Stave.TopSpacing=5,this.Stave.BottomSpacing=4),this.Height=this.get_Resources().WordsFont.Size;for(var endingsStrings=new Array,i=0,j=this._endings.length;j>i;i++)endingsStrings.push(this._endings[i]+1),endingsStrings.push(". ");this._endingsString=endingsStrings.join("")},get_TopPadding:function(){return 0},get_BottomPadding:function(){return 0},ApplySizes:function(sizes){AlphaTab.Rendering.BarRendererBase.prototype.ApplySizes.call(this,sizes),this.Width=sizes.FullWidth},Paint:function(cx,cy,canvas){if(this._endings.length>0){var res=this.get_Resources();canvas.set_Font(res.WordsFont),canvas.MoveTo(cx+this.X,cy+this.Y+this.Height),canvas.LineTo(cx+this.X,cy+this.Y),canvas.LineTo(cx+this.X+this.Width,cy+this.Y),canvas.Stroke(),canvas.FillText(this._endingsString,cx+this.X+3*this.get_Scale(),cy+this.Y*this.get_Scale())}}},$StaticConstructor(function(){AlphaTab.Rendering.AlternateEndingsBarRenderer.Padding=3}),$Inherit(AlphaTab.Rendering.AlternateEndingsBarRenderer,AlphaTab.Rendering.BarRendererBase),AlphaTab.Rendering.BarRendererFactory=function(){this.IsInAccolade=!1,this.HideOnMultiTrack=!1,this.IsInAccolade=!0,this.HideOnMultiTrack=!1},AlphaTab.Rendering.BarRendererFactory.prototype={CanCreate:function(){return!0}},AlphaTab.Rendering.AlternateEndingsBarRendererFactory=function(){AlphaTab.Rendering.BarRendererFactory.call(this),this.IsInAccolade=!1},AlphaTab.Rendering.AlternateEndingsBarRendererFactory.prototype={Create:function(bar){return new AlphaTab.Rendering.AlternateEndingsBarRenderer(bar)}},$Inherit(AlphaTab.Rendering.AlternateEndingsBarRendererFactory,AlphaTab.Rendering.BarRendererFactory),AlphaTab.Rendering.EffectBarGlyphSizing={SinglePreBeatOnly:0,SinglePreBeatToOnBeat:1,SinglePreBeatToPostBeat:2,SingleOnBeatOnly:3,SingleOnBeatToPostBeat:4,SinglePostBeatOnly:5,GroupedPreBeatOnly:6,GroupedPreBeatToOnBeat:7,GroupedPreBeatToPostBeat:8,GroupedOnBeatOnly:9,GroupedOnBeatToPostBeat:10,GroupedPostBeatOnly:11},AlphaTab.Rendering.GroupedBarRenderer=function(bar){this._preBeatGlyphs=null,this._voiceContainers=null,this._postBeatGlyphs=null,this._biggestVoiceContainer=null,AlphaTab.Rendering.BarRendererBase.call(this,bar),this._preBeatGlyphs=[],this._voiceContainers={},this._postBeatGlyphs=[]},AlphaTab.Rendering.GroupedBarRenderer.prototype={DoLayout:function(){this.CreatePreBeatGlyphs(),this.CreateBeatGlyphs(),this.CreatePostBeatGlyphs(),AlphaTab.Platform.Std.Foreach(AlphaTab.Rendering.Glyphs.VoiceContainerGlyph,this._voiceContainers,$CreateAnonymousDelegate(this,function(c){c.DoLayout()})),this.UpdateWidth()},UpdateWidth:function(){this.Width=this.get_PostBeatGlyphsStart(),this._postBeatGlyphs.length>0&&(this.Width+=this._postBeatGlyphs[this._postBeatGlyphs.length-1].X+this._postBeatGlyphs[this._postBeatGlyphs.length-1].Width),AlphaTab.Platform.Std.Foreach(AlphaTab.Rendering.Glyphs.VoiceContainerGlyph,this._voiceContainers,$CreateAnonymousDelegate(this,function(c){(null==this._biggestVoiceContainer||c.Width>this._biggestVoiceContainer.Width)&&(this._biggestVoiceContainer=c)}))},GetNoteX:function(){return 0},GetNoteY:function(){return 0},RegisterMaxSizes:function(sizes){var preSize=this.get_BeatGlyphsStart();sizes.GetSize("Pre")<preSize&&sizes.SetSize("Pre",preSize),AlphaTab.Platform.Std.Foreach(AlphaTab.Rendering.Glyphs.VoiceContainerGlyph,this._voiceContainers,$CreateAnonymousDelegate(this,function(c){c.RegisterMaxSizes(sizes)}));var postSize;postSize=0==this._postBeatGlyphs.length?0:this._postBeatGlyphs[this._postBeatGlyphs.length-1].X+this._postBeatGlyphs[this._postBeatGlyphs.length-1].Width,sizes.GetSize("Post")<postSize&&sizes.SetSize("Post",postSize),sizes.FullWidth<this.Width&&(sizes.FullWidth=this.Width)},ApplySizes:function(sizes){var preSize=sizes.GetSize("Pre"),preSizeDiff=preSize-this.get_BeatGlyphsStart();preSizeDiff>0&&this.AddPreBeatGlyph(new AlphaTab.Rendering.Glyphs.SpacingGlyph(0,0,preSizeDiff,!0)),AlphaTab.Platform.Std.Foreach(AlphaTab.Rendering.Glyphs.VoiceContainerGlyph,this._voiceContainers,$CreateAnonymousDelegate(this,function(c){c.ApplySizes(sizes)}));var postSizeDiff,postSize=sizes.GetSize("Post");if(postSizeDiff=0==this._postBeatGlyphs.length?0:postSize-(this._postBeatGlyphs[this._postBeatGlyphs.length-1].X+this._postBeatGlyphs[this._postBeatGlyphs.length-1].Width),postSizeDiff>0){this._postBeatGlyphs.splice(0,0,new AlphaTab.Rendering.Glyphs.SpacingGlyph(0,0,postSizeDiff,!0));for(var i=0;i<this._postBeatGlyphs.length;i++){var g=this._postBeatGlyphs[i];g.X=0==i?0:this._postBeatGlyphs[this._postBeatGlyphs.length-1].X+this._postBeatGlyphs[this._postBeatGlyphs.length-1].Width,g.Index=i,g.Renderer=this}}this.UpdateWidth()},AddGlyph:function(c,g){this.IsEmpty=!1,g.X=0==c.length?0:c[c.length-1].X+c[c.length-1].Width,g.Index=c.length,g.Renderer=this,g.DoLayout(),c.push(g)},AddPreBeatGlyph:function(g){this.AddGlyph(this._preBeatGlyphs,g)},AddBeatGlyph:function(g){this.GetOrCreateVoiceContainer(g.Beat.Voice.Index).AddGlyph(g)},GetOrCreateVoiceContainer:function(voiceIndex){var c;return voiceIndex>=Object.keys(this._voiceContainers).length?(c=new AlphaTab.Rendering.Glyphs.VoiceContainerGlyph(0,0,voiceIndex),c.Renderer=this,this._voiceContainers[voiceIndex]=c):c=this._voiceContainers[voiceIndex],c},GetBeatContainer:function(voice,beat){return this.GetOrCreateVoiceContainer(voice).BeatGlyphs[beat]},GetPreNotesPosition:function(voice,beat){return this.GetBeatContainer(voice,beat).PreNotes},GetOnNotesPosition:function(voice,beat){return this.GetBeatContainer(voice,beat).OnNotes},GetPostNotesPosition:function(voice,beat){return this.GetBeatContainer(voice,beat).PostNotes},AddPostBeatGlyph:function(g){this.AddGlyph(this._postBeatGlyphs,g)},CreatePreBeatGlyphs:function(){},CreateBeatGlyphs:function(){},CreatePostBeatGlyphs:function(){},get_PreBeatGlyphStart:function(){return 0},get_BeatGlyphsStart:function(){var start=this.get_PreBeatGlyphStart();return this._preBeatGlyphs.length>0&&(start+=this._preBeatGlyphs[this._preBeatGlyphs.length-1].X+this._preBeatGlyphs[this._preBeatGlyphs.length-1].Width),start},get_PostBeatGlyphsStart:function(){var start=this.get_BeatGlyphsStart(),offset=0;return AlphaTab.Platform.Std.Foreach(AlphaTab.Rendering.Glyphs.VoiceContainerGlyph,this._voiceContainers,$CreateAnonymousDelegate(this,function(c){c.Width>offset&&(offset=c.Width)})),start+offset},get_PostBeatGlyphsWidth:function(){for(var width=0,i=0,j=this._postBeatGlyphs.length;j>i;i++){var c=this._postBeatGlyphs[i],x=c.X+c.Width;x>width&&(width=x)}return width},ApplyBarSpacing:function(spacing){this.Width+=spacing,AlphaTab.Platform.Std.Foreach(AlphaTab.Rendering.Glyphs.VoiceContainerGlyph,this._voiceContainers,$CreateAnonymousDelegate(this,function(c){var toApply=spacing;null!=this._biggestVoiceContainer&&(toApply+=this._biggestVoiceContainer.Width-c.Width),c.ApplyGlyphSpacing(toApply)}))},FinalizeRenderer:function(layout){AlphaTab.Platform.Std.Foreach(AlphaTab.Rendering.Glyphs.VoiceContainerGlyph,this._voiceContainers,$CreateAnonymousDelegate(this,function(c){c.FinalizeGlyph(layout)}))},Paint:function(cx,cy,canvas){this.PaintBackground(cx,cy,canvas);for(var glyphStartX=this.get_PreBeatGlyphStart(),i=0,j=this._preBeatGlyphs.length;j>i;i++){var g=this._preBeatGlyphs[i];g.Paint(cx+this.X+glyphStartX,cy+this.Y,canvas)}glyphStartX=this.get_BeatGlyphsStart(),AlphaTab.Platform.Std.Foreach(AlphaTab.Rendering.Glyphs.VoiceContainerGlyph,this._voiceContainers,$CreateAnonymousDelegate(this,function(c){c.Paint(cx+this.X+glyphStartX,cy+this.Y,canvas)})),glyphStartX=this.Width-this.get_PostBeatGlyphsWidth();for(var i=0,j=this._postBeatGlyphs.length;j>i;i++){var g=this._postBeatGlyphs[i];g.Paint(cx+this.X+glyphStartX,cy+this.Y,canvas)}},PaintBackground:function(){},BuildBoundingsLookup:function(lookup,visualTop,visualHeight,realTop,realHeight,x){AlphaTab.Rendering.BarRendererBase.prototype.BuildBoundingsLookup.call(this,lookup,visualTop,visualHeight,realTop,realHeight,x);var barLookup=lookup.Bars[lookup.Bars.length-1],beatStart=this.get_BeatGlyphsStart();AlphaTab.Platform.Std.Foreach(AlphaTab.Rendering.Glyphs.VoiceContainerGlyph,this._voiceContainers,$CreateAnonymousDelegate(this,function(c){for(var i=0,j=c.BeatGlyphs.length;j>i;i++){var bc=c.BeatGlyphs[i],beatLookup=new AlphaTab.Rendering.Utils.BeatBoundings;beatLookup.Beat=bc.Beat,beatLookup.VisualBounds=new AlphaTab.Rendering.Utils.Bounds(x+this.Stave.X+this.X+beatStart+c.X+bc.X+bc.OnNotes.X,visualTop,bc.OnNotes.Width,visualHeight),beatLookup.Bounds=new AlphaTab.Rendering.Utils.Bounds(x+this.Stave.X+this.X+beatStart+c.X+bc.X,realTop,bc.Width,realHeight),barLookup.Beats.push(beatLookup)}}))}},$StaticConstructor(function(){AlphaTab.Rendering.GroupedBarRenderer.KeySizePre="Pre",AlphaTab.Rendering.GroupedBarRenderer.KeySizePost="Post"}),$Inherit(AlphaTab.Rendering.GroupedBarRenderer,AlphaTab.Rendering.BarRendererBase),AlphaTab.Rendering.EffectBarRenderer=function(bar,info){this._info=null,this._uniqueEffectGlyphs=null,this._effectGlyphs=null,this._lastBeat=null,AlphaTab.Rendering.GroupedBarRenderer.call(this,bar),this._info=info,this._uniqueEffectGlyphs=[],this._effectGlyphs=[]},AlphaTab.Rendering.EffectBarRenderer.prototype={DoLayout:function(){AlphaTab.Rendering.GroupedBarRenderer.prototype.DoLayout.call(this),0==this.Index&&(this.Stave.TopSpacing=5,this.Stave.BottomSpacing=5),this.Height=this._info.GetHeight(this)},FinalizeRenderer:function(layout){AlphaTab.Rendering.GroupedBarRenderer.prototype.FinalizeRenderer.call(this,layout),this.IsEmpty=!0;var prevGlyph=null;if(this.Index>0){var prevRenderer=this.Stave.BarRenderers[this.Index-1];null!=prevRenderer._lastBeat&&prevRenderer._effectGlyphs[0].hasOwnProperty(prevRenderer._lastBeat.Index)&&(prevGlyph=prevRenderer._effectGlyphs[0][prevRenderer._lastBeat.Index])}for(var $i19=0,$t19=Object.keys(this._effectGlyphs[0]),$l19=$t19.length,key=$t19[$i19];$l19>$i19;$i19++,key=$t19[$i19]){var beatIndex=AlphaTab.Platform.Std.ParseInt(key),effect=this._effectGlyphs[0][beatIndex];this.AlignGlyph(this._info.get_SizingMode(),beatIndex,0,prevGlyph),prevGlyph=effect,this.IsEmpty=!1}},AlignGlyph:function(sizing,beatIndex,voiceIndex,prevGlyph){var pos,g=this._effectGlyphs[voiceIndex][beatIndex],container=this.GetBeatContainer(voiceIndex,beatIndex);switch(sizing){case AlphaTab.Rendering.EffectBarGlyphSizing.SinglePreBeatOnly:pos=container.PreNotes,g.X=pos.X+container.X,g.Width=pos.Width;break;case AlphaTab.Rendering.EffectBarGlyphSizing.SinglePreBeatToOnBeat:pos=container.PreNotes,g.X=pos.X+container.X,pos=container.OnNotes,g.Width=pos.X+container.X+pos.Width-g.X;break;case AlphaTab.Rendering.EffectBarGlyphSizing.SinglePreBeatToPostBeat:pos=container.PreNotes,g.X=pos.X+container.X,pos=container.PostNotes,g.Width=pos.X+container.X+pos.Width-g.X;break;case AlphaTab.Rendering.EffectBarGlyphSizing.SingleOnBeatOnly:pos=container.OnNotes,g.X=pos.X+container.X,g.Width=pos.Width;break;case AlphaTab.Rendering.EffectBarGlyphSizing.SingleOnBeatToPostBeat:pos=container.OnNotes,g.X=pos.X+container.X,pos=container.PostNotes,g.Width=pos.X+container.X+pos.Width-g.X;break;case AlphaTab.Rendering.EffectBarGlyphSizing.SinglePostBeatOnly:pos=container.PostNotes,g.X=pos.X+container.X,g.Width=pos.Width;break;case AlphaTab.Rendering.EffectBarGlyphSizing.GroupedPreBeatOnly:if(g!=prevGlyph)this.AlignGlyph(AlphaTab.Rendering.EffectBarGlyphSizing.SinglePreBeatOnly,beatIndex,voiceIndex,prevGlyph);else{pos=container.PreNotes;var posR=pos.Renderer,gR=g.Renderer;g.Width=posR.X+posR.get_BeatGlyphsStart()+container.X+pos.X+pos.Width-(gR.X+gR.get_BeatGlyphsStart()+g.X),g.ExpandTo(container.Beat)}break;case AlphaTab.Rendering.EffectBarGlyphSizing.GroupedPreBeatToOnBeat:if(g!=prevGlyph)this.AlignGlyph(AlphaTab.Rendering.EffectBarGlyphSizing.SinglePreBeatToOnBeat,beatIndex,voiceIndex,prevGlyph);else{pos=container.OnNotes;var posR=pos.Renderer,gR=g.Renderer;g.Width=posR.X+posR.get_BeatGlyphsStart()+container.X+pos.X+pos.Width-(gR.X+gR.get_BeatGlyphsStart()+g.X),g.ExpandTo(container.Beat)}break;case AlphaTab.Rendering.EffectBarGlyphSizing.GroupedPreBeatToPostBeat:if(g!=prevGlyph)this.AlignGlyph(AlphaTab.Rendering.EffectBarGlyphSizing.SinglePreBeatToPostBeat,beatIndex,voiceIndex,prevGlyph);else{pos=container.PostNotes;var posR=pos.Renderer,gR=g.Renderer;g.Width=posR.X+posR.get_BeatGlyphsStart()+container.X+pos.X+pos.Width-(gR.X+gR.get_BeatGlyphsStart()+g.X),g.ExpandTo(container.Beat)}break;case AlphaTab.Rendering.EffectBarGlyphSizing.GroupedOnBeatOnly:if(g!=prevGlyph)this.AlignGlyph(AlphaTab.Rendering.EffectBarGlyphSizing.SingleOnBeatOnly,beatIndex,voiceIndex,prevGlyph);else{pos=container.OnNotes;var posR=pos.Renderer,gR=g.Renderer;g.Width=posR.X+posR.get_BeatGlyphsStart()+container.X+pos.X+pos.Width-(gR.X+gR.get_BeatGlyphsStart()+g.X),g.ExpandTo(container.Beat)}break;case AlphaTab.Rendering.EffectBarGlyphSizing.GroupedOnBeatToPostBeat:if(g!=prevGlyph)this.AlignGlyph(AlphaTab.Rendering.EffectBarGlyphSizing.SingleOnBeatToPostBeat,beatIndex,voiceIndex,prevGlyph);else{pos=container.PostNotes;var posR=pos.Renderer,gR=g.Renderer;g.Width=posR.X+posR.get_BeatGlyphsStart()+container.X+pos.X+pos.Width-(gR.X+gR.get_BeatGlyphsStart()+g.X),g.ExpandTo(container.Beat)}break;case AlphaTab.Rendering.EffectBarGlyphSizing.GroupedPostBeatOnly:if(g!=prevGlyph)this.AlignGlyph(AlphaTab.Rendering.EffectBarGlyphSizing.GroupedPostBeatOnly,beatIndex,voiceIndex,prevGlyph);else{pos=container.PostNotes;var posR=pos.Renderer,gR=g.Renderer;g.Width=posR.X+posR.get_BeatGlyphsStart()+container.X+pos.X+pos.Width-(gR.X+gR.get_BeatGlyphsStart()+g.X),g.ExpandTo(container.Beat)}}},CreatePreBeatGlyphs:function(){},CreateBeatGlyphs:function(){this._effectGlyphs.push({}),this._uniqueEffectGlyphs.push([]),this.CreateVoiceGlyphs(this.Bar.Voices[0])},CreateVoiceGlyphs:function(v){for(var i=0,j=v.Beats.length;j>i;i++){var b=v.Beats[i],container=new AlphaTab.Rendering.Glyphs.BeatContainerGlyph(b);container.PreNotes=new AlphaTab.Rendering.Glyphs.BeatGlyphBase,container.OnNotes=new AlphaTab.Rendering.Glyphs.BeatGlyphBase,container.PostNotes=new AlphaTab.Rendering.Glyphs.BeatGlyphBase,this.AddBeatGlyph(container),this._info.ShouldCreateGlyph(this,b)&&this.CreateOrResizeGlyph(this._info.get_SizingMode(),b),this._lastBeat=b}},CreateOrResizeGlyph:function(sizing,b){switch(sizing){case AlphaTab.Rendering.EffectBarGlyphSizing.SinglePreBeatOnly:case AlphaTab.Rendering.EffectBarGlyphSizing.SinglePreBeatToOnBeat:case AlphaTab.Rendering.EffectBarGlyphSizing.SinglePreBeatToPostBeat:case AlphaTab.Rendering.EffectBarGlyphSizing.SingleOnBeatOnly:case AlphaTab.Rendering.EffectBarGlyphSizing.SingleOnBeatToPostBeat:case AlphaTab.Rendering.EffectBarGlyphSizing.SinglePostBeatOnly:var g=this._info.CreateNewGlyph(this,b);g.Renderer=this,g.DoLayout(),this._effectGlyphs[b.Voice.Index][b.Index]=g,this._uniqueEffectGlyphs[b.Voice.Index].push(g);break;case AlphaTab.Rendering.EffectBarGlyphSizing.GroupedPreBeatOnly:case AlphaTab.Rendering.EffectBarGlyphSizing.GroupedPreBeatToOnBeat:case AlphaTab.Rendering.EffectBarGlyphSizing.GroupedPreBeatToPostBeat:case AlphaTab.Rendering.EffectBarGlyphSizing.GroupedOnBeatOnly:case AlphaTab.Rendering.EffectBarGlyphSizing.GroupedOnBeatToPostBeat:case AlphaTab.Rendering.EffectBarGlyphSizing.GroupedPostBeatOnly:if(b.Index>0||this.Index>0){var prevBeat=b.PreviousBeat;if(this._info.ShouldCreateGlyph(this,prevBeat)){var previousRenderer=null,prevEffect=null;if(b.Index>0&&this._effectGlyphs[b.Voice.Index].hasOwnProperty(prevBeat.Index))prevEffect=this._effectGlyphs[b.Voice.Index][prevBeat.Index];else if(this.Index>0){previousRenderer=this.Stave.BarRenderers[this.Index-1];var voiceGlyphs=previousRenderer._effectGlyphs[b.Voice.Index];voiceGlyphs.hasOwnProperty(prevBeat.Index)&&(prevEffect=voiceGlyphs[prevBeat.Index])}null!=prevEffect&&this._info.CanExpand(this,prevBeat,b)?(this._effectGlyphs[b.Voice.Index][b.Index]=prevEffect,null!=previousRenderer&&(this.IsLinkedToPrevious=!0)):this.CreateOrResizeGlyph(AlphaTab.Rendering.EffectBarGlyphSizing.SinglePreBeatOnly,b)}else this.CreateOrResizeGlyph(AlphaTab.Rendering.EffectBarGlyphSizing.SinglePreBeatOnly,b)}else this.CreateOrResizeGlyph(AlphaTab.Rendering.EffectBarGlyphSizing.SinglePreBeatOnly,b)}},CreatePostBeatGlyphs:function(){},get_TopPadding:function(){return 0},get_BottomPadding:function(){return 0},PaintBackground:function(){},Paint:function(cx,cy,canvas){AlphaTab.Rendering.GroupedBarRenderer.prototype.Paint.call(this,cx,cy,canvas);for(var glyphStart=this.get_BeatGlyphsStart(),i=0,j=this._uniqueEffectGlyphs.length;j>i;i++)for(var v=this._uniqueEffectGlyphs[i],k=0,l=v.length;l>k;k++){var g=v[k];g.Renderer==this&&g.Paint(cx+this.X+glyphStart,cy+this.Y,canvas)}}},$Inherit(AlphaTab.Rendering.EffectBarRenderer,AlphaTab.Rendering.GroupedBarRenderer),AlphaTab.Rendering.EffectBarRendererFactory=function(info){this._info=null,AlphaTab.Rendering.BarRendererFactory.call(this),this._info=info,this.IsInAccolade=!1,this.HideOnMultiTrack=info.get_HideOnMultiTrack()},AlphaTab.Rendering.EffectBarRendererFactory.prototype={Create:function(bar){return new AlphaTab.Rendering.EffectBarRenderer(bar,this._info)}},$Inherit(AlphaTab.Rendering.EffectBarRendererFactory,AlphaTab.Rendering.BarRendererFactory),AlphaTab.Rendering.Effects=AlphaTab.Rendering.Effects||{},AlphaTab.Rendering.Effects.BeatVibratoEffectInfo=function(){},AlphaTab.Rendering.Effects.BeatVibratoEffectInfo.prototype={get_HideOnMultiTrack:function(){return!1},ShouldCreateGlyph:function(renderer,beat){return beat.Vibrato!=AlphaTab.Model.VibratoType.None},get_SizingMode:function(){return AlphaTab.Rendering.EffectBarGlyphSizing.GroupedOnBeatToPostBeat},GetHeight:function(renderer){return 17*renderer.get_Scale()},CreateNewGlyph:function(renderer){return new AlphaTab.Rendering.Glyphs.VibratoGlyph(0,5*renderer.get_Scale(),1.15)},CanExpand:function(){return!0}},AlphaTab.Rendering.Effects.ChordsEffectInfo=function(){},AlphaTab.Rendering.Effects.ChordsEffectInfo.prototype={get_HideOnMultiTrack:function(){return!1},ShouldCreateGlyph:function(renderer,beat){return beat.get_HasChord()},get_SizingMode:function(){return AlphaTab.Rendering.EffectBarGlyphSizing.SingleOnBeatOnly},GetHeight:function(renderer){return 20*renderer.get_Scale()},CreateNewGlyph:function(renderer,beat){return new AlphaTab.Rendering.Glyphs.TextGlyph(0,0,beat.get_Chord().Name,renderer.get_Resources().EffectFont,AlphaTab.Platform.Model.TextAlign.Left)},CanExpand:function(){return!0}},AlphaTab.Rendering.Effects.CrescendoEffectInfo=function(){},AlphaTab.Rendering.Effects.CrescendoEffectInfo.prototype={get_HideOnMultiTrack:function(){return!1},ShouldCreateGlyph:function(renderer,beat){return beat.Crescendo!=AlphaTab.Model.CrescendoType.None},get_SizingMode:function(){return AlphaTab.Rendering.EffectBarGlyphSizing.GroupedPreBeatToPostBeat},GetHeight:function(renderer){return 17*renderer.get_Scale()},CreateNewGlyph:function(renderer,beat){return new AlphaTab.Rendering.Glyphs.CrescendoGlyph(0,0,beat.Crescendo)},CanExpand:function(renderer,from,to){return from.Crescendo==to.Crescendo}},AlphaTab.Rendering.Glyphs=AlphaTab.Rendering.Glyphs||{},AlphaTab.Rendering.Glyphs.Glyph=function(x,y){this.Index=0,this.X=0,this.Y=0,this.Width=0,this.Renderer=null,this.X=x,this.Y=y},AlphaTab.Rendering.Glyphs.Glyph.prototype={ApplyGlyphSpacing:function(spacing){this.get_CanScale()&&(this.Width+=spacing)},get_CanScale:function(){return!0},get_Scale:function(){return this.Renderer.get_Scale()},DoLayout:function(){},Paint:function(){}},AlphaTab.Rendering.Glyphs.EffectGlyph=function(x,y){AlphaTab.Rendering.Glyphs.Glyph.call(this,x,y)},AlphaTab.Rendering.Glyphs.EffectGlyph.prototype={ExpandTo:function(){}},$Inherit(AlphaTab.Rendering.Glyphs.EffectGlyph,AlphaTab.Rendering.Glyphs.Glyph),AlphaTab.Rendering.Effects.DummyEffectGlyph=function(x,y,s){this._s=null,AlphaTab.Rendering.Glyphs.EffectGlyph.call(this,x,y),this._s=s},AlphaTab.Rendering.Effects.DummyEffectGlyph.prototype={DoLayout:function(){this.Width=20*this.get_Scale()},get_CanScale:function(){return!1},Paint:function(cx,cy,canvas){var res=this.Renderer.get_Resources();canvas.set_Color(res.MainGlyphColor),canvas.StrokeRect(cx+this.X,cy+this.Y,this.Width,20*this.get_Scale()),canvas.set_Font(res.TablatureFont),canvas.FillText(this._s,cx+this.X,cy+this.Y)}},$Inherit(AlphaTab.Rendering.Effects.DummyEffectGlyph,AlphaTab.Rendering.Glyphs.EffectGlyph),AlphaTab.Rendering.Effects.DynamicsEffectInfo=function(){},AlphaTab.Rendering.Effects.DynamicsEffectInfo.prototype={get_HideOnMultiTrack:function(){return!1},ShouldCreateGlyph:function(renderer,beat){return 0==beat.Voice.Index&&(0==beat.Index&&0==beat.Voice.Bar.Index||null!=beat.PreviousBeat&&beat.Dynamic!=beat.PreviousBeat.Dynamic)},get_SizingMode:function(){return AlphaTab.Rendering.EffectBarGlyphSizing.SingleOnBeatOnly},GetHeight:function(renderer){return 15*renderer.get_Scale()},CreateNewGlyph:function(renderer,beat){return new AlphaTab.Rendering.Glyphs.DynamicsGlyph(0,0,beat.Dynamic)},CanExpand:function(){return!0}},AlphaTab.Rendering.Effects.FadeInEffectInfo=function(){},AlphaTab.Rendering.Effects.FadeInEffectInfo.prototype={get_HideOnMultiTrack:function(){return!1},ShouldCreateGlyph:function(renderer,beat){return beat.FadeIn},get_SizingMode:function(){return AlphaTab.Rendering.EffectBarGlyphSizing.SingleOnBeatOnly},GetHeight:function(renderer){return 20*renderer.get_Scale()},CreateNewGlyph:function(){return new AlphaTab.Rendering.Glyphs.FadeInGlyph(0,0)},CanExpand:function(){return!0}},AlphaTab.Rendering.Effects.NoteEffectInfoBase=function(){this.LastCreateInfo=null},AlphaTab.Rendering.Effects.NoteEffectInfoBase.prototype={get_HideOnMultiTrack:function(){return!1},ShouldCreateGlyph:function(renderer,beat){this.LastCreateInfo=[];for(var i=0,j=beat.Notes.length;j>i;i++){var n=beat.Notes[i];this.ShouldCreateGlyphForNote(renderer,n)&&this.LastCreateInfo.push(n)}return this.LastCreateInfo.length>0},CanExpand:function(){return!0}},AlphaTab.Rendering.Effects.FingeringEffectInfo=function(){this._maxGlyphCount=0,AlphaTab.Rendering.Effects.NoteEffectInfoBase.call(this)},AlphaTab.Rendering.Effects.FingeringEffectInfo.prototype={ShouldCreateGlyph:function(renderer,beat){var result=AlphaTab.Rendering.Effects.NoteEffectInfoBase.prototype.ShouldCreateGlyph.call(this,renderer,beat);return this.LastCreateInfo.length>=this._maxGlyphCount&&(this._maxGlyphCount=this.LastCreateInfo.length),result},ShouldCreateGlyphForNote:function(renderer,note){return note.LeftHandFinger!=AlphaTab.Model.Fingers.NoOrDead&&note.LeftHandFinger!=AlphaTab.Model.Fingers.Unknown||note.RightHandFinger!=AlphaTab.Model.Fingers.NoOrDead&&note.RightHandFinger!=AlphaTab.Model.Fingers.Unknown},GetHeight:function(renderer){return 20*this._maxGlyphCount*renderer.get_Scale();

},get_SizingMode:function(){return AlphaTab.Rendering.EffectBarGlyphSizing.SingleOnBeatOnly},CreateNewGlyph:function(){return new AlphaTab.Rendering.Effects.DummyEffectGlyph(0,0,this.LastCreateInfo.length+"fingering")}},$Inherit(AlphaTab.Rendering.Effects.FingeringEffectInfo,AlphaTab.Rendering.Effects.NoteEffectInfoBase),AlphaTab.Rendering.Effects.LetRingEffectInfo=function(){AlphaTab.Rendering.Effects.NoteEffectInfoBase.call(this)},AlphaTab.Rendering.Effects.LetRingEffectInfo.prototype={ShouldCreateGlyphForNote:function(renderer,note){return note.IsLetRing},GetHeight:function(renderer){return 15*renderer.get_Scale()},get_SizingMode:function(){return AlphaTab.Rendering.EffectBarGlyphSizing.GroupedOnBeatToPostBeat},CreateNewGlyph:function(){return new AlphaTab.Rendering.Glyphs.LineRangedGlyph(0,0,"LetRing")}},$Inherit(AlphaTab.Rendering.Effects.LetRingEffectInfo,AlphaTab.Rendering.Effects.NoteEffectInfoBase),AlphaTab.Rendering.Effects.MarkerEffectInfo=function(){},AlphaTab.Rendering.Effects.MarkerEffectInfo.prototype={get_HideOnMultiTrack:function(){return!0},ShouldCreateGlyph:function(renderer,beat){return 0==beat.Index&&beat.Voice.Bar.get_MasterBar().get_IsSectionStart()},get_SizingMode:function(){return AlphaTab.Rendering.EffectBarGlyphSizing.SinglePreBeatOnly},GetHeight:function(renderer){return 20*renderer.get_Scale()},CreateNewGlyph:function(renderer,beat){return new AlphaTab.Rendering.Glyphs.TextGlyph(0,0,beat.Voice.Bar.get_MasterBar().Section.Text,renderer.get_Resources().MarkerFont,AlphaTab.Platform.Model.TextAlign.Left)},CanExpand:function(){return!0}},AlphaTab.Rendering.Effects.NoteVibratoEffectInfo=function(){AlphaTab.Rendering.Effects.NoteEffectInfoBase.call(this)},AlphaTab.Rendering.Effects.NoteVibratoEffectInfo.prototype={ShouldCreateGlyphForNote:function(renderer,note){return note.Vibrato!=AlphaTab.Model.VibratoType.None||note.IsTieDestination&&note.TieOrigin.Vibrato!=AlphaTab.Model.VibratoType.None},GetHeight:function(renderer){return 15*renderer.get_Scale()},get_SizingMode:function(){return AlphaTab.Rendering.EffectBarGlyphSizing.GroupedOnBeatToPostBeat},CreateNewGlyph:function(renderer){return new AlphaTab.Rendering.Glyphs.VibratoGlyph(0,5*renderer.get_Scale(),.9)}},$Inherit(AlphaTab.Rendering.Effects.NoteVibratoEffectInfo,AlphaTab.Rendering.Effects.NoteEffectInfoBase),AlphaTab.Rendering.Effects.PalmMuteEffectInfo=function(){AlphaTab.Rendering.Effects.NoteEffectInfoBase.call(this)},AlphaTab.Rendering.Effects.PalmMuteEffectInfo.prototype={ShouldCreateGlyphForNote:function(renderer,note){return note.IsPalmMute},GetHeight:function(renderer){return 20*renderer.get_Scale()},get_SizingMode:function(){return AlphaTab.Rendering.EffectBarGlyphSizing.GroupedOnBeatToPostBeat},CreateNewGlyph:function(){return new AlphaTab.Rendering.Glyphs.LineRangedGlyph(0,0,"PalmMute")}},$Inherit(AlphaTab.Rendering.Effects.PalmMuteEffectInfo,AlphaTab.Rendering.Effects.NoteEffectInfoBase),AlphaTab.Rendering.Effects.PickStrokeEffectInfo=function(){},AlphaTab.Rendering.Effects.PickStrokeEffectInfo.prototype={get_HideOnMultiTrack:function(){return!1},ShouldCreateGlyph:function(renderer,beat){return beat.PickStroke!=AlphaTab.Model.PickStrokeType.None},get_SizingMode:function(){return AlphaTab.Rendering.EffectBarGlyphSizing.SingleOnBeatOnly},GetHeight:function(renderer){return 20*renderer.get_Scale()},CreateNewGlyph:function(renderer,beat){return new AlphaTab.Rendering.Glyphs.PickStrokeGlyph(0,0,beat.PickStroke)},CanExpand:function(){return!0}},AlphaTab.Rendering.Effects.TapEffectInfo=function(){},AlphaTab.Rendering.Effects.TapEffectInfo.prototype={get_HideOnMultiTrack:function(){return!1},ShouldCreateGlyph:function(renderer,beat){return beat.Slap||beat.Pop||beat.Tap},get_SizingMode:function(){return AlphaTab.Rendering.EffectBarGlyphSizing.SingleOnBeatOnly},GetHeight:function(renderer){return 20*renderer.get_Scale()},CreateNewGlyph:function(renderer,beat){var res=renderer.get_Resources();return beat.Slap?new AlphaTab.Rendering.Glyphs.TextGlyph(0,0,"S",res.EffectFont,AlphaTab.Platform.Model.TextAlign.Left):beat.Pop?new AlphaTab.Rendering.Glyphs.TextGlyph(0,0,"P",res.EffectFont,AlphaTab.Platform.Model.TextAlign.Left):new AlphaTab.Rendering.Glyphs.TextGlyph(0,0,"T",res.EffectFont,AlphaTab.Platform.Model.TextAlign.Left)},CanExpand:function(){return!0}},AlphaTab.Rendering.Effects.TempoEffectInfo=function(){},AlphaTab.Rendering.Effects.TempoEffectInfo.prototype={get_HideOnMultiTrack:function(){return!0},ShouldCreateGlyph:function(renderer,beat){return 0==beat.Index&&(null!=beat.Voice.Bar.get_MasterBar().TempoAutomation||0==beat.Voice.Bar.Index)},get_SizingMode:function(){return AlphaTab.Rendering.EffectBarGlyphSizing.SinglePreBeatOnly},GetHeight:function(renderer){return 25*renderer.get_Scale()},CreateNewGlyph:function(renderer,beat){var tempo;return tempo=null!=beat.Voice.Bar.get_MasterBar().TempoAutomation?0|beat.Voice.Bar.get_MasterBar().TempoAutomation.Value:beat.Voice.Bar.Track.Score.Tempo,new AlphaTab.Rendering.Glyphs.TempoGlyph(0,0,tempo)},CanExpand:function(){return!0}},AlphaTab.Rendering.Effects.TextEffectInfo=function(){},AlphaTab.Rendering.Effects.TextEffectInfo.prototype={get_HideOnMultiTrack:function(){return!1},ShouldCreateGlyph:function(renderer,beat){return!AlphaTab.Platform.Std.IsNullOrWhiteSpace(beat.Text)},get_SizingMode:function(){return AlphaTab.Rendering.EffectBarGlyphSizing.SingleOnBeatOnly},GetHeight:function(renderer){return 20*renderer.get_Scale()},CreateNewGlyph:function(renderer,beat){return new AlphaTab.Rendering.Glyphs.TextGlyph(0,0,beat.Text,renderer.get_Resources().EffectFont,AlphaTab.Platform.Model.TextAlign.Left)},CanExpand:function(){return!0}},AlphaTab.Rendering.Effects.TrillEffectInfo=function(){AlphaTab.Rendering.Effects.NoteEffectInfoBase.call(this)},AlphaTab.Rendering.Effects.TrillEffectInfo.prototype={ShouldCreateGlyphForNote:function(renderer,note){return note.get_IsTrill()},GetHeight:function(renderer){return 20*renderer.get_Scale()},get_SizingMode:function(){return AlphaTab.Rendering.EffectBarGlyphSizing.SingleOnBeatToPostBeat},CreateNewGlyph:function(){return new AlphaTab.Rendering.Glyphs.TrillGlyph(0,0,.9)}},$Inherit(AlphaTab.Rendering.Effects.TrillEffectInfo,AlphaTab.Rendering.Effects.NoteEffectInfoBase),AlphaTab.Rendering.Effects.TripletFeelEffectInfo=function(){},AlphaTab.Rendering.Effects.TripletFeelEffectInfo.prototype={get_HideOnMultiTrack:function(){return!0},ShouldCreateGlyph:function(renderer,beat){return 0==beat.Index&&0==beat.Voice.Bar.get_MasterBar().Index&&beat.Voice.Bar.get_MasterBar().TripletFeel!=AlphaTab.Model.TripletFeel.NoTripletFeel||beat.Voice.Bar.get_MasterBar().Index>0&&beat.Voice.Bar.get_MasterBar().TripletFeel!=beat.Voice.Bar.get_MasterBar().PreviousMasterBar.TripletFeel},get_SizingMode:function(){return AlphaTab.Rendering.EffectBarGlyphSizing.SingleOnBeatOnly},GetHeight:function(renderer){return 20*renderer.get_Scale()},CreateNewGlyph:function(){return new AlphaTab.Rendering.Effects.DummyEffectGlyph(0,0,"TripletFeel")},CanExpand:function(){return!0}},AlphaTab.Rendering.Glyphs.MusicFontGlyph=function(x,y,scale,symbol){this._scale=0,this._symbol=AlphaTab.Rendering.Glyphs.MusicFontSymbol.None,AlphaTab.Rendering.Glyphs.EffectGlyph.call(this,x,y),this._scale=scale,this._symbol=symbol},AlphaTab.Rendering.Glyphs.MusicFontGlyph.prototype={Paint:function(cx,cy,canvas){canvas.FillMusicFontSymbol(cx+this.X,cy+this.Y,this._scale*this.get_Scale(),this._symbol)}},$Inherit(AlphaTab.Rendering.Glyphs.MusicFontGlyph,AlphaTab.Rendering.Glyphs.EffectGlyph),AlphaTab.Rendering.Glyphs.AccentuationGlyph=function(x,y,accentuation){AlphaTab.Rendering.Glyphs.MusicFontGlyph.call(this,x,y,1,AlphaTab.Rendering.Glyphs.AccentuationGlyph.GetSymbol(accentuation))},AlphaTab.Rendering.Glyphs.AccentuationGlyph.prototype={DoLayout:function(){this.Width=9*this.get_Scale()},get_CanScale:function(){return!1}},AlphaTab.Rendering.Glyphs.AccentuationGlyph.GetSymbol=function(accentuation){switch(accentuation){case AlphaTab.Model.AccentuationType.None:return AlphaTab.Rendering.Glyphs.MusicFontSymbol.None;case AlphaTab.Model.AccentuationType.Normal:return AlphaTab.Rendering.Glyphs.MusicFontSymbol.Accentuation;case AlphaTab.Model.AccentuationType.Heavy:return AlphaTab.Rendering.Glyphs.MusicFontSymbol.HeavyAccentuation;default:return AlphaTab.Rendering.Glyphs.MusicFontSymbol.None}},$Inherit(AlphaTab.Rendering.Glyphs.AccentuationGlyph,AlphaTab.Rendering.Glyphs.MusicFontGlyph),AlphaTab.Rendering.Glyphs.GlyphGroup=function(x,y){this.Glyphs=null,AlphaTab.Rendering.Glyphs.Glyph.call(this,x,y)},AlphaTab.Rendering.Glyphs.GlyphGroup.prototype={DoLayout:function(){if(null==this.Glyphs||0==this.Glyphs.length)return void(this.Width=0);for(var w=0,i=0,j=this.Glyphs.length;j>i;i++){var g=this.Glyphs[i];g.Renderer=this.Renderer,g.DoLayout(),w=Math.max(w,g.Width)}this.Width=w},AddGlyph:function(g){null==this.Glyphs&&(this.Glyphs=[]),this.Glyphs.push(g)},Paint:function(cx,cy,canvas){if(null!=this.Glyphs&&0!=this.Glyphs.length)for(var i=0,j=this.Glyphs.length;j>i;i++){var g=this.Glyphs[i];g.Renderer=this.Renderer,g.Paint(cx+this.X,cy+this.Y,canvas)}}},$Inherit(AlphaTab.Rendering.Glyphs.GlyphGroup,AlphaTab.Rendering.Glyphs.Glyph),AlphaTab.Rendering.Glyphs.AccidentalGroupGlyph=function(){AlphaTab.Rendering.Glyphs.GlyphGroup.call(this,0,0)},AlphaTab.Rendering.Glyphs.AccidentalGroupGlyph.prototype={DoLayout:function(){if(null==this.Glyphs)return void(this.Width=0);this.Glyphs.sort($CreateAnonymousDelegate(this,function(a,b){return a.Y-b.Y}));var columns=[];columns.push(-3e3);for(var accidentalSize=21*this.get_Scale(),i=0,j=this.Glyphs.length;j>i;i++){var g=this.Glyphs[i];g.Renderer=this.Renderer,g.DoLayout();for(var gColumn=0;columns[gColumn]>g.Y;)gColumn++,gColumn==columns.length&&columns.push(-3e3);g.X=gColumn,columns[gColumn]=g.Y+accidentalSize}var columnWidth=8*this.get_Scale();this.Width=0==this.Glyphs.length?0:columnWidth*columns.length;for(var i=0,j=this.Glyphs.length;j>i;i++){var g=this.Glyphs[i];g.X=this.Width-(g.X+1)*columnWidth}}},$StaticConstructor(function(){AlphaTab.Rendering.Glyphs.AccidentalGroupGlyph.NonReserved=-3e3}),$Inherit(AlphaTab.Rendering.Glyphs.AccidentalGroupGlyph,AlphaTab.Rendering.Glyphs.GlyphGroup),AlphaTab.Rendering.Glyphs.BarNumberGlyph=function(x,y,number,hidden){this._number=0,this._hidden=!1,AlphaTab.Rendering.Glyphs.Glyph.call(this,x,y),this._number=number,this._hidden=hidden},AlphaTab.Rendering.Glyphs.BarNumberGlyph.prototype={DoLayout:function(){this.Width=10*this.get_Scale()},get_CanScale:function(){return!1},Paint:function(cx,cy,canvas){if(!this._hidden){var res=this.Renderer.get_Resources();canvas.set_Color(res.BarNumberColor),canvas.set_Font(res.BarNumberFont),canvas.FillText(this._number.toString(),cx+this.X,cy+this.Y),canvas.set_Color(res.MainGlyphColor)}}},$Inherit(AlphaTab.Rendering.Glyphs.BarNumberGlyph,AlphaTab.Rendering.Glyphs.Glyph),AlphaTab.Rendering.Glyphs.BarSeperatorGlyph=function(x,y,isLast){this._isLast=!1,AlphaTab.Rendering.Glyphs.Glyph.call(this,x,y),this._isLast=isLast},AlphaTab.Rendering.Glyphs.BarSeperatorGlyph.prototype={DoLayout:function(){this.Width=(this._isLast?8:1)*this.get_Scale()},get_CanScale:function(){return!1},Paint:function(cx,cy,canvas){var blockWidth=4*this.get_Scale(),top=cy+this.Y+this.Renderer.get_TopPadding(),bottom=cy+this.Y+this.Renderer.Height-this.Renderer.get_BottomPadding(),left=cx+this.X|0,h=bottom-top;canvas.BeginPath(),canvas.MoveTo(left,top),canvas.LineTo(left,bottom),canvas.Stroke(),this._isLast&&(left+=3*this.get_Scale()+.5|0,canvas.FillRect(left,top,blockWidth,h))}},$Inherit(AlphaTab.Rendering.Glyphs.BarSeperatorGlyph,AlphaTab.Rendering.Glyphs.Glyph),AlphaTab.Rendering.Glyphs.BeamGlyph=function(x,y,duration,direction,isGrace){AlphaTab.Rendering.Glyphs.MusicFontGlyph.call(this,x,y,isGrace?.5:1,AlphaTab.Rendering.Glyphs.BeamGlyph.GetSymbol(duration,direction,isGrace))},AlphaTab.Rendering.Glyphs.BeamGlyph.prototype={DoLayout:function(){this.Width=0}},AlphaTab.Rendering.Glyphs.BeamGlyph.GetSymbol=function(duration,direction,isGrace){if(direction==AlphaTab.Rendering.Utils.BeamDirection.Up){if(isGrace)return AlphaTab.Rendering.Glyphs.MusicFontSymbol.FooterUpEighth;switch(duration){case AlphaTab.Model.Duration.Eighth:return AlphaTab.Rendering.Glyphs.MusicFontSymbol.FooterUpEighth;case AlphaTab.Model.Duration.Sixteenth:return AlphaTab.Rendering.Glyphs.MusicFontSymbol.FooterUpSixteenth;case AlphaTab.Model.Duration.ThirtySecond:return AlphaTab.Rendering.Glyphs.MusicFontSymbol.FooterUpThirtySecond;case AlphaTab.Model.Duration.SixtyFourth:return AlphaTab.Rendering.Glyphs.MusicFontSymbol.FooterUpSixtyFourth;default:return AlphaTab.Rendering.Glyphs.MusicFontSymbol.FooterUpEighth}}else{if(isGrace)return AlphaTab.Rendering.Glyphs.MusicFontSymbol.FooterDownEighth;switch(duration){case AlphaTab.Model.Duration.Eighth:return AlphaTab.Rendering.Glyphs.MusicFontSymbol.FooterDownEighth;case AlphaTab.Model.Duration.Sixteenth:return AlphaTab.Rendering.Glyphs.MusicFontSymbol.FooterDownSixteenth;case AlphaTab.Model.Duration.ThirtySecond:return AlphaTab.Rendering.Glyphs.MusicFontSymbol.FooterDownThirtySecond;case AlphaTab.Model.Duration.SixtyFourth:return AlphaTab.Rendering.Glyphs.MusicFontSymbol.FooterDownSixtyFourth;default:return AlphaTab.Rendering.Glyphs.MusicFontSymbol.FooterDownEighth}}},$Inherit(AlphaTab.Rendering.Glyphs.BeamGlyph,AlphaTab.Rendering.Glyphs.MusicFontGlyph),AlphaTab.Rendering.Glyphs.BeatContainerGlyph=function(beat){this.Beat=null,this.PreNotes=null,this.OnNotes=null,this.PostNotes=null,this.Ties=null,AlphaTab.Rendering.Glyphs.Glyph.call(this,0,0),this.Beat=beat,this.Ties=[]},AlphaTab.Rendering.Glyphs.BeatContainerGlyph.prototype={FinalizeGlyph:function(layout){this.PreNotes.FinalizeGlyph(layout),this.OnNotes.FinalizeGlyph(layout),this.PostNotes.FinalizeGlyph(layout)},RegisterMaxSizes:function(sizes){sizes.GetPreNoteSize(this.Beat.Start)<this.PreNotes.Width&&sizes.SetPreNoteSize(this.Beat.Start,this.PreNotes.Width),sizes.GetOnNoteSize(this.Beat.Start)<this.OnNotes.Width&&sizes.SetOnNoteSize(this.Beat.Start,this.OnNotes.Width),sizes.GetPostNoteSize(this.Beat.Start)<this.PostNotes.Width&&sizes.SetPostNoteSize(this.Beat.Start,this.PostNotes.Width)},ApplySizes:function(sizes){var size,diff;size=sizes.GetPreNoteSize(this.Beat.Start),diff=size-this.PreNotes.Width,this.PreNotes.X=0,diff>0&&this.PreNotes.ApplyGlyphSpacing(diff),size=sizes.GetOnNoteSize(this.Beat.Start),diff=size-this.OnNotes.Width,this.OnNotes.X=this.PreNotes.X+this.PreNotes.Width,diff>0&&this.OnNotes.ApplyGlyphSpacing(diff),size=sizes.GetPostNoteSize(this.Beat.Start),diff=size-this.PostNotes.Width,this.PostNotes.X=this.OnNotes.X+this.OnNotes.Width,diff>0&&this.PostNotes.ApplyGlyphSpacing(diff),this.Width=this.CalculateWidth()},CalculateWidth:function(){return this.PostNotes.X+this.PostNotes.Width},DoLayout:function(){this.PreNotes.X=0,this.PreNotes.Index=0,this.PreNotes.Renderer=this.Renderer,this.PreNotes.Container=this,this.PreNotes.DoLayout(),this.OnNotes.X=this.PreNotes.X+this.PreNotes.Width,this.OnNotes.Index=1,this.OnNotes.Renderer=this.Renderer,this.OnNotes.Container=this,this.OnNotes.DoLayout(),this.PostNotes.X=this.OnNotes.X+this.OnNotes.Width,this.PostNotes.Index=2,this.PostNotes.Renderer=this.Renderer,this.PostNotes.Container=this,this.PostNotes.DoLayout();for(var i=this.Beat.Notes.length-1;i>=0;)this.CreateTies(this.Beat.Notes[i--]);this.Width=this.CalculateWidth()},CreateTies:function(){},Paint:function(cx,cy,canvas){this.PreNotes.Paint(cx+this.X,cy+this.Y,canvas),this.OnNotes.Paint(cx+this.X,cy+this.Y,canvas),this.PostNotes.Paint(cx+this.X,cy+this.Y,canvas);for(var i=0,j=this.Ties.length;j>i;i++){var t=this.Ties[i];t.Renderer=this.Renderer,t.Paint(cx,cy+this.Y,canvas)}}},$Inherit(AlphaTab.Rendering.Glyphs.BeatContainerGlyph,AlphaTab.Rendering.Glyphs.Glyph),AlphaTab.Rendering.Glyphs.BeatGlyphBase=function(){this.Container=null,AlphaTab.Rendering.Glyphs.GlyphGroup.call(this,0,0)},AlphaTab.Rendering.Glyphs.BeatGlyphBase.prototype={DoLayout:function(){var w=0;if(null!=this.Glyphs)for(var i=0,j=this.Glyphs.length;j>i;i++){var g=this.Glyphs[i];g.X=w,g.Renderer=this.Renderer,g.DoLayout(),w+=g.Width}this.Width=w},NoteLoop:function(action){for(var i=this.Container.Beat.Notes.length-1;i>=0;i--)action(this.Container.Beat.Notes[i])},get_BeatDurationWidth:function(){switch(this.Container.Beat.Duration){case AlphaTab.Model.Duration.Whole:return 103;case AlphaTab.Model.Duration.Half:return 45;case AlphaTab.Model.Duration.Quarter:return 29;case AlphaTab.Model.Duration.Eighth:return 19;case AlphaTab.Model.Duration.Sixteenth:return 11;case AlphaTab.Model.Duration.ThirtySecond:return 11;case AlphaTab.Model.Duration.SixtyFourth:return 11;default:return 11}},FinalizeGlyph:function(){}},$Inherit(AlphaTab.Rendering.Glyphs.BeatGlyphBase,AlphaTab.Rendering.Glyphs.GlyphGroup),AlphaTab.Rendering.Glyphs.BendGlyph=function(n,width,height){this._note=null,this._height=0,AlphaTab.Rendering.Glyphs.Glyph.call(this,0,0),this._note=n,this.Width=width,this._height=height},AlphaTab.Rendering.Glyphs.BendGlyph.prototype={Paint:function(cx,cy,canvas){for(var r=this.Renderer,res=this.Renderer.get_Resources(),dX=this.Width/60,maxValue=0,i=0,j=this._note.BendPoints.length;j>i;i++)this._note.BendPoints[i].Value>maxValue&&(maxValue=this._note.BendPoints[i].Value);var dY=0==maxValue?0:this._height/maxValue,xx=cx+this.X,yy=cy+this.Y+r.GetNoteY(this._note);canvas.BeginPath();for(var i=0,j=this._note.BendPoints.length-1;j>i;i++){var firstPt=this._note.BendPoints[i],secondPt=this._note.BendPoints[i+1];if(firstPt.Value!=secondPt.Value||i!=this._note.BendPoints.length-2){var x1=xx+dX*firstPt.Offset,y1=yy-dY*firstPt.Value,x2=xx+dX*secondPt.Offset,y2=yy-dY*secondPt.Value;if(firstPt.Value==secondPt.Value)canvas.MoveTo(x1,y1),canvas.LineTo(x2,y2),canvas.Stroke();else{var hx=x1+(x2-x1),hy=yy-dY*firstPt.Value;canvas.MoveTo(x1,y1),canvas.BezierCurveTo(hx,hy,x2,y2,x2,y2),canvas.Stroke()}var arrowSize=6*this.get_Scale();if(secondPt.Value>firstPt.Value?(canvas.BeginPath(),canvas.MoveTo(x2,y2),canvas.LineTo(x2-.5*arrowSize,y2+arrowSize),canvas.LineTo(x2+.5*arrowSize,y2+arrowSize),canvas.ClosePath(),canvas.Fill()):secondPt.Value!=firstPt.Value&&(canvas.BeginPath(),canvas.MoveTo(x2,y2),canvas.LineTo(x2-.5*arrowSize,y2-arrowSize),canvas.LineTo(x2+.5*arrowSize,y2-arrowSize),canvas.ClosePath(),canvas.Fill()),canvas.Stroke(),0!=secondPt.Value){var dV=secondPt.Value-firstPt.Value,up=dV>0;dV=Math.abs(dV);var s="";if(4==dV?(s="full",dV-=4):dV>4&&(s+=dV/4|"0 ",dV-=dV/4|0),dV>0&&(s+=dV+"/4"),""!=s){up||(s="-"+s),canvas.set_Font(res.TablatureFont);var size=canvas.MeasureText(s),y=up?y2-res.TablatureFont.Size-2*this.get_Scale():y2+2*this.get_Scale(),x=x2-size/2;canvas.FillText(s,x,y)}}}}}},$Inherit(AlphaTab.Rendering.Glyphs.BendGlyph,AlphaTab.Rendering.Glyphs.Glyph),AlphaTab.Rendering.Glyphs.ChineseCymbalGlyph=function(x,y,isGrace){this._isGrace=!1,AlphaTab.Rendering.Glyphs.MusicFontGlyph.call(this,x,y,isGrace?.5:1,AlphaTab.Rendering.Glyphs.MusicFontSymbol.NoteHarmonic),this._isGrace=isGrace},AlphaTab.Rendering.Glyphs.ChineseCymbalGlyph.prototype={DoLayout:function(){this.Width=9*(this._isGrace?.5:1)*this.get_Scale()},get_CanScale:function(){return!1}},$Inherit(AlphaTab.Rendering.Glyphs.ChineseCymbalGlyph,AlphaTab.Rendering.Glyphs.MusicFontGlyph),AlphaTab.Rendering.Glyphs.CircleGlyph=function(x,y,size){this._size=0,AlphaTab.Rendering.Glyphs.Glyph.call(this,x,y),this._size=size},AlphaTab.Rendering.Glyphs.CircleGlyph.prototype={DoLayout:function(){this.Width=this._size+3*this.get_Scale()},get_CanScale:function(){return!1},Paint:function(cx,cy,canvas){canvas.FillCircle(cx+this.X,cy+this.Y,this._size)}},$Inherit(AlphaTab.Rendering.Glyphs.CircleGlyph,AlphaTab.Rendering.Glyphs.Glyph),AlphaTab.Rendering.Glyphs.ClefGlyph=function(x,y,clef){AlphaTab.Rendering.Glyphs.MusicFontGlyph.call(this,x,y,1,AlphaTab.Rendering.Glyphs.ClefGlyph.GetSymbol(clef))},AlphaTab.Rendering.Glyphs.ClefGlyph.prototype={DoLayout:function(){this.Width=28*this.get_Scale()},get_CanScale:function(){return!1}},AlphaTab.Rendering.Glyphs.ClefGlyph.GetSymbol=function(clef){switch(clef){case AlphaTab.Model.Clef.Neutral:return AlphaTab.Rendering.Glyphs.MusicFontSymbol.ClefNeutral;case AlphaTab.Model.Clef.C3:return AlphaTab.Rendering.Glyphs.MusicFontSymbol.ClefC;case AlphaTab.Model.Clef.C4:return AlphaTab.Rendering.Glyphs.MusicFontSymbol.ClefC;case AlphaTab.Model.Clef.F4:return AlphaTab.Rendering.Glyphs.MusicFontSymbol.ClefF;case AlphaTab.Model.Clef.G2:return AlphaTab.Rendering.Glyphs.MusicFontSymbol.ClefG;default:return AlphaTab.Rendering.Glyphs.MusicFontSymbol.None}},$Inherit(AlphaTab.Rendering.Glyphs.ClefGlyph,AlphaTab.Rendering.Glyphs.MusicFontGlyph),AlphaTab.Rendering.Glyphs.CrescendoGlyph=function(x,y,crescendo){this._crescendo=AlphaTab.Model.CrescendoType.None,AlphaTab.Rendering.Glyphs.EffectGlyph.call(this,x,y),this._crescendo=crescendo},AlphaTab.Rendering.Glyphs.CrescendoGlyph.prototype={Paint:function(cx,cy,canvas){var height=17*this.get_Scale();canvas.BeginPath(),this._crescendo==AlphaTab.Model.CrescendoType.Crescendo?(canvas.MoveTo(cx+this.X+this.Width,cy+this.Y),canvas.LineTo(cx+this.X,cy+this.Y+height/2),canvas.LineTo(cx+this.X+this.Width,cy+this.Y+height)):(canvas.MoveTo(cx+this.X,cy+this.Y),canvas.LineTo(cx+this.X+this.Width,cy+this.Y+height/2),canvas.LineTo(cx+this.X,cy+this.Y+height)),canvas.Stroke()}},$StaticConstructor(function(){AlphaTab.Rendering.Glyphs.CrescendoGlyph.Height=17}),$Inherit(AlphaTab.Rendering.Glyphs.CrescendoGlyph,AlphaTab.Rendering.Glyphs.EffectGlyph),AlphaTab.Rendering.Glyphs.DeadNoteHeadGlyph=function(x,y,isGrace){this._isGrace=!1,AlphaTab.Rendering.Glyphs.MusicFontGlyph.call(this,x,y,isGrace?.5:1,AlphaTab.Rendering.Glyphs.MusicFontSymbol.NoteDead),this._isGrace=isGrace},AlphaTab.Rendering.Glyphs.DeadNoteHeadGlyph.prototype={DoLayout:function(){this.Width=9*(this._isGrace?.5:1)*this.get_Scale()},get_CanScale:function(){return!1}},$Inherit(AlphaTab.Rendering.Glyphs.DeadNoteHeadGlyph,AlphaTab.Rendering.Glyphs.MusicFontGlyph),AlphaTab.Rendering.Glyphs.DiamondNoteHeadGlyph=function(x,y,isGrace){this._isGrace=!1,AlphaTab.Rendering.Glyphs.MusicFontGlyph.call(this,x,y,isGrace?.5:1,AlphaTab.Rendering.Glyphs.MusicFontSymbol.NoteHarmonic),this._isGrace=isGrace},AlphaTab.Rendering.Glyphs.DiamondNoteHeadGlyph.prototype={DoLayout:function(){this.Width=9*(this._isGrace?.5:1)*this.get_Scale()},get_CanScale:function(){return!1}},$Inherit(AlphaTab.Rendering.Glyphs.DiamondNoteHeadGlyph,AlphaTab.Rendering.Glyphs.MusicFontGlyph),AlphaTab.Rendering.Glyphs.DigitGlyph=function(x,y,digit){this._digit=0,AlphaTab.Rendering.Glyphs.MusicFontGlyph.call(this,x,y,1,AlphaTab.Rendering.Glyphs.DigitGlyph.GetSymbol(digit)),this._digit=digit},AlphaTab.Rendering.Glyphs.DigitGlyph.prototype={DoLayout:function(){this.Y+=7*this.get_Scale(),this.Width=this.GetDigitWidth(this._digit)*this.get_Scale()},GetDigitWidth:function(digit){switch(digit){case 0:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:return 14;case 1:return 10;default:return 0}},get_CanScale:function(){return!1}},AlphaTab.Rendering.Glyphs.DigitGlyph.GetSymbol=function(digit){switch(digit){case 0:return AlphaTab.Rendering.Glyphs.MusicFontSymbol.Num0;case 1:return AlphaTab.Rendering.Glyphs.MusicFontSymbol.Num1;case 2:return AlphaTab.Rendering.Glyphs.MusicFontSymbol.Num2;case 3:return AlphaTab.Rendering.Glyphs.MusicFontSymbol.Num3;case 4:return AlphaTab.Rendering.Glyphs.MusicFontSymbol.Num4;case 5:return AlphaTab.Rendering.Glyphs.MusicFontSymbol.Num5;case 6:return AlphaTab.Rendering.Glyphs.MusicFontSymbol.Num6;case 7:return AlphaTab.Rendering.Glyphs.MusicFontSymbol.Num7;case 8:return AlphaTab.Rendering.Glyphs.MusicFontSymbol.Num8;case 9:return AlphaTab.Rendering.Glyphs.MusicFontSymbol.Num9;default:return AlphaTab.Rendering.Glyphs.MusicFontSymbol.None}},$Inherit(AlphaTab.Rendering.Glyphs.DigitGlyph,AlphaTab.Rendering.Glyphs.MusicFontGlyph),AlphaTab.Rendering.Glyphs.DrumSticksGlyph=function(x,y,isGrace){this._isGrace=!1,AlphaTab.Rendering.Glyphs.MusicFontGlyph.call(this,x,y,isGrace?.5:1,AlphaTab.Rendering.Glyphs.MusicFontSymbol.NoteSideStick),this._isGrace=isGrace},AlphaTab.Rendering.Glyphs.DrumSticksGlyph.prototype={DoLayout:function(){this.Width=9*(this._isGrace?.5:1)*this.get_Scale()},get_CanScale:function(){return!1}},$Inherit(AlphaTab.Rendering.Glyphs.DrumSticksGlyph,AlphaTab.Rendering.Glyphs.MusicFontGlyph),AlphaTab.Rendering.Glyphs.DynamicsGlyph=function(x,y,dynamics){this._dynamics=AlphaTab.Model.DynamicValue.PPP,AlphaTab.Rendering.Glyphs.EffectGlyph.call(this,x,y),this._dynamics=dynamics},AlphaTab.Rendering.Glyphs.DynamicsGlyph.prototype={Paint:function(cx,cy,canvas){var glyphs;switch(this._dynamics){case AlphaTab.Model.DynamicValue.PPP:glyphs=[this.get_P(),this.get_P(),this.get_P()];break;case AlphaTab.Model.DynamicValue.PP:glyphs=[this.get_P(),this.get_P()];break;case AlphaTab.Model.DynamicValue.P:glyphs=[this.get_P()];break;case AlphaTab.Model.DynamicValue.MP:glyphs=[this.get_M(),this.get_P()];break;case AlphaTab.Model.DynamicValue.MF:glyphs=[this.get_M(),this.get_F()];break;case AlphaTab.Model.DynamicValue.F:glyphs=[this.get_F()];break;case AlphaTab.Model.DynamicValue.FF:glyphs=[this.get_F(),this.get_F()];break;case AlphaTab.Model.DynamicValue.FFF:glyphs=[this.get_F(),this.get_F(),this.get_F()];break;default:return}for(var glyphWidth=0,$i20=0,$l20=glyphs.length,g=glyphs[$i20];$l20>$i20;$i20++,g=glyphs[$i20])glyphWidth+=g.Width;for(var startX=(this.Width-glyphWidth)/2,$i21=0,$l21=glyphs.length,g=glyphs[$i21];$l21>$i21;$i21++,g=glyphs[$i21])g.X=startX,g.Y=0,g.Renderer=this.Renderer,g.Paint(cx+this.X,cy+this.Y,canvas),startX+=g.Width},get_P:function(){var p=new AlphaTab.Rendering.Glyphs.MusicFontGlyph(0,0,.8,AlphaTab.Rendering.Glyphs.MusicFontSymbol.DynamicP);return p.Width=7*this.get_Scale(),p},get_M:function(){var m=new AlphaTab.Rendering.Glyphs.MusicFontGlyph(0,0,.8,AlphaTab.Rendering.Glyphs.MusicFontSymbol.DynamicM);return m.Width=7*this.get_Scale(),m},get_F:function(){var f=new AlphaTab.Rendering.Glyphs.MusicFontGlyph(0,0,.8,AlphaTab.Rendering.Glyphs.MusicFontSymbol.DynamicF);return f.Width=7*this.get_Scale(),f}},$StaticConstructor(function(){AlphaTab.Rendering.Glyphs.DynamicsGlyph.GlyphScale=.8}),$Inherit(AlphaTab.Rendering.Glyphs.DynamicsGlyph,AlphaTab.Rendering.Glyphs.EffectGlyph),AlphaTab.Rendering.Glyphs.FadeInGlyph=function(x,y){AlphaTab.Rendering.Glyphs.EffectGlyph.call(this,x,y)},AlphaTab.Rendering.Glyphs.FadeInGlyph.prototype={Paint:function(cx,cy,canvas){var size=6*this.get_Scale();canvas.BeginPath(),canvas.MoveTo(cx+this.X,cy+this.Y),canvas.QuadraticCurveTo(cx+this.X+this.Width/2,cy+this.Y,cx+this.X+this.Width,cy+this.Y-size),canvas.MoveTo(cx+this.X,cy+this.Y),canvas.QuadraticCurveTo(cx+this.X+this.Width/2,cy+this.Y,cx+this.X+this.Width,cy+this.Y+size),canvas.Stroke()}},$Inherit(AlphaTab.Rendering.Glyphs.FadeInGlyph,AlphaTab.Rendering.Glyphs.EffectGlyph),AlphaTab.Rendering.Glyphs.FlatGlyph=function(x,y,isGrace){this._isGrace=!1,AlphaTab.Rendering.Glyphs.MusicFontGlyph.call(this,x,y,isGrace?.5:1,AlphaTab.Rendering.Glyphs.MusicFontSymbol.AccidentalFlat),this._isGrace=isGrace},AlphaTab.Rendering.Glyphs.FlatGlyph.prototype={DoLayout:function(){this.Width=8*(this._isGrace?.5:1)*this.get_Scale()},get_CanScale:function(){return!1}},$Inherit(AlphaTab.Rendering.Glyphs.FlatGlyph,AlphaTab.Rendering.Glyphs.MusicFontGlyph),AlphaTab.Rendering.Glyphs.HiHatGlyph=function(x,y,isGrace){this._isGrace=!1,AlphaTab.Rendering.Glyphs.MusicFontGlyph.call(this,x,y,isGrace?.5:1,AlphaTab.Rendering.Glyphs.MusicFontSymbol.NoteHiHat),this._isGrace=isGrace},AlphaTab.Rendering.Glyphs.HiHatGlyph.prototype={DoLayout:function(){this.Width=9*(this._isGrace?.5:1)*this.get_Scale()},get_CanScale:function(){return!1}},$Inherit(AlphaTab.Rendering.Glyphs.HiHatGlyph,AlphaTab.Rendering.Glyphs.MusicFontGlyph),AlphaTab.Rendering.Glyphs.SvgCommand=function(){this.Cmd=null,this.Numbers=null},AlphaTab.Rendering.Glyphs.LazySvg=function(raw){this._raw=null,this._parsed=null,this._raw=raw},AlphaTab.Rendering.Glyphs.LazySvg.prototype={get_Commands:function(){return null==this._parsed&&this.Parse(),this._parsed},Parse:function(){var parser=new AlphaTab.Rendering.Utils.SvgPathParser(this._raw);for(parser.Reset(),this._parsed=[];!parser.get_Eof();){var command=new AlphaTab.Rendering.Glyphs.SvgCommand;switch(this._parsed.push(command),command.Cmd=parser.GetString(),command.Cmd){case"M":command.Numbers=[],command.Numbers.push(parser.GetNumber()),command.Numbers.push(parser.GetNumber());break;case"m":command.Numbers=[],command.Numbers.push(parser.GetNumber()),command.Numbers.push(parser.GetNumber());break;case"Z":case"z":break;case"L":command.Numbers=[];do command.Numbers.push(parser.GetNumber()),command.Numbers.push(parser.GetNumber());while(parser.get_CurrentTokenIsNumber());break;case"l":command.Numbers=[];do command.Numbers.push(parser.GetNumber()),command.Numbers.push(parser.GetNumber());while(parser.get_CurrentTokenIsNumber());break;case"V":command.Numbers=[];do command.Numbers.push(parser.GetNumber());while(parser.get_CurrentTokenIsNumber());break;case"v":command.Numbers=[];do command.Numbers.push(parser.GetNumber());while(parser.get_CurrentTokenIsNumber());break;case"H":command.Numbers=[];do command.Numbers.push(parser.GetNumber());while(parser.get_CurrentTokenIsNumber());break;case"h":command.Numbers=[];do command.Numbers.push(parser.GetNumber());while(parser.get_CurrentTokenIsNumber());break;case"C":command.Numbers=[];do command.Numbers.push(parser.GetNumber()),command.Numbers.push(parser.GetNumber()),command.Numbers.push(parser.GetNumber()),command.Numbers.push(parser.GetNumber()),command.Numbers.push(parser.GetNumber()),command.Numbers.push(parser.GetNumber());while(parser.get_CurrentTokenIsNumber());break;case"c":command.Numbers=[];do command.Numbers.push(parser.GetNumber()),command.Numbers.push(parser.GetNumber()),command.Numbers.push(parser.GetNumber()),command.Numbers.push(parser.GetNumber()),command.Numbers.push(parser.GetNumber()),command.Numbers.push(parser.GetNumber());while(parser.get_CurrentTokenIsNumber());break;case"S":command.Numbers=[];do command.Numbers.push(parser.GetNumber()),command.Numbers.push(parser.GetNumber()),command.Numbers.push(parser.GetNumber()),command.Numbers.push(parser.GetNumber());while(parser.get_CurrentTokenIsNumber());break;case"s":command.Numbers=[];do command.Numbers.push(parser.GetNumber()),command.Numbers.push(parser.GetNumber()),command.Numbers.push(parser.GetNumber()),command.Numbers.push(parser.GetNumber());while(parser.get_CurrentTokenIsNumber());break;case"Q":command.Numbers=[];do command.Numbers.push(parser.GetNumber()),command.Numbers.push(parser.GetNumber()),command.Numbers.push(parser.GetNumber()),command.Numbers.push(parser.GetNumber());while(parser.get_CurrentTokenIsNumber());break;case"q":command.Numbers=[];do command.Numbers.push(parser.GetNumber()),command.Numbers.push(parser.GetNumber()),command.Numbers.push(parser.GetNumber()),command.Numbers.push(parser.GetNumber());while(parser.get_CurrentTokenIsNumber());break;case"T":command.Numbers=[];do command.Numbers.push(parser.GetNumber()),command.Numbers.push(parser.GetNumber());while(parser.get_CurrentTokenIsNumber());break;case"t":command.Numbers=[];do command.Numbers.push(parser.GetNumber()),command.Numbers.push(parser.GetNumber());while(parser.get_CurrentTokenIsNumber())}}this._raw=null}},AlphaTab.Rendering.Glyphs.LineRangedGlyph=function(x,y,label){this._isExpanded=!1,this._label=null,AlphaTab.Rendering.Glyphs.EffectGlyph.call(this,x,y),this._label=label},AlphaTab.Rendering.Glyphs.LineRangedGlyph.prototype={ExpandTo:function(){this._isExpanded=!0},Paint:function(cx,cy,canvas){var res=this.Renderer.get_Resources();canvas.set_Font(res.EffectFont),canvas.set_TextAlign(AlphaTab.Platform.Model.TextAlign.Left);var textWidth=canvas.MeasureText(this._label);if(canvas.FillText(this._label,cx+this.X,cy+this.Y),this._isExpanded){var lineSpacing=3*this.get_Scale(),startX=cx+this.X+textWidth+lineSpacing,endX=cx+this.X+this.Width-lineSpacing-lineSpacing,lineY=cy+this.Y+8*this.get_Scale(),lineSize=8*this.get_Scale();

if(endX>startX){for(var lineX=startX;endX>lineX;)canvas.BeginPath(),canvas.MoveTo(lineX,0|lineY),canvas.LineTo(Math.min(lineX+lineSize,endX),0|lineY),lineX+=lineSize+lineSpacing,canvas.Stroke();canvas.BeginPath(),canvas.MoveTo(endX,lineY-6*this.get_Scale()|0),canvas.LineTo(endX,lineY+6*this.get_Scale()|0),canvas.Stroke()}}}},$StaticConstructor(function(){AlphaTab.Rendering.Glyphs.LineRangedGlyph.LineSpacing=3,AlphaTab.Rendering.Glyphs.LineRangedGlyph.LineTopPadding=8,AlphaTab.Rendering.Glyphs.LineRangedGlyph.LineTopOffset=6,AlphaTab.Rendering.Glyphs.LineRangedGlyph.LineSize=8}),$Inherit(AlphaTab.Rendering.Glyphs.LineRangedGlyph,AlphaTab.Rendering.Glyphs.EffectGlyph),AlphaTab.Rendering.Glyphs.MusicFont=function(){},$StaticConstructor(function(){AlphaTab.Rendering.Glyphs.MusicFont.ClefF=new AlphaTab.Rendering.Glyphs.LazySvg("M 545 -801c -53 49 -80 109 -80 179c 0 33 4 66 12 99c 8 33 38 57 89 74c 51 16 125 31 220 43c 95 12 159 53 192 124c 16 37 24 99 24 186c 0 95 -43 168 -130 220c -86 51 -186 77 -297 77c -128 0 -229 -28 -303 -86c -91 -70 -136 -169 -136 -297c 0 -115 23 -234 71 -356c 47 -121 118 -234 213 -337c 70 -74 163 -129 279 -164c 115 -35 233 -52 353 -52c 45 0 83 1 114 3c 31 2 81 9 151 21c 243 45 444 175 601 390c 144 198 217 409 217 632c 0 41 -2 72 -6 93c -33 281 -219 582 -558 905c -272 260 -591 493 -954 700c -330 190 -527 274 -589 254l -18 -68c 95 -33 197 -78 306 -136c 109 -57 218 -124 325 -198c 276 -198 477 -384 601 -558c 152 -210 252 -471 297 -781c 20 -128 31 -210 31 -248s 0 -68 0 -93c 0 -322 -109 -551 -328 -688c -99 -57 -200 -86 -303 -86c -78 0 -154 15 -226 46C 643 -873 586 -838 545 -801zM 2517 -783c 66 0 121 22 167 68c 45 45 68 101 68 167c 0 66 -22 121 -68 167c -45 45 -101 68 -167 68c -66 0 -122 -22 -167 -68c -45 -45 -68 -101 -68 -167c 0 -66 22 -121 68 -167C 2395 -760 2451 -783 2517 -783zM 2517 54c 66 0 121 22 167 68c 45 45 68 101 68 167c 0 66 -22 121 -68 167c -45 45 -101 68 -167 68c -66 0 -122 -22 -167 -68c -45 -45 -68 -101 -68 -167c 0 -66 22 -121 68 -167C 2395 77 2451 54 2517 54"),AlphaTab.Rendering.Glyphs.MusicFont.ClefC=new AlphaTab.Rendering.Glyphs.LazySvg("M 26 1736V -1924h 458v 3659H 26zM 641 1736V -1924h 150v 3659H 641zM 1099 153c -42 -53 -86 -100 -130 -140c -44 -40 -95 -75 -153 -106c 106 -58 200 -135 279 -233c 110 -135 180 -289 208 -460c 17 127 46 216 87 266c 65 73 170 110 313 110c 150 0 259 -81 324 -244c 50 -124 75 -291 75 -500c 0 -197 -25 -355 -75 -471c -69 -155 -179 -232 -330 -232c -89 0 -167 18 -234 55c -67 36 -101 72 -101 107c 0 19 23 25 69 17c 46 -7 97 6 153 43c 56 36 84 89 84 159c 0 69 -23 125 -69 168c -46 42 -108 63 -185 63c -73 0 -138 -24 -194 -72c -56 -48 -84 -105 -84 -171c 0 -112 56 -212 168 -301c 127 -100 282 -150 463 -150c 228 0 412 74 553 224c 141 149 211 334 211 555c 0 248 -86 458 -258 631c -172 172 -381 259 -629 259c -57 0 -104 -3 -139 -11c -54 -19 -98 -34 -133 -46c -15 49 -48 99 -98 149c -11 15 -48 43 -110 85c 38 19 75 52 110 99c 50 50 88 105 115 164c 65 -31 113 -50 142 -57c 28 -7 70 -11 124 -11c 247 0 457 85 629 257c 172 171 258 380 258 627c 0 211 -73 390 -219 534c -146 144 -332 216 -558 216c -183 0 -334 -47 -453 -142c -118 -94 -178 -198 -178 -310c 0 -69 28 -128 84 -176c 56 -48 120 -72 194 -72c 69 0 129 23 179 69c 50 46 75 104 75 174c 0 65 -28 116 -84 153c -56 36 -107 51 -153 43c -46 -7 -69 0 -69 23c 0 27 35 60 106 101c 70 40 147 60 229 60c 153 0 265 -77 335 -231c 51 -112 76 -268 76 -469c 0 -201 -25 -363 -75 -487c -65 -166 -172 -249 -319 -249c -143 0 -242 30 -298 92c -56 61 -93 156 -113 284C 1279 435 1211 286 1099 153"),AlphaTab.Rendering.Glyphs.MusicFont.RestThirtySecond=new AlphaTab.Rendering.Glyphs.LazySvg("M 717 -2195c 93 -30 174 -104 244 -220c 38 -65 65 -127 81 -185l 140 -604c -69 128 -196 191 -381 191c -50 0 -105 -7 -167 -23c -61 -15 -113 -46 -155 -92c -42 -46 -63 -108 -63 -185c 0 -65 23 -121 69 -168s 104 -69 173 -69c 65 0 123 25 173 75c 50 50 75 104 75 162c 0 31 -7 63 -23 98c -15 34 -44 63 -86 87c 23 11 48 21 75 28c 7 0 27 -3 57 -11c 73 -23 142 -80 208 -170c 57 -90 115 -180 173 -270h 40l -816 3503l -107 0l 318 -1316c -73 128 -196 192 -369 192c -19 0 -38 0 -57 0c -27 -3 -68 -13 -124 -28c -55 -15 -104 -46 -147 -92c -42 -46 -63 -106 -63 -179c 0 -65 23 -121 69 -168c 46 -46 106 -69 179 -69c 65 0 122 24 170 72c 48 48 72 103 72 165c 0 30 -7 63 -23 98c -15 34 -44 63 -86 87c 46 15 71 23 74 23c 7 0 26 -3 57 -11c 92 -27 178 -108 259 -243c 11 -19 26 -50 46 -93l 161 -667c -73 128 -198 192 -375 192c -30 0 -61 0 -92 0c -34 -11 -57 -19 -69 -23c -69 -19 -125 -52 -167 -98c -42 -46 -63 -106 -63 -179c 0 -69 23 -127 69 -174s 106 -69 179 -69c 65 0 122 24 170 72c 48 48 72 103 72 165c 0 31 -7 63 -23 98s -44 65 -86 92c 23 7 46 15 69 23C 665 -2184 686 -2187 717 -2195"),AlphaTab.Rendering.Glyphs.MusicFont.RestQuarter=new AlphaTab.Rendering.Glyphs.LazySvg("M 272 -1668L 979 -850c -54 23 -137 114 -249 272c -127 177 -191 313 -191 405c 0 112 36 226 110 342c 73 115 160 206 260 272l -34 81c -23 -3 -56 -7 -101 -11c -44 -3 -76 -5 -95 -5c -104 0 -182 9 -234 28c -52 19 -88 45 -110 78c -21 32 -31 70 -31 113c 0 81 42 175 127 284c 69 88 115 137 139 145l -28 46c -27 7 -123 -61 -289 -208c -185 -162 -278 -299 -278 -411c 0 -92 35 -168 107 -226c 71 -57 159 -87 263 -87c 54 0 109 7 165 23c 55 15 110 42 165 81l -642 -829c 54 -30 120 -107 199 -229c 79 -121 139 -238 182 -350c 7 -15 11 -42 11 -81c 0 -92 -44 -210 -133 -353c -73 -115 -121 -181 -144 -197H 272"),AlphaTab.Rendering.Glyphs.MusicFont.GraceUp=new AlphaTab.Rendering.Glyphs.LazySvg("M 571 -1659h 53c 12 83 29 154 50 210c 21 56 46 105 74 145c 28 40 71 92 128 156c 56 63 102 118 138 162c 105 135 158 277 158 424c 0 151 -64 336 -193 554h -35c 16 -37 35 -82 57 -132s 40 -95 55 -136s 26 -81 35 -121s 12 -80 12 -119c 0 -62 -12 -125 -38 -188c -25 -63 -60 -121 -106 -175c -45 -53 -97 -97 -155 -130s -118 -51 -181 -55v 1245c 0 70 -21 134 -65 189c -43 55 -99 97 -167 127c -67 29 -135 44 -201 44c -64 0 -118 -16 -160 -48c -42 -32 -63 -79 -63 -140c 0 -65 21 -126 64 -181s 97 -99 163 -131c 65 -32 129 -48 191 -48c 85 0 147 16 184 50V -1082V -1659"),AlphaTab.Rendering.Glyphs.MusicFont.GraceDown=new AlphaTab.Rendering.Glyphs.LazySvg("M -17 335c 0 -69 23 -131 69 -186s 103 -98 173 -128c 69 -30 137 -45 203 -45c 133 0 203 63 211 189c 0 54 -21 110 -65 167c -43 56 -99 103 -168 139s -138 54 -208 54c -63 0 -118 -14 -164 -44v 1104c 90 -15 172 -50 244 -106s 128 -122 168 -200c 40 -78 60 -156 60 -233c -1 -91 -13 -169 -34 -233c -20 -64 -57 -155 -110 -272l 34 -13c 34 60 64 122 91 188c 27 65 48 131 64 199s 23 133 23 198c 0 96 -22 183 -68 259c -45 76 -113 166 -203 269c -89 103 -157 193 -203 271c -45 77 -68 165 -68 264h -50V 335"),AlphaTab.Rendering.Glyphs.MusicFont.Trill=new AlphaTab.Rendering.Glyphs.LazySvg("M 159 862l 148 -431h -291l 33 -97h 288l 61 -196l 190 -136h 56l -114 332c 40 0 100 -7 181 -22c 81 -15 143 -22 187 -22c 26 0 45 5 56 15c 11 10 16 29 16 57c 0 8 -3 37 -11 86c 72 -106 155 -160 246 -160c 72 8 110 50 114 126c 0 42 -9 73 -28 92s -40 28 -64 28c -48 0 -76 -29 -84 -87c 10 -22 16 -43 16 -64c 0 -11 -9 -17 -28 -17c -78 0 -147 86 -207 260l -131 406h -185l 34 -92c -21 9 -53 26 -94 51s -77 44 -108 58s -64 20 -100 20c -50 0 -95 -13 -133 -40c -38 -27 -59 -63 -61 -107c 1 -7 3 -18 5 -32S 157 867 159 862zM 658 837l 140 -412c 0 -4 0 -9 2 -16s 2 -10 2 -11c 0 -9 -7 -13 -22 -13c -34 0 -81 7 -140 21s -104 21 -136 21l -142 423c -6 23 -12 44 -17 64c 0 27 16 44 50 50C 444 958 532 916 658 837"),AlphaTab.Rendering.Glyphs.MusicFont.ClefG=new AlphaTab.Rendering.Glyphs.LazySvg("M 1431 -3070c 95 0 186 114 272 344c 86 229 129 434 129 612c 0 243 -36 471 -108 684c -103 300 -271 545 -504 735l 108 564c 68 -15 132 -22 193 -22c 284 0 504 109 659 329c 132 185 199 410 199 675c 0 204 -65 379 -195 525c -130 145 -299 243 -506 292l 154 816c 0 45 0 77 0 96c 0 152 -54 282 -162 390s -244 181 -407 219c -26 7 -62 11 -108 11c -155 0 -294 -62 -416 -188c -121 -125 -182 -252 -182 -381c 0 -22 1 -39 5 -51c 18 -106 64 -191 136 -253c 72 -62 161 -94 267 -94c 102 0 191 34 267 102c 76 68 113 152 113 250c 0 106 -35 198 -105 276c -70 77 -160 116 -270 116c -26 0 -45 0 -56 0c 42 36 82 63 120 82c 72 36 143 54 212 54c 114 0 235 -62 362 -187c 94 -98 142 -214 142 -347c 0 -19 -1 -55 -3 -108l -138 -776c -49 11 -104 19 -165 23c -61 3 -123 5 -188 5c -339 0 -635 -123 -886 -370c -251 -247 -377 -543 -377 -889c 0 -193 87 -429 262 -706c 117 -189 285 -402 501 -638c 159 -174 254 -271 285 -290c -19 -37 -44 -142 -77 -313c -32 -171 -52 -284 -59 -339c -7 -55 -11 -111 -11 -168c 0 -235 54 -475 163 -718C 1164 -2948 1289 -3070 1431 -3070zM 1247 -129l -96 -507c -41 30 -116 104 -222 222c -106 117 -190 216 -251 296c -110 140 -194 269 -251 387c -76 155 -114 307 -114 455c 0 79 11 159 34 239c 49 167 182 326 400 478c 175 121 360 182 554 182c 53 0 96 -3 127 -11c 30 -7 80 -23 150 -46l -281 -1343c -178 22 -312 106 -403 250c -72 113 -107 237 -107 370c 0 144 80 281 240 410c 137 110 248 165 332 165l -8 39c -106 -15 -227 -70 -364 -164c -186 -132 -298 -291 -336 -477c -11 -56 -17 -111 -17 -164c 0 -185 56 -351 168 -496C 911 12 1060 -83 1247 -129zM 1684 -2306c -19 -125 -34 -201 -46 -227c -34 -76 -92 -113 -172 -113c -76 0 -157 82 -241 247c -84 165 -143 344 -178 538c -7 49 -1 156 17 322c 19 165 36 272 52 322l 132 -113c 91 -45 197 -176 315 -393c 88 -159 132 -313 132 -461C 1695 -2213 1692 -2253 1684 -2306zM 1388 225l 262 1304c 157 -37 282 -114 375 -229c 92 -115 138 -250 138 -405c 0 -30 0 -52 0 -68c -19 -177 -93 -322 -224 -433c -130 -111 -281 -167 -453 -167C 1443 225 1411 225 1388 225"),AlphaTab.Rendering.Glyphs.MusicFont.Num0=new AlphaTab.Rendering.Glyphs.LazySvg("M 0 991c 0 -230 45 -422 135 -577c 104 -183 253 -275 448 -275c 187 0 333 91 437 275c 89 158 135 351 135 577c 0 230 -43 422 -129 577c -104 183 -252 275 -442 275c -187 0 -334 -91 -442 -275C 46 1411 0 1218 0 991zM 583 230c -100 0 -168 72 -202 218c -34 145 -51 326 -51 542c 0 270 23 464 70 583c 46 118 108 178 183 178c 93 0 162 -88 205 -264c 32 -133 48 -298 48 -496c 0 -273 -23 -468 -70 -585C 719 288 658 230 583 230"),AlphaTab.Rendering.Glyphs.MusicFont.Num1=new AlphaTab.Rendering.Glyphs.LazySvg("M 345 1688V 440l -216 410l -37 -32l 253 -685h 351v 1549c 0 32 27 57 81 75c 18 3 46 8 86 16v 75h -685v -70c 35 -7 62 -12 81 -16C 316 1745 345 1720 345 1688"),AlphaTab.Rendering.Glyphs.MusicFont.Num2=new AlphaTab.Rendering.Glyphs.LazySvg("M 427 257c -93 10 -153 37 -178 81c 7 14 14 27 21 37c 68 0 115 7 140 21c 54 28 81 86 81 172c 0 61 -21 113 -64 156s -93 64 -151 64c -61 0 -113 -19 -156 -59c -43 -39 -64 -91 -64 -156c 0 -118 50 -221 151 -307c 100 -86 214 -129 340 -129c 169 0 311 36 426 108c 136 86 205 203 205 351c 0 129 -78 244 -236 345c -132 75 -263 153 -391 232c -78 61 -146 129 -204 205c -25 35 -50 73 -75 113c 110 -64 211 -97 300 -97c 64 0 130 18 198 54c 39 18 87 52 145 102c 46 39 82 59 107 59c 82 0 137 -35 166 -105c 7 -21 12 -57 16 -110h 43c 0 120 -18 216 -54 288c -54 106 -147 160 -280 160c -100 0 -206 -37 -315 -110c -109 -73 -200 -110 -272 -110c -108 0 -178 27 -210 81c -14 64 -23 102 -27 113h -70c 3 -36 8 -70 16 -102c 7 -32 27 -79 59 -140c 46 -93 151 -221 313 -383c 313 -313 469 -505 469 -577C 876 376 726 257 427 257"),AlphaTab.Rendering.Glyphs.MusicFont.Num3=new AlphaTab.Rendering.Glyphs.LazySvg("M 414 1024v -59c 21 0 47 -5 76 -16c 113 -39 193 -77 240 -113c 72 -57 109 -129 109 -216c 0 -111 -35 -204 -106 -278c -70 -73 -149 -110 -237 -110c -112 0 -194 32 -245 97c 3 18 8 34 16 48c 72 0 120 16 145 48c 25 32 37 75 37 129c 0 118 -66 178 -199 178c -57 0 -102 -16 -135 -48c -32 -32 -48 -84 -48 -156c 0 -126 44 -223 132 -291c 88 -68 231 -102 429 -102c 133 0 251 47 353 143c 102 95 153 211 153 348c 0 100 -21 177 -64 229c -43 52 -111 98 -205 137c 86 35 149 77 189 124c 54 64 81 147 81 248c 0 133 -51 247 -153 342c -102 95 -220 143 -353 143c -194 0 -336 -34 -426 -102c -90 -68 -135 -165 -135 -291c 0 -75 15 -128 45 -159c 30 -30 78 -45 143 -45c 129 0 194 59 194 178c 0 57 -12 101 -37 132c -25 30 -75 45 -151 45c 3 21 8 45 16 70c 61 46 135 70 221 70c 82 0 160 -36 232 -108c 72 -72 108 -163 108 -275c 0 -82 -36 -153 -108 -210c -54 -43 -135 -82 -243 -118L 414 1024"),AlphaTab.Rendering.Glyphs.MusicFont.Num4=new AlphaTab.Rendering.Glyphs.LazySvg("M 897 133c -86 147 -174 296 -264 445c -90 149 -162 258 -216 326l -302 469h 448v -556l 378 -318v 874h 162v 75h -162c 0 39 0 81 2 124c 1 43 6 78 13 105c 7 27 39 53 97 78c 7 3 23 8 48 16v 75h -712v -75c 32 -10 55 -18 70 -21c 54 -21 82 -43 86 -64c 3 -18 6 -51 8 -99c 1 -48 4 -94 8 -137h -588v -75c 158 -111 279 -288 361 -529c 43 -237 88 -475 135 -712H 897"),AlphaTab.Rendering.Glyphs.MusicFont.Num5=new AlphaTab.Rendering.Glyphs.LazySvg("M 122 133c 10 7 63 18 159 35c 95 16 177 24 245 24c 89 0 171 -5 245 -16c 73 -10 139 -23 197 -37c 0 61 -8 112 -24 153c -16 41 -47 78 -94 110c -21 14 -62 27 -121 37c -59 10 -112 16 -159 16c -72 0 -145 -5 -221 -16c -75 -10 -117 -21 -124 -32v 475c 93 -104 197 -156 313 -156c 158 0 286 43 383 130c 97 86 145 198 145 336c 0 173 -61 325 -183 455c -122 130 -266 195 -432 195c -39 0 -68 -1 -86 -5c -86 -14 -154 -43 -205 -86c -72 -61 -108 -156 -108 -286c 0 -61 16 -109 48 -145c 32 -36 82 -54 151 -54c 136 0 205 64 205 194c 0 108 -43 169 -129 183c -25 10 -50 23 -75 37c 32 32 68 54 108 67c 39 12 79 18 118 18c 93 0 170 -45 232 -135c 61 -90 91 -219 91 -385c 0 -112 -27 -209 -81 -290c -54 -81 -127 -122 -221 -122c -118 0 -210 54 -275 162h -102V 133"),AlphaTab.Rendering.Glyphs.MusicFont.Num6=new AlphaTab.Rendering.Glyphs.LazySvg("M 871 305c -7 -11 -12 -22 -16 -34c -57 -52 -118 -79 -183 -79c -32 0 -63 7 -91 21c -64 36 -114 110 -148 224c -34 113 -51 227 -51 342c 0 165 19 253 59 264c 75 -108 185 -162 332 -162c 110 0 201 52 273 156c 60 89 91 190 91 302c 0 154 -47 278 -143 369c -95 91 -213 137 -353 137c -190 0 -341 -89 -450 -267c -109 -178 -164 -382 -164 -612c 0 -208 64 -399 194 -572c 129 -172 279 -259 448 -259c 158 0 273 49 345 147c 50 69 75 148 75 239c 0 54 -19 103 -59 147c -39 43 -79 65 -118 65c -68 0 -122 -16 -162 -48c -39 -32 -59 -86 -59 -162c 0 -68 21 -121 64 -159C 795 330 835 309 871 305zM 849 1391c 0 -129 -9 -221 -27 -275c -32 -93 -91 -140 -178 -140c -82 0 -137 38 -164 116c -27 77 -40 177 -40 299c 0 108 14 199 43 275c 28 75 82 113 162 113c 72 0 124 -39 156 -118C 833 1582 849 1492 849 1391"),AlphaTab.Rendering.Glyphs.MusicFont.Num7=new AlphaTab.Rendering.Glyphs.LazySvg("M 313 1850c 10 -86 23 -172 37 -259c 43 -172 118 -313 226 -421c 122 -118 217 -221 286 -307c 90 -111 142 -201 156 -270l 27 -124c -46 30 -96 56 -148 79c -52 22 -103 34 -153 34c -93 0 -206 -40 -340 -122c -64 -40 -120 -61 -167 -61c -57 0 -98 17 -121 51c -23 34 -42 65 -56 94h -64v -356h 54c 7 21 16 44 27 67c 10 23 30 35 59 35c 25 0 62 -16 113 -48c 108 -72 185 -108 232 -108c 75 0 149 26 221 78c 72 52 140 78 205 78c 46 0 82 -22 108 -67c 10 -18 19 -48 27 -89h 70v 340c 0 107 -17 206 -52 295c -10 25 -87 159 -231 403c -35 64 -60 142 -76 234c -15 91 -23 178 -23 260c 0 114 0 175 0 182H 313"),AlphaTab.Rendering.Glyphs.MusicFont.Num8=new AlphaTab.Rendering.Glyphs.LazySvg("M 795 905c 57 18 126 77 205 178c 64 79 97 151 97 216c 0 183 -57 324 -172 421c -97 82 -214 124 -351 124c -151 0 -276 -49 -375 -148c -99 -99 -148 -231 -148 -396c 0 -68 34 -138 102 -210c 50 -54 106 -93 167 -118c -72 -39 -127 -94 -167 -164c -39 -70 -59 -144 -59 -224c 0 -136 48 -244 145 -324c 97 -79 208 -118 334 -118c 133 0 245 40 337 121s 137 195 137 342c 0 57 -32 120 -97 189C 901 845 849 883 795 905zM 389 1040c -57 28 -102 61 -135 97c -46 54 -70 118 -70 194c 0 108 35 204 106 288c 71 84 165 126 282 126c 106 0 185 -24 238 -72s 79 -103 79 -164c 0 -39 -26 -88 -80 -145c -53 -57 -112 -106 -176 -145c -64 -39 -124 -81 -179 -124C 437 1079 415 1061 389 1040zM 708 835c 46 -18 89 -53 126 -105c 37 -52 56 -107 56 -164c 0 -100 -28 -183 -86 -248c -57 -64 -136 -97 -237 -97c -79 0 -145 26 -197 78c -52 52 -78 112 -78 180c 0 36 25 75 75 118c 25 21 72 54 143 97c 70 43 121 77 153 102C 676 808 690 820 708 835"),AlphaTab.Rendering.Glyphs.MusicFont.Num9=new AlphaTab.Rendering.Glyphs.LazySvg("M 333 1682c 3 10 9 21 16 32c 57 50 118 75 183 75c 32 0 62 -7 91 -21c 68 -36 117 -107 148 -213c 30 -106 45 -222 45 -348c 0 -169 -18 -259 -54 -270c -75 111 -185 167 -329 167c -111 0 -200 -48 -267 -146c -66 -97 -99 -202 -99 -315c 0 -155 47 -279 143 -372c 95 -92 215 -138 359 -138c 190 0 343 93 459 280c 100 165 151 365 151 599c 0 208 -64 399 -194 572s -279 259 -448 259c -158 0 -273 -48 -345 -145c -50 -68 -75 -147 -75 -237c 0 -54 19 -102 59 -145c 39 -43 86 -64 140 -64c 61 0 109 16 145 48c 35 32 54 86 54 162c 0 68 -25 124 -75 167C 405 1661 369 1679 333 1682zM 354 594c 0 130 8 222 27 277c 32 94 89 141 172 141c 82 0 138 -40 167 -122c 28 -81 43 -180 43 -296c 0 -112 -12 -199 -37 -261c -36 -86 -93 -130 -172 -130c -75 0 -127 38 -156 114C 369 393 354 486 354 594"),AlphaTab.Rendering.Glyphs.MusicFont.RestSixteenth=new AlphaTab.Rendering.Glyphs.LazySvg("M 494 -1275c 76 -27 149 -91 218 -191c 23 -31 51 -81 86 -151l 161 -667c -73 128 -198 192 -374 192c -30 0 -61 0 -92 0c -34 -11 -57 -19 -69 -23c -69 -19 -125 -52 -167 -98c -42 -46 -63 -106 -63 -179c 0 -69 23 -127 69 -174s 106 -69 179 -69c 65 0 122 24 170 72c 48 48 72 103 72 165c 0 31 -7 63 -23 98s -44 65 -86 92c 19 7 40 15 63 23c 15 0 38 -5 69 -17c 73 -23 140 -79 202 -167c 61 -88 121 -177 179 -267h 40l -602 2586l -106 0l 318 -1316c -73 128 -196 192 -369 192c -19 0 -38 0 -57 0c -27 -3 -68 -13 -124 -28c -55 -15 -104 -46 -147 -92c -42 -46 -63 -106 -63 -179c 0 -65 23 -121 69 -168c 46 -46 106 -69 179 -69c 65 0 122 24 170 72c 48 48 72 103 72 165c 0 30 -7 63 -23 98c -15 34 -44 63 -86 87c 45 15 72 23 80 23C 465 -1269 482 -1271 494 -1275"),AlphaTab.Rendering.Glyphs.MusicFont.RestEighth=new AlphaTab.Rendering.Glyphs.LazySvg("M 247 -1725c 65 0 123 25 173 75c 50 50 75 104 75 162c 0 27 -9 60 -28 98c -19 38 -48 69 -86 92c 23 7 46 15 69 23c 15 0 38 -5 69 -17c 88 -31 175 -113 260 -246c 38 -62 77 -125 115 -188h 40l -382 1670l -112 0l 331 -1316c -73 128 -198 191 -375 191c -19 0 -38 0 -57 0c -27 -3 -69 -13 -127 -28c -57 -15 -106 -46 -147 -92c -40 -46 -60 -106 -60 -179c 0 -69 23 -127 69 -174S 178 -1725 247 -1725"),AlphaTab.Rendering.Glyphs.MusicFont.RestWhole=new AlphaTab.Rendering.Glyphs.LazySvg("M 1046 445H -25v -458h 1071V 445"),AlphaTab.Rendering.Glyphs.MusicFont.NoteWhole=new AlphaTab.Rendering.Glyphs.LazySvg("M 0 437c 0 -109 40 -197 121 -265s 177 -115 290 -143s 216 -41 312 -41c 104 0 213 13 328 41s 214 74 298 141s 128 156 133 266c 0 110 -40 199 -121 268s -177 117 -290 145s -219 43 -319 43c -107 0 -218 -13 -332 -41s -211 -75 -293 -144S 2 550 0 437zM 450 361c 7 133 46 243 118 330s 158 130 259 130c 77 -8 131 -34 161 -77s 44 -117 44 -224c -10 -137 -51 -248 -123 -333s -159 -127 -262 -127c -72 11 -123 37 -152 78S 450 253 450 361"),AlphaTab.Rendering.Glyphs.MusicFont.NoteQuarter=new AlphaTab.Rendering.Glyphs.LazySvg("M 658 800c -108 65 -216 98 -324 98c -119 0 -216 -42 -289 -127c -54 -57 -81 -129 -81 -214c 0 -92 29 -183 89 -272c 59 -88 136 -158 228 -208c 111 -69 223 -104 335 -104c 108 0 200 36 278 110c 57 57 86 131 86 220c 0 92 -31 185 -92 278C 827 673 750 746 658 800"),AlphaTab.Rendering.Glyphs.MusicFont.NoteHalf=new AlphaTab.Rendering.Glyphs.LazySvg("M 669 818c -108 65 -216 98 -324 98c -119 0 -216 -42 -290 -127c -54 -57 -81 -129 -81 -214c 0 -92 29 -183 89 -272c 59 -88 136 -158 229 -208c 112 -69 224 -104 336 -104c 108 0 200 36 278 110c 57 57 87 131 87 220c 0 92 -31 185 -92 278C 839 691 762 764 669 818zM 95 754c 19 23 57 34 115 34c 65 0 132 -13 200 -40c 67 -27 134 -64 200 -113c 65 -48 127 -118 185 -208s 87 -169 87 -234c 0 -23 -5 -44 -17 -63c -11 -15 -34 -23 -69 -23c -46 0 -113 18 -200 55c -87 36 -164 77 -231 121c -67 44 -133 110 -197 197s -95 159 -95 217C 72 720 79 739 95 754"),AlphaTab.Rendering.Glyphs.MusicFont.NoteDead=new AlphaTab.Rendering.Glyphs.LazySvg("M 482 345c 42 -15 70 -38 84 -69c 13 -30 20 -102 20 -214c 0 -30 0 -50 0 -57c 0 -3 0 -7 0 -11h 307v 313c -31 0 -54 0 -69 0c -38 0 -77 1 -115 2c -38 2 -72 8 -101 20c -28 11 -51 38 -66 81v 81c 15 42 38 70 69 84c 30 13 102 20 214 20c 30 0 50 0 57 0c 3 0 7 0 11 0v 313h -307c 0 -31 0 -54 0 -69c 0 -38 -1 -77 -2 -115c -2 -38 -8 -72 -20 -101c -11 -28 -38 -51 -81 -66h -104c -42 15 -70 38 -84 69c -13 30 -20 102 -20 214c 0 30 0 50 0 57c 0 3 0 7 0 11h -307V 595c 30 0 54 0 69 0c 38 0 77 -1 115 -2c 38 -2 72 -8 101 -20c 28 -11 51 -38 66 -81v -81c -15 -42 -38 -70 -69 -84c -31 -13 -102 -20 -214 -20c -31 0 -50 0 -57 0c -3 0 -7 0 -11 0v -313h 307c 0 31 0 54 0 69c 0 38 0 77 2 115c 1 38 8 72 20 101c 11 28 38 51 81 66H 482"),AlphaTab.Rendering.Glyphs.MusicFont.NoteHarmonic=new AlphaTab.Rendering.Glyphs.LazySvg("M 116 453l 452 -452c 108 131 197 220 266 266l 261 202l -446 452c -38 -46 -81 -90 -127 -133c -46 -42 -90 -85 -133 -127c -42 -42 -98 -89 -168 -139C 182 496 147 472 116 453"),AlphaTab.Rendering.Glyphs.MusicFont.NoteRideCymbal=new AlphaTab.Rendering.Glyphs.LazySvg("M 910 417C 763 561 616 695 469 840 384 691 261 576 126 473 79 438 29 407 -23 382 122 239 267 96 412 -46 502 92 628 203 754 310 803 350 853 388 910 417zM 465 696C 561 602 657 508 753 414 655 352 574 268 492 188 464 159 438 128 415 94 320 191 226 288 131 384c 113 55 203 147 285 241 17 22 33 45 48 70z"),AlphaTab.Rendering.Glyphs.MusicFont.NoteHiHat=new AlphaTab.Rendering.Glyphs.LazySvg("M 484 6c -201 -2 -395 126 -471 312 -79 182 -38 409 101 552 134 144 355 197 540 129 191 -65 333 -253 341 -456 12 -199 -104 -398 -283 -485 -70 -35 -148 -53 -227 -53zm 0 101c 90 0 179 32 250 88 -83 80 -168 158 -250 240 -82 -82 -165 -165 -247 -247 70 -52 159 -81 247 -81zm -322 155c 83 83 167 167 250 250 -85 84 -172 166 -257 250 -100 -127 -113 -315 -26 -453 10 -16 21 -33 33 -48zm 647 6c 97 124 112 306 33 444 -14 23 -30 67 -52 24 -75 -75 -152 -149 -228 -225 81 -82 165 -162 247 -244zm -325 322c 83 83 170 164 254 247 -121 101 -303 121 -442 44 -22 -16 -86 -35 -42 -61 76 -76 153 -153 230 -230z"),AlphaTab.Rendering.Glyphs.MusicFont.NoteSideStick=new AlphaTab.Rendering.Glyphs.LazySvg("M 0 0c -25 24 -51 48 -77 72 151 151 302 302 454 454 -144 142 -288 285 -433 427 25 25 51 51 77 77 142 -142 285 -285 427 -427 144 142 288 285 433 427 25 -25 51 -51 77 -77 -144 -142 -288 -285 -433 -427 151 -151 302 -302 454 -454 -25 -24 -51 -48 -77 -72 -151 149 -302 299 -454 449 -149 -149 -299 -299 -449 -449"),AlphaTab.Rendering.Glyphs.MusicFont.NoteHiHatHalf=new AlphaTab.Rendering.Glyphs.LazySvg("M 449 22c 185 -2 364 116 434 288 73 168 35 377 -93 508 -123 133 -327 182 -498 119 -176 -60 -307 -233 -314 -420 -11 -183 96 -366 261 -447 64 -32 137 -49 209 -49zm 0 93c -82 0 -163 30 -228 81 177 176 354 352 531 528 99 -127 104 -319 7 -450 -70 -98 -189 -159 -310 -158zm -296 153c -75 93 -102 223 -64 338 46 160 209 278 377 267 77 -2 153 -30 215 -77 -176 -176 -352 -352 -528 -528z"),AlphaTab.Rendering.Glyphs.MusicFont.NoteChineseCymbal=new AlphaTab.Rendering.Glyphs.LazySvg("M 503 -450l 577 579l -64 66l -516 -514l -512 512l -68 -64L 503 -450zM 499 601l 316 314l 145 -143l -314 -316l 316 -312l -141 -141l -317 319l -317 -323l -136 136l 319 319l -326 326l 140 140L 499 601"),AlphaTab.Rendering.Glyphs.MusicFont.FooterUpEighth=new AlphaTab.Rendering.Glyphs.LazySvg("M 9 1032V -9h 87c 20 137 48 252 83 345s 75 172 122 238s 116 151 209 255s 168 193 225 265c 172 221 259 453 259 695c 0 248 -105 550 -317 907h -57c 27 -62 58 -134 94 -216s 65 -156 90 -223s 43 -133 57 -199s 21 -131 21 -196c 0 -102 -20 -204 -62 -308s -99 -199 -174 -287s -159 -159 -254 -213s -194 -84 -296 -90v 68H 9"),AlphaTab.Rendering.Glyphs.MusicFont.FooterUpSixteenth=new AlphaTab.Rendering.Glyphs.LazySvg("M 943 1912c 62 135 94 280 94 435c 0 202 -61 404 -183 605h -57c 108 -233 162 -430 162 -590c 0 -117 -26 -220 -78 -309c -52 -89 -118 -166 -198 -230c -80 -64 -187 -137 -322 -220s -220 -136 -257 -161v 72h -86V 8h 86c 6 108 28 200 65 276s 74 133 111 170s 109 106 218 206s 190 184 245 252c 87 109 151 216 191 319s 60 212 60 328C 994 1648 977 1764 943 1912zM 897 1815c 0 -17 0 -41 1 -72s 1 -53 1 -68c 0 -369 -266 -701 -798 -996c 3 120 31 229 83 327s 130 199 233 303s 195 195 276 273C 776 1659 843 1737 897 1815"),AlphaTab.Rendering.Glyphs.MusicFont.FooterUpThirtySecond=new AlphaTab.Rendering.Glyphs.LazySvg("M 14 1990V 10h 87c 11 121 35 216 70 283c 35 66 89 134 161 202c 72 68 174 164 307 288c 235 226 353 494 353 802c 0 106 -14 211 -43 317c 29 90 43 186 43 287c 0 79 -12 171 -36 274c 57 73 86 191 86 352c 0 112 -15 226 -46 342s -76 218 -137 308h -57c 108 -223 162 -418 162 -582c 0 -104 -20 -199 -62 -284s -99 -163 -172 -232c -73 -69 -153 -133 -239 -192s -215 -142 -389 -251v 64H 14zM 108 1292c 7 113 39 215 96 305c 56 89 129 176 218 259s 179 168 273 257c 93 88 160 168 199 240c 2 -19 3 -48 3 -87C 900 1904 636 1579 108 1292zM 115 666c 0 106 23 197 71 272s 129 166 247 274s 209 197 276 268s 129 168 187 288c 7 -42 10 -83 10 -122c 0 -146 -40 -280 -120 -401c -80 -121 -171 -221 -273 -300C 411 867 278 774 115 666"),AlphaTab.Rendering.Glyphs.MusicFont.FooterUpSixtyFourth=new AlphaTab.Rendering.Glyphs.LazySvg("M 21 2851V 564v -554h 86c 0 140 32 254 98 342c 65 87 173 200 322 339s 261 271 336 400s 113 292 113 490c 0 96 -12 208 -36 338c 43 83 65 188 65 316c 0 122 -21 237 -65 345c 48 109 72 223 72 342c 0 117 -24 222 -72 316c 57 85 86 205 86 360c 0 218 -53 443 -161 673h -65c 98 -280 147 -498 147 -652c 0 -115 -22 -210 -65 -284s -93 -130 -149 -170c -56 -39 -153 -100 -291 -183s -247 -156 -327 -221l 0 87L 21 2851zM 107 2001c 0 121 29 233 89 336s 138 203 236 301s 192 190 280 278c 88 87 149 166 181 235c 11 -60 17 -112 17 -155c 0 -212 -81 -405 -244 -578C 505 2246 318 2106 107 2001zM 114 668c 0 119 22 219 68 300s 127 176 245 286c 118 109 208 198 272 265c 63 66 128 163 195 290c 7 -46 10 -90 10 -133c 0 -166 -41 -313 -124 -439s -177 -229 -281 -308C 395 848 267 762 114 668zM 114 1338c 0 123 24 226 73 309s 133 176 252 282s 211 193 278 263s 128 164 183 283c 9 -45 14 -94 14 -147c 0 -138 -39 -270 -116 -395s -177 -236 -297 -334S 252 1413 114 1338"),AlphaTab.Rendering.Glyphs.MusicFont.FooterDownEighth=new AlphaTab.Rendering.Glyphs.LazySvg("M 9 -1032V 9h 87c 20 -137 48 -252 83 -345s 75 -172 122 -238s 116 -151 209 -255s 168 -193 225 -265c 172 -221 259 -453 259 -695c 0 -248 -105 -550 -317 -907h -57c 27 62 58 134 94 216s 65 156 90 223s 43 133 57 199s 21 131 21 196c 0 102 -20 204 -62 308s -99 199 -174 287s -159 159 -254 213s -194 84 -296 90v 68H 9"),AlphaTab.Rendering.Glyphs.MusicFont.FooterDownSixteenth=new AlphaTab.Rendering.Glyphs.LazySvg("M 943 -1912c 62 -135 94 -280 94 -435c 0 -202 -61 -404 -183 -605h -57c 108 233 162 430 162 590c 0 117 -26 220 -78 309c -52 89 -118 166 -198 230c -80 64 -187 137 -322 220s -220 136 -257 161v 72h -86V -8h 86c 6 -108 28 -200 65 -276s 74 -133 111 -170s 109 -106 218 -206s 190 -184 245 -252c 87 -109 151 -216 191 -319s 60 -212 60 -328C 994 -1648 977 -1764 943 -1912zM 897 -1815c 0 17 0 41 1 72s 1 53 1 68c 0 369 -266 701 -798 996c 3 -120 31 -229 83 -327s 130 -199 233 -303s 195 -195 276 -273C 776 -1659 843 -1737 897 -1815"),AlphaTab.Rendering.Glyphs.MusicFont.FooterDownThirtySecond=new AlphaTab.Rendering.Glyphs.LazySvg("M 14 -1990V -10h 87c 11 -121 35 -216 70 -283c 35 -66 89 -134 161 -202c 72 -68 174 -164 307 -288c 235 -226 353 -494 353 -802c 0 -106 -14 -211 -43 -317c 29 -90 43 -186 43 -287c 0 -79 -12 -171 -36 -274c 57 -73 86 -191 86 -352c 0 -112 -15 -226 -46 -342s -76 -218 -137 -308h -57c 108 223 162 418 162 582c 0 104 -20 199 -62 284s -99 163 -172 232c -73 69 -153 133 -239 192s -215 142 -389 251v 64H 14zM 108 -1292c 7 -113 39 -215 96 -305c 56 -89 129 -176 218 -259s 179 -168 273 -257c 93 -88 160 -168 199 -240c 2 19 3 48 3 87C 900 -1904 636 -1579 108 -1292zM 115 -666c 0 -106 23 -197 71 -272s 129 -166 247 -274s 209 -197 276 -268s 129 -168 187 -288c 7 42 10 83 10 122c 0 146 -40 280 -120 401c -80 121 -171 221 -273 300C 411 -867 278 -774 115 -666"),AlphaTab.Rendering.Glyphs.MusicFont.FooterDownSixtyFourth=new AlphaTab.Rendering.Glyphs.LazySvg("M 21 -2851V -564v -554h 86c 0 -140 32 -254 98 -342c 65 -87 173 -200 322 -339s 261 -271 336 -400s 113 -292 113 -490c 0 -96 -12 -208 -36 -338c 43 -83 65 -188 65 -316c 0 -122 -21 -237 -65 -345c 48 -109 72 -223 72 -342c 0 -117 -24 -222 -72 -316c 57 -85 86 -205 86 -360c 0 -218 -53 -443 -161 -673h -65c 98 280 147 498 147 652c 0 115 -22 210 -65 284s -93 130 -149 170c -56 39 -153 100 -291 183s -247 156 -327 221l 0 -87L 21 -2851zM 107 -2001c 0 -121 29 -233 89 -336s 138 -203 236 -301s 192 -190 280 -278c 88 -87 149 -166 181 -235c 11 60 17 112 17 155c 0 212 -81 405 -244 578C 505 -2246 318 -2106 107 -2001zM 114 -668c 0 -119 22 -219 68 -300s 127 -176 245 -286c 118 -109 208 -198 272 -265c 63 -66 128 -163 195 -290c 7 46 10 90 10 133c 0 166 -41 313 -124 439s -177 229 -281 308C 395 -848 267 -762 114 -668zM 114 -1338c 0 -123 24 -226 73 -309s 133 -176 252 -282s 211 -193 278 -263s 128 -164 183 -283c 9 45 14 94 14 147c 0 138 -39 270 -116 395s -177 236 -297 334S 252 -1413 114 -1338"),AlphaTab.Rendering.Glyphs.MusicFont.SimileMark=new AlphaTab.Rendering.Glyphs.LazySvg("M 413 1804l -446 3l 1804 -1806l 449 -3L 413 1804zM 331 434c 0 -53 20 -100 62 -142c 41 -41 91 -62 148 -62s 104 19 142 56c 38 38 56 87 56 148c 0 56 -19 105 -59 145c -39 39 -88 59 -145 59c -56 0 -105 -19 -145 -59C 351 540 331 491 331 434zM 1437 1380c 0 -56 18 -104 56 -142c 37 -37 87 -56 148 -56c 56 0 104 19 142 56c 38 38 56 85 56 142c 0 56 -19 104 -56 142c -38 38 -87 56 -148 56c -56 0 -104 -19 -142 -56C 1456 1485 1437 1437 1437 1380"),AlphaTab.Rendering.Glyphs.MusicFont.SimileMark2=new AlphaTab.Rendering.Glyphs.LazySvg("M 414 1818l -446 3l 1809 -1809l 449 -6L 414 1818zM 340 439c 0 -56 18 -104 56 -142c 37 -37 87 -56 148 -56c 56 0 105 20 145 59c 39 39 59 88 59 145c 0 56 -19 104 -56 142c -38 38 -89 56 -153 56c -56 0 -104 -18 -142 -56C 359 549 340 500 340 439zM 1152 1815l -446 3l 1812 -1812l 446 -3L 1152 1815zM 2192 1391c 0 -56 18 -104 56 -142c 38 -37 87 -56 148 -56c 56 0 104 19 142 56c 37 38 56 85 56 142c 0 56 -19 104 -56 142c -38 38 -87 56 -148 56c -56 0 -104 -19 -142 -56C 2211 1495 2192 1448 2192 1391"),AlphaTab.Rendering.Glyphs.MusicFont.Coda=new AlphaTab.Rendering.Glyphs.LazySvg("M 697 1689v 299h -72v -299c -189 0 -349 -81 -478 -244c -129 -163 -193 -349 -193 -558h -248v -73h 248c 0 -216 63 -409 189 -581c 126 -171 287 -257 481 -257v -248h 72v 248c 189 0 345 84 467 254s 182 364 182 585h 284v 73h -284c 0 209 -60 395 -182 558C 1042 1608 887 1689 697 1689zM 624 813v -737c -126 14 -208 88 -244 222c -36 133 -54 305 -54 514H 624zM 324 886c 0 262 25 445 76 547s 125 158 222 167v -715H 324zM 697 813h 292c 0 -221 -12 -378 -36 -471c -43 -166 -129 -257 -255 -272V 813zM 989 886h -292v 715c 97 -9 170 -64 219 -164C 964 1338 989 1154 989 886"),AlphaTab.Rendering.Glyphs.MusicFont.Segno=new AlphaTab.Rendering.Glyphs.LazySvg("M 604 1150c -182 -112 -324 -222 -425 -329c -126 -131 -189 -256 -189 -372c 0 -116 42 -218 128 -306c 85 -87 194 -131 327 -131c 98 0 196 32 294 97c 98 64 147 141 147 229c 0 56 -9 104 -28 142c -18 38 -50 56 -94 56c -100 0 -155 -46 -164 -137c 0 -18 8 -45 25 -80c 17 -34 21 -63 11 -85c -22 -69 -86 -104 -192 -104c -67 0 -123 20 -168 61c -44 40 -67 84 -67 131c 0 135 64 248 193 339c 25 18 155 88 392 207l 571 -843l 148 0l -611 900c 196 121 334 223 415 304c 118 118 177 245 177 379c 0 112 -43 214 -130 304c -86 90 -193 136 -320 136c -102 0 -202 -34 -300 -102c -97 -68 -146 -152 -146 -251c 0 -37 13 -79 40 -125c 27 -46 57 -69 93 -69c 47 0 82 12 105 38c 22 25 38 65 47 120c 6 22 0 51 -16 87c -17 36 -22 65 -16 87c 9 31 35 56 78 75c 42 18 91 28 147 28c 58 0 105 -21 142 -65c 36 -43 55 -89 55 -139c 0 -139 -89 -263 -269 -371c -133 -68 -232 -117 -297 -148l -544 810l -152 -1L 604 1150zM 201 1091c 34 0 64 11 89 32s 37 51 37 89c 0 34 -12 64 -37 89c -25 25 -54 37 -89 37c -34 0 -64 -12 -89 -37c -25 -25 -37 -54 -37 -89C 74 1131 116 1091 201 1091zM 1291 696c 34 0 64 12 89 37c 25 25 37 54 37 89c 0 31 -12 59 -37 84c -25 25 -54 37 -89 37s -63 -11 -86 -35s -35 -52 -35 -87c 0 -34 10 -64 32 -89C 1224 708 1253 696 1291 696"),AlphaTab.Rendering.Glyphs.MusicFont.OttavaAbove=new AlphaTab.Rendering.Glyphs.LazySvg("M 488 562c 78 9 147 45 206 110c 59 64 88 138 88 222c 0 95 -39 171 -118 227c -78 55 -175 83 -290 83c -112 0 -208 -28 -288 -85c -80 -56 -120 -134 -120 -233c 0 -41 5 -77 15 -107c 10 -29 29 -61 56 -94c 27 -32 77 -62 149 -89c 12 -3 28 -7 49 -13c -69 -12 -127 -48 -172 -107c -45 -59 -68 -123 -68 -190c 0 -88 37 -161 113 -217s 158 -84 249 -84c 96 0 185 29 265 87c 80 58 120 131 120 220c 0 73 -22 134 -68 183c -24 24 -62 47 -113 68C 547 545 521 553 488 562zM 279 588c -66 21 -118 57 -156 108c -37 51 -56 112 -56 181c 0 72 27 141 83 206c 56 65 130 97 224 97c 90 0 166 -36 226 -108c 51 -60 77 -124 77 -190c 0 -54 -21 -101 -63 -140c -30 -27 -68 -49 -113 -68L 279 588zM 460 547c 130 -39 195 -127 195 -263c 0 -66 -25 -129 -77 -188c -51 -59 -122 -88 -213 -88c -87 0 -155 28 -202 86c -47 57 -70 119 -70 186c 0 36 14 72 43 108c 28 36 68 63 120 81L 460 547zM 842 311l -13 -9l 68 -58c 24 -21 51 -28 81 -22c 27 3 40 24 40 63c 0 36 -15 100 -47 192c -31 92 -47 149 -47 170c 0 33 13 46 40 40c 42 -3 94 -47 156 -133c 61 -86 93 -156 93 -211c 0 -12 -7 -22 -22 -31c -18 -9 -28 -16 -31 -22c -15 -30 -7 -49 22 -59c 30 -12 52 9 68 63c 18 75 -12 167 -93 274c -80 107 -147 161 -201 161c -57 0 -86 -24 -86 -72c 0 -18 4 -37 13 -59c 9 -21 23 -65 43 -133c 19 -68 29 -120 29 -156c 0 -15 -1 -25 -4 -31c -9 -18 -24 -19 -45 -4L 842 311zM 1636 683l 81 -68l -72 83c -18 19 -36 29 -54 29c -15 0 -21 -15 -18 -45l 40 -167c -3 21 -28 59 -77 113c -57 66 -109 99 -154 99c -66 0 -99 -39 -99 -118c 0 -78 28 -159 86 -242c 57 -83 122 -124 195 -124c 39 0 74 15 104 45l 9 -45h 31l -95 407c -6 18 -7 30 -4 36S 1621 692 1636 683zM 1382 683c 51 0 107 -37 167 -111c 18 -24 43 -63 77 -115l 31 -134c -33 -34 -66 -51 -99 -51c -54 0 -105 40 -152 120c -46 80 -70 154 -70 222C 1336 660 1351 683 1382 683"),
AlphaTab.Rendering.Glyphs.MusicFont.OttavaBelow=new AlphaTab.Rendering.Glyphs.LazySvg("M 469 529c 75 6 143 41 202 107c 59 65 88 141 88 229c 0 97 -39 173 -118 229c -78 56 -175 84 -290 84c -112 0 -208 -28 -288 -86c -80 -57 -120 -136 -120 -236c 0 -33 6 -68 18 -104c 12 -36 31 -69 56 -97s 65 -55 120 -79c 18 -6 43 -15 77 -27c -69 -12 -126 -47 -170 -104s -65 -121 -65 -191c 0 -85 37 -156 113 -214c 75 -57 157 -86 245 -86c 93 0 182 28 265 86c 83 57 124 130 124 218c 0 72 -22 133 -68 182c -24 24 -62 47 -113 68C 528 512 502 520 469 529zM 251 563c -66 21 -118 57 -154 108c -36 51 -54 112 -54 181c 0 72 27 141 84 206c 55 65 130 97 224 97c 93 0 169 -36 226 -108c 48 -60 72 -124 72 -190c 0 -51 -21 -98 -63 -140c -30 -30 -66 -52 -108 -68L 251 563zM 432 522c 130 -39 195 -128 195 -265c 0 -67 -25 -130 -77 -189c -51 -59 -121 -89 -208 -89c -87 0 -155 29 -202 89c -47 59 -70 119 -70 180c 0 36 13 74 40 112s 66 66 118 84L 432 522zM 827 268h -13l 63 -45c 24 -27 52 -39 86 -36c 24 3 36 23 36 60c 0 34 -15 98 -45 191c -30 93 -45 154 -45 182c 0 34 13 49 40 46c 42 -3 94 -49 156 -138c 61 -89 93 -161 93 -218c 0 -12 -10 -25 -31 -37c -15 -6 -22 -12 -22 -18c -15 -30 -9 -50 18 -59c 33 -12 57 9 72 64c 18 76 -12 168 -93 277c -80 108 -146 162 -197 162c -63 0 -95 -28 -95 -84c 0 -8 3 -22 9 -40c 18 -47 35 -102 52 -164c 16 -62 24 -105 24 -129c 0 -17 -3 -29 -9 -35c -6 -6 -18 -4 -36 4L 827 268zM 1413 -13l -72 -9c 23 6 53 1 89 -15c 11 -3 30 -15 53 -35l -131 444c 30 -45 64 -81 102 -108c 38 -27 76 -40 116 -40c 39 0 68 11 86 34c 18 22 27 55 27 98c 0 79 -30 156 -90 231c -60 74 -137 112 -231 112c -30 0 -57 -8 -81 -24c -24 -16 -33 -36 -27 -62L 1413 -13zM 1294 635c 15 21 42 32 81 32c 78 0 146 -42 204 -128c 48 -73 72 -145 72 -215c 0 -30 -7 -50 -22 -59c -18 -9 -36 -13 -54 -13c -36 0 -77 17 -122 52c -45 35 -81 77 -108 126L 1294 635"),AlphaTab.Rendering.Glyphs.MusicFont.QuindicesimaAbove=new AlphaTab.Rendering.Glyphs.LazySvg("M 245 985V 270v -72c -9 -8 -30 -13 -61 -13c -25 0 -42 1 -52 4l -99 31l -4 -22l 317 -190v 980c 0 39 6 68 20 88c 13 19 31 34 52 43l 145 40v 9h -531l -4 -18l 149 -40c 24 -9 42 -24 54 -45C 241 1050 245 1024 245 985zM 685 338c 60 15 105 27 136 36c 96 27 167 53 213 77c 175 87 263 192 263 313c 0 72 -15 140 -47 204s -70 111 -115 142c -45 31 -87 53 -124 65c -37 12 -94 18 -170 18c -66 0 -128 -13 -186 -40c -57 -27 -86 -63 -86 -108c 0 -24 16 -36 49 -36c 18 0 41 5 70 15c 28 10 61 35 97 74c 36 39 69 59 99 59c 96 0 170 -39 222 -118c 42 -63 63 -131 63 -204c 0 -57 -18 -108 -56 -152c -37 -43 -79 -77 -124 -102c -45 -24 -125 -54 -240 -90c -36 -12 -87 -27 -154 -45l 154 -426h 426c 36 0 65 -4 86 -13l 45 -34l 22 -29h 9l -127 195h -449L 685 338zM 1806 561h -59l 145 -367c 0 -18 0 -30 0 -36c -6 -27 -21 -42 -45 -45c -24 -3 -51 13 -81 50c -3 6 -9 16 -18 31l -145 367h -68l 154 -379c -3 -15 -4 -26 -4 -32c -6 -21 -18 -34 -36 -37c -45 -6 -98 34 -158 121c -9 12 -21 34 -36 65h -18c 30 -47 54 -83 72 -106c 57 -71 111 -106 163 -106c 18 2 34 14 50 34c 2 5 9 17 18 34c 9 -17 16 -28 22 -34c 24 -22 60 -34 108 -34c 18 0 33 11 45 34c 2 5 7 18 13 38c 18 -21 31 -34 40 -40c 36 -27 74 -37 113 -31c 30 6 49 24 59 54c 3 9 6 25 9 49l -122 304c -3 15 -4 25 -4 31c 0 9 6 13 18 13c 18 0 39 -17 63 -52c 6 -11 16 -28 31 -52l 13 4c -15 29 -27 49 -36 61c -30 43 -56 65 -77 65c -51 0 -71 -20 -59 -62l 122 -306c 0 -17 0 -29 0 -35c -6 -23 -22 -35 -49 -35s -51 10 -72 31c -6 6 -15 18 -27 36L 1806 561zM 2555 525l 77 -63l -72 73c -18 17 -36 26 -54 26c -15 0 -21 -12 -18 -36l 40 -158c -6 31 -43 78 -113 138c -45 40 -84 60 -118 60c -66 0 -99 -38 -99 -114c 0 -79 28 -158 86 -235c 57 -77 122 -116 195 -116c 24 0 48 5 72 16c 6 2 16 9 31 20l 9 -36h 31l -95 395c -6 18 -7 30 -4 35C 2526 535 2537 534 2555 525zM 2292 525c 51 0 108 -35 172 -107c 21 -23 46 -61 77 -112l 27 -134c -30 -29 -63 -44 -99 -44c -54 0 -105 38 -152 116c -46 77 -70 149 -70 215C 2246 502 2262 525 2292 525"),AlphaTab.Rendering.Glyphs.MusicFont.QuindicesimaBelow=new AlphaTab.Rendering.Glyphs.LazySvg("M 2400 -200C 2376 -180 2358 -170 2346 -166C 2310 -150 2280 -144 2256 -150L 2328 -141L 2168 484C 2162 509 2172 530 2196 546C 2221 562 2247 571 2278 571C 2371 571 2448 534 2509 459C 2569 384 2600 307 2600 228C 2600 185 2590 151 2571 128C 2553 105 2526 93 2487 93C 2448 93 2409 107 2371 134C 2333 161 2299 198 2268 243L 2400 -200zM 1300 -57L 1278 -29L 1234 6C 1213 15 1183 21 1146 21L 721 21L 565 446C 632 464 685 481 721 493C 836 530 913 560 959 584C 1004 608 1046 640 1084 684C 1122 728 1143 780 1143 837C 1143 910 1120 980 1078 1043C 1026 1122 953 1159 856 1159C 825 1159 792 1139 756 1100C 719 1060 687 1035 659 1025C 630 1014 605 1009 587 1009C 554 1009 537 1022 537 1046C 537 1092 567 1129 625 1156C 682 1183 742 1196 809 1196C 884 1196 943 1190 981 1178C 1018 1166 1060 1144 1106 1112C 1151 1080 1190 1032 1221 968C 1253 905 1268 838 1268 765C 1268 644 1181 540 1006 453C 960 429 890 402 793 375C 763 365 716 352 656 337L 734 140L 1184 140L 1309 -57L 1300 -57zM 315 6L 0 196L 3 221L 103 190C 112 187 130 184 156 184C 187 184 206 187 215 196L 215 268L 215 984C 215 1023 212 1050 203 1065C 191 1086 171 1100 146 1109L 0 1150L 3 1168L 534 1168L 534 1159L 387 1118C 366 1109 351 1094 337 1075C 323 1055 315 1026 315 987L 315 6zM 1640 84C 1589 84 1535 119 1478 190C 1459 214 1436 249 1406 296L 1425 296C 1440 265 1450 246 1459 234C 1519 147 1573 106 1618 112C 1636 115 1650 128 1656 150C 1656 156 1656 165 1659 181L 1506 562L 1571 562L 1718 193C 1727 178 1734 168 1737 162C 1767 126 1794 109 1818 112C 1842 115 1856 129 1862 156L 1862 193L 1718 562L 1778 562L 1921 193C 1933 175 1943 162 1950 156C 1971 135 1994 125 2021 125C 2049 125 2065 138 2071 162L 2071 196L 1950 503C 1937 544 1957 565 2009 565C 2030 565 2057 543 2087 500C 2096 488 2106 466 2121 437L 2109 434C 2094 457 2084 475 2078 487C 2053 522 2030 537 2012 537C 2000 537 1996 534 1996 525C 1996 519 1997 508 2000 493L 2121 190C 2118 166 2115 149 2112 140C 2103 110 2083 90 2053 84C 2013 78 1976 88 1940 115C 1931 121 1918 135 1900 156C 1893 136 1890 124 1887 118C 1875 95 1858 84 1840 84C 1792 84 1755 96 1731 118C 1725 124 1718 136 1709 153C 1700 136 1693 124 1690 118C 1675 98 1658 87 1640 84zM 2490 121C 2508 121 2528 125 2546 134C 2562 143 2568 163 2568 193C 2568 264 2545 335 2496 409C 2439 495 2372 537 2293 537C 2254 537 2224 527 2209 506L 2259 300C 2286 251 2323 210 2368 175C 2414 139 2454 121 2490 121z"),AlphaTab.Rendering.Glyphs.MusicFont.FermataShort=new AlphaTab.Rendering.Glyphs.LazySvg("M 60 694l -110 1l 660 -713l 656 713l -66 -1l -562 -611L 60 694zM 662 488c 29 0 54 10 74 30s 30 44 30 74c 0 29 -10 54 -30 74s -44 30 -74 30c -29 0 -54 -10 -74 -30s -30 -44 -30 -74c 0 -29 10 -54 30 -74S 633 488 662 488"),AlphaTab.Rendering.Glyphs.MusicFont.FermataNormal=new AlphaTab.Rendering.Glyphs.LazySvg("M 871 230c -216 0 -405 69 -565 209c -160 139 -255 317 -284 531c -2 -16 -4 -32 -4 -48c 0 -21 0 -36 0 -44c 0 -228 84 -427 252 -599c 168 -171 368 -257 600 -257c 229 0 429 84 598 254c 169 169 254 370 254 603c 0 40 0 70 0 92c -26 -216 -119 -394 -278 -533C 1283 299 1093 230 871 230zM 869 767c 29 0 54 10 74 30s 30 44 30 74c 0 29 -9 53 -28 72c -18 18 -44 28 -76 28c -26 0 -50 -9 -72 -28c -21 -18 -32 -42 -32 -72c 0 -29 10 -54 30 -74S 839 767 869 767"),AlphaTab.Rendering.Glyphs.MusicFont.FermataLong=new AlphaTab.Rendering.Glyphs.LazySvg("M 55 702h -68v -704h 1317v 704h -68v -500h -1180V 702zM 647 494c 29 0 54 10 74 30s 30 44 30 74c 0 29 -10 54 -30 74s -44 30 -74 30c -29 0 -54 -10 -74 -30s -30 -44 -30 -74c 0 -29 10 -54 30 -74S 618 494 647 494"),AlphaTab.Rendering.Glyphs.MusicFont.DynamicP=new AlphaTab.Rendering.Glyphs.LazySvg("M 447 894l -146 415l 92 0v 50h -364v -50h 93l 310 -797c 7 -9 10 -16 10 -21c 7 -19 7 -33 0 -43c -14 -14 -27 -21 -39 -21c -38 0 -83 48 -133 144c -14 31 -34 79 -61 144h -25c 26 -72 48 -125 64 -158c 57 -108 116 -162 176 -162c 19 0 33 2 43 7c 12 4 21 18 28 39c 2 7 4 19 7 36c 16 -26 47 -52 90 -79c 43 -26 89 -39 137 -39c 19 0 45 5 77 16c 32 10 59 37 81 78c 21 41 32 89 32 141c 0 35 -2 64 -7 86c -4 21 -13 50 -25 86c -26 64 -71 123 -133 177s -119 80 -169 80C 528 1024 481 981 447 894zM 754 425c -33 -14 -73 5 -119 58c -36 43 -67 92 -93 145c -26 53 -39 113 -39 181c 0 48 9 78 28 90c 26 14 62 0 108 -41c 45 -42 81 -92 108 -150c 9 -24 19 -56 28 -96c 9 -40 14 -74 14 -103C 790 462 778 435 754 425"),AlphaTab.Rendering.Glyphs.MusicFont.DynamicF=new AlphaTab.Rendering.Glyphs.LazySvg("M 951 406v 39h -194l -18 90c -48 194 -97 344 -147 447c -67 141 -154 245 -259 310c -33 21 -77 32 -129 32c -77 0 -127 -21 -151 -64c -14 -26 -21 -51 -21 -75c 0 -38 13 -71 41 -97c 27 -26 57 -37 88 -32c 55 9 83 36 83 79c 0 16 -3 32 -10 46c -9 33 -32 55 -68 64c -12 2 -16 7 -14 14c 4 19 22 28 54 28c 16 -2 36 -14 57 -36c 7 -7 22 -26 47 -57c 52 -79 102 -205 147 -378c 19 -77 38 -154 57 -231l 32 -140h -137v -39h 144c -14 -55 21 -139 108 -252c 65 -84 144 -139 238 -166c 28 -7 57 -10 86 -10c 60 0 109 15 148 46c 38 31 57 72 57 122c 0 48 -14 81 -43 99c -28 18 -56 21 -83 9c -31 -14 -46 -38 -46 -72c 0 -28 10 -52 32 -72c 7 -7 22 -12 46 -14c 24 -2 37 -8 39 -18c 7 -28 -16 -43 -72 -43c -33 0 -64 6 -93 18c -77 33 -132 102 -166 205c -9 33 -20 83 -32 148H 951"),AlphaTab.Rendering.Glyphs.MusicFont.DynamicM=new AlphaTab.Rendering.Glyphs.LazySvg("M 553 1076l -165 1l 201 -502c 7 -12 11 -21 14 -28c 12 -26 18 -45 18 -57c 0 -21 -8 -33 -25 -36c -31 -7 -62 9 -93 50c -9 12 -22 33 -39 65l -199 508l -164 0l 212 -501c 4 -10 7 -17 7 -22c 4 -19 7 -37 7 -52c 0 -17 -3 -28 -10 -33c -9 -10 -22 -14 -39 -14c -50 0 -116 61 -198 183c -12 19 -30 47 -54 84h -18c 43 -73 78 -126 104 -160c 86 -106 165 -154 238 -142c 16 2 37 21 61 56c 7 10 18 28 32 56c 14 -26 28 -45 43 -57c 45 -40 101 -61 166 -61c 31 0 54 19 68 57c 2 12 6 32 10 61c 21 -30 39 -51 54 -62c 48 -39 101 -56 158 -49c 55 7 89 30 104 69c 2 11 3 30 3 55l -163 437c -12 19 -20 32 -22 39c -7 14 -4 22 7 25c 21 2 54 -20 97 -68c 14 -14 34 -39 61 -75h 21c -31 44 -56 78 -75 101c -62 67 -125 101 -188 101c -24 0 -43 -10 -57 -32c -14 -21 -16 -43 -7 -65l 169 -429c 4 -7 6 -11 6 -14c 10 -26 16 -47 16 -64c 0 -26 -10 -40 -32 -43c -28 -7 -58 9 -89 50c -9 12 -22 33 -39 64L 553 1076"),AlphaTab.Rendering.Glyphs.MusicFont.Accentuation=new AlphaTab.Rendering.Glyphs.LazySvg("M 748 286C 382 365 16 445 -350 525c 0 -23 0 -46 0 -69C -58 400 234 344 526 288 233 233 -58 178 -351 124c 0 -24 0 -49 0 -74 366 78 732 157 1099 236z"),AlphaTab.Rendering.Glyphs.MusicFont.HeavyAccentuation=new AlphaTab.Rendering.Glyphs.LazySvg("M -223 900L -275 900l 349 -1004l 353 1004l -128 0l -264 -750L -223 900"),AlphaTab.Rendering.Glyphs.MusicFont.WaveHorizontal=new AlphaTab.Rendering.Glyphs.LazySvg("M 1382 230c -43 32 -92 69 -146 111s -104 76 -149 105c -45 28 -89 51 -134 68s -86 26 -127 28c -47 -6 -87 -19 -119 -38s -79 -51 -143 -98c -64 -46 -117 -81 -160 -102c -42 -21 -90 -32 -141 -32c -79 0 -174 55 -285 166v -112c 132 -110 241 -193 327 -249s 166 -83 244 -83c 48 0 93 11 134 34c 40 22 88 56 144 101c 55 44 103 79 143 103c 40 24 85 37 135 40c 89 -7 182 -55 278 -146V 230"),AlphaTab.Rendering.Glyphs.MusicFont.WaveVertical=new AlphaTab.Rendering.Glyphs.LazySvg("M 165 4h 50c 47 44 86 85 115 122s 43 75 43 114c 0 31 -9 60 -28 85c -19 25 -47 55 -85 89s -66 64 -86 90c -19 26 -30 55 -31 88h 5c 0 31 9 60 27 86c 18 25 46 56 84 93s 66 68 86 95c 19 27 28 57 28 92c 0 33 -9 62 -28 89c -19 26 -47 57 -85 92c -37 35 -65 64 -84 89c -18 24 -27 51 -27 82c 0 17 22 59 67 127h -50c -59 -57 -100 -100 -124 -130c -23 -29 -35 -67 -35 -113c 0 -33 9 -62 27 -86c 18 -24 46 -53 85 -87c 38 -33 66 -63 85 -88c 18 -25 28 -55 28 -91c 0 -17 -8 -37 -26 -61s -42 -54 -73 -89c -31 -35 -53 -60 -64 -75c -41 -64 -61 -109 -61 -135c 1 -40 20 -80 56 -119c 35 -38 72 -77 110 -117c 38 -39 58 -76 60 -112c 0 -18 -4 -35 -13 -50C 210 72 192 44 165 4"),AlphaTab.Rendering.Glyphs.MusicFont.PickStrokeDown=new AlphaTab.Rendering.Glyphs.LazySvg("M 0 -20h 816v 844h -74v -477h -672v 477H 0V -20"),AlphaTab.Rendering.Glyphs.MusicFont.PickStrokeUp=new AlphaTab.Rendering.Glyphs.LazySvg("M 551 -7L 289 950l -264 -956h 66l 202 759l 193 -759H 551"),AlphaTab.Rendering.Glyphs.MusicFont.TremoloPickingThirtySecond=new AlphaTab.Rendering.Glyphs.LazySvg("M -488 787v -250l 986 -505v 253L -488 787zM -488 1200v -250l 986 -505v 253L -488 1200zM -488 1612v -250l 986 -505v 261L -488 1612"),AlphaTab.Rendering.Glyphs.MusicFont.TremoloPickingSixteenth=new AlphaTab.Rendering.Glyphs.LazySvg("M -488 787v -250l 986 -505v 253L -488 787zM -488 1200v -250l 986 -505v 253L -488 1200"),AlphaTab.Rendering.Glyphs.MusicFont.TremoloPickingEighth=new AlphaTab.Rendering.Glyphs.LazySvg("M -488 787v -250l 986 -505v 253L -488 787"),AlphaTab.Rendering.Glyphs.MusicFont.UpperMordent=new AlphaTab.Rendering.Glyphs.LazySvg("M 16 714v -195l 425 -494c 34 -22 53 -33 56 -33c 19 0 33 6 39 20l 349 306c 17 17 36 28 56 33c 19 -6 33 -12 39 -19l 264 -307c 33 -22 53 -33 59 -33c 17 0 29 6 36 20l 349 306c 20 21 39 34 55 40c 20 -7 34 -16 40 -26l 224 -264v 194l -422 494c -32 22 -54 33 -66 33c -15 0 -26 -6 -33 -19l -346 -310c -15 -15 -37 -23 -66 -23c -16 0 -26 3 -29 9l -267 310c -25 22 -46 33 -62 33c -14 0 -25 -6 -33 -19l -346 -310c -18 -19 -40 -29 -66 -29c -14 0 -25 5 -32 16L 16 714"),AlphaTab.Rendering.Glyphs.MusicFont.LowerMordent=new AlphaTab.Rendering.Glyphs.LazySvg("M -34 664v -195l 399 -458c 34 -37 58 -56 72 -56s 41 18 82 56l 352 310v -607h 99v 525l 191 -227c 38 -41 62 -62 72 -62c 10 0 38 16 82 50l 277 247c 64 53 99 80 102 82c 10 -2 24 -15 43 -38c 18 -23 33 -39 42 -50l 115 -142v 178l -349 412c -26 34 -51 52 -75 52c -12 0 -40 -19 -83 -59l -257 -230c -46 -46 -83 -69 -111 -69c -7 0 -12 1 -17 5c -4 3 -9 9 -16 17c -6 8 -11 14 -16 19v 607h -99v -492l -121 149c -31 34 -56 52 -75 52c -7 0 -15 -2 -22 -6c -7 -4 -18 -12 -32 -25c -14 -12 -25 -21 -33 -27l -290 -263c -35 -28 -57 -42 -66 -42c -15 0 -33 14 -56 42L -34 664"),AlphaTab.Rendering.Glyphs.MusicFont.Turn=new AlphaTab.Rendering.Glyphs.LazySvg("M 1141 739c -20 -17 -65 -56 -136 -115c -70 -60 -143 -117 -218 -172c -75 -54 -150 -100 -224 -136c -73 -36 -140 -54 -199 -54c -74 6 -138 45 -191 115s -82 143 -85 218c 8 119 77 179 208 179c 18 0 33 -3 45 -9c 11 -6 31 -20 59 -40c 28 -20 53 -35 75 -45c 22 -9 48 -14 79 -14c 89 0 146 39 170 117c 0 76 -31 132 -93 169c -62 36 -129 55 -202 55c -165 -8 -290 -53 -373 -135c -83 -82 -124 -182 -124 -301c 0 -85 22 -171 67 -255c 44 -84 107 -155 189 -213c 81 -57 174 -92 279 -105c 137 0 267 29 388 89c 121 59 240 137 356 232c 116 95 229 188 337 278c 42 35 97 69 165 101c 67 31 131 47 191 47c 92 -5 162 -35 210 -91c 47 -56 71 -121 71 -196c 0 -64 -18 -119 -55 -162c -36 -43 -85 -65 -146 -65c -21 0 -50 12 -89 38c -38 25 -68 43 -90 55c -22 11 -53 17 -93 17c -42 0 -79 -14 -113 -44c -33 -29 -50 -66 -50 -111c 0 -60 31 -104 95 -134c 63 -29 130 -44 200 -44c 102 0 192 24 269 72c 76 48 135 112 175 191c 40 78 60 161 60 249c 0 87 -20 168 -60 243c -40 74 -101 134 -184 179c -82 45 -185 68 -306 68c -116 0 -224 -22 -323 -66C 1375 894 1264 827 1141 739"),AlphaTab.Rendering.Glyphs.MusicFont.OpenNote=new AlphaTab.Rendering.Glyphs.LazySvg("M 443 922c -124 0 -229 -45 -315 -135s -128 -197 -128 -322c 0 -130 42 -239 126 -326c 84 -87 189 -130 316 -130c 122 0 225 39 310 118c 84 78 130 177 138 295c 0 145 -41 263 -125 354S 575 915 443 922zM 426 96c -101 0 -182 35 -244 107c -61 71 -92 158 -92 260c 0 101 32 185 98 252s 150 100 254 100c 113 0 201 -36 264 -109s 94 -168 94 -288C 780 204 655 96 426 96"),AlphaTab.Rendering.Glyphs.MusicFont.StoppedNote=new AlphaTab.Rendering.Glyphs.LazySvg("M 462 1009v -449h -445v -122h 445V -3h 118v 441h 452v 122h -452v 449H 462"),AlphaTab.Rendering.Glyphs.MusicFont.Tempo=new AlphaTab.Rendering.Glyphs.LazySvg("M 550 1578V 30l 43 8v 1679c 0 86 -41 160 -124 220s -173 90 -272 90c -114 0 -182 -46 -203 -139c 0 -84 41 -164 125 -239s 173 -112 270 -112C 457 1539 510 1552 550 1578zM 914 1686v -76h 540v 76H 914zM 914 1850h 540v 80h -540V 1850"),AlphaTab.Rendering.Glyphs.MusicFont.AccidentalSharp=new AlphaTab.Rendering.Glyphs.LazySvg("M 482 -275v -577h 93v 540l 135 -57v 343l -135 57v 551l 135 -62v 343l -135 57v 561h -93v -525l -223 93v 566h -93v -530l -135 52v -343l 135 -52v -551l -135 57v -348l 135 -52v -561h 93v 525L 482 -275zM 258 156v 551l 223 -93v -546L 258 156"),AlphaTab.Rendering.Glyphs.MusicFont.AccidentalFlat=new AlphaTab.Rendering.Glyphs.LazySvg("M -23 -1273h 93v 1300c 48 -27 86 -48 114 -62c 93 -41 176 -62 249 -62c 52 0 97 13 137 39c 39 26 70 70 91 132c 10 31 15 62 15 93c 0 100 -50 204 -150 311c -72 76 -157 143 -254 202c -41 24 -97 69 -166 135c -45 41 -88 84 -130 129V -1273zM 367 17c -7 -3 -13 -6 -20 -10c -17 -6 -33 -10 -46 -10c -27 0 -59 7 -93 23c -34 15 -79 46 -135 91v 644c 65 -65 131 -131 197 -197c 128 -156 192 -284 192 -384C 460 103 429 51 367 17"),AlphaTab.Rendering.Glyphs.MusicFont.AccidentalNatural=new AlphaTab.Rendering.Glyphs.LazySvg("M 38 472V -1283h 99v 792l 478 -132v 1738h -93v -775L 38 472zM 137 180l 385 -104v -429l -385 104V 180"),AlphaTab.Rendering.Glyphs.MusicFont.ClefNeutral=new AlphaTab.Rendering.Glyphs.LazySvg("M 915 1887v -1875h 337v 1875H 915zM 1477 1887v -1875h 337v 1875H 1477"),AlphaTab.Rendering.Glyphs.MusicFont.RestSixtyFourth=new AlphaTab.Rendering.Glyphs.LazySvg("M 705 -2202c 77 -26 144 -77 200 -150c 56 -73 101 -174 136 -305l 127 -547c -69 127 -197 191 -382 191c -46 0 -100 -7 -162 -23c -61 -15 -114 -46 -156 -92c -42 -46 -63 -108 -63 -185c 0 -65 23 -121 69 -168c 46 -46 104 -69 174 -69c 65 0 123 25 174 75c 50 50 75 104 75 162c 0 31 -7 63 -23 98c -15 34 -44 63 -87 87c 46 15 71 23 75 23c 7 0 27 -3 57 -11c 77 -23 148 -81 213 -174c 53 -73 86 -137 98 -191l 154 -638c -73 128 -198 192 -375 192c -30 0 -61 0 -92 0c -34 -11 -57 -19 -69 -23c -69 -19 -125 -52 -167 -98c -42 -46 -63 -106 -63 -179c 0 -69 23 -127 69 -174c 46 -46 104 -69 174 -69s 128 24 176 72c 48 48 72 103 72 165c 0 31 -7 63 -23 98c -15 34 -42 65 -81 92c 19 7 40 15 63 23c 11 0 32 -3 63 -11c 73 -23 140 -80 202 -169c 61 -89 121 -179 179 -271l 41 0l -1032 4425l -107 0l 319 -1316c -73 128 -196 192 -370 192c -19 0 -38 0 -57 0c -27 -3 -68 -13 -124 -28c -55 -15 -105 -46 -147 -92c -42 -46 -63 -106 -63 -179c 0 -65 23 -121 69 -168c 46 -46 106 -69 179 -69c 65 0 122 24 171 72c 48 48 72 103 72 165c 0 30 -7 63 -23 98c -15 34 -44 63 -87 87c 46 15 71 23 75 23c 7 0 26 -3 57 -11c 76 -23 150 -83 219 -180c 57 -77 86 -129 86 -156l 161 -667c -73 124 -198 186 -375 186c -30 0 -61 0 -92 0c -34 -11 -57 -19 -69 -22c -69 -19 -125 -51 -167 -97c -42 -45 -63 -105 -63 -177c 0 -68 23 -126 69 -172c 46 -45 106 -68 179 -68c 65 0 122 23 171 71c 48 47 72 102 72 163c 0 30 -7 63 -23 97c -15 34 -44 65 -87 91c 23 7 46 14 69 21C 653 -2190 674 -2194 705 -2202"),AlphaTab.Rendering.Glyphs.MusicFont.AccidentalDoubleFlat=new AlphaTab.Rendering.Glyphs.LazySvg("M 67 25c 52 -27 93 -48 124 -62c 100 -45 176 -67 228 -67c 45 0 95 12 150 36V -1275h 88v 1300c 48 -27 88 -48 119 -62c 100 -45 183 -67 249 -67c 55 0 104 13 145 39c 41 26 72 71 93 137c 10 31 15 62 15 93c 0 107 -48 212 -145 316c -72 79 -163 143 -270 192c -34 17 -78 52 -132 104c -53 51 -108 107 -163 166v -529c -38 45 -72 83 -104 115c -55 55 -121 103 -197 141c -45 20 -102 68 -171 141c -41 41 -81 85 -119 131V -1275h 88V 25zM 369 15c -7 -3 -13 -6 -20 -10c -17 -6 -33 -10 -46 -10c -31 0 -64 7 -98 23c -34 15 -79 46 -135 91v 644c 65 -65 131 -131 197 -197c 131 -159 197 -287 197 -384C 462 101 431 49 369 15zM 962 15c -3 -3 -12 -6 -26 -10c -20 -6 -36 -10 -46 -10c -31 0 -63 7 -96 23c -33 15 -77 46 -132 91v 644c 65 -65 131 -131 197 -197c 131 -159 197 -287 197 -384C 1055 101 1024 49 962 15"),AlphaTab.Rendering.Glyphs.MusicFont.AccidentalDoubleSharp=new AlphaTab.Rendering.Glyphs.LazySvg("M 22 243c -32 -31 -48 -68 -48 -110c 0 -38 15 -71 45 -98c 30 -27 63 -40 98 -40c 38 0 70 14 96 43c 64 57 116 124 158 199c 41 75 62 146 62 213c -83 0 -172 -30 -268 -91C 99 317 51 278 22 243zM 18 872c 25 25 59 38 100 38c 38 0 70 -14 96 -43c 44 -38 86 -86 124 -144c 64 -96 96 -187 96 -273c -70 0 -140 18 -211 55c -70 36 -137 87 -201 151c -32 31 -48 70 -48 115C -26 810 -11 843 18 872zM 848 32c -25 -25 -60 -38 -105 -38c -41 0 -76 16 -105 48c -57 67 -94 113 -110 139c -60 96 -91 185 -91 268c 92 0 182 -28 268 -86c 79 -67 124 -105 134 -115c 31 -31 48 -72 48 -120C 886 96 874 64 848 32zM 838 656c 31 31 48 70 48 115c 0 38 -14 72 -43 100s -62 43 -100 43c -38 0 -73 -16 -105 -48c -51 -57 -88 -105 -110 -144c -60 -96 -91 -187 -91 -273c 105 0 211 41 316 124C 803 622 832 650 838 656"),AlphaTab.Rendering.Glyphs.MusicFont.SymbolLookup=null,AlphaTab.Rendering.Glyphs.MusicFont.SymbolLookup={},AlphaTab.Rendering.Glyphs.MusicFont.SymbolLookup[AlphaTab.Rendering.Glyphs.MusicFontSymbol.ClefF]=AlphaTab.Rendering.Glyphs.MusicFont.ClefF,AlphaTab.Rendering.Glyphs.MusicFont.SymbolLookup[AlphaTab.Rendering.Glyphs.MusicFontSymbol.ClefC]=AlphaTab.Rendering.Glyphs.MusicFont.ClefC,AlphaTab.Rendering.Glyphs.MusicFont.SymbolLookup[AlphaTab.Rendering.Glyphs.MusicFontSymbol.RestThirtySecond]=AlphaTab.Rendering.Glyphs.MusicFont.RestThirtySecond,AlphaTab.Rendering.Glyphs.MusicFont.SymbolLookup[AlphaTab.Rendering.Glyphs.MusicFontSymbol.RestQuarter]=AlphaTab.Rendering.Glyphs.MusicFont.RestQuarter,AlphaTab.Rendering.Glyphs.MusicFont.SymbolLookup[AlphaTab.Rendering.Glyphs.MusicFontSymbol.GraceUp]=AlphaTab.Rendering.Glyphs.MusicFont.GraceUp,AlphaTab.Rendering.Glyphs.MusicFont.SymbolLookup[AlphaTab.Rendering.Glyphs.MusicFontSymbol.GraceDown]=AlphaTab.Rendering.Glyphs.MusicFont.GraceDown,AlphaTab.Rendering.Glyphs.MusicFont.SymbolLookup[AlphaTab.Rendering.Glyphs.MusicFontSymbol.Trill]=AlphaTab.Rendering.Glyphs.MusicFont.Trill,AlphaTab.Rendering.Glyphs.MusicFont.SymbolLookup[AlphaTab.Rendering.Glyphs.MusicFontSymbol.ClefG]=AlphaTab.Rendering.Glyphs.MusicFont.ClefG,AlphaTab.Rendering.Glyphs.MusicFont.SymbolLookup[AlphaTab.Rendering.Glyphs.MusicFontSymbol.Num0]=AlphaTab.Rendering.Glyphs.MusicFont.Num0,AlphaTab.Rendering.Glyphs.MusicFont.SymbolLookup[AlphaTab.Rendering.Glyphs.MusicFontSymbol.Num1]=AlphaTab.Rendering.Glyphs.MusicFont.Num1,AlphaTab.Rendering.Glyphs.MusicFont.SymbolLookup[AlphaTab.Rendering.Glyphs.MusicFontSymbol.Num2]=AlphaTab.Rendering.Glyphs.MusicFont.Num2,AlphaTab.Rendering.Glyphs.MusicFont.SymbolLookup[AlphaTab.Rendering.Glyphs.MusicFontSymbol.Num3]=AlphaTab.Rendering.Glyphs.MusicFont.Num3,AlphaTab.Rendering.Glyphs.MusicFont.SymbolLookup[AlphaTab.Rendering.Glyphs.MusicFontSymbol.Num4]=AlphaTab.Rendering.Glyphs.MusicFont.Num4,AlphaTab.Rendering.Glyphs.MusicFont.SymbolLookup[AlphaTab.Rendering.Glyphs.MusicFontSymbol.Num5]=AlphaTab.Rendering.Glyphs.MusicFont.Num5,AlphaTab.Rendering.Glyphs.MusicFont.SymbolLookup[AlphaTab.Rendering.Glyphs.MusicFontSymbol.Num6]=AlphaTab.Rendering.Glyphs.MusicFont.Num6,AlphaTab.Rendering.Glyphs.MusicFont.SymbolLookup[AlphaTab.Rendering.Glyphs.MusicFontSymbol.Num7]=AlphaTab.Rendering.Glyphs.MusicFont.Num7,AlphaTab.Rendering.Glyphs.MusicFont.SymbolLookup[AlphaTab.Rendering.Glyphs.MusicFontSymbol.Num8]=AlphaTab.Rendering.Glyphs.MusicFont.Num8,AlphaTab.Rendering.Glyphs.MusicFont.SymbolLookup[AlphaTab.Rendering.Glyphs.MusicFontSymbol.Num9]=AlphaTab.Rendering.Glyphs.MusicFont.Num9,AlphaTab.Rendering.Glyphs.MusicFont.SymbolLookup[AlphaTab.Rendering.Glyphs.MusicFontSymbol.RestSixteenth]=AlphaTab.Rendering.Glyphs.MusicFont.RestSixteenth,AlphaTab.Rendering.Glyphs.MusicFont.SymbolLookup[AlphaTab.Rendering.Glyphs.MusicFontSymbol.RestEighth]=AlphaTab.Rendering.Glyphs.MusicFont.RestEighth,AlphaTab.Rendering.Glyphs.MusicFont.SymbolLookup[AlphaTab.Rendering.Glyphs.MusicFontSymbol.RestWhole]=AlphaTab.Rendering.Glyphs.MusicFont.RestWhole,AlphaTab.Rendering.Glyphs.MusicFont.SymbolLookup[AlphaTab.Rendering.Glyphs.MusicFontSymbol.NoteWhole]=AlphaTab.Rendering.Glyphs.MusicFont.NoteWhole,AlphaTab.Rendering.Glyphs.MusicFont.SymbolLookup[AlphaTab.Rendering.Glyphs.MusicFontSymbol.NoteQuarter]=AlphaTab.Rendering.Glyphs.MusicFont.NoteQuarter,AlphaTab.Rendering.Glyphs.MusicFont.SymbolLookup[AlphaTab.Rendering.Glyphs.MusicFontSymbol.NoteHalf]=AlphaTab.Rendering.Glyphs.MusicFont.NoteHalf,AlphaTab.Rendering.Glyphs.MusicFont.SymbolLookup[AlphaTab.Rendering.Glyphs.MusicFontSymbol.NoteDead]=AlphaTab.Rendering.Glyphs.MusicFont.NoteDead,AlphaTab.Rendering.Glyphs.MusicFont.SymbolLookup[AlphaTab.Rendering.Glyphs.MusicFontSymbol.NoteHarmonic]=AlphaTab.Rendering.Glyphs.MusicFont.NoteHarmonic,AlphaTab.Rendering.Glyphs.MusicFont.SymbolLookup[AlphaTab.Rendering.Glyphs.MusicFontSymbol.NoteRideCymbal]=AlphaTab.Rendering.Glyphs.MusicFont.NoteRideCymbal,AlphaTab.Rendering.Glyphs.MusicFont.SymbolLookup[AlphaTab.Rendering.Glyphs.MusicFontSymbol.NoteHiHat]=AlphaTab.Rendering.Glyphs.MusicFont.NoteHiHat,AlphaTab.Rendering.Glyphs.MusicFont.SymbolLookup[AlphaTab.Rendering.Glyphs.MusicFontSymbol.NoteSideStick]=AlphaTab.Rendering.Glyphs.MusicFont.NoteSideStick,AlphaTab.Rendering.Glyphs.MusicFont.SymbolLookup[AlphaTab.Rendering.Glyphs.MusicFontSymbol.NoteHiHatHalf]=AlphaTab.Rendering.Glyphs.MusicFont.NoteHiHatHalf,AlphaTab.Rendering.Glyphs.MusicFont.SymbolLookup[AlphaTab.Rendering.Glyphs.MusicFontSymbol.NoteChineseCymbal]=AlphaTab.Rendering.Glyphs.MusicFont.NoteChineseCymbal,AlphaTab.Rendering.Glyphs.MusicFont.SymbolLookup[AlphaTab.Rendering.Glyphs.MusicFontSymbol.FooterUpEighth]=AlphaTab.Rendering.Glyphs.MusicFont.FooterUpEighth,AlphaTab.Rendering.Glyphs.MusicFont.SymbolLookup[AlphaTab.Rendering.Glyphs.MusicFontSymbol.FooterUpSixteenth]=AlphaTab.Rendering.Glyphs.MusicFont.FooterUpSixteenth,AlphaTab.Rendering.Glyphs.MusicFont.SymbolLookup[AlphaTab.Rendering.Glyphs.MusicFontSymbol.FooterUpThirtySecond]=AlphaTab.Rendering.Glyphs.MusicFont.FooterUpThirtySecond,AlphaTab.Rendering.Glyphs.MusicFont.SymbolLookup[AlphaTab.Rendering.Glyphs.MusicFontSymbol.FooterUpSixtyFourth]=AlphaTab.Rendering.Glyphs.MusicFont.FooterUpSixtyFourth,AlphaTab.Rendering.Glyphs.MusicFont.SymbolLookup[AlphaTab.Rendering.Glyphs.MusicFontSymbol.FooterDownEighth]=AlphaTab.Rendering.Glyphs.MusicFont.FooterDownEighth,AlphaTab.Rendering.Glyphs.MusicFont.SymbolLookup[AlphaTab.Rendering.Glyphs.MusicFontSymbol.FooterDownSixteenth]=AlphaTab.Rendering.Glyphs.MusicFont.FooterDownSixteenth,AlphaTab.Rendering.Glyphs.MusicFont.SymbolLookup[AlphaTab.Rendering.Glyphs.MusicFontSymbol.FooterDownThirtySecond]=AlphaTab.Rendering.Glyphs.MusicFont.FooterDownThirtySecond,AlphaTab.Rendering.Glyphs.MusicFont.SymbolLookup[AlphaTab.Rendering.Glyphs.MusicFontSymbol.FooterDownSixtyFourth]=AlphaTab.Rendering.Glyphs.MusicFont.FooterDownSixtyFourth,AlphaTab.Rendering.Glyphs.MusicFont.SymbolLookup[AlphaTab.Rendering.Glyphs.MusicFontSymbol.SimileMark]=AlphaTab.Rendering.Glyphs.MusicFont.SimileMark,AlphaTab.Rendering.Glyphs.MusicFont.SymbolLookup[AlphaTab.Rendering.Glyphs.MusicFontSymbol.SimileMark2]=AlphaTab.Rendering.Glyphs.MusicFont.SimileMark2,AlphaTab.Rendering.Glyphs.MusicFont.SymbolLookup[AlphaTab.Rendering.Glyphs.MusicFontSymbol.Coda]=AlphaTab.Rendering.Glyphs.MusicFont.Coda,AlphaTab.Rendering.Glyphs.MusicFont.SymbolLookup[AlphaTab.Rendering.Glyphs.MusicFontSymbol.Segno]=AlphaTab.Rendering.Glyphs.MusicFont.Segno,AlphaTab.Rendering.Glyphs.MusicFont.SymbolLookup[AlphaTab.Rendering.Glyphs.MusicFontSymbol.OttavaAbove]=AlphaTab.Rendering.Glyphs.MusicFont.OttavaAbove,AlphaTab.Rendering.Glyphs.MusicFont.SymbolLookup[AlphaTab.Rendering.Glyphs.MusicFontSymbol.OttavaBelow]=AlphaTab.Rendering.Glyphs.MusicFont.OttavaBelow,AlphaTab.Rendering.Glyphs.MusicFont.SymbolLookup[AlphaTab.Rendering.Glyphs.MusicFontSymbol.QuindicesimaAbove]=AlphaTab.Rendering.Glyphs.MusicFont.QuindicesimaAbove,AlphaTab.Rendering.Glyphs.MusicFont.SymbolLookup[AlphaTab.Rendering.Glyphs.MusicFontSymbol.QuindicesimaBelow]=AlphaTab.Rendering.Glyphs.MusicFont.QuindicesimaBelow,AlphaTab.Rendering.Glyphs.MusicFont.SymbolLookup[AlphaTab.Rendering.Glyphs.MusicFontSymbol.FermataShort]=AlphaTab.Rendering.Glyphs.MusicFont.FermataShort,AlphaTab.Rendering.Glyphs.MusicFont.SymbolLookup[AlphaTab.Rendering.Glyphs.MusicFontSymbol.FermataNormal]=AlphaTab.Rendering.Glyphs.MusicFont.FermataNormal,AlphaTab.Rendering.Glyphs.MusicFont.SymbolLookup[AlphaTab.Rendering.Glyphs.MusicFontSymbol.FermataLong]=AlphaTab.Rendering.Glyphs.MusicFont.FermataLong,AlphaTab.Rendering.Glyphs.MusicFont.SymbolLookup[AlphaTab.Rendering.Glyphs.MusicFontSymbol.DynamicP]=AlphaTab.Rendering.Glyphs.MusicFont.DynamicP,AlphaTab.Rendering.Glyphs.MusicFont.SymbolLookup[AlphaTab.Rendering.Glyphs.MusicFontSymbol.DynamicF]=AlphaTab.Rendering.Glyphs.MusicFont.DynamicF,AlphaTab.Rendering.Glyphs.MusicFont.SymbolLookup[AlphaTab.Rendering.Glyphs.MusicFontSymbol.DynamicM]=AlphaTab.Rendering.Glyphs.MusicFont.DynamicM,AlphaTab.Rendering.Glyphs.MusicFont.SymbolLookup[AlphaTab.Rendering.Glyphs.MusicFontSymbol.Accentuation]=AlphaTab.Rendering.Glyphs.MusicFont.Accentuation,AlphaTab.Rendering.Glyphs.MusicFont.SymbolLookup[AlphaTab.Rendering.Glyphs.MusicFontSymbol.HeavyAccentuation]=AlphaTab.Rendering.Glyphs.MusicFont.HeavyAccentuation,AlphaTab.Rendering.Glyphs.MusicFont.SymbolLookup[AlphaTab.Rendering.Glyphs.MusicFontSymbol.WaveHorizontal]=AlphaTab.Rendering.Glyphs.MusicFont.WaveHorizontal,AlphaTab.Rendering.Glyphs.MusicFont.SymbolLookup[AlphaTab.Rendering.Glyphs.MusicFontSymbol.WaveVertical]=AlphaTab.Rendering.Glyphs.MusicFont.WaveVertical,AlphaTab.Rendering.Glyphs.MusicFont.SymbolLookup[AlphaTab.Rendering.Glyphs.MusicFontSymbol.PickStrokeDown]=AlphaTab.Rendering.Glyphs.MusicFont.PickStrokeDown,AlphaTab.Rendering.Glyphs.MusicFont.SymbolLookup[AlphaTab.Rendering.Glyphs.MusicFontSymbol.PickStrokeUp]=AlphaTab.Rendering.Glyphs.MusicFont.PickStrokeUp,AlphaTab.Rendering.Glyphs.MusicFont.SymbolLookup[AlphaTab.Rendering.Glyphs.MusicFontSymbol.TremoloPickingThirtySecond]=AlphaTab.Rendering.Glyphs.MusicFont.TremoloPickingThirtySecond,AlphaTab.Rendering.Glyphs.MusicFont.SymbolLookup[AlphaTab.Rendering.Glyphs.MusicFontSymbol.TremoloPickingSixteenth]=AlphaTab.Rendering.Glyphs.MusicFont.TremoloPickingSixteenth,AlphaTab.Rendering.Glyphs.MusicFont.SymbolLookup[AlphaTab.Rendering.Glyphs.MusicFontSymbol.TremoloPickingEighth]=AlphaTab.Rendering.Glyphs.MusicFont.TremoloPickingEighth,AlphaTab.Rendering.Glyphs.MusicFont.SymbolLookup[AlphaTab.Rendering.Glyphs.MusicFontSymbol.UpperMordent]=AlphaTab.Rendering.Glyphs.MusicFont.UpperMordent,AlphaTab.Rendering.Glyphs.MusicFont.SymbolLookup[AlphaTab.Rendering.Glyphs.MusicFontSymbol.LowerMordent]=AlphaTab.Rendering.Glyphs.MusicFont.LowerMordent,AlphaTab.Rendering.Glyphs.MusicFont.SymbolLookup[AlphaTab.Rendering.Glyphs.MusicFontSymbol.Turn]=AlphaTab.Rendering.Glyphs.MusicFont.Turn,AlphaTab.Rendering.Glyphs.MusicFont.SymbolLookup[AlphaTab.Rendering.Glyphs.MusicFontSymbol.OpenNote]=AlphaTab.Rendering.Glyphs.MusicFont.OpenNote,AlphaTab.Rendering.Glyphs.MusicFont.SymbolLookup[AlphaTab.Rendering.Glyphs.MusicFontSymbol.StoppedNote]=AlphaTab.Rendering.Glyphs.MusicFont.StoppedNote,AlphaTab.Rendering.Glyphs.MusicFont.SymbolLookup[AlphaTab.Rendering.Glyphs.MusicFontSymbol.Tempo]=AlphaTab.Rendering.Glyphs.MusicFont.Tempo,AlphaTab.Rendering.Glyphs.MusicFont.SymbolLookup[AlphaTab.Rendering.Glyphs.MusicFontSymbol.AccidentalSharp]=AlphaTab.Rendering.Glyphs.MusicFont.AccidentalSharp,AlphaTab.Rendering.Glyphs.MusicFont.SymbolLookup[AlphaTab.Rendering.Glyphs.MusicFontSymbol.AccidentalFlat]=AlphaTab.Rendering.Glyphs.MusicFont.AccidentalFlat,AlphaTab.Rendering.Glyphs.MusicFont.SymbolLookup[AlphaTab.Rendering.Glyphs.MusicFontSymbol.AccidentalNatural]=AlphaTab.Rendering.Glyphs.MusicFont.AccidentalNatural,AlphaTab.Rendering.Glyphs.MusicFont.SymbolLookup[AlphaTab.Rendering.Glyphs.MusicFontSymbol.ClefNeutral]=AlphaTab.Rendering.Glyphs.MusicFont.ClefNeutral,AlphaTab.Rendering.Glyphs.MusicFont.SymbolLookup[AlphaTab.Rendering.Glyphs.MusicFontSymbol.RestSixtyFourth]=AlphaTab.Rendering.Glyphs.MusicFont.RestSixtyFourth,AlphaTab.Rendering.Glyphs.MusicFont.SymbolLookup[AlphaTab.Rendering.Glyphs.MusicFontSymbol.AccidentalDoubleFlat]=AlphaTab.Rendering.Glyphs.MusicFont.AccidentalDoubleFlat,AlphaTab.Rendering.Glyphs.MusicFont.SymbolLookup[AlphaTab.Rendering.Glyphs.MusicFontSymbol.AccidentalDoubleSharp]=AlphaTab.Rendering.Glyphs.MusicFont.AccidentalDoubleSharp}),AlphaTab.Rendering.Glyphs.MusicFontSymbol={None:-1,ClefF:32768,ClefC:32769,RestThirtySecond:32770,RestQuarter:32771,GraceUp:32772,GraceDown:32773,Trill:32774,ClefG:32775,Num0:32776,Num1:32777,Num2:32778,Num3:32779,Num4:32780,Num5:32781,Num6:32782,Num7:32783,Num8:32784,Num9:32785,RestSixteenth:32786,RestEighth:32787,
RestWhole:32788,NoteWhole:32789,NoteQuarter:32790,NoteHalf:32791,NoteDead:32792,NoteHarmonic:32793,NoteRideCymbal:32794,NoteHiHat:32795,NoteSideStick:32796,NoteHiHatHalf:32797,NoteChineseCymbal:32798,FooterUpEighth:32799,FooterUpSixteenth:32800,FooterUpThirtySecond:32801,FooterUpSixtyFourth:32802,FooterDownEighth:32803,FooterDownSixteenth:32804,FooterDownThirtySecond:32805,FooterDownSixtyFourth:32806,SimileMark:32807,SimileMark2:32808,Coda:32809,Segno:32810,OttavaAbove:32811,OttavaBelow:32812,QuindicesimaAbove:32813,QuindicesimaBelow:32814,FermataShort:32815,FermataNormal:32816,FermataLong:32817,DynamicP:32818,DynamicF:32819,DynamicM:32820,Accentuation:32821,HeavyAccentuation:32822,WaveHorizontal:32823,WaveVertical:32824,PickStrokeDown:32825,PickStrokeUp:32826,TremoloPickingThirtySecond:32827,TremoloPickingSixteenth:32828,TremoloPickingEighth:32829,UpperMordent:32830,LowerMordent:32831,Turn:32832,OpenNote:32833,StoppedNote:32834,Tempo:32835,AccidentalSharp:32836,AccidentalFlat:32837,AccidentalNatural:32838,ClefNeutral:32839,RestSixtyFourth:32840,AccidentalDoubleFlat:32841,AccidentalDoubleSharp:32842},AlphaTab.Rendering.Glyphs.NaturalizeGlyph=function(x,y,isGrace){this._isGrace=!1,AlphaTab.Rendering.Glyphs.MusicFontGlyph.call(this,x,y,isGrace?.5:1,AlphaTab.Rendering.Glyphs.MusicFontSymbol.AccidentalNatural),this._isGrace=isGrace},AlphaTab.Rendering.Glyphs.NaturalizeGlyph.prototype={DoLayout:function(){this.Width=8*(this._isGrace?.5:1)*this.get_Scale()},get_CanScale:function(){return!1}},$Inherit(AlphaTab.Rendering.Glyphs.NaturalizeGlyph,AlphaTab.Rendering.Glyphs.MusicFontGlyph),AlphaTab.Rendering.Glyphs.NoteHeadGlyph=function(x,y,duration,isGrace){this._isGrace=!1,this._duration=AlphaTab.Model.Duration.Whole,AlphaTab.Rendering.Glyphs.MusicFontGlyph.call(this,x,y,isGrace?.5:1,AlphaTab.Rendering.Glyphs.NoteHeadGlyph.GetSymbol(duration)),this._isGrace=isGrace,this._duration=duration},AlphaTab.Rendering.Glyphs.NoteHeadGlyph.prototype={DoLayout:function(){switch(this._duration){case AlphaTab.Model.Duration.Whole:this.Width=14*(this._isGrace?.5:1)*this.get_Scale();break;default:this.Width=9*(this._isGrace?.5:1)*this.get_Scale()}},get_CanScale:function(){return!1}},$StaticConstructor(function(){AlphaTab.Rendering.Glyphs.NoteHeadGlyph.GraceScale=.5,AlphaTab.Rendering.Glyphs.NoteHeadGlyph.NoteHeadHeight=9}),AlphaTab.Rendering.Glyphs.NoteHeadGlyph.GetSymbol=function(duration){switch(duration){case AlphaTab.Model.Duration.Whole:return AlphaTab.Rendering.Glyphs.MusicFontSymbol.NoteWhole;case AlphaTab.Model.Duration.Half:return AlphaTab.Rendering.Glyphs.MusicFontSymbol.NoteHalf;default:return AlphaTab.Rendering.Glyphs.MusicFontSymbol.NoteQuarter}},$Inherit(AlphaTab.Rendering.Glyphs.NoteHeadGlyph,AlphaTab.Rendering.Glyphs.MusicFontGlyph),AlphaTab.Rendering.Glyphs.NoteNumberGlyph=function(x,y,n,isGrace){this._noteString=null,this._isGrace=!1,AlphaTab.Rendering.Glyphs.Glyph.call(this,x,y),this._isGrace=isGrace,n.IsTieDestination?this._noteString=0==n.Beat.Index?"("+n.TieOrigin.Fret+")":"":(this._noteString=n.IsDead?"X":n.Fret.toString(),n.IsGhost&&(this._noteString="("+this._noteString+")"))},AlphaTab.Rendering.Glyphs.NoteNumberGlyph.prototype={DoLayout:function(){this.Width=10*this.get_Scale()},CalculateWidth:function(){this.Width=this.Renderer.get_Layout().Renderer.Canvas.MeasureText(this._noteString)},Paint:function(cx,cy,canvas){null!=this._noteString&&canvas.FillText(this._noteString.toLowerCase(),cx+this.X,cy+this.Y)}},$Inherit(AlphaTab.Rendering.Glyphs.NoteNumberGlyph,AlphaTab.Rendering.Glyphs.Glyph),AlphaTab.Rendering.Glyphs.NumberGlyph=function(x,y,number){this._number=0,AlphaTab.Rendering.Glyphs.GlyphGroup.call(this,x,y),this._number=number},AlphaTab.Rendering.Glyphs.NumberGlyph.prototype={get_CanScale:function(){return!1},DoLayout:function(){for(var i=this._number;i>0;){var num=i%10,gl=new AlphaTab.Rendering.Glyphs.DigitGlyph(0,0,num);this.AddGlyph(gl),i=i/10|0}this.Glyphs.reverse();for(var cx=0,j=0,k=this.Glyphs.length;k>j;j++){var g=this.Glyphs[j];g.X=cx,g.Y=0,g.Renderer=this.Renderer,g.DoLayout(),cx+=g.Width}this.Width=cx}},$Inherit(AlphaTab.Rendering.Glyphs.NumberGlyph,AlphaTab.Rendering.Glyphs.GlyphGroup),AlphaTab.Rendering.Glyphs.PickStrokeGlyph=function(x,y,pickStroke){AlphaTab.Rendering.Glyphs.MusicFontGlyph.call(this,x,y,1,AlphaTab.Rendering.Glyphs.PickStrokeGlyph.GetSymbol(pickStroke))},AlphaTab.Rendering.Glyphs.PickStrokeGlyph.prototype={DoLayout:function(){this.Width=9*this.get_Scale()},get_CanScale:function(){return!1}},AlphaTab.Rendering.Glyphs.PickStrokeGlyph.GetSymbol=function(pickStroke){switch(pickStroke){case AlphaTab.Model.PickStrokeType.Up:return AlphaTab.Rendering.Glyphs.MusicFontSymbol.PickStrokeUp;case AlphaTab.Model.PickStrokeType.Down:return AlphaTab.Rendering.Glyphs.MusicFontSymbol.PickStrokeDown;default:return AlphaTab.Rendering.Glyphs.MusicFontSymbol.None}},$Inherit(AlphaTab.Rendering.Glyphs.PickStrokeGlyph,AlphaTab.Rendering.Glyphs.MusicFontGlyph),AlphaTab.Rendering.Glyphs.RepeatCloseGlyph=function(x,y){AlphaTab.Rendering.Glyphs.Glyph.call(this,x,y)},AlphaTab.Rendering.Glyphs.RepeatCloseGlyph.prototype={DoLayout:function(){this.Width=(this.Renderer.get_IsLast()?11:13)*this.get_Scale()},get_CanScale:function(){return!1},Paint:function(cx,cy,canvas){var blockWidth=4*this.get_Scale(),top=cy+this.Y+this.Renderer.get_TopPadding(),bottom=cy+this.Y+this.Renderer.Height-this.Renderer.get_BottomPadding(),left=cx+this.X,h=bottom-top,circleSize=1.5*this.get_Scale(),middle=(top+bottom)/2;canvas.FillCircle(left,middle-3*circleSize,circleSize),canvas.FillCircle(left,middle+3*circleSize,circleSize),left+=4*this.get_Scale(),canvas.BeginPath(),canvas.MoveTo(left,top),canvas.LineTo(left,bottom),canvas.Stroke(),left+=3*this.get_Scale()+.5,canvas.FillRect(left,top,blockWidth,h)}},$Inherit(AlphaTab.Rendering.Glyphs.RepeatCloseGlyph,AlphaTab.Rendering.Glyphs.Glyph),AlphaTab.Rendering.Glyphs.RepeatCountGlyph=function(x,y,count){this._count=0,AlphaTab.Rendering.Glyphs.Glyph.call(this,x,y),this._count=count},AlphaTab.Rendering.Glyphs.RepeatCountGlyph.prototype={DoLayout:function(){this.Width=0},get_CanScale:function(){return!1},Paint:function(cx,cy,canvas){var res=this.Renderer.get_Resources();canvas.set_Font(res.BarNumberFont);var s="x"+this._count,w=canvas.MeasureText(s)/1.5;canvas.FillText(s,cx+this.X-w,cy+this.Y)}},$Inherit(AlphaTab.Rendering.Glyphs.RepeatCountGlyph,AlphaTab.Rendering.Glyphs.Glyph),AlphaTab.Rendering.Glyphs.RepeatOpenGlyph=function(x,y,circleSize,dotOffset){this._dotOffset=0,this._circleSize=0,AlphaTab.Rendering.Glyphs.Glyph.call(this,x,y),this._dotOffset=dotOffset,this._circleSize=circleSize},AlphaTab.Rendering.Glyphs.RepeatOpenGlyph.prototype={DoLayout:function(){this.Width=13*this.get_Scale()},get_CanScale:function(){return!1},Paint:function(cx,cy,canvas){var blockWidth=4*this.get_Scale(),top=cy+this.Y+this.Renderer.get_TopPadding(),bottom=cy+this.Y+this.Renderer.Height-this.Renderer.get_BottomPadding(),left=cx+this.X+.5,h=bottom-top;canvas.FillRect(left,top,blockWidth,h),left+=2*blockWidth-.5,canvas.BeginPath(),canvas.MoveTo(left,top),canvas.LineTo(left,bottom),canvas.Stroke(),left+=3*this.get_Scale();var circleSize=this._circleSize*this.get_Scale(),middle=(top+bottom)/2;canvas.FillCircle(left,middle-circleSize*this._dotOffset,circleSize),canvas.FillCircle(left,middle+circleSize*this._dotOffset,circleSize)}},$Inherit(AlphaTab.Rendering.Glyphs.RepeatOpenGlyph,AlphaTab.Rendering.Glyphs.Glyph),AlphaTab.Rendering.Glyphs.RestGlyph=function(x,y,duration){this._duration=AlphaTab.Model.Duration.Whole,AlphaTab.Rendering.Glyphs.MusicFontGlyph.call(this,x,y,1,AlphaTab.Rendering.Glyphs.RestGlyph.GetSymbol(duration)),this._duration=duration},AlphaTab.Rendering.Glyphs.RestGlyph.prototype={DoLayout:function(){switch(this._duration){case AlphaTab.Model.Duration.Whole:case AlphaTab.Model.Duration.Half:case AlphaTab.Model.Duration.Quarter:case AlphaTab.Model.Duration.Eighth:case AlphaTab.Model.Duration.Sixteenth:this.Width=9*this.get_Scale();break;case AlphaTab.Model.Duration.ThirtySecond:this.Width=12*this.get_Scale();break;case AlphaTab.Model.Duration.SixtyFourth:this.Width=14*this.get_Scale()}},get_CanScale:function(){return!1}},AlphaTab.Rendering.Glyphs.RestGlyph.GetSymbol=function(duration){switch(duration){case AlphaTab.Model.Duration.Whole:case AlphaTab.Model.Duration.Half:return AlphaTab.Rendering.Glyphs.MusicFontSymbol.RestWhole;case AlphaTab.Model.Duration.Quarter:return AlphaTab.Rendering.Glyphs.MusicFontSymbol.RestQuarter;case AlphaTab.Model.Duration.Eighth:return AlphaTab.Rendering.Glyphs.MusicFontSymbol.RestEighth;case AlphaTab.Model.Duration.Sixteenth:return AlphaTab.Rendering.Glyphs.MusicFontSymbol.RestSixteenth;case AlphaTab.Model.Duration.ThirtySecond:return AlphaTab.Rendering.Glyphs.MusicFontSymbol.RestThirtySecond;case AlphaTab.Model.Duration.SixtyFourth:return AlphaTab.Rendering.Glyphs.MusicFontSymbol.RestSixtyFourth;default:return AlphaTab.Rendering.Glyphs.MusicFontSymbol.None}},$Inherit(AlphaTab.Rendering.Glyphs.RestGlyph,AlphaTab.Rendering.Glyphs.MusicFontGlyph),AlphaTab.Rendering.Glyphs.RideCymbalGlyph=function(x,y,isGrace){this._isGrace=!1,AlphaTab.Rendering.Glyphs.MusicFontGlyph.call(this,x,y,isGrace?.5:1,AlphaTab.Rendering.Glyphs.MusicFontSymbol.NoteRideCymbal),this._isGrace=isGrace},AlphaTab.Rendering.Glyphs.RideCymbalGlyph.prototype={DoLayout:function(){this.Width=9*(this._isGrace?.5:1)*this.get_Scale()},get_CanScale:function(){return!1}},$Inherit(AlphaTab.Rendering.Glyphs.RideCymbalGlyph,AlphaTab.Rendering.Glyphs.MusicFontGlyph),AlphaTab.Rendering.ScoreBeatContainerGlyph=function(beat){AlphaTab.Rendering.Glyphs.BeatContainerGlyph.call(this,beat)},AlphaTab.Rendering.ScoreBeatContainerGlyph.prototype={CreateTies:function(n){if(n.IsTieOrigin){var tie=new AlphaTab.Rendering.Glyphs.ScoreTieGlyph(n,n.TieDestination,this,!1);this.Ties.push(tie)}if(n.IsTieDestination){var tie=new AlphaTab.Rendering.Glyphs.ScoreTieGlyph(n.TieOrigin,n,this,!0);this.Ties.push(tie)}else if(n.IsHammerPullOrigin){var tie=new AlphaTab.Rendering.Glyphs.ScoreTieGlyph(n,n.HammerPullDestination,this,!1);this.Ties.push(tie)}else if(n.SlideType==AlphaTab.Model.SlideType.Legato){var tie=new AlphaTab.Rendering.Glyphs.ScoreTieGlyph(n,n.SlideTarget,this,!1);this.Ties.push(tie)}if(n.SlideType!=AlphaTab.Model.SlideType.None){var l=new AlphaTab.Rendering.Glyphs.ScoreSlideLineGlyph(n.SlideType,n,this);this.Ties.push(l)}}},$Inherit(AlphaTab.Rendering.ScoreBeatContainerGlyph,AlphaTab.Rendering.Glyphs.BeatContainerGlyph),AlphaTab.Rendering.Glyphs.ScoreBeatGlyph=function(){this.NoteHeads=null,this.RestGlyph=null,this.BeamingHelper=null,AlphaTab.Rendering.Glyphs.BeatGlyphBase.call(this)},AlphaTab.Rendering.Glyphs.ScoreBeatGlyph.prototype={FinalizeGlyph:function(){this.Container.Beat.get_IsRest()||this.NoteHeads.UpdateBeamingHelper(this.Container.X+this.X)},ApplyGlyphSpacing:function(spacing){AlphaTab.Rendering.Glyphs.Glyph.prototype.ApplyGlyphSpacing.call(this,spacing),this.Container.Beat.get_IsRest()||this.NoteHeads.UpdateBeamingHelper(this.Container.X+this.X)},DoLayout:function(){var sr=this.Renderer;if(!this.Container.Beat.IsEmpty)if(this.Container.Beat.get_IsRest()){var dotLine=0,line=0,offset=0,dotOffset=0;switch(this.Container.Beat.Duration){case AlphaTab.Model.Duration.Whole:line=4,dotLine=4;break;case AlphaTab.Model.Duration.Half:line=5,dotLine=5;break;case AlphaTab.Model.Duration.Quarter:line=7,offset=-2,dotLine=4,dotOffset=3;break;case AlphaTab.Model.Duration.Eighth:line=8,dotLine=4,dotOffset=3;break;case AlphaTab.Model.Duration.Sixteenth:line=10,dotLine=4,dotOffset=3;break;case AlphaTab.Model.Duration.ThirtySecond:line=10,dotLine=2,dotOffset=2;break;case AlphaTab.Model.Duration.SixtyFourth:line=12,dotLine=2,dotOffset=2}var y=sr.GetScoreY(line,offset);if(this.AddGlyph(new AlphaTab.Rendering.Glyphs.RestGlyph(0,y,this.Container.Beat.Duration)),this.Container.Beat.Dots>0){this.AddGlyph(new AlphaTab.Rendering.Glyphs.SpacingGlyph(0,0,5*this.get_Scale(),!1));for(var i=0;i<this.Container.Beat.Dots;i++){var group=new AlphaTab.Rendering.Glyphs.GlyphGroup(0,0);this.CreateBeatDot(dotLine,dotOffset,group),this.AddGlyph(group)}}}else if(this.NoteHeads=new AlphaTab.Rendering.Glyphs.ScoreNoteChordGlyph,this.NoteHeads.Beat=this.Container.Beat,this.NoteHeads.BeamingHelper=this.BeamingHelper,this.NoteLoop($CreateDelegate(this,this.CreateNoteGlyph)),this.AddGlyph(this.NoteHeads),this.Container.Beat.Dots>0){this.AddGlyph(new AlphaTab.Rendering.Glyphs.SpacingGlyph(0,0,5*this.get_Scale(),!1));for(var i=0;i<this.Container.Beat.Dots;i++){var group=new AlphaTab.Rendering.Glyphs.GlyphGroup(0,0);this.NoteLoop($CreateAnonymousDelegate(this,function(n){this.CreateBeatDot(sr.GetNoteLine(n),2,group)})),this.AddGlyph(group)}}AlphaTab.Rendering.Glyphs.BeatGlyphBase.prototype.DoLayout.call(this),null!=this.NoteHeads&&this.NoteHeads.UpdateBeamingHelper(this.X)},CreateBeatDot:function(line,offset,group){var sr=this.Renderer;group.AddGlyph(new AlphaTab.Rendering.Glyphs.CircleGlyph(0,sr.GetScoreY(line,offset+2),1.5*this.get_Scale()))},CreateNoteHeadGlyph:function(n){var isGrace=this.Container.Beat.GraceType!=AlphaTab.Model.GraceType.None;if(n.Beat.Voice.Bar.Track.IsPercussion){var value=n.get_RealValue();return 30>=value||value>=67||AlphaTab.Rendering.Glyphs.ScoreBeatGlyph.NormalKeys.hasOwnProperty(value)?new AlphaTab.Rendering.Glyphs.NoteHeadGlyph(0,0,AlphaTab.Model.Duration.Quarter,isGrace):AlphaTab.Rendering.Glyphs.ScoreBeatGlyph.XKeys.hasOwnProperty(value)?new AlphaTab.Rendering.Glyphs.DrumSticksGlyph(0,0,isGrace):46==value?new AlphaTab.Rendering.Glyphs.HiHatGlyph(0,0,isGrace):49==value||57==value?new AlphaTab.Rendering.Glyphs.DiamondNoteHeadGlyph(0,0,isGrace):52==value?new AlphaTab.Rendering.Glyphs.ChineseCymbalGlyph(0,0,isGrace):51==value||53==value||59==value?new AlphaTab.Rendering.Glyphs.RideCymbalGlyph(0,0,isGrace):new AlphaTab.Rendering.Glyphs.NoteHeadGlyph(0,0,AlphaTab.Model.Duration.Quarter,isGrace)}return n.IsDead?new AlphaTab.Rendering.Glyphs.DeadNoteHeadGlyph(0,0,isGrace):n.HarmonicType==AlphaTab.Model.HarmonicType.None?new AlphaTab.Rendering.Glyphs.NoteHeadGlyph(0,0,n.Beat.Duration,isGrace):new AlphaTab.Rendering.Glyphs.DiamondNoteHeadGlyph(0,0,isGrace)},CreateNoteGlyph:function(n){var sr=this.Renderer,noteHeadGlyph=this.CreateNoteHeadGlyph(n),line=sr.GetNoteLine(n);noteHeadGlyph.Y=sr.GetScoreY(line,-1),this.NoteHeads.AddNoteGlyph(noteHeadGlyph,n,line),n.IsStaccato&&!this.NoteHeads.BeatEffects.hasOwnProperty("Staccato")&&(this.NoteHeads.BeatEffects.Staccato=new AlphaTab.Rendering.Glyphs.CircleGlyph(0,0,1.5)),n.Accentuated!=AlphaTab.Model.AccentuationType.Normal||this.NoteHeads.BeatEffects.hasOwnProperty("Accent")||(this.NoteHeads.BeatEffects.Accent=new AlphaTab.Rendering.Glyphs.AccentuationGlyph(0,0,AlphaTab.Model.AccentuationType.Normal)),n.Accentuated!=AlphaTab.Model.AccentuationType.Heavy||this.NoteHeads.BeatEffects.hasOwnProperty("HAccent")||(this.NoteHeads.BeatEffects.HAccent=new AlphaTab.Rendering.Glyphs.AccentuationGlyph(0,0,AlphaTab.Model.AccentuationType.Heavy))}},$StaticConstructor(function(){AlphaTab.Rendering.Glyphs.ScoreBeatGlyph.NormalKeys=null,AlphaTab.Rendering.Glyphs.ScoreBeatGlyph.XKeys=null,AlphaTab.Rendering.Glyphs.ScoreBeatGlyph.NormalKeys={};for(var normalKeyNotes=new Int32Array([32,34,35,36,38,39,40,41,43,45,47,48,50,55,56,58,60,61]),i=0;i<normalKeyNotes.length;i++)AlphaTab.Rendering.Glyphs.ScoreBeatGlyph.NormalKeys[normalKeyNotes[i]]=!0;AlphaTab.Rendering.Glyphs.ScoreBeatGlyph.XKeys={};for(var xKeyNotes=new Int32Array([31,33,37,42,44,54,62,63,64,65,66]),i=0;i<xKeyNotes.length;i++)AlphaTab.Rendering.Glyphs.ScoreBeatGlyph.XKeys[xKeyNotes[i]]=!0}),$Inherit(AlphaTab.Rendering.Glyphs.ScoreBeatGlyph,AlphaTab.Rendering.Glyphs.BeatGlyphBase),AlphaTab.Rendering.Glyphs.ScoreBeatPostNotesGlyph=function(){AlphaTab.Rendering.Glyphs.BeatGlyphBase.call(this)},AlphaTab.Rendering.Glyphs.ScoreBeatPostNotesGlyph.prototype={DoLayout:function(){this.AddGlyph(new AlphaTab.Rendering.Glyphs.SpacingGlyph(0,0,this.get_BeatDurationWidth()*this.get_Scale(),!0)),AlphaTab.Rendering.Glyphs.BeatGlyphBase.prototype.DoLayout.call(this)}},$Inherit(AlphaTab.Rendering.Glyphs.ScoreBeatPostNotesGlyph,AlphaTab.Rendering.Glyphs.BeatGlyphBase),AlphaTab.Rendering.Glyphs.ScoreBeatPreNotesGlyph=function(){AlphaTab.Rendering.Glyphs.BeatGlyphBase.call(this)},AlphaTab.Rendering.Glyphs.ScoreBeatPreNotesGlyph.prototype={ApplyGlyphSpacing:function(spacing){if(AlphaTab.Rendering.Glyphs.Glyph.prototype.ApplyGlyphSpacing.call(this,spacing),null!=this.Glyphs)for(var i=0,j=this.Glyphs.length;j>i;i++)this.Glyphs[i].X+=spacing},DoLayout:function(){if(this.Container.Beat.BrushType!=AlphaTab.Model.BrushType.None&&(this.AddGlyph(new AlphaTab.Rendering.Glyphs.ScoreBrushGlyph(this.Container.Beat)),this.AddGlyph(new AlphaTab.Rendering.Glyphs.SpacingGlyph(0,0,4*this.get_Scale(),!0))),!this.Container.Beat.get_IsRest()&&!this.Container.Beat.Voice.Bar.Track.IsPercussion){var accidentals=new AlphaTab.Rendering.Glyphs.AccidentalGroupGlyph;this.NoteLoop($CreateAnonymousDelegate(this,function(n){this.CreateAccidentalGlyph(n,accidentals)})),this.AddGlyph(accidentals)}this.AddGlyph(new AlphaTab.Rendering.Glyphs.SpacingGlyph(0,0,4*(this.Container.Beat.GraceType!=AlphaTab.Model.GraceType.None?.5:1)*this.get_Scale(),!0)),AlphaTab.Rendering.Glyphs.BeatGlyphBase.prototype.DoLayout.call(this)},CreateAccidentalGlyph:function(n,accidentals){var sr=this.Renderer,accidental=sr.AccidentalHelper.ApplyAccidental(n),noteLine=sr.GetNoteLine(n),isGrace=this.Container.Beat.GraceType!=AlphaTab.Model.GraceType.None;switch(accidental){case AlphaTab.Model.AccidentalType.Sharp:accidentals.AddGlyph(new AlphaTab.Rendering.Glyphs.SharpGlyph(0,sr.GetScoreY(noteLine,0),isGrace));break;case AlphaTab.Model.AccidentalType.Flat:accidentals.AddGlyph(new AlphaTab.Rendering.Glyphs.FlatGlyph(0,sr.GetScoreY(noteLine,0),isGrace));break;case AlphaTab.Model.AccidentalType.Natural:accidentals.AddGlyph(new AlphaTab.Rendering.Glyphs.NaturalizeGlyph(0,sr.GetScoreY(noteLine+1,0),isGrace))}}},$Inherit(AlphaTab.Rendering.Glyphs.ScoreBeatPreNotesGlyph,AlphaTab.Rendering.Glyphs.BeatGlyphBase),AlphaTab.Rendering.Glyphs.ScoreBrushGlyph=function(beat){this._beat=null,AlphaTab.Rendering.Glyphs.Glyph.call(this,0,0),this._beat=beat},AlphaTab.Rendering.Glyphs.ScoreBrushGlyph.prototype={DoLayout:function(){this.Width=10*this.get_Scale()},Paint:function(cx,cy,canvas){var scoreBarRenderer=this.Renderer,lineSize=scoreBarRenderer.get_LineOffset(),startY=cy+this.Y+(scoreBarRenderer.GetNoteY(this._beat.get_MaxNote())-lineSize/2),endY=cy+this.Y+scoreBarRenderer.GetNoteY(this._beat.get_MinNote())+lineSize,arrowX=cx+this.X+this.Width/2,arrowSize=8*this.get_Scale();if(this._beat.BrushType!=AlphaTab.Model.BrushType.None){if(this._beat.BrushType==AlphaTab.Model.BrushType.ArpeggioUp||this._beat.BrushType==AlphaTab.Model.BrushType.ArpeggioDown)for(var size=15*this.get_Scale(),steps=Math.abs(endY-startY)/size,i=0;steps>i;i++)canvas.FillMusicFontSymbol(cx+this.X+3*this.get_Scale(),1,startY+i*size,AlphaTab.Rendering.Glyphs.MusicFontSymbol.WaveVertical);this._beat.BrushType==AlphaTab.Model.BrushType.ArpeggioUp?(canvas.BeginPath(),canvas.MoveTo(arrowX,endY),canvas.LineTo(arrowX+arrowSize/2,endY-arrowSize),canvas.LineTo(arrowX-arrowSize/2,endY-arrowSize),canvas.ClosePath(),canvas.Fill()):this._beat.BrushType==AlphaTab.Model.BrushType.ArpeggioDown&&(canvas.BeginPath(),canvas.MoveTo(arrowX,startY),canvas.LineTo(arrowX+arrowSize/2,startY+arrowSize),canvas.LineTo(arrowX-arrowSize/2,startY+arrowSize),canvas.ClosePath(),canvas.Fill())}}},$Inherit(AlphaTab.Rendering.Glyphs.ScoreBrushGlyph,AlphaTab.Rendering.Glyphs.Glyph),AlphaTab.Rendering.Glyphs.ScoreNoteGlyphInfo=function(glyph,line){this.Glyph=null,this.Line=0,this.Glyph=glyph,this.Line=line},AlphaTab.Rendering.Glyphs.ScoreNoteChordGlyph=function(){this._infos=null,this._noteLookup=null,this._tremoloPicking=null,this.MinNote=null,this.MaxNote=null,this.SpacingChanged=null,this.UpLineX=0,this.DownLineX=0,this.BeatEffects=null,this.Beat=null,this.BeamingHelper=null,AlphaTab.Rendering.Glyphs.Glyph.call(this,0,0),this._infos=[],this.BeatEffects={},this._noteLookup={}},AlphaTab.Rendering.Glyphs.ScoreNoteChordGlyph.prototype={get_Direction:function(){return this.BeamingHelper.get_Direction()},GetNoteX:function(note,onEnd){if(this._noteLookup.hasOwnProperty(note.String)){var n=this._noteLookup[note.String],pos=this.X+n.X;return onEnd&&(pos+=n.Width),pos}return 0},GetNoteY:function(note){return this._noteLookup.hasOwnProperty(note.String)?this.Y+this._noteLookup[note.String].Y:0},AddNoteGlyph:function(noteGlyph,note,noteLine){var info=new AlphaTab.Rendering.Glyphs.ScoreNoteGlyphInfo(noteGlyph,noteLine);this._infos.push(info),this._noteLookup[note.String]=noteGlyph,(null==this.MinNote||this.MinNote.Line>info.Line)&&(this.MinNote=info),(null==this.MaxNote||this.MaxNote.Line<info.Line)&&(this.MaxNote=info)},get_CanScale:function(){return!1},UpdateBeamingHelper:function(cx){this.BeamingHelper.RegisterBeatLineX(this.Beat,cx+this.X+this.UpLineX,cx+this.X+this.DownLineX)},get_HasTopOverflow:function(){return null!=this.MinNote&&this.MinNote.Line<0},get_HasBottomOverflow:function(){return null!=this.MaxNote&&this.MaxNote.Line>8},DoLayout:function(){this._infos.sort($CreateAnonymousDelegate(this,function(a,b){return a.Line-b.Line}));for(var displacedX=0,lastDisplaced=!1,lastLine=0,anyDisplaced=!1,w=0,i=0,j=this._infos.length;j>i;i++){var g=this._infos[i].Glyph;g.Renderer=this.Renderer,g.DoLayout(),g.X=0,0==i?displacedX=g.Width+0:Math.abs(lastLine-this._infos[i].Line)<=1?lastDisplaced?lastDisplaced=!1:(g.X=displacedX-this.get_Scale(),anyDisplaced=!0,lastDisplaced=!0):lastDisplaced=!1,lastLine=this._infos[i].Line,w=Math.max(w,g.X+g.Width)}if(anyDisplaced?(this.UpLineX=displacedX,this.DownLineX=displacedX):(this.UpLineX=w,this.DownLineX=0),AlphaTab.Platform.Std.Foreach(AlphaTab.Rendering.Glyphs.Glyph,this.BeatEffects,$CreateAnonymousDelegate(this,function(e){e.Renderer=this.Renderer,e.DoLayout()})),this.Beat.get_IsTremolo()){var offset,direction=this.BeamingHelper.get_Direction(),baseNote=direction==AlphaTab.Rendering.Utils.BeamDirection.Up?this.MinNote:this.MaxNote,tremoloX=direction==AlphaTab.Rendering.Utils.BeamDirection.Up?displacedX:0;if(null!=this.Beat.TremoloSpeed){var speed=this.Beat.TremoloSpeed;switch(speed){case AlphaTab.Model.Duration.ThirtySecond:offset=direction==AlphaTab.Rendering.Utils.BeamDirection.Up?-15:10;break;case AlphaTab.Model.Duration.Sixteenth:offset=direction==AlphaTab.Rendering.Utils.BeamDirection.Up?-12:10;break;case AlphaTab.Model.Duration.Eighth:offset=direction==AlphaTab.Rendering.Utils.BeamDirection.Up?-10:10;break;default:offset=direction==AlphaTab.Rendering.Utils.BeamDirection.Up?-15:15}}else offset=direction==AlphaTab.Rendering.Utils.BeamDirection.Up?-15:15;this._tremoloPicking=new AlphaTab.Rendering.Glyphs.TremoloPickingGlyph(tremoloX,baseNote.Glyph.Y+offset*this.get_Scale(),this.Beat.TremoloSpeed),this._tremoloPicking.Renderer=this.Renderer,this._tremoloPicking.DoLayout()}this.Width=w+0},Paint:function(cx,cy,canvas){var scoreRenderer=this.Renderer,effectY=this.BeamingHelper.get_Direction()==AlphaTab.Rendering.Utils.BeamDirection.Up?scoreRenderer.GetScoreY(this.MaxNote.Line,13.5):scoreRenderer.GetScoreY(this.MinNote.Line,-9),effectSpacing=this.BeamingHelper.get_Direction()==AlphaTab.Rendering.Utils.BeamDirection.Up?7*this.get_Scale():-7*this.get_Scale();AlphaTab.Platform.Std.Foreach(AlphaTab.Rendering.Glyphs.Glyph,this.BeatEffects,$CreateAnonymousDelegate(this,function(g){g.Y=effectY,g.X=this.Width/2,g.Paint(cx+this.X,cy+this.Y,canvas),effectY+=effectSpacing})),canvas.set_Color(this.Renderer.get_Layout().Renderer.RenderingResources.StaveLineColor);var linePadding=3*this.get_Scale();if(this.get_HasTopOverflow())for(var l=-1;l>=this.MinNote.Line;){var lY=cy+this.Y+scoreRenderer.GetScoreY(l+1,-1);canvas.BeginPath(),canvas.MoveTo(cx+this.X-linePadding,lY),canvas.LineTo(cx+this.X+this.Width+linePadding,lY),canvas.Stroke(),l-=2}if(this.get_HasBottomOverflow())for(var l=11;l<=this.MaxNote.Line;){var lY=cy+this.Y+scoreRenderer.GetScoreY(l+1,-1);canvas.BeginPath(),canvas.MoveTo(cx+this.X-linePadding,lY),canvas.LineTo(cx+this.X+this.Width+linePadding,lY),canvas.Stroke(),l+=2}canvas.set_Color(this.Renderer.get_Layout().Renderer.RenderingResources.MainGlyphColor),null!=this._tremoloPicking&&this._tremoloPicking.Paint(cx+this.X,cy+this.Y,canvas);for(var i=0,j=this._infos.length;j>i;i++){var g=this._infos[i];g.Glyph.Renderer=this.Renderer,g.Glyph.Paint(cx+this.X,cy+this.Y,canvas)}}},$Inherit(AlphaTab.Rendering.Glyphs.ScoreNoteChordGlyph,AlphaTab.Rendering.Glyphs.Glyph),AlphaTab.Rendering.Glyphs.ScoreSlideLineGlyph=function(type,startNote,parent){this._startNote=null,this._type=AlphaTab.Model.SlideType.None,this._parent=null,AlphaTab.Rendering.Glyphs.Glyph.call(this,0,0),this._type=type,this._startNote=startNote,this._parent=parent},AlphaTab.Rendering.Glyphs.ScoreSlideLineGlyph.prototype={DoLayout:function(){this.Width=0},get_CanScale:function(){return!1},Paint:function(cx,cy,canvas){var startX,startY,endX,endY,r=this.Renderer,sizeX=12*this.get_Scale(),offsetX=1*this.get_Scale();switch(this._type){case AlphaTab.Model.SlideType.Shift:case AlphaTab.Model.SlideType.Legato:startX=cx+r.GetNoteX(this._startNote,!0)+offsetX,startY=cy+r.GetNoteY(this._startNote)+4.5,null!=this._startNote.SlideTarget?(endX=cx+r.GetNoteX(this._startNote.SlideTarget,!1)-offsetX,endY=cy+r.GetNoteY(this._startNote.SlideTarget)+4.5):(endX=cx+this._parent.X+this._parent.PostNotes.X+this._parent.PostNotes.Width,endY=startY);break;case AlphaTab.Model.SlideType.IntoFromBelow:endX=cx+r.GetNoteX(this._startNote,!1)-offsetX,endY=cy+r.GetNoteY(this._startNote)+4.5,startX=endX-sizeX,startY=cy+r.GetNoteY(this._startNote)+9;break;case AlphaTab.Model.SlideType.IntoFromAbove:endX=cx+r.GetNoteX(this._startNote,!1)-offsetX,endY=cy+r.GetNoteY(this._startNote)+4.5,startX=endX-sizeX,startY=cy+r.GetNoteY(this._startNote);break;case AlphaTab.Model.SlideType.OutUp:startX=cx+r.GetNoteX(this._startNote,!0)+offsetX,startY=cy+r.GetNoteY(this._startNote)+4.5,endX=startX+sizeX,endY=cy+r.GetNoteY(this._startNote);break;case AlphaTab.Model.SlideType.OutDown:startX=cx+r.GetNoteX(this._startNote,!0)+offsetX,startY=cy+r.GetNoteY(this._startNote)+4.5,endX=startX+sizeX,endY=cy+r.GetNoteY(this._startNote)+9;break;default:return}canvas.BeginPath(),canvas.MoveTo(startX,startY),canvas.LineTo(endX,endY),canvas.Stroke()}},$Inherit(AlphaTab.Rendering.Glyphs.ScoreSlideLineGlyph,AlphaTab.Rendering.Glyphs.Glyph),AlphaTab.Rendering.Glyphs.TieGlyph=function(startNote,endNote,parent,forEnd){this.StartNote=null,this.EndNote=null,this.Parent=null,this.YOffset=0,this._forEnd=!1,AlphaTab.Rendering.Glyphs.Glyph.call(this,0,0),this.StartNote=startNote,this.EndNote=endNote,this.Parent=parent,this._forEnd=forEnd},AlphaTab.Rendering.Glyphs.TieGlyph.prototype={DoLayout:function(){this.Width=0},get_CanScale:function(){return!1},Paint:function(cx,cy,canvas){if(null!=this.EndNote){var startNoteRenderer=this.Renderer.get_Layout().GetRendererForBar(this.Renderer.Stave.StaveId,this.StartNote.Beat.Voice.Bar.Index),endNoteRenderer=this.Renderer.get_Layout().GetRendererForBar(this.Renderer.Stave.StaveId,this.EndNote.Beat.Voice.Bar.Index),startX=0,endX=0,startY=0,endY=0,shouldDraw=!1,parent=this.Parent;this._forEnd?startNoteRenderer.Stave!=endNoteRenderer.Stave&&(startX=cx,endX=cx+endNoteRenderer.GetNoteX(this.EndNote,!0),startY=cy+endNoteRenderer.GetNoteY(this.EndNote)+this.YOffset,endY=startY,shouldDraw=!0):(startNoteRenderer!=endNoteRenderer?(startX=cx+startNoteRenderer.GetNoteX(this.StartNote,!0),endX=cx+parent.X+parent.PostNotes.X+parent.PostNotes.Width,startY=cy+startNoteRenderer.GetNoteY(this.StartNote)+this.YOffset,endY=startY):(startX=cx+startNoteRenderer.GetNoteX(this.StartNote,!0),endX=cx+endNoteRenderer.GetNoteX(this.EndNote,!1),startY=cy+startNoteRenderer.GetNoteY(this.StartNote)+this.YOffset,endY=cy+endNoteRenderer.GetNoteY(this.EndNote)+this.YOffset),shouldDraw=!0),shouldDraw&&(AlphaTab.Rendering.Glyphs.TieGlyph.PaintTie(canvas,this.get_Scale(),startX,startY,endX,endY,this.GetBeamDirection(this.StartNote,startNoteRenderer)==AlphaTab.Rendering.Utils.BeamDirection.Down),canvas.Fill())}},GetBeamDirection:function(){return AlphaTab.Rendering.Utils.BeamDirection.Down}},AlphaTab.Rendering.Glyphs.TieGlyph.PaintTie=function(canvas,scale,x1,y1,x2,y2,down){if(x2>x1){var t=x1;x1=x2,x2=t,t=y1,y1=y2,y2=t}var offset=15*scale,size=4*scale,normalVectorX=y2-y1,normalVectorY=x2-x1,length=Math.sqrt(normalVectorX*normalVectorX+normalVectorY*normalVectorY);down?normalVectorX*=-1:normalVectorY*=-1,normalVectorX/=length,normalVectorY/=length;var centerX=(x2+x1)/2,centerY=(y2+y1)/2,cp1X=centerX+offset*normalVectorX,cp1Y=centerY+offset*normalVectorY,cp2X=centerX+(offset-size)*normalVectorX,cp2Y=centerY+(offset-size)*normalVectorY;canvas.BeginPath(),canvas.MoveTo(x1,y1),canvas.QuadraticCurveTo(cp1X,cp1Y,x2,y2),canvas.QuadraticCurveTo(cp2X,cp2Y,x1,y1),canvas.ClosePath()},$Inherit(AlphaTab.Rendering.Glyphs.TieGlyph,AlphaTab.Rendering.Glyphs.Glyph),AlphaTab.Rendering.Glyphs.ScoreTieGlyph=function(startNote,endNote,parent,forEnd){AlphaTab.Rendering.Glyphs.TieGlyph.call(this,startNote,endNote,parent,forEnd)},AlphaTab.Rendering.Glyphs.ScoreTieGlyph.prototype={DoLayout:function(){AlphaTab.Rendering.Glyphs.TieGlyph.prototype.DoLayout.call(this),this.YOffset=4.5},GetBeamDirection:function(note,noteRenderer){return noteRenderer.GetBeatDirection(note.Beat)}},$Inherit(AlphaTab.Rendering.Glyphs.ScoreTieGlyph,AlphaTab.Rendering.Glyphs.TieGlyph),AlphaTab.Rendering.Glyphs.SharpGlyph=function(x,y,isGrace){this._isGrace=!1,AlphaTab.Rendering.Glyphs.MusicFontGlyph.call(this,x,y,isGrace?.5:1,AlphaTab.Rendering.Glyphs.MusicFontSymbol.AccidentalSharp),this._isGrace=isGrace},AlphaTab.Rendering.Glyphs.SharpGlyph.prototype={DoLayout:function(){this.Width=8*(this._isGrace?.5:1)*this.get_Scale()},get_CanScale:function(){return!1}},$Inherit(AlphaTab.Rendering.Glyphs.SharpGlyph,AlphaTab.Rendering.Glyphs.MusicFontGlyph),AlphaTab.Rendering.Glyphs.SpacingGlyph=function(x,y,width,scaling){this._scaling=!1,AlphaTab.Rendering.Glyphs.Glyph.call(this,x,y),this._scaling=scaling,this.Width=width,this._scaling=scaling},AlphaTab.Rendering.Glyphs.SpacingGlyph.prototype={get_CanScale:function(){return this._scaling}},$Inherit(AlphaTab.Rendering.Glyphs.SpacingGlyph,AlphaTab.Rendering.Glyphs.Glyph),AlphaTab.Rendering.Glyphs.TabBeatContainerGlyph=function(beat){AlphaTab.Rendering.Glyphs.BeatContainerGlyph.call(this,beat)},AlphaTab.Rendering.Glyphs.TabBeatContainerGlyph.prototype={CreateTies:function(n){if(n.IsHammerPullOrigin){var tie=new AlphaTab.Rendering.Glyphs.TabTieGlyph(n,n.HammerPullDestination,this,!1);this.Ties.push(tie)}else if(n.SlideType==AlphaTab.Model.SlideType.Legato){var tie=new AlphaTab.Rendering.Glyphs.TabTieGlyph(n,n.SlideTarget,this,!1);this.Ties.push(tie)}if(n.SlideType!=AlphaTab.Model.SlideType.None){var l=new AlphaTab.Rendering.Glyphs.TabSlideLineGlyph(n.SlideType,n,this);this.Ties.push(l)}}},$Inherit(AlphaTab.Rendering.Glyphs.TabBeatContainerGlyph,AlphaTab.Rendering.Glyphs.BeatContainerGlyph),AlphaTab.Rendering.Glyphs.TabBeatGlyph=function(){this.NoteNumbers=null,this.BeamingHelper=null,AlphaTab.Rendering.Glyphs.BeatGlyphBase.call(this)},AlphaTab.Rendering.Glyphs.TabBeatGlyph.prototype={DoLayout:function(){if(this.Container.Beat.get_IsRest()||(this.NoteNumbers=new AlphaTab.Rendering.Glyphs.TabNoteChordGlyph(0,0,this.Container.Beat.GraceType!=AlphaTab.Model.GraceType.None),this.NoteNumbers.Beat=this.Container.Beat,this.NoteNumbers.BeamingHelper=this.BeamingHelper,this.NoteLoop($CreateDelegate(this,this.CreateNoteGlyph)),this.AddGlyph(this.NoteNumbers),this.Container.Beat.get_HasWhammyBar()&&!this.NoteNumbers.BeatEffects.hasOwnProperty("Whammy")&&(this.NoteNumbers.BeatEffects.Whammy=new AlphaTab.Rendering.Glyphs.WhammyBarGlyph(this.Container.Beat,this.Container)),this.Container.Beat.get_IsTremolo()&&!this.NoteNumbers.BeatEffects.hasOwnProperty("Tremolo")&&(this.NoteNumbers.BeatEffects.Tremolo=new AlphaTab.Rendering.Glyphs.TremoloPickingGlyph(0,0,this.Container.Beat.TremoloSpeed))),
null!=this.Glyphs){for(var w=0,i=0,j=this.Glyphs.length;j>i;i++){var g=this.Glyphs[i];g.X=w,g.Renderer=this.Renderer,g.DoLayout(),w+=g.Width}this.Width=w}},FinalizeGlyph:function(){this.Container.Beat.get_IsRest()||this.NoteNumbers.UpdateBeamingHelper(this.Container.X+this.X)},ApplyGlyphSpacing:function(spacing){AlphaTab.Rendering.Glyphs.Glyph.prototype.ApplyGlyphSpacing.call(this,spacing),this.Container.Beat.get_IsRest()||this.NoteNumbers.UpdateBeamingHelper(this.Container.X+this.X)},CreateNoteGlyph:function(n){var isGrace=this.Container.Beat.GraceType!=AlphaTab.Model.GraceType.None,tr=this.Renderer,noteNumberGlyph=new AlphaTab.Rendering.Glyphs.NoteNumberGlyph(0,0,n,isGrace),l=n.Beat.Voice.Bar.Track.Tuning.length-n.String+1;noteNumberGlyph.Y=tr.GetTabY(l,-2),this.NoteNumbers.AddNoteGlyph(noteNumberGlyph,n)}},$Inherit(AlphaTab.Rendering.Glyphs.TabBeatGlyph,AlphaTab.Rendering.Glyphs.BeatGlyphBase),AlphaTab.Rendering.Glyphs.TabBeatPostNotesGlyph=function(){AlphaTab.Rendering.Glyphs.BeatGlyphBase.call(this)},AlphaTab.Rendering.Glyphs.TabBeatPostNotesGlyph.prototype={DoLayout:function(){this.NoteLoop($CreateDelegate(this,this.CreateNoteGlyphs)),this.AddGlyph(new AlphaTab.Rendering.Glyphs.SpacingGlyph(0,0,this.get_BeatDurationWidth()*this.get_Scale(),!0)),AlphaTab.Rendering.Glyphs.BeatGlyphBase.prototype.DoLayout.call(this)},CreateNoteGlyphs:function(n){if(n.get_IsTrill()){this.AddGlyph(new AlphaTab.Rendering.Glyphs.SpacingGlyph(0,0,4*this.get_Scale(),!0));var trillNote=new AlphaTab.Model.Note;trillNote.IsGhost=!0,trillNote.Fret=n.get_TrillFret(),trillNote.String=n.String;var tr=this.Renderer,trillNumberGlyph=new AlphaTab.Rendering.Glyphs.NoteNumberGlyph(0,0,trillNote,!0),l=n.Beat.Voice.Bar.Track.Tuning.length-n.String;trillNumberGlyph.Y=tr.GetTabY(l,0),this.AddGlyph(trillNumberGlyph)}if(n.get_HasBend()){var bendHeight=60*this.get_Scale();this.Renderer.RegisterOverflowTop(bendHeight),this.AddGlyph(new AlphaTab.Rendering.Glyphs.BendGlyph(n,this.get_BeatDurationWidth()*this.get_Scale(),bendHeight))}}},$Inherit(AlphaTab.Rendering.Glyphs.TabBeatPostNotesGlyph,AlphaTab.Rendering.Glyphs.BeatGlyphBase),AlphaTab.Rendering.Glyphs.TabBeatPreNotesGlyph=function(){AlphaTab.Rendering.Glyphs.BeatGlyphBase.call(this)},AlphaTab.Rendering.Glyphs.TabBeatPreNotesGlyph.prototype={DoLayout:function(){this.Container.Beat.BrushType!=AlphaTab.Model.BrushType.None&&(this.AddGlyph(new AlphaTab.Rendering.Glyphs.TabBrushGlyph(this.Container.Beat)),this.AddGlyph(new AlphaTab.Rendering.Glyphs.SpacingGlyph(0,0,4*this.get_Scale(),!0))),AlphaTab.Rendering.Glyphs.BeatGlyphBase.prototype.DoLayout.call(this)}},$Inherit(AlphaTab.Rendering.Glyphs.TabBeatPreNotesGlyph,AlphaTab.Rendering.Glyphs.BeatGlyphBase),AlphaTab.Rendering.Glyphs.TabBrushGlyph=function(beat){this._beat=null,AlphaTab.Rendering.Glyphs.Glyph.call(this,0,0),this._beat=beat},AlphaTab.Rendering.Glyphs.TabBrushGlyph.prototype={DoLayout:function(){this.Width=10*this.get_Scale()},Paint:function(cx,cy,canvas){var tabBarRenderer=this.Renderer,res=this.Renderer.get_Resources(),startY=cy+this.X+(tabBarRenderer.GetNoteY(this._beat.get_MaxNote())-res.TablatureFont.Size/2),endY=cy+this.Y+tabBarRenderer.GetNoteY(this._beat.get_MinNote())+res.TablatureFont.Size/2,arrowX=cx+this.X+this.Width/2|0,arrowSize=8*this.get_Scale();if(this._beat.BrushType!=AlphaTab.Model.BrushType.None){if(this._beat.BrushType==AlphaTab.Model.BrushType.BrushUp||this._beat.BrushType==AlphaTab.Model.BrushType.BrushDown)canvas.BeginPath(),canvas.MoveTo(arrowX,startY),canvas.LineTo(arrowX,endY),canvas.Stroke();else for(var size=15*this.get_Scale(),steps=Math.abs(endY-startY)/size,i=0;steps>i;i++)canvas.FillMusicFontSymbol(cx+this.X+3*this.get_Scale(),1,startY+i*size,AlphaTab.Rendering.Glyphs.MusicFontSymbol.WaveVertical);this._beat.BrushType==AlphaTab.Model.BrushType.BrushUp||this._beat.BrushType==AlphaTab.Model.BrushType.ArpeggioUp?(canvas.BeginPath(),canvas.MoveTo(arrowX,endY),canvas.LineTo(arrowX+arrowSize/2,endY-arrowSize),canvas.LineTo(arrowX-arrowSize/2,endY-arrowSize),canvas.ClosePath(),canvas.Fill()):(canvas.BeginPath(),canvas.MoveTo(arrowX,startY),canvas.LineTo(arrowX+arrowSize/2,startY+arrowSize),canvas.LineTo(arrowX-arrowSize/2,startY+arrowSize),canvas.ClosePath(),canvas.Fill())}}},$Inherit(AlphaTab.Rendering.Glyphs.TabBrushGlyph,AlphaTab.Rendering.Glyphs.Glyph),AlphaTab.Rendering.Glyphs.TabClefGlyph=function(x,y){AlphaTab.Rendering.Glyphs.Glyph.call(this,x,y)},AlphaTab.Rendering.Glyphs.TabClefGlyph.prototype={DoLayout:function(){this.Width=28*this.get_Scale()},get_CanScale:function(){return!1},Paint:function(cx,cy,canvas){var track=this.Renderer.Bar.Track,res=this.Renderer.get_Resources(),startY=cy+this.Y+10*this.get_Scale()*.6,fontScale=1,correction=0;switch(track.Tuning.length){case 4:fontScale=.6;break;case 5:fontScale=.8;break;case 6:fontScale=1.1,correction=1;break;case 7:fontScale=1.15;break;case 8:fontScale=1.35}var font=res.TabClefFont.Clone();font.Size=font.Size*fontScale,canvas.set_Font(font);var old=canvas.get_TextAlign();canvas.set_TextAlign(AlphaTab.Platform.Model.TextAlign.Center),canvas.FillText("T",cx+this.X+this.Width/2,startY),canvas.FillText("A",cx+this.X+this.Width/2,startY+font.Size-correction*this.get_Scale()),canvas.FillText("B",cx+this.X+this.Width/2,startY+2*(font.Size-correction*this.get_Scale())),canvas.set_TextAlign(old)}},$Inherit(AlphaTab.Rendering.Glyphs.TabClefGlyph,AlphaTab.Rendering.Glyphs.Glyph),AlphaTab.Rendering.Glyphs.TabNoteChordGlyph=function(x,y,isGrace){this._notes=null,this._noteLookup=null,this._minNote=null,this._isGrace=!1,this._centerX=0,this.Beat=null,this.BeamingHelper=null,this.BeatEffects=null,AlphaTab.Rendering.Glyphs.Glyph.call(this,x,y),this._isGrace=isGrace,this._notes=[],this.BeatEffects={},this._noteLookup={}},AlphaTab.Rendering.Glyphs.TabNoteChordGlyph.prototype={GetNoteX:function(note,onEnd){if(this._noteLookup.hasOwnProperty(note.String)){var n=this._noteLookup[note.String],pos=this.X+n.X;return onEnd&&(n.CalculateWidth(),pos+=n.Width),pos}return 0},GetNoteY:function(note){return this._noteLookup.hasOwnProperty(note.String)?this.Y+this._noteLookup[note.String].Y:0},DoLayout:function(){for(var w=0,i=0,j=this._notes.length;j>i;i++){var g=this._notes[i];g.Renderer=this.Renderer,g.DoLayout(),g.Width>w&&(w=g.Width)}var tabHeight=this.Renderer.get_Resources().TablatureFont.Size,effectY=this.GetNoteY(this._minNote)+tabHeight/2,effectSpacing=7*this.get_Scale();AlphaTab.Platform.Std.Foreach(AlphaTab.Rendering.Glyphs.Glyph,this.BeatEffects,$CreateAnonymousDelegate(this,function(g){g.Y=effectY,g.X=this.Width/2,g.Renderer=this.Renderer,effectY+=effectSpacing,g.DoLayout()})),this._centerX=0,this.Width=w},AddNoteGlyph:function(noteGlyph,note){this._notes.push(noteGlyph),this._noteLookup[note.String]=noteGlyph,(null==this._minNote||note.String<this._minNote.String)&&(this._minNote=note)},Paint:function(cx,cy,canvas){var res=this.Renderer.get_Resources(),old=canvas.get_TextBaseline();canvas.set_TextBaseline(AlphaTab.Platform.Model.TextBaseline.Middle),canvas.set_Font(this._isGrace?res.GraceFont:res.TablatureFont);for(var i=0,j=this._notes.length;j>i;i++){var g=this._notes[i];g.Renderer=this.Renderer,g.Paint(cx+this.X,cy+this.Y,canvas)}canvas.set_TextBaseline(old),AlphaTab.Platform.Std.Foreach(AlphaTab.Rendering.Glyphs.Glyph,this.BeatEffects,$CreateAnonymousDelegate(this,function(g){g.Paint(cx+this.X,cy+this.Y,canvas)}))},UpdateBeamingHelper:function(cx){this.BeamingHelper.HasBeatLineX(this.Beat)||this.BeamingHelper.RegisterBeatLineX(this.Beat,cx+this.X+this._centerX,cx+this.X+this._centerX)}},$Inherit(AlphaTab.Rendering.Glyphs.TabNoteChordGlyph,AlphaTab.Rendering.Glyphs.Glyph),AlphaTab.Rendering.Glyphs.TabSlideLineGlyph=function(type,startNote,parent){this._startNote=null,this._type=AlphaTab.Model.SlideType.None,this._parent=null,AlphaTab.Rendering.Glyphs.Glyph.call(this,0,0),this._type=type,this._startNote=startNote,this._parent=parent},AlphaTab.Rendering.Glyphs.TabSlideLineGlyph.prototype={DoLayout:function(){this.Width=0},get_CanScale:function(){return!1},Paint:function(cx,cy,canvas){var startX,startY,endX,endY,r=this.Renderer,sizeX=12*this.get_Scale(),sizeY=3*this.get_Scale();switch(this._type){case AlphaTab.Model.SlideType.Shift:case AlphaTab.Model.SlideType.Legato:var startOffsetY,endOffsetY;null==this._startNote.SlideTarget?(startOffsetY=0,endOffsetY=0):this._startNote.SlideTarget.Fret>this._startNote.Fret?(startOffsetY=sizeY,endOffsetY=-1*sizeY):(startOffsetY=-1*sizeY,endOffsetY=sizeY),startX=cx+r.GetNoteX(this._startNote,!0),startY=cy+r.GetNoteY(this._startNote)+startOffsetY,null!=this._startNote.SlideTarget?(endX=cx+r.GetNoteX(this._startNote.SlideTarget,!1),endY=cy+r.GetNoteY(this._startNote.SlideTarget)+endOffsetY):(endX=cx+this._parent.X+this._parent.PostNotes.X+this._parent.PostNotes.Width,endY=startY);break;case AlphaTab.Model.SlideType.IntoFromBelow:endX=cx+r.GetNoteX(this._startNote,!1),endY=cy+r.GetNoteY(this._startNote),startX=endX-sizeX,startY=cy+r.GetNoteY(this._startNote)+sizeY;break;case AlphaTab.Model.SlideType.IntoFromAbove:endX=cx+r.GetNoteX(this._startNote,!1),endY=cy+r.GetNoteY(this._startNote),startX=endX-sizeX,startY=cy+r.GetNoteY(this._startNote)-sizeY;break;case AlphaTab.Model.SlideType.OutUp:startX=cx+r.GetNoteX(this._startNote,!0),startY=cy+r.GetNoteY(this._startNote),endX=startX+sizeX,endY=cy+r.GetNoteY(this._startNote)-sizeY;break;case AlphaTab.Model.SlideType.OutDown:startX=cx+r.GetNoteX(this._startNote,!0),startY=cy+r.GetNoteY(this._startNote),endX=startX+sizeX,endY=cy+r.GetNoteY(this._startNote)+sizeY;break;default:return}canvas.BeginPath(),canvas.MoveTo(startX,startY),canvas.LineTo(endX,endY),canvas.Stroke()}},$Inherit(AlphaTab.Rendering.Glyphs.TabSlideLineGlyph,AlphaTab.Rendering.Glyphs.Glyph),AlphaTab.Rendering.Glyphs.TabTieGlyph=function(startNote,endNote,parent,forEnd){AlphaTab.Rendering.Glyphs.TieGlyph.call(this,startNote,endNote,parent,forEnd)},AlphaTab.Rendering.Glyphs.TabTieGlyph.prototype={GetBeamDirection:function(){return this.StartNote.String>3?AlphaTab.Rendering.Utils.BeamDirection.Down:AlphaTab.Rendering.Utils.BeamDirection.Up}},$Inherit(AlphaTab.Rendering.Glyphs.TabTieGlyph,AlphaTab.Rendering.Glyphs.TieGlyph),AlphaTab.Rendering.Glyphs.TempoGlyph=function(x,y,tempo){this._tempo=0,AlphaTab.Rendering.Glyphs.EffectGlyph.call(this,x,y),this._tempo=tempo},AlphaTab.Rendering.Glyphs.TempoGlyph.prototype={Paint:function(cx,cy,canvas){var res=this.Renderer.get_Resources();canvas.set_Font(res.MarkerFont),canvas.FillMusicFontSymbol(cx+this.X,cy+this.Y,1,AlphaTab.Rendering.Glyphs.MusicFontSymbol.Tempo),canvas.FillText(""+this._tempo,cx+this.X+20*this.get_Scale(),cy+this.X+7*this.get_Scale())}},$Inherit(AlphaTab.Rendering.Glyphs.TempoGlyph,AlphaTab.Rendering.Glyphs.EffectGlyph),AlphaTab.Rendering.Glyphs.TextGlyph=function(x,y,text,font,textAlign){this._text=null,this._font=null,this._textAlign=AlphaTab.Platform.Model.TextAlign.Left,AlphaTab.Rendering.Glyphs.EffectGlyph.call(this,x,y),this._text=text,this._font=font,this._textAlign=textAlign},AlphaTab.Rendering.Glyphs.TextGlyph.prototype={Paint:function(cx,cy,canvas){canvas.set_Font(this._font);var old=canvas.get_TextAlign();canvas.set_TextAlign(this._textAlign),canvas.FillText(this._text,cx+this.X,cy+this.Y),canvas.set_TextAlign(old)}},$Inherit(AlphaTab.Rendering.Glyphs.TextGlyph,AlphaTab.Rendering.Glyphs.EffectGlyph),AlphaTab.Rendering.Glyphs.TimeSignatureGlyph=function(x,y,numerator,denominator){this._numerator=0,this._denominator=0,AlphaTab.Rendering.Glyphs.GlyphGroup.call(this,x,y),this._numerator=numerator,this._denominator=denominator},AlphaTab.Rendering.Glyphs.TimeSignatureGlyph.prototype={get_CanScale:function(){return!1},DoLayout:function(){var numerator=new AlphaTab.Rendering.Glyphs.NumberGlyph(0,0,this._numerator),denominator=new AlphaTab.Rendering.Glyphs.NumberGlyph(0,18*this.get_Scale(),this._denominator);this.AddGlyph(numerator),this.AddGlyph(denominator),AlphaTab.Rendering.Glyphs.GlyphGroup.prototype.DoLayout.call(this);for(var i=0,j=this.Glyphs.length;j>i;i++){var g=this.Glyphs[i];g.X=(this.Width-g.Width)/2}}},$Inherit(AlphaTab.Rendering.Glyphs.TimeSignatureGlyph,AlphaTab.Rendering.Glyphs.GlyphGroup),AlphaTab.Rendering.Glyphs.TremoloPickingGlyph=function(x,y,duration){AlphaTab.Rendering.Glyphs.MusicFontGlyph.call(this,x,y,1,AlphaTab.Rendering.Glyphs.TremoloPickingGlyph.GetSymbol(duration))},AlphaTab.Rendering.Glyphs.TremoloPickingGlyph.prototype={DoLayout:function(){this.Width=12*this.get_Scale()},get_CanScale:function(){return!1}},AlphaTab.Rendering.Glyphs.TremoloPickingGlyph.GetSymbol=function(duration){switch(duration){case AlphaTab.Model.Duration.ThirtySecond:return AlphaTab.Rendering.Glyphs.MusicFontSymbol.TremoloPickingThirtySecond;case AlphaTab.Model.Duration.Sixteenth:return AlphaTab.Rendering.Glyphs.MusicFontSymbol.TremoloPickingSixteenth;case AlphaTab.Model.Duration.Eighth:return AlphaTab.Rendering.Glyphs.MusicFontSymbol.TremoloPickingEighth;default:return AlphaTab.Rendering.Glyphs.MusicFontSymbol.None}},$Inherit(AlphaTab.Rendering.Glyphs.TremoloPickingGlyph,AlphaTab.Rendering.Glyphs.MusicFontGlyph),AlphaTab.Rendering.Glyphs.TrillGlyph=function(x,y,scale){this._scale=0,AlphaTab.Rendering.Glyphs.EffectGlyph.call(this,x,y),this._scale=scale},AlphaTab.Rendering.Glyphs.TrillGlyph.prototype={Paint:function(cx,cy,canvas){var res=this.Renderer.get_Resources();canvas.set_Font(res.MarkerFont);var textw=canvas.MeasureText("tr");canvas.FillText("tr",cx+this.X,cy+this.Y);for(var startX=textw,endX=this.Width-startX,step=11*this.get_Scale()*this._scale,loops=Math.max(1,(endX-startX)/step),loopX=startX,i=0;loops>i;i++)canvas.FillMusicFontSymbol(cx+this.X+loopX,cy+this.Y,this._scale,AlphaTab.Rendering.Glyphs.MusicFontSymbol.WaveHorizontal),loopX+=step}},$Inherit(AlphaTab.Rendering.Glyphs.TrillGlyph,AlphaTab.Rendering.Glyphs.EffectGlyph),AlphaTab.Rendering.Glyphs.VibratoGlyph=function(x,y,scale){this._scale=0,AlphaTab.Rendering.Glyphs.EffectGlyph.call(this,x,y),this._scale=scale},AlphaTab.Rendering.Glyphs.VibratoGlyph.prototype={Paint:function(cx,cy,canvas){for(var step=11*this.get_Scale()*this._scale,loops=Math.max(1,this.Width/step),loopX=0,i=0;loops>i;i++)canvas.FillMusicFontSymbol(cx+this.X+loopX,cy+this.Y,this._scale,AlphaTab.Rendering.Glyphs.MusicFontSymbol.WaveHorizontal),loopX+=step}},$Inherit(AlphaTab.Rendering.Glyphs.VibratoGlyph,AlphaTab.Rendering.Glyphs.EffectGlyph),AlphaTab.Rendering.Glyphs.VoiceContainerGlyph=function(x,y,voiceIndex){this.BeatGlyphs=null,this.VoiceIndex=0,AlphaTab.Rendering.Glyphs.GlyphGroup.call(this,x,y),this.BeatGlyphs=[],this.VoiceIndex=voiceIndex},AlphaTab.Rendering.Glyphs.VoiceContainerGlyph.prototype={ApplyGlyphSpacing:function(spacing){for(var glyphSpacing=spacing/this.BeatGlyphs.length,gx=0,i=0,j=this.BeatGlyphs.length;j>i;i++){var g=this.BeatGlyphs[i];g.X=gx,gx+=g.Width+glyphSpacing,g.ApplyGlyphSpacing(glyphSpacing)}this.Width=gx},RegisterMaxSizes:function(sizes){for(var i=0,j=this.BeatGlyphs.length;j>i;i++){var b=this.BeatGlyphs[i];b.RegisterMaxSizes(sizes)}},ApplySizes:function(sizes){this.Width=0;for(var i=0,j=this.BeatGlyphs.length;j>i;i++)this.BeatGlyphs[i].X=0==i?0:this.BeatGlyphs[i-1].X+this.BeatGlyphs[i-1].Width,this.BeatGlyphs[i].ApplySizes(sizes);this.BeatGlyphs.length>0&&(this.Width=this.BeatGlyphs[this.BeatGlyphs.length-1].X+this.BeatGlyphs[this.BeatGlyphs.length-1].Width)},AddGlyph:function(g){g.X=0==this.BeatGlyphs.length?0:this.BeatGlyphs[this.BeatGlyphs.length-1].X+this.BeatGlyphs[this.BeatGlyphs.length-1].Width,g.Index=this.BeatGlyphs.length,g.Renderer=this.Renderer,g.DoLayout(),this.BeatGlyphs.push(g),this.Width=g.X+g.Width},DoLayout:function(){},FinalizeGlyph:function(layout){for(var i=0,j=this.BeatGlyphs.length;j>i;i++)this.BeatGlyphs[i].FinalizeGlyph(layout)},Paint:function(cx,cy,canvas){for(var i=0,j=this.BeatGlyphs.length;j>i;i++)this.BeatGlyphs[i].Paint(cx+this.X,cy+this.Y,canvas)}},$StaticConstructor(function(){AlphaTab.Rendering.Glyphs.VoiceContainerGlyph.KeySizeBeat="Beat"}),$Inherit(AlphaTab.Rendering.Glyphs.VoiceContainerGlyph,AlphaTab.Rendering.Glyphs.GlyphGroup),AlphaTab.Rendering.Glyphs.WhammyBarGlyph=function(beat,parent){this._beat=null,this._parent=null,AlphaTab.Rendering.Glyphs.Glyph.call(this,0,0),this._beat=beat,this._parent=parent},AlphaTab.Rendering.Glyphs.WhammyBarGlyph.prototype={DoLayout:function(){AlphaTab.Rendering.Glyphs.Glyph.prototype.DoLayout.call(this);var minY=0,maxY=0,sizeY=60*this.get_Scale();if(this._beat.WhammyBarPoints.length>=2)for(var dy=sizeY/24,i=0,j=this._beat.WhammyBarPoints.length;j>i;i++){var pt=this._beat.WhammyBarPoints[i],ptY=0-dy*pt.Value;ptY>maxY&&(maxY=ptY),minY>ptY&&(minY=ptY)}var tabBarRenderer=this.Renderer,track=this.Renderer.Bar.Track,tabTop=tabBarRenderer.GetTabY(0,-2),tabBottom=tabBarRenderer.GetTabY(track.Tuning.length,-2),absMinY=this.Y+minY+tabTop,absMaxY=this.Y+maxY-tabBottom;0>absMinY&&tabBarRenderer.RegisterOverflowTop(Math.abs(absMinY)),absMaxY>0&&tabBarRenderer.RegisterOverflowBottom(Math.abs(absMaxY))},Paint:function(cx,cy,canvas){var tabBarRenderer=this.Renderer,res=this.Renderer.get_Resources(),startX=cx+this.X+this._parent.OnNotes.Width/2,endX=null==this._beat.NextBeat||this._beat.Voice!=this._beat.NextBeat.Voice?cx+this.X+this._parent.OnNotes.Width/2+this._parent.PostNotes.Width:cx+tabBarRenderer.GetBeatX(this._beat.NextBeat),startY=cy+this.X,textOffset=3*this.get_Scale(),sizeY=60*this.get_Scale(),old=canvas.get_TextAlign();if(canvas.set_TextAlign(AlphaTab.Platform.Model.TextAlign.Center),this._beat.WhammyBarPoints.length>=2){var dx=(endX-startX)/60,dy=sizeY/24;canvas.BeginPath();for(var i=0,j=this._beat.WhammyBarPoints.length-1;j>i;i++){var pt1=this._beat.WhammyBarPoints[i],pt2=this._beat.WhammyBarPoints[i+1];if(pt1.Value!=pt2.Value||i!=this._beat.WhammyBarPoints.length-2){var pt1X=startX+dx*pt1.Offset,pt1Y=startY-dy*pt1.Value,pt2X=startX+dx*pt2.Offset,pt2Y=startY-dy*pt2.Value;if(canvas.MoveTo(pt1X,pt1Y),canvas.LineTo(pt2X,pt2Y),0!=pt2.Value){var dv=pt2.Value/4,up=pt2.Value-pt1.Value>=0,s="";0>dv&&(s+="-"),(dv>=1||-1>=dv)&&(s+=Math.abs(dv)+" "),dv-=0|dv,.25==dv?s+="1/4":.5==dv?s+="1/2":.75==dv&&(s+="3/4"),canvas.set_Font(res.GraceFont);var sy=up?pt2Y-res.GraceFont.Size-textOffset:pt2Y+textOffset,sx=pt2X;canvas.FillText(s,sx,sy)}}}canvas.Stroke()}canvas.set_TextAlign(old)}},$StaticConstructor(function(){AlphaTab.Rendering.Glyphs.WhammyBarGlyph.WhammyMaxOffset=60}),$Inherit(AlphaTab.Rendering.Glyphs.WhammyBarGlyph,AlphaTab.Rendering.Glyphs.Glyph),AlphaTab.Rendering.RenderFinishedEventArgs=function(){this.Width=0,this.Height=0,this.TotalWidth=0,this.TotalHeight=0,this.RenderResult=null},AlphaTab.Rendering.Layout=AlphaTab.Rendering.Layout||{},AlphaTab.Rendering.Layout.HeaderFooterElements={None:0,Title:1,SubTitle:2,Artist:4,Album:8,Words:16,Music:32,WordsAndMusic:64,Copyright:128,PageNumber:256,All:511},AlphaTab.Rendering.Layout.HorizontalScreenLayoutPartialInfo=function(){this.Width=0,this.MasterBars=null,this.MasterBars=[]},AlphaTab.Rendering.Layout.ScoreLayout=function(renderer){this._barRendererLookup=null,this.PartialRenderFinished=null,this.Renderer=null,this.Width=0,this.Height=0,this.Renderer=renderer,this._barRendererLookup={}},AlphaTab.Rendering.Layout.ScoreLayout.prototype={get_Scale:function(){return this.Renderer.Settings.Scale},CreateEmptyStaveGroup:function(){var group=new AlphaTab.Rendering.Staves.StaveGroup;group.Layout=this;for(var isFirstTrack=!0,i=0;i<this.Renderer.Tracks.length;i++){for(var track=this.Renderer.Tracks[i],j=0;j<this.Renderer.Settings.Staves.length;j++){var s=this.Renderer.Settings.Staves[j];if(AlphaTab.Environment.StaveFactories.hasOwnProperty(s.Id)){var factory=AlphaTab.Environment.StaveFactories[s.Id](this);!factory.CanCreate(track)||!isFirstTrack&&factory.HideOnMultiTrack||group.AddStave(track,new AlphaTab.Rendering.Staves.Stave(s.Id,factory,s.AdditionalSettings))}}isFirstTrack=!1}return group},RegisterBarRenderer:function(key,index,renderer){this._barRendererLookup.hasOwnProperty(key)||(this._barRendererLookup[key]={}),this._barRendererLookup[key][index]=renderer},GetRendererForBar:function(key,index){return this._barRendererLookup.hasOwnProperty(key)&&this._barRendererLookup[key].hasOwnProperty(index)?this._barRendererLookup[key][index]:null},add_PartialRenderFinished:function(value){this.PartialRenderFinished=$CombineDelegates(this.PartialRenderFinished,value)},remove_PartialRenderFinished:function(value){this.PartialRenderFinished=$RemoveDelegate(this.PartialRenderFinished,value)},OnPartialRenderFinished:function(e){null!=this.PartialRenderFinished&&this.PartialRenderFinished(e)},RenderAnnotation:function(){var msg="Rendered using alphaTab (http://www.alphaTab.net)",canvas=this.Renderer.Canvas,resources=this.Renderer.RenderingResources,height=2*resources.CopyrightFont.Size;this.Height+=height;var x=this.Width/2;canvas.BeginRender(this.Width,height),canvas.set_Color(resources.MainGlyphColor),canvas.set_Font(resources.CopyrightFont),canvas.set_TextAlign(AlphaTab.Platform.Model.TextAlign.Center),canvas.FillText(msg,x,0);var result=canvas.EndRender();this.OnPartialRenderFinished(function(){var $v2=new AlphaTab.Rendering.RenderFinishedEventArgs;return $v2.Width=this.Width,$v2.Height=height,$v2.RenderResult=result,$v2.TotalWidth=this.Width,$v2.TotalHeight=this.Height,$v2}.call(this))}},AlphaTab.Rendering.Layout.HorizontalScreenLayout=function(renderer){this._group=null,AlphaTab.Rendering.Layout.ScoreLayout.call(this,renderer)},AlphaTab.Rendering.Layout.HorizontalScreenLayout.prototype={DoLayoutAndRender:function(){if(0!=this.Renderer.Settings.Staves.length){var score=this.Renderer.Score,canvas=this.Renderer.Canvas,startIndex=this.Renderer.Settings.Layout.Get("start",1);startIndex--,startIndex=Math.min(score.MasterBars.length-1,Math.max(0,startIndex));var currentBarIndex=startIndex,endBarIndex=this.Renderer.Settings.Layout.Get("count",score.MasterBars.length);endBarIndex=startIndex+endBarIndex-1,endBarIndex=Math.min(score.MasterBars.length-1,Math.max(0,endBarIndex)),this._group=this.CreateEmptyStaveGroup(),this._group.X=AlphaTab.Rendering.Layout.HorizontalScreenLayout.PagePadding[0],this._group.Y=AlphaTab.Rendering.Layout.HorizontalScreenLayout.PagePadding[1];for(var countPerPartial=this.Renderer.Settings.Layout.Get("countPerPartial",10),partials=[],currentPartial=new AlphaTab.Rendering.Layout.HorizontalScreenLayoutPartialInfo;endBarIndex>=currentBarIndex;){var result=this._group.AddBars(this.Renderer.Tracks,currentBarIndex),renderer=this._group.GetBarRenderer(currentBarIndex);if(0==currentPartial.MasterBars.length&&result.IsLinkedToPrevious&&partials.length>0){var previousPartial=partials[partials.length-1];previousPartial.MasterBars.push(score.MasterBars[currentBarIndex]),previousPartial.Width+=renderer.Width}else currentPartial.MasterBars.push(score.MasterBars[currentBarIndex]),currentPartial.Width+=renderer.Width,currentPartial.MasterBars.length>=countPerPartial&&(0==partials.length&&(currentPartial.Width+=this._group.X+this._group.AccoladeSpacing),partials.push(currentPartial),currentPartial=new AlphaTab.Rendering.Layout.HorizontalScreenLayoutPartialInfo);currentBarIndex++}currentPartial.MasterBars.length>=0&&(0==partials.length&&(currentPartial.Width+=this._group.X+this._group.AccoladeSpacing),partials.push(currentPartial)),this._group.FinalizeGroup(this),this.Height=this._group.Y+this._group.get_Height()+AlphaTab.Rendering.Layout.HorizontalScreenLayout.PagePadding[3],this.Width=this._group.X+this._group.Width+AlphaTab.Rendering.Layout.HorizontalScreenLayout.PagePadding[2],currentBarIndex=0;for(var i=0;i<partials.length;i++){var partial=partials[i];canvas.BeginRender(partial.Width,this.Height),canvas.set_Color(this.Renderer.RenderingResources.MainGlyphColor),canvas.set_TextAlign(AlphaTab.Platform.Model.TextAlign.Left);var renderer=this._group.GetBarRenderer(partial.MasterBars[0].Index),renderX=renderer.X+this._group.AccoladeSpacing;0==i&&(renderX-=this._group.X+this._group.AccoladeSpacing),this._group.PaintPartial(-renderX,this._group.Y,this.Renderer.Canvas,currentBarIndex,partial.MasterBars.length);var result=canvas.EndRender();this.OnPartialRenderFinished(function(){var $v3=new AlphaTab.Rendering.RenderFinishedEventArgs;return $v3.TotalWidth=this.Width,$v3.TotalHeight=this.Height,$v3.Width=partial.Width,$v3.Height=this.Height,$v3.RenderResult=result,$v3}.call(this)),currentBarIndex+=partial.MasterBars.length}}},BuildBoundingsLookup:function(lookup){this._group.BuildBoundingsLookup(lookup)}},$StaticConstructor(function(){AlphaTab.Rendering.Layout.HorizontalScreenLayout.PagePadding=new Float32Array([20,20,20,20]),AlphaTab.Rendering.Layout.HorizontalScreenLayout.GroupSpacing=20}),$Inherit(AlphaTab.Rendering.Layout.HorizontalScreenLayout,AlphaTab.Rendering.Layout.ScoreLayout),AlphaTab.Rendering.Layout.PageViewLayout=function(renderer){this._groups=null,AlphaTab.Rendering.Layout.ScoreLayout.call(this,renderer)},AlphaTab.Rendering.Layout.PageViewLayout.prototype={DoLayoutAndRender:function(){var x=AlphaTab.Rendering.Layout.PageViewLayout.PagePadding[0],y=AlphaTab.Rendering.Layout.PageViewLayout.PagePadding[1],autoSize=this.Renderer.Settings.Layout.Get("autoSize",!0);this.Width=autoSize||this.Renderer.Settings.Width<=0?950*this.get_Scale():this.Renderer.Settings.Width,y=this.LayoutAndRenderScoreInfo(x,y),y=this.LayoutAndRenderScore(x,y),this.Height=y+AlphaTab.Rendering.Layout.PageViewLayout.PagePadding[3]},LayoutAndRenderScoreInfo:function(x,y){var str,flags=this.Renderer.Settings.Layout.Get("hideInfo",!1)?AlphaTab.Rendering.Layout.HeaderFooterElements.None:AlphaTab.Rendering.Layout.HeaderFooterElements.All,score=this.Renderer.Score,scale=this.get_Scale(),canvas=this.Renderer.Canvas,res=this.Renderer.RenderingResources,glyphs=[];if(null!=score.Title&&0!=score.Title.length&&(flags&AlphaTab.Rendering.Layout.HeaderFooterElements.Title)!=AlphaTab.Rendering.Layout.HeaderFooterElements.None&&(glyphs.push(new AlphaTab.Rendering.Glyphs.TextGlyph(this.Width/2,y,score.Title,res.TitleFont,AlphaTab.Platform.Model.TextAlign.Center)),y+=35*scale),null!=score.SubTitle&&0!=score.SubTitle.length&&(flags&AlphaTab.Rendering.Layout.HeaderFooterElements.SubTitle)!=AlphaTab.Rendering.Layout.HeaderFooterElements.None&&(glyphs.push(new AlphaTab.Rendering.Glyphs.TextGlyph(this.Width/2,y,score.SubTitle,res.SubTitleFont,AlphaTab.Platform.Model.TextAlign.Center)),y+=20*scale),null!=score.Artist&&0!=score.Artist.length&&(flags&AlphaTab.Rendering.Layout.HeaderFooterElements.Artist)!=AlphaTab.Rendering.Layout.HeaderFooterElements.None&&(glyphs.push(new AlphaTab.Rendering.Glyphs.TextGlyph(this.Width/2,y,score.Artist,res.SubTitleFont,AlphaTab.Platform.Model.TextAlign.Center)),y+=20*scale),null!=score.Album&&0!=score.Album.length&&(flags&AlphaTab.Rendering.Layout.HeaderFooterElements.Album)!=AlphaTab.Rendering.Layout.HeaderFooterElements.None&&(glyphs.push(new AlphaTab.Rendering.Glyphs.TextGlyph(this.Width/2,y,score.Album,res.SubTitleFont,AlphaTab.Platform.Model.TextAlign.Center)),y+=20*scale),null!=score.Music&&0!=score.Music.length&&score.Music==score.Words&&(flags&AlphaTab.Rendering.Layout.HeaderFooterElements.WordsAndMusic)!=AlphaTab.Rendering.Layout.HeaderFooterElements.None?(glyphs.push(new AlphaTab.Rendering.Glyphs.TextGlyph(this.Width/2,y,"Music and Words by "+score.Words,res.WordsFont,AlphaTab.Platform.Model.TextAlign.Center)),y+=20*scale):(null!=score.Music&&0!=score.Music.length&&(flags&AlphaTab.Rendering.Layout.HeaderFooterElements.Music)!=AlphaTab.Rendering.Layout.HeaderFooterElements.None&&glyphs.push(new AlphaTab.Rendering.Glyphs.TextGlyph(this.Width-AlphaTab.Rendering.Layout.PageViewLayout.PagePadding[2],y,"Music by "+score.Music,res.WordsFont,AlphaTab.Platform.Model.TextAlign.Right)),null!=score.Words&&0!=score.Words.length&&(flags&AlphaTab.Rendering.Layout.HeaderFooterElements.Words)!=AlphaTab.Rendering.Layout.HeaderFooterElements.None&&glyphs.push(new AlphaTab.Rendering.Glyphs.TextGlyph(x,y,"Words by "+score.Music,res.WordsFont,AlphaTab.Platform.Model.TextAlign.Left)),y+=20*scale),y+=20*scale,1==this.Renderer.Tracks.length&&!this.Renderer.Tracks[0].IsPercussion){var tuning=AlphaTab.Model.Tuning.FindTuning(this.Renderer.Tracks[0].Tuning);if(null!=tuning&&(glyphs.push(new AlphaTab.Rendering.Glyphs.TextGlyph(x,y,tuning.Name,res.EffectFont,AlphaTab.Platform.Model.TextAlign.Left)),y+=15*scale,!tuning.IsStandard)){for(var stringsPerColumn=0|Math.ceil(this.Renderer.Tracks[0].Tuning.length/2),currentX=x,currentY=y,i=0,j=this.Renderer.Tracks[0].Tuning.length;j>i;i++)str="("+(i+1)+") = "+AlphaTab.Model.Tuning.GetTextForTuning(this.Renderer.Tracks[0].Tuning[i],!1),glyphs.push(new AlphaTab.Rendering.Glyphs.TextGlyph(currentX,currentY,str,res.EffectFont,AlphaTab.Platform.Model.TextAlign.Left)),currentY+=15*scale,i==stringsPerColumn-1&&(currentY=y,currentX+=43*scale);y+=15*stringsPerColumn*scale}}y+=25*scale,canvas.BeginRender(this.Width,y),canvas.set_Color(res.ScoreInfoColor),canvas.set_TextAlign(AlphaTab.Platform.Model.TextAlign.Center);for(var i=0;i<glyphs.length;i++)glyphs[i].Paint(0,0,canvas);var result=canvas.EndRender();return this.OnPartialRenderFinished(function(){var $v4=new AlphaTab.Rendering.RenderFinishedEventArgs;return $v4.Width=this.Width,$v4.Height=y,$v4.RenderResult=result,$v4.TotalWidth=this.Width,$v4.TotalHeight=y,$v4}.call(this)),y},LayoutAndRenderScore:function(x,y){var score=this.Renderer.Score,canvas=this.Renderer.Canvas,startIndex=this.Renderer.Settings.Layout.Get("start",1);startIndex--,startIndex=Math.min(score.MasterBars.length-1,Math.max(0,startIndex));var currentBarIndex=startIndex,endBarIndex=this.Renderer.Settings.Layout.Get("count",score.MasterBars.length);if(0>endBarIndex&&(endBarIndex=score.MasterBars.length),endBarIndex=startIndex+endBarIndex-1,endBarIndex=Math.min(score.MasterBars.length-1,Math.max(0,endBarIndex)),this._groups=[],this.Renderer.Settings.Staves.length>0)for(;endBarIndex>=currentBarIndex;){var group=this.CreateStaveGroup(currentBarIndex,endBarIndex);this._groups.push(group),group.X=x,group.Y=y,this.FitGroup(group),group.FinalizeGroup(this);var height=group.get_Height()+20*this.get_Scale();canvas.BeginRender(this.Width,height),this.Renderer.Canvas.set_Color(this.Renderer.RenderingResources.MainGlyphColor),this.Renderer.Canvas.set_TextAlign(AlphaTab.Platform.Model.TextAlign.Left),group.Paint(0,-group.Y,canvas),y+=height,currentBarIndex=group.get_LastBarIndex()+1;var result=canvas.EndRender();this.OnPartialRenderFinished(function(){var $v5=new AlphaTab.Rendering.RenderFinishedEventArgs;return $v5.TotalWidth=this.Width,$v5.TotalHeight=y,$v5.Width=this.Width,$v5.Height=height,$v5.RenderResult=result,$v5}.call(this))}return y},FitGroup:function(group){var barSpace=0,freeSpace=this.get_MaxWidth()-group.Width;0!=freeSpace&&group.MasterBars.length>0&&(barSpace=freeSpace/group.MasterBars.length),(group.IsFull||0>barSpace)&&group.ApplyBarSpacing(barSpace),this.Width=Math.max(this.Width,group.Width)},CreateStaveGroup:function(currentBarIndex,endIndex){var group=this.CreateEmptyStaveGroup();group.Index=this._groups.length;for(var barsPerRow=this.Renderer.Settings.Layout.Get("barsPerRow",-1),maxWidth=this.get_MaxWidth(),end=endIndex+1,i=currentBarIndex;end>i;i++){group.AddBars(this.Renderer.Tracks,i);var groupIsFull=!1;if(-1==barsPerRow&&group.Width>=maxWidth&&0!=group.MasterBars.length?groupIsFull=!0:group.MasterBars.length==barsPerRow+1&&(groupIsFull=!0),groupIsFull)return group.RevertLastBar(),group.IsFull=!0,group;group.X=0}return group},get_MaxWidth:function(){var autoSize=this.Renderer.Settings.Layout.Get("autoSize",!0),width=autoSize?this.get_SheetWidth():this.Renderer.Settings.Width;return width-AlphaTab.Rendering.Layout.PageViewLayout.PagePadding[0]-AlphaTab.Rendering.Layout.PageViewLayout.PagePadding[2]},get_SheetWidth:function(){return 950*this.get_Scale()},BuildBoundingsLookup:function(lookup){for(var i=0,j=this._groups.length;j>i;i++)this._groups[i].BuildBoundingsLookup(lookup)}},$StaticConstructor(function(){AlphaTab.Rendering.Layout.PageViewLayout.PagePadding=new Float32Array([40,40,40,40]),
AlphaTab.Rendering.Layout.PageViewLayout.WidthOn100=950,AlphaTab.Rendering.Layout.PageViewLayout.GroupSpacing=20}),$Inherit(AlphaTab.Rendering.Layout.PageViewLayout,AlphaTab.Rendering.Layout.ScoreLayout),AlphaTab.Rendering.RenderingResources=function(scale){this.MusicFont=null,this.CopyrightFont=null,this.TitleFont=null,this.SubTitleFont=null,this.WordsFont=null,this.EffectFont=null,this.TablatureFont=null,this.GraceFont=null,this.StaveLineColor=null,this.BarSeperatorColor=null,this.BarNumberFont=null,this.BarNumberColor=null,this.MarkerFont=null,this.TabClefFont=null,this.MainGlyphColor=null,this.Scale=0,this.ScoreInfoColor=null,this.Init(scale)},AlphaTab.Rendering.RenderingResources.prototype={Init:function(scale){this.Scale=scale;var musicFont="alphaTab",sansFont="Arial",serifFont="Georgia";this.MusicFont=new AlphaTab.Platform.Model.Font(musicFont,11*scale,AlphaTab.Platform.Model.FontStyle.Plain),this.EffectFont=new AlphaTab.Platform.Model.Font(serifFont,12*scale,AlphaTab.Platform.Model.FontStyle.Italic),this.CopyrightFont=new AlphaTab.Platform.Model.Font(sansFont,12*scale,AlphaTab.Platform.Model.FontStyle.Bold),this.TitleFont=new AlphaTab.Platform.Model.Font(serifFont,32*scale,AlphaTab.Platform.Model.FontStyle.Plain),this.SubTitleFont=new AlphaTab.Platform.Model.Font(serifFont,20*scale,AlphaTab.Platform.Model.FontStyle.Plain),this.WordsFont=new AlphaTab.Platform.Model.Font(serifFont,15*scale,AlphaTab.Platform.Model.FontStyle.Plain),this.TablatureFont=new AlphaTab.Platform.Model.Font(sansFont,13*scale,AlphaTab.Platform.Model.FontStyle.Plain),this.GraceFont=new AlphaTab.Platform.Model.Font(sansFont,11*scale,AlphaTab.Platform.Model.FontStyle.Plain),this.StaveLineColor=new AlphaTab.Platform.Model.Color(165,165,165,255),this.BarSeperatorColor=new AlphaTab.Platform.Model.Color(34,34,17,255),this.BarNumberFont=new AlphaTab.Platform.Model.Font(sansFont,11*scale,AlphaTab.Platform.Model.FontStyle.Plain),this.BarNumberColor=new AlphaTab.Platform.Model.Color(200,0,0,255),this.MarkerFont=new AlphaTab.Platform.Model.Font(serifFont,14*scale,AlphaTab.Platform.Model.FontStyle.Bold),this.TabClefFont=new AlphaTab.Platform.Model.Font(sansFont,18*scale,AlphaTab.Platform.Model.FontStyle.Bold),this.ScoreInfoColor=new AlphaTab.Platform.Model.Color(0,0,0,255),this.MainGlyphColor=new AlphaTab.Platform.Model.Color(0,0,0,255)}},AlphaTab.Rendering.RhythmBarRenderer=function(bar,direction){this._direction=AlphaTab.Rendering.Utils.BeamDirection.Up,this._helpers=null,AlphaTab.Rendering.GroupedBarRenderer.call(this,bar),this._direction=direction},AlphaTab.Rendering.RhythmBarRenderer.prototype={DoLayout:function(){this._helpers=this.Stave.StaveGroup.Helpers.Helpers[this.Bar.Track.Index][this.Bar.Index],AlphaTab.Rendering.GroupedBarRenderer.prototype.DoLayout.call(this),this.Height=this.Stave.GetSetting("rhythm-height",24)*this.get_Scale(),this.IsEmpty=!1},CreateBeatGlyphs:function(){this.CreateVoiceGlyphs(this.Bar.Voices[0])},CreateVoiceGlyphs:function(voice){for(var i=0,j=voice.Beats.length;j>i;i++){var b=voice.Beats[i],container=new AlphaTab.Rendering.Glyphs.BeatContainerGlyph(b);container.PreNotes=new AlphaTab.Rendering.Glyphs.BeatGlyphBase,container.OnNotes=new AlphaTab.Rendering.Glyphs.BeatGlyphBase,container.PostNotes=new AlphaTab.Rendering.Glyphs.BeatGlyphBase,this.AddBeatGlyph(container)}},PaintBackground:function(){},Paint:function(cx,cy,canvas){AlphaTab.Rendering.GroupedBarRenderer.prototype.Paint.call(this,cx,cy,canvas);for(var i=0,j=this._helpers.BeamHelpers.length;j>i;i++)for(var v=this._helpers.BeamHelpers[i],k=0,l=v.length;l>k;k++)this.PaintBeamHelper(cx+this.get_BeatGlyphsStart(),cy,canvas,v[k])},PaintBeamHelper:function(cx,cy,canvas,h){if(h.Beats[0].GraceType==AlphaTab.Model.GraceType.None){var useBeams=this.Stave.GetSetting("use-beams",!1);useBeams&&1==h.Beats.length?this.PaintFooter(cx,cy,canvas,h):this.PaintBar(cx,cy,canvas,h)}},PaintBar:function(cx,cy,canvas,h){for(var i=0,j=h.Beats.length;j>i;i++){var beat=h.Beats[i];if(h.HasBeatLineX(beat)){var beatLineX=h.GetBeatLineX(beat)+this.get_Scale(),y1=cy+this.Y,y2=cy+this.Y+this.Height;canvas.BeginPath(),canvas.MoveTo(cx+this.X+beatLineX,y1),canvas.LineTo(cx+this.X+beatLineX,y2),canvas.Stroke();var brokenBarOffset=6*this.get_Scale(),barSpacing=6*this.get_Scale(),barSize=3*this.get_Scale(),barCount=AlphaTab.Model.ModelUtils.GetIndex(beat.Duration)-2,barStart=cy+this.Y;this._direction==AlphaTab.Rendering.Utils.BeamDirection.Down&&(barSpacing=-barSpacing,barStart+=this.Height);for(var barIndex=0;barCount>barIndex;barIndex++){var barStartX,barEndX,barStartY,barEndY,barY=barStart+barIndex*barSpacing;if(1==h.Beats.length)barStartX=beatLineX,barEndX=beatLineX+brokenBarOffset,barStartY=barY,barEndY=barY,AlphaTab.Rendering.RhythmBarRenderer.PaintSingleBar(canvas,cx+this.X+barStartX,barStartY,cx+this.X+barEndX,barEndY,barSize);else if(i<h.Beats.length-1){if(this.IsFullBarJoin(beat,h.Beats[i+1],barIndex))barStartX=beatLineX,barEndX=h.GetBeatLineX(h.Beats[i+1])+this.get_Scale();else{if(0!=i&&this.IsFullBarJoin(h.Beats[i-1],beat,barIndex))continue;barStartX=beatLineX,barEndX=barStartX+brokenBarOffset}barStartY=barY,barEndY=barY,AlphaTab.Rendering.RhythmBarRenderer.PaintSingleBar(canvas,cx+this.X+barStartX,barStartY,cx+this.X+barEndX,barEndY,barSize)}else i>0&&!this.IsFullBarJoin(beat,h.Beats[i-1],barIndex)&&(barStartX=beatLineX-brokenBarOffset,barEndX=beatLineX,barStartY=barY,barEndY=barY,AlphaTab.Rendering.RhythmBarRenderer.PaintSingleBar(canvas,cx+this.X+barStartX,barStartY,cx+this.X+barEndX,barEndY,barSize))}}}},PaintFooter:function(cx,cy,canvas,h){var beat=h.Beats[0];if(beat.Duration!=AlphaTab.Model.Duration.Whole){var beatLineX=h.GetBeatLineX(beat)+this.get_Scale(),topY=0,bottomY=this.Height,beamY=this._direction==AlphaTab.Rendering.Utils.BeamDirection.Down?bottomY:topY;canvas.BeginPath(),canvas.MoveTo(cx+this.X+beatLineX,cy+this.Y+topY),canvas.LineTo(cx+this.X+beatLineX,cy+this.Y+bottomY),canvas.Stroke();var glyph=new AlphaTab.Rendering.Glyphs.BeamGlyph(beatLineX,beamY,beat.Duration,this._direction,!1);glyph.Renderer=this,glyph.DoLayout(),glyph.Paint(cx+this.X,cy+this.Y,canvas)}},IsFullBarJoin:function(a,b,barIndex){return AlphaTab.Model.ModelUtils.GetIndex(a.Duration)-2-barIndex>0&&AlphaTab.Model.ModelUtils.GetIndex(b.Duration)-2-barIndex>0}},AlphaTab.Rendering.RhythmBarRenderer.PaintSingleBar=function(canvas,x1,y1,x2,y2,size){canvas.BeginPath(),canvas.MoveTo(x1,y1),canvas.LineTo(x2,y2),canvas.LineTo(x2,y2-size),canvas.LineTo(x1,y1-size),canvas.ClosePath(),canvas.Fill()},$Inherit(AlphaTab.Rendering.RhythmBarRenderer,AlphaTab.Rendering.GroupedBarRenderer),AlphaTab.Rendering.RhythmBarRendererFactory=function(direction){this._direction=AlphaTab.Rendering.Utils.BeamDirection.Up,AlphaTab.Rendering.BarRendererFactory.call(this),this._direction=direction,this.IsInAccolade=!1,this.HideOnMultiTrack=!1},AlphaTab.Rendering.RhythmBarRendererFactory.prototype={Create:function(bar){return new AlphaTab.Rendering.RhythmBarRenderer(bar,this._direction)}},$Inherit(AlphaTab.Rendering.RhythmBarRendererFactory,AlphaTab.Rendering.BarRendererFactory),AlphaTab.Rendering.ScoreBarRenderer=function(bar){this._helpers=null,this._startSpacing=!1,this.AccidentalHelper=null,AlphaTab.Rendering.GroupedBarRenderer.call(this,bar),this.AccidentalHelper=new AlphaTab.Rendering.Utils.AccidentalHelper},AlphaTab.Rendering.ScoreBarRenderer.prototype={GetBeatDirection:function(beat){var g=this.GetOnNotesPosition(beat.Voice.Index,beat.Index);return null!=g?g.NoteHeads.get_Direction():AlphaTab.Rendering.Utils.BeamDirection.Up},GetNoteX:function(note,onEnd){var g=this.GetOnNotesPosition(note.Beat.Voice.Index,note.Beat.Index);return null!=g?g.Container.X+g.X+g.NoteHeads.GetNoteX(note,onEnd):0},GetNoteY:function(note){var beat=this.GetOnNotesPosition(note.Beat.Voice.Index,note.Beat.Index);return null!=beat?beat.NoteHeads.GetNoteY(note):0},get_TopPadding:function(){return this.get_GlyphOverflow()},get_BottomPadding:function(){return this.get_GlyphOverflow()},get_LineOffset:function(){return 9*this.get_Scale()},DoLayout:function(){this._helpers=this.Stave.StaveGroup.Helpers.Helpers[this.Bar.Track.Index][this.Bar.Index],AlphaTab.Rendering.GroupedBarRenderer.prototype.DoLayout.call(this),this.Height=4*this.get_LineOffset()+this.get_TopPadding()+this.get_BottomPadding(),0==this.Index&&(this.Stave.RegisterStaveTop(this.get_GlyphOverflow()),this.Stave.RegisterStaveBottom(this.Height-this.get_GlyphOverflow()));for(var top=this.GetScoreY(0,0),bottom=this.GetScoreY(8,0),i=0,j=this._helpers.BeamHelpers.length;j>i;i++)for(var v=this._helpers.BeamHelpers[i],k=0,l=v.length;l>k;k++){var h=v[k],maxNoteY=this.GetScoreY(this.GetNoteLine(h.MaxNote),0);h.get_Direction()==AlphaTab.Rendering.Utils.BeamDirection.Up&&(maxNoteY-=this.GetStemSize(h.MaxDuration)),top>maxNoteY&&this.RegisterOverflowTop(Math.abs(maxNoteY));var minNoteY=this.GetScoreY(this.GetNoteLine(h.MinNote),0);h.get_Direction()==AlphaTab.Rendering.Utils.BeamDirection.Down&&(minNoteY+=this.GetStemSize(h.MaxDuration)),minNoteY>bottom&&this.RegisterOverflowBottom(Math.abs(minNoteY)-bottom)}},Paint:function(cx,cy,canvas){AlphaTab.Rendering.GroupedBarRenderer.prototype.Paint.call(this,cx,cy,canvas),this.PaintBeams(cx,cy,canvas),this.PaintTuplets(cx,cy,canvas)},PaintTuplets:function(cx,cy,canvas){for(var i=0,j=this._helpers.TupletHelpers.length;j>i;i++)for(var v=this._helpers.TupletHelpers[i],k=0,l=v.length;l>k;k++){var h=v[k];this.PaintTupletHelper(cx+this.get_BeatGlyphsStart(),cy,canvas,h)}},PaintBeams:function(cx,cy,canvas){for(var i=0,j=this._helpers.BeamHelpers.length;j>i;i++)for(var v=this._helpers.BeamHelpers[i],k=0,l=v.length;l>k;k++){var h=v[k];this.PaintBeamHelper(cx+this.get_BeatGlyphsStart(),cy,canvas,h)}},PaintBeamHelper:function(cx,cy,canvas,h){1==h.Beats.length?this.PaintFooter(cx,cy,canvas,h):this.PaintBar(cx,cy,canvas,h)},PaintTupletHelper:function(cx,cy,canvas,h){var res=this.get_Resources(),oldAlign=canvas.get_TextAlign();if(canvas.set_TextAlign(AlphaTab.Platform.Model.TextAlign.Center),1!=h.Beats.length&&h.get_IsFull()){var firstBeat=h.Beats[0],lastBeat=h.Beats[h.Beats.length-1],beamingHelper=this._helpers.BeamHelperLookup[h.VoiceIndex][firstBeat.Index];if(null!=beamingHelper){var direction=beamingHelper.get_Direction(),startX=beamingHelper.GetBeatLineX(firstBeat)+this.get_Scale(),endX=beamingHelper.GetBeatLineX(lastBeat)+this.get_Scale();canvas.set_Font(res.EffectFont);var s=h.Tuplet.toString(),sw=canvas.MeasureText(s),sp=3*this.get_Scale(),middleX=(startX+endX)/2,offset1X=middleX-sw/2-sp,offset2X=middleX+sw/2+sp,startY=this.CalculateBeamY(beamingHelper,startX),offset1Y=this.CalculateBeamY(beamingHelper,offset1X),middleY=this.CalculateBeamY(beamingHelper,middleX),offset2Y=this.CalculateBeamY(beamingHelper,offset2X),endY=this.CalculateBeamY(beamingHelper,endX),offset=10*this.get_Scale(),size=5*this.get_Scale();direction==AlphaTab.Rendering.Utils.BeamDirection.Down&&(offset*=-1,size*=-1),canvas.BeginPath(),canvas.MoveTo(cx+this.X+startX,cy+this.Y+startY-offset|0),canvas.LineTo(cx+this.X+startX,cy+this.Y+startY-offset-size|0),canvas.LineTo(cx+this.X+offset1X,cy+this.Y+offset1Y-offset-size|0),canvas.Stroke(),canvas.BeginPath(),canvas.MoveTo(cx+this.X+offset2X,cy+this.Y+offset2Y-offset-size|0),canvas.LineTo(cx+this.X+endX,cy+this.Y+endY-offset-size|0),canvas.LineTo(cx+this.X+endX,cy+this.Y+endY-offset|0),canvas.Stroke(),canvas.FillText(s,cx+this.X+middleX,cy+this.Y+middleY-offset-size-res.EffectFont.Size)}}else for(var i=0,j=h.Beats.length;j>i;i++){var beat=h.Beats[i],beamingHelper=this._helpers.BeamHelperLookup[h.VoiceIndex][beat.Index];if(null!=beamingHelper){var direction=beamingHelper.get_Direction(),tupletX=beamingHelper.GetBeatLineX(beat)+this.get_Scale(),tupletY=cy+this.Y+this.CalculateBeamY(beamingHelper,tupletX),offset=direction==AlphaTab.Rendering.Utils.BeamDirection.Up?1.8*res.EffectFont.Size:-3*this.get_Scale();canvas.set_Font(res.EffectFont),canvas.FillText(h.Tuplet.toString(),cx+this.X+tupletX,tupletY-offset)}}canvas.set_TextAlign(oldAlign)},GetStemSize:function(duration){var size;switch(duration){case AlphaTab.Model.Duration.Half:size=6;break;case AlphaTab.Model.Duration.Quarter:size=6;break;case AlphaTab.Model.Duration.Eighth:size=6;break;case AlphaTab.Model.Duration.Sixteenth:size=6;break;case AlphaTab.Model.Duration.ThirtySecond:size=7;break;case AlphaTab.Model.Duration.SixtyFourth:size=8;break;default:size=0}return this.GetScoreY(size,0)},CalculateBeamY:function(h,x){var correction=4.5,stemSize=this.GetStemSize(h.MaxDuration);return h.CalculateBeamY(stemSize,this.get_Scale(),x,this.get_Scale(),$CreateAnonymousDelegate(this,function(n){return this.GetScoreY(this.GetNoteLine(n),correction-1)}))},PaintBar:function(cx,cy,canvas,h){for(var i=0,j=h.Beats.length;j>i;i++){var beat=h.Beats[i],correction=4.5,beatLineX=h.GetBeatLineX(beat)+this.get_Scale(),direction=h.get_Direction(),y1=cy+this.Y+(direction==AlphaTab.Rendering.Utils.BeamDirection.Up?this.GetScoreY(this.GetNoteLine(beat.get_MinNote()),correction-1):this.GetScoreY(this.GetNoteLine(beat.get_MaxNote()),correction-1)),y2=cy+this.Y+this.CalculateBeamY(h,beatLineX);canvas.BeginPath(),canvas.MoveTo(cx+this.X+beatLineX,y1),canvas.LineTo(cx+this.X+beatLineX,y2),canvas.Stroke();var brokenBarOffset=6*this.get_Scale(),barSpacing=6*this.get_Scale(),barSize=3*this.get_Scale(),barCount=AlphaTab.Model.ModelUtils.GetIndex(beat.Duration)-2,barStart=cy+this.Y;direction==AlphaTab.Rendering.Utils.BeamDirection.Down&&(barSpacing=-barSpacing,barSize=-barSize);for(var barIndex=0;barCount>barIndex;barIndex++){var barStartX,barEndX,barStartY,barEndY,barY=barStart+barIndex*barSpacing;if(i<h.Beats.length-1){if(this.IsFullBarJoin(beat,h.Beats[i+1],barIndex))barStartX=beatLineX,barEndX=h.GetBeatLineX(h.Beats[i+1])+this.get_Scale();else{if(0!=i&&this.IsFullBarJoin(h.Beats[i-1],beat,barIndex))continue;barStartX=beatLineX,barEndX=barStartX+brokenBarOffset}barStartY=barY+this.CalculateBeamY(h,barStartX),barEndY=barY+this.CalculateBeamY(h,barEndX),AlphaTab.Rendering.ScoreBarRenderer.PaintSingleBar(canvas,cx+this.X+barStartX,barStartY,cx+this.X+barEndX,barEndY,barSize)}else i>0&&!this.IsFullBarJoin(beat,h.Beats[i-1],barIndex)&&(barStartX=beatLineX-brokenBarOffset,barEndX=beatLineX,barStartY=barY+this.CalculateBeamY(h,barStartX),barEndY=barY+this.CalculateBeamY(h,barEndX),AlphaTab.Rendering.ScoreBarRenderer.PaintSingleBar(canvas,cx+this.X+barStartX,barStartY,cx+this.X+barEndX,barEndY,barSize))}}},IsFullBarJoin:function(a,b,barIndex){return AlphaTab.Model.ModelUtils.GetIndex(a.Duration)-2-barIndex>0&&AlphaTab.Model.ModelUtils.GetIndex(b.Duration)-2-barIndex>0},PaintFooter:function(cx,cy,canvas,h){var beat=h.Beats[0];if(beat.Duration!=AlphaTab.Model.Duration.Whole){var beamY,isGrace=beat.GraceType!=AlphaTab.Model.GraceType.None,scaleMod=isGrace?.5:1,stemSize=this.GetStemSize(h.MaxDuration),correction=9*scaleMod/2,beatLineX=h.GetBeatLineX(beat)+this.get_Scale(),direction=h.get_Direction(),topY=this.GetScoreY(this.GetNoteLine(beat.get_MaxNote()),correction),bottomY=this.GetScoreY(this.GetNoteLine(beat.get_MinNote()),correction);if(direction==AlphaTab.Rendering.Utils.BeamDirection.Down?(bottomY+=stemSize*scaleMod,beamY=bottomY):(topY-=stemSize*scaleMod,beamY=topY),canvas.BeginPath(),canvas.MoveTo(cx+this.X+beatLineX,cy+this.Y+topY),canvas.LineTo(cx+this.X+beatLineX,cy+this.Y+bottomY),canvas.Stroke(),isGrace){var graceSizeY=15*this.get_Scale(),graceSizeX=12*this.get_Scale();canvas.BeginPath(),direction==AlphaTab.Rendering.Utils.BeamDirection.Down?(canvas.MoveTo(cx+this.X+beatLineX-graceSizeX/2,cy+this.Y+bottomY-graceSizeY),canvas.LineTo(cx+this.X+beatLineX+graceSizeX/2,cy+this.Y+bottomY)):(canvas.MoveTo(cx+this.X+beatLineX-graceSizeX/2,cy+this.Y+topY+graceSizeY),canvas.LineTo(cx+this.X+beatLineX+graceSizeX/2,cy+this.Y+topY)),canvas.Stroke()}if(beat.Duration>AlphaTab.Model.Duration.Quarter){var glyph=new AlphaTab.Rendering.Glyphs.BeamGlyph(beatLineX,beamY,beat.Duration,direction,isGrace);glyph.Renderer=this,glyph.DoLayout(),glyph.Paint(cx+this.X,cy+this.Y,canvas)}}},CreatePreBeatGlyphs:function(){if(this.Bar.get_MasterBar().IsRepeatStart&&this.AddPreBeatGlyph(new AlphaTab.Rendering.Glyphs.RepeatOpenGlyph(0,0,1.5,3)),this.get_IsFirstOfLine()||this.Bar.Clef!=this.Bar.PreviousBar.Clef){var offset=0;switch(this.Bar.Clef){case AlphaTab.Model.Clef.Neutral:offset=4;break;case AlphaTab.Model.Clef.F4:offset=4;break;case AlphaTab.Model.Clef.C3:offset=6;break;case AlphaTab.Model.Clef.C4:offset=4;break;case AlphaTab.Model.Clef.G2:offset=6}this.CreateStartSpacing(),this.AddPreBeatGlyph(new AlphaTab.Rendering.Glyphs.ClefGlyph(0,this.GetScoreY(offset,0),this.Bar.Clef))}(null==this.Bar.PreviousBar&&0!=this.Bar.get_MasterBar().KeySignature||null!=this.Bar.PreviousBar&&this.Bar.get_MasterBar().KeySignature!=this.Bar.PreviousBar.get_MasterBar().KeySignature)&&(this.CreateStartSpacing(),this.CreateKeySignatureGlyphs()),(null==this.Bar.PreviousBar||null!=this.Bar.PreviousBar&&this.Bar.get_MasterBar().TimeSignatureNumerator!=this.Bar.PreviousBar.get_MasterBar().TimeSignatureNumerator||null!=this.Bar.PreviousBar&&this.Bar.get_MasterBar().TimeSignatureDenominator!=this.Bar.PreviousBar.get_MasterBar().TimeSignatureDenominator)&&(this.CreateStartSpacing(),this.CreateTimeSignatureGlyphs()),this.AddPreBeatGlyph(new AlphaTab.Rendering.Glyphs.BarNumberGlyph(0,this.GetScoreY(-1,-3),this.Bar.Index+1,!this.Stave.IsFirstInAccolade)),this.Bar.get_IsEmpty()&&this.AddPreBeatGlyph(new AlphaTab.Rendering.Glyphs.SpacingGlyph(0,0,30*this.get_Scale(),!1))},CreateBeatGlyphs:function(){this.CreateVoiceGlyphs(this.Bar.Voices[0])},CreatePostBeatGlyphs:function(){if(this.Bar.get_MasterBar().get_IsRepeatEnd()){if(this.AddPostBeatGlyph(new AlphaTab.Rendering.Glyphs.RepeatCloseGlyph(this.X,0)),this.Bar.get_MasterBar().RepeatCount>2){var line=this.get_IsLast()||this.get_IsLastOfLine()?-1:-4;this.AddPostBeatGlyph(new AlphaTab.Rendering.Glyphs.RepeatCountGlyph(0,this.GetScoreY(line,-3),this.Bar.get_MasterBar().RepeatCount))}}else this.Bar.get_MasterBar().IsDoubleBar?(this.AddPostBeatGlyph(new AlphaTab.Rendering.Glyphs.BarSeperatorGlyph(0,0,!1)),this.AddPostBeatGlyph(new AlphaTab.Rendering.Glyphs.SpacingGlyph(0,0,3*this.get_Scale(),!1)),this.AddPostBeatGlyph(new AlphaTab.Rendering.Glyphs.BarSeperatorGlyph(0,0,!1))):null!=this.Bar.NextBar&&this.Bar.NextBar.get_MasterBar().IsRepeatStart||this.AddPostBeatGlyph(new AlphaTab.Rendering.Glyphs.BarSeperatorGlyph(0,0,this.get_IsLast()))},CreateStartSpacing:function(){this._startSpacing||(this.AddPreBeatGlyph(new AlphaTab.Rendering.Glyphs.SpacingGlyph(0,0,2*this.get_Scale(),!0)),this._startSpacing=!0)},CreateKeySignatureGlyphs:function(){var offsetClef=0,currentKey=this.Bar.get_MasterBar().KeySignature,previousKey=null==this.Bar.PreviousBar?0:this.Bar.PreviousBar.get_MasterBar().KeySignature;switch(this.Bar.Clef){case AlphaTab.Model.Clef.Neutral:offsetClef=0;break;case AlphaTab.Model.Clef.G2:offsetClef=0;break;case AlphaTab.Model.Clef.F4:offsetClef=2;break;case AlphaTab.Model.Clef.C3:offsetClef=-1;break;case AlphaTab.Model.Clef.C4:offsetClef=1}for(var naturalizeSymbols=Math.abs(previousKey),previousKeyPositions=AlphaTab.Model.ModelUtils.KeySignatureIsSharp(previousKey)?AlphaTab.Rendering.ScoreBarRenderer.SharpKsSteps:AlphaTab.Rendering.ScoreBarRenderer.FlatKsSteps,i=0;naturalizeSymbols>i;i++)this.AddPreBeatGlyph(new AlphaTab.Rendering.Glyphs.NaturalizeGlyph(0,this.GetScoreY(previousKeyPositions[i]+offsetClef,0),!1));if(AlphaTab.Model.ModelUtils.KeySignatureIsSharp(currentKey))for(var i=0;i<Math.abs(currentKey);i++)this.AddPreBeatGlyph(new AlphaTab.Rendering.Glyphs.SharpGlyph(0,this.GetScoreY(AlphaTab.Rendering.ScoreBarRenderer.SharpKsSteps[i]+offsetClef,0),!1));else for(var i=0;i<Math.abs(currentKey);i++)this.AddPreBeatGlyph(new AlphaTab.Rendering.Glyphs.FlatGlyph(0,this.GetScoreY(AlphaTab.Rendering.ScoreBarRenderer.FlatKsSteps[i]+offsetClef,0),!1))},CreateTimeSignatureGlyphs:function(){this.AddPreBeatGlyph(new AlphaTab.Rendering.Glyphs.SpacingGlyph(0,0,5*this.get_Scale(),!0)),this.AddPreBeatGlyph(new AlphaTab.Rendering.Glyphs.TimeSignatureGlyph(0,0,this.Bar.get_MasterBar().TimeSignatureNumerator,this.Bar.get_MasterBar().TimeSignatureDenominator))},CreateVoiceGlyphs:function(v){for(var i=0,j=v.Beats.length;j>i;i++){var b=v.Beats[i],container=new AlphaTab.Rendering.ScoreBeatContainerGlyph(b);container.PreNotes=new AlphaTab.Rendering.Glyphs.ScoreBeatPreNotesGlyph,container.OnNotes=new AlphaTab.Rendering.Glyphs.ScoreBeatGlyph,container.OnNotes.BeamingHelper=this._helpers.BeamHelperLookup[v.Index][b.Index],container.PostNotes=new AlphaTab.Rendering.Glyphs.ScoreBeatPostNotesGlyph,this.AddBeatGlyph(container)}},GetNoteLine:function(n){return this.AccidentalHelper.GetNoteLine(n)},GetScoreY:function(steps,correction){return this.get_LineOffset()/2*steps+correction*this.get_Scale()},get_GlyphOverflow:function(){var res=this.get_Resources();return res.TablatureFont.Size/2+.2*res.TablatureFont.Size},PaintBackground:function(cx,cy,canvas){var res=this.get_Resources();canvas.set_Color(res.StaveLineColor);for(var lineY=cy+this.Y+this.get_GlyphOverflow(),i=0;5>i;i++)i>0&&(lineY+=this.get_LineOffset()),canvas.BeginPath(),canvas.MoveTo(cx+this.X,0|lineY),canvas.LineTo(cx+this.X+this.Width,0|lineY),canvas.Stroke();canvas.set_Color(res.MainGlyphColor)}},$StaticConstructor(function(){AlphaTab.Rendering.ScoreBarRenderer.SharpKsSteps=new Int32Array([1,4,0,3,6,2,5]),AlphaTab.Rendering.ScoreBarRenderer.FlatKsSteps=new Int32Array([5,2,6,3,7,4,8]),AlphaTab.Rendering.ScoreBarRenderer.LineSpacing=8}),AlphaTab.Rendering.ScoreBarRenderer.PaintSingleBar=function(canvas,x1,y1,x2,y2,size){canvas.BeginPath(),canvas.MoveTo(x1,y1),canvas.LineTo(x2,y2),canvas.LineTo(x2,y2+size),canvas.LineTo(x1,y1+size),canvas.ClosePath(),canvas.Fill()},$Inherit(AlphaTab.Rendering.ScoreBarRenderer,AlphaTab.Rendering.GroupedBarRenderer),AlphaTab.Rendering.ScoreBarRendererFactory=function(){AlphaTab.Rendering.BarRendererFactory.call(this)},AlphaTab.Rendering.ScoreBarRendererFactory.prototype={Create:function(bar){return new AlphaTab.Rendering.ScoreBarRenderer(bar)}},$Inherit(AlphaTab.Rendering.ScoreBarRendererFactory,AlphaTab.Rendering.BarRendererFactory),AlphaTab.Rendering.ScoreRenderer=function(settings,param){this._currentLayoutMode=null,this.PreRender=null,this.PartialRenderFinished=null,this.RenderFinished=null,this.PostRenderFinished=null,this.Canvas=null,this.Score=null,this.Tracks=null,this.Layout=null,this.RenderingResources=null,this.Settings=null,this.Settings=settings,this.RenderingResources=new AlphaTab.Rendering.RenderingResources(1),this.Canvas=null!=settings.Engine&&AlphaTab.Environment.RenderEngines.hasOwnProperty(settings.Engine)?AlphaTab.Environment.RenderEngines[settings.Engine](param):AlphaTab.Environment.RenderEngines["default"](param),this.RecreateLayout()},AlphaTab.Rendering.ScoreRenderer.prototype={RecreateLayout:function(){this._currentLayoutMode!=this.Settings.Layout.Mode&&(this.Layout=null!=this.Settings.Layout&&AlphaTab.Environment.LayoutEngines.hasOwnProperty(this.Settings.Layout.Mode)?AlphaTab.Environment.LayoutEngines[this.Settings.Layout.Mode](this):AlphaTab.Environment.LayoutEngines["default"](this),this.Layout.add_PartialRenderFinished($CreateDelegate(this,this.OnPartialRenderFinished)),this._currentLayoutMode=this.Settings.Layout.Mode)},Render:function(track){this.Score=track.Score,this.Tracks=[track],this.Invalidate()},RenderMultiple:function(tracks){this.Score=0==tracks.length?null:tracks[0].Score,this.Tracks=tracks,this.Invalidate()},Invalidate:function(){0!=this.Tracks.length&&(this.RenderingResources.Scale!=this.Settings.Scale&&(this.RenderingResources.Init(this.Settings.Scale),this.Canvas.set_LineWidth(this.Settings.Scale)),this.Canvas.set_Resources(this.RenderingResources),this.OnPreRender(),this.RecreateLayout(),this.LayoutAndRender())},LayoutAndRender:function(){this.Layout.DoLayoutAndRender(),this.Layout.RenderAnnotation(),this.OnRenderFinished(function(){var $v6=new AlphaTab.Rendering.RenderFinishedEventArgs;return $v6.TotalHeight=this.Layout.Height,$v6.TotalWidth=this.Layout.Width,$v6}.call(this)),this.OnPostRenderFinished()},add_PreRender:function(value){this.PreRender=$CombineDelegates(this.PreRender,value)},remove_PreRender:function(value){this.PreRender=$RemoveDelegate(this.PreRender,value)},OnPreRender:function(){var handler=this.PreRender;null!=handler&&handler()},add_PartialRenderFinished:function(value){this.PartialRenderFinished=$CombineDelegates(this.PartialRenderFinished,value)},remove_PartialRenderFinished:function(value){this.PartialRenderFinished=$RemoveDelegate(this.PartialRenderFinished,value)},OnPartialRenderFinished:function(e){var handler=this.PartialRenderFinished;null!=handler&&handler(e)},add_RenderFinished:function(value){this.RenderFinished=$CombineDelegates(this.RenderFinished,value)},remove_RenderFinished:function(value){this.RenderFinished=$RemoveDelegate(this.RenderFinished,value)},OnRenderFinished:function(e){var handler=this.RenderFinished;null!=handler&&handler(e)},add_PostRenderFinished:function(value){this.PostRenderFinished=$CombineDelegates(this.PostRenderFinished,value)},remove_PostRenderFinished:function(value){this.PostRenderFinished=$RemoveDelegate(this.PostRenderFinished,value)},OnPostRenderFinished:function(){var handler=this.PostRenderFinished;null!=handler&&handler()},BuildBoundingsLookup:function(){var lookup=new AlphaTab.Rendering.Utils.BoundingsLookup;return this.Layout.BuildBoundingsLookup(lookup),lookup}},AlphaTab.Rendering.Staves=AlphaTab.Rendering.Staves||{},AlphaTab.Rendering.Staves.BarSizeInfo=function(){this.FullWidth=0,this.Sizes=null,this.PreNoteSizes=null,this.OnNoteSizes=null,this.PostNoteSizes=null,this.Sizes={},this.PreNoteSizes={},this.OnNoteSizes={},this.PostNoteSizes={},this.FullWidth=0},AlphaTab.Rendering.Staves.BarSizeInfo.prototype={SetSize:function(key,size){this.Sizes[key]=size},GetSize:function(key){return this.Sizes.hasOwnProperty(key)?this.Sizes[key]:0},GetPreNoteSize:function(beat){return this.PreNoteSizes.hasOwnProperty(beat)?this.PreNoteSizes[beat]:0},GetOnNoteSize:function(beat){return this.OnNoteSizes.hasOwnProperty(beat)?this.OnNoteSizes[beat]:0},GetPostNoteSize:function(beat){return this.PostNoteSizes.hasOwnProperty(beat)?this.PostNoteSizes[beat]:0},SetPreNoteSize:function(beat,size){this.PreNoteSizes[beat]=size},SetOnNoteSize:function(beat,size){this.OnNoteSizes[beat]=size},SetPostNoteSize:function(beat,size){this.PostNoteSizes[beat]=size}},AlphaTab.Rendering.Staves.Stave=function(staveId,factory,settings){this._factory=null,this._settings=null,this.StaveTrackGroup=null,this.StaveGroup=null,this.BarRenderers=null,this.X=0,this.Y=0,this.Height=0,this.Index=0,this.StaveId=null,this.StaveTop=0,this.TopSpacing=0,this.BottomSpacing=0,this.StaveBottom=0,this.IsFirstInAccolade=!1,this.IsLastInAccolade=!1,this.BarRenderers=[],this.StaveId=staveId,this._factory=factory,this._settings=settings,this.TopSpacing=10,this.BottomSpacing=10,this.StaveTop=0,this.StaveBottom=0},AlphaTab.Rendering.Staves.Stave.prototype={GetSetting:function(key,def){return this._settings.hasOwnProperty(key)?this._settings[key]:def},get_IsInAccolade:function(){return this._factory.IsInAccolade},RegisterStaveTop:function(offset){this.StaveTop=offset},RegisterStaveBottom:function(offset){this.StaveBottom=offset},AddBar:function(bar){var renderer=this._factory.Create(bar);renderer.Stave=this,renderer.Index=this.BarRenderers.length,renderer.DoLayout(),this.BarRenderers.push(renderer),this.StaveGroup.Layout.RegisterBarRenderer(this.StaveId,bar.Index,renderer)},RevertLastBar:function(){this.BarRenderers.splice(this.BarRenderers.length-1,1)},ApplyBarSpacing:function(spacing){for(var i=0,j=this.BarRenderers.length;j>i;i++)this.BarRenderers[i].ApplyBarSpacing(spacing)},get_TopOverflow:function(){for(var m=0,i=0,j=this.BarRenderers.length;j>i;i++){var r=this.BarRenderers[i];r.TopOverflow>m&&(m=r.TopOverflow)}return m},get_BottomOverflow:function(){for(var m=0,i=0,j=this.BarRenderers.length;j>i;i++){var r=this.BarRenderers[i];r.BottomOverflow>m&&(m=r.BottomOverflow)}return m},FinalizeStave:function(layout){var x=0;this.Height=0;for(var topOverflow=this.get_TopOverflow(),bottomOverflow=this.get_BottomOverflow(),isEmpty=!0,i=0;i<this.BarRenderers.length;i++)this.BarRenderers[i].X=x,this.BarRenderers[i].Y=this.TopSpacing+topOverflow,this.Height=Math.max(this.Height,this.BarRenderers[i].Height),this.BarRenderers[i].FinalizeRenderer(layout),x+=this.BarRenderers[i].Width,this.BarRenderers[i].IsEmpty||(isEmpty=!1);isEmpty?this.Height=0:this.Height+=this.TopSpacing+topOverflow+bottomOverflow+this.BottomSpacing},Paint:function(cx,cy,canvas,startIndex,count){if(0!=this.Height&&0!=count)for(var i=startIndex,j=Math.min(startIndex+count,this.BarRenderers.length);j>i;i++)this.BarRenderers[i].Paint(cx+this.X,cy+this.Y,canvas)}},AlphaTab.Rendering.Staves.StaveTrackGroup=function(staveGroup,track){this.Track=null,this.StaveGroup=null,this.Staves=null,this.FirstStaveInAccolade=null,this.LastStaveInAccolade=null,this.StaveGroup=staveGroup,this.Track=track,this.Staves=[]},AlphaTab.Rendering.Staves.AddBarsToStaveGroupResult=function(){this.Width=0,this.IsLinkedToPrevious=!1},AlphaTab.Rendering.Staves.StaveGroup=function(){this._firstStaveInAccolade=null,this._lastStaveInAccolade=null,this._accoladeSpacingCalculated=!1,this._allStaves=null,this.X=0,this.Y=0,this.Index=0,this.AccoladeSpacing=0,this.IsFull=!1,this.Width=0,this.MasterBars=null,this.Staves=null,this.Layout=null,this.Helpers=null,this.MasterBars=[],this.Staves=[],this._allStaves=[],this.Width=0,this.Index=0,this._accoladeSpacingCalculated=!1,this.AccoladeSpacing=0,this.Helpers=new AlphaTab.Rendering.Utils.BarHelpersGroup},AlphaTab.Rendering.Staves.StaveGroup.prototype={get_LastBarIndex:function(){return this.MasterBars[this.MasterBars.length-1].Index},AddBars:function(tracks,barIndex){if(0==tracks.length)return null;var result=new AlphaTab.Rendering.Staves.AddBarsToStaveGroupResult,score=tracks[0].Score,masterBar=score.MasterBars[barIndex];if(this.MasterBars.push(masterBar),this.Helpers.BuildHelpers(tracks,barIndex),!this._accoladeSpacingCalculated&&0==this.Index){this._accoladeSpacingCalculated=!0;var canvas=this.Layout.Renderer.Canvas,res=this.Layout.Renderer.RenderingResources.EffectFont;canvas.set_Font(res);for(var i=0;i<tracks.length;i++)this.AccoladeSpacing=Math.max(this.AccoladeSpacing,canvas.MeasureText(tracks[i].ShortName));this.AccoladeSpacing+=20,this.Width+=this.AccoladeSpacing}for(var maxSizes=new AlphaTab.Rendering.Staves.BarSizeInfo,i=0,j=this.Staves.length;j>i;i++)for(var g=this.Staves[i],k=0,l=g.Staves.length;l>k;k++){var s=g.Staves[k];s.AddBar(g.Track.Bars[barIndex]),s.BarRenderers[s.BarRenderers.length-1].RegisterMaxSizes(maxSizes),s.BarRenderers[s.BarRenderers.length-1].IsLinkedToPrevious&&(result.IsLinkedToPrevious=!0)}for(var realWidth=0,i=0,j=this._allStaves.length;j>i;i++){var s=this._allStaves[i];s.BarRenderers[s.BarRenderers.length-1].ApplySizes(maxSizes),s.BarRenderers[s.BarRenderers.length-1].Width>realWidth&&(realWidth=s.BarRenderers[s.BarRenderers.length-1].Width)}return this.Width+=realWidth,result.Width=realWidth,result},GetBarRenderer:function(barIndex){var stave=this._firstStaveInAccolade;return barIndex>=stave.BarRenderers.length?null:stave.BarRenderers[barIndex]},GetStaveTrackGroup:function(track){for(var i=0,j=this.Staves.length;j>i;i++){var g=this.Staves[i];if(g.Track==track)return g}return null},AddStave:function(track,stave){var group=this.GetStaveTrackGroup(track);null==group&&(group=new AlphaTab.Rendering.Staves.StaveTrackGroup(this,track),this.Staves.push(group)),stave.StaveTrackGroup=group,stave.StaveGroup=this,stave.Index=this._allStaves.length,this._allStaves.push(stave),group.Staves.push(stave),stave.get_IsInAccolade()&&(null==this._firstStaveInAccolade&&(this._firstStaveInAccolade=stave,stave.IsFirstInAccolade=!0),null==group.FirstStaveInAccolade&&(group.FirstStaveInAccolade=stave),null==this._lastStaveInAccolade&&(this._lastStaveInAccolade=stave,
stave.IsLastInAccolade=!0),null!=this._lastStaveInAccolade&&(this._lastStaveInAccolade.IsLastInAccolade=!1),this._lastStaveInAccolade=stave,this._lastStaveInAccolade.IsLastInAccolade=!0,group.LastStaveInAccolade=stave)},get_Height:function(){return this._allStaves[this._allStaves.length-1].Y+this._allStaves[this._allStaves.length-1].Height},RevertLastBar:function(){if(this.MasterBars.length>1){this.MasterBars.splice(this.MasterBars.length-1,1);for(var w=0,i=0,j=this._allStaves.length;j>i;i++){var s=this._allStaves[i];w=Math.max(w,s.BarRenderers[s.BarRenderers.length-1].Width),s.RevertLastBar()}this.Width-=w}},ApplyBarSpacing:function(spacing){for(var i=0,j=this._allStaves.length;j>i;i++)this._allStaves[i].ApplyBarSpacing(spacing);this.Width+=this.MasterBars.length*spacing},Paint:function(cx,cy,canvas){this.PaintPartial(cx+this.X,cy+this.Y,canvas,0,this.MasterBars.length)},PaintPartial:function(cx,cy,canvas,startIndex,count){for(var i=0,j=this._allStaves.length;j>i;i++)this._allStaves[i].Paint(cx,cy,canvas,startIndex,count);var res=this.Layout.Renderer.RenderingResources;if(this.Staves.length>0&&0==startIndex){if(null!=this._firstStaveInAccolade&&null!=this._lastStaveInAccolade){var firstStart=cy+this._firstStaveInAccolade.Y+this._firstStaveInAccolade.StaveTop+this._firstStaveInAccolade.TopSpacing+this._firstStaveInAccolade.get_TopOverflow(),lastEnd=cy+this._lastStaveInAccolade.Y+this._lastStaveInAccolade.TopSpacing+this._lastStaveInAccolade.get_TopOverflow()+this._lastStaveInAccolade.StaveBottom,acooladeX=cx+this._firstStaveInAccolade.X;canvas.set_Color(res.BarSeperatorColor),canvas.BeginPath(),canvas.MoveTo(acooladeX,firstStart),canvas.LineTo(acooladeX,lastEnd),canvas.Stroke()}canvas.set_Font(res.EffectFont);for(var i=0,j=this.Staves.length;j>i;i++){var g=this.Staves[i],firstStart=cy+g.FirstStaveInAccolade.Y+g.FirstStaveInAccolade.StaveTop+g.FirstStaveInAccolade.TopSpacing+g.FirstStaveInAccolade.get_TopOverflow(),lastEnd=cy+g.LastStaveInAccolade.Y+g.LastStaveInAccolade.TopSpacing+g.LastStaveInAccolade.get_TopOverflow()+g.LastStaveInAccolade.StaveBottom,acooladeX=cx+g.FirstStaveInAccolade.X,barSize=3*this.Layout.Renderer.Settings.Scale,barOffset=barSize,accoladeStart=firstStart-4*barSize,accoladeEnd=lastEnd+4*barSize;0==this.Index&&canvas.FillText(g.Track.ShortName,cx+10*this.Layout.get_Scale(),firstStart),canvas.FillRect(acooladeX-barOffset-barSize,accoladeStart,barSize,accoladeEnd-accoladeStart);var spikeStartX=acooladeX-barOffset-barSize,spikeEndX=acooladeX+2*barSize;canvas.BeginPath(),canvas.MoveTo(spikeStartX,accoladeStart),canvas.BezierCurveTo(spikeStartX,accoladeStart,spikeStartX,accoladeStart,spikeEndX,accoladeStart-barSize),canvas.BezierCurveTo(acooladeX,accoladeStart+barSize,spikeStartX,accoladeStart+barSize,spikeStartX,accoladeStart+barSize),canvas.ClosePath(),canvas.Fill(),canvas.BeginPath(),canvas.MoveTo(spikeStartX,accoladeEnd),canvas.BezierCurveTo(spikeStartX,accoladeEnd,acooladeX,accoladeEnd,spikeEndX,accoladeEnd+barSize),canvas.BezierCurveTo(acooladeX,accoladeEnd-barSize,spikeStartX,accoladeEnd-barSize,spikeStartX,accoladeEnd-barSize),canvas.ClosePath(),canvas.Fill()}}},FinalizeGroup:function(scoreLayout){for(var currentY=0,i=0,j=this._allStaves.length;j>i;i++)this._allStaves[i].X=this.AccoladeSpacing,this._allStaves[i].Y=currentY,this._allStaves[i].FinalizeStave(scoreLayout),currentY+=this._allStaves[i].Height},BuildBoundingsLookup:function(lookup){for(var visualTop=this.Y+this._firstStaveInAccolade.Y,visualBottom=this.Y+this._lastStaveInAccolade.Y+this._lastStaveInAccolade.Height,realTop=this.Y+this._allStaves[0].Y,realBottom=this.Y+this._allStaves[this._allStaves.length-1].Y+this._allStaves[this._allStaves.length-1].Height,visualHeight=visualBottom-visualTop,realHeight=realBottom-realTop,i=0,j=this._firstStaveInAccolade.BarRenderers.length;j>i;i++)this._firstStaveInAccolade.BarRenderers[i].BuildBoundingsLookup(lookup,visualTop,visualHeight,realTop,realHeight,this.X)}},$StaticConstructor(function(){AlphaTab.Rendering.Staves.StaveGroup.AccoladeLabelSpacing=10}),AlphaTab.Rendering.TabBarRenderer=function(bar){this._helpers=null,AlphaTab.Rendering.GroupedBarRenderer.call(this,bar)},AlphaTab.Rendering.TabBarRenderer.prototype={get_LineOffset:function(){return 11*this.get_Scale()},GetNoteX:function(note,onEnd){var beat=this.GetOnNotesPosition(note.Beat.Voice.Index,note.Beat.Index);return null!=beat?beat.Container.X+beat.X+beat.NoteNumbers.GetNoteX(note,onEnd):this.get_PostBeatGlyphsStart()},GetBeatX:function(beat){var bg=this.GetPreNotesPosition(beat.Voice.Index,beat.Index);return null!=bg?bg.Container.X+bg.X:0},GetNoteY:function(note){var beat=this.GetOnNotesPosition(note.Beat.Voice.Index,note.Beat.Index);return null!=beat?beat.NoteNumbers.GetNoteY(note):0},DoLayout:function(){this._helpers=this.Stave.StaveGroup.Helpers.Helpers[this.Bar.Track.Index][this.Bar.Index],AlphaTab.Rendering.GroupedBarRenderer.prototype.DoLayout.call(this),this.Height=this.get_LineOffset()*(this.Bar.Track.Tuning.length-1)+2*this.get_NumberOverflow(),0==this.Index&&(this.Stave.RegisterStaveTop(this.get_NumberOverflow()),this.Stave.RegisterStaveBottom(this.Height-this.get_NumberOverflow()))},CreatePreBeatGlyphs:function(){this.Bar.get_MasterBar().IsRepeatStart&&this.AddPreBeatGlyph(new AlphaTab.Rendering.Glyphs.RepeatOpenGlyph(0,0,1.5,3)),this.get_IsFirstOfLine()&&this.AddPreBeatGlyph(new AlphaTab.Rendering.Glyphs.TabClefGlyph(0,0)),this.AddPreBeatGlyph(new AlphaTab.Rendering.Glyphs.BarNumberGlyph(0,this.GetTabY(-1,-3),this.Bar.Index+1,!this.Stave.IsFirstInAccolade)),this.Bar.get_IsEmpty()&&this.AddPreBeatGlyph(new AlphaTab.Rendering.Glyphs.SpacingGlyph(0,0,30*this.get_Scale(),!1))},CreateBeatGlyphs:function(){this.CreateVoiceGlyphs(this.Bar.Voices[0])},CreateVoiceGlyphs:function(v){for(var i=0,j=v.Beats.length;j>i;i++){var b=v.Beats[i],container=new AlphaTab.Rendering.Glyphs.TabBeatContainerGlyph(b);container.PreNotes=new AlphaTab.Rendering.Glyphs.TabBeatPreNotesGlyph,container.OnNotes=new AlphaTab.Rendering.Glyphs.TabBeatGlyph,container.OnNotes.BeamingHelper=this._helpers.BeamHelperLookup[v.Index][b.Index],container.PostNotes=new AlphaTab.Rendering.Glyphs.TabBeatPostNotesGlyph,this.AddBeatGlyph(container)}},CreatePostBeatGlyphs:function(){if(this.Bar.get_MasterBar().get_IsRepeatEnd()){if(this.AddPostBeatGlyph(new AlphaTab.Rendering.Glyphs.RepeatCloseGlyph(this.X,0)),this.Bar.get_MasterBar().RepeatCount>2){var line=this.get_IsLast()||this.get_IsLastOfLine()?-1:-4;this.AddPostBeatGlyph(new AlphaTab.Rendering.Glyphs.RepeatCountGlyph(0,this.GetTabY(line,-3),this.Bar.get_MasterBar().RepeatCount))}}else this.Bar.get_MasterBar().IsDoubleBar?(this.AddPostBeatGlyph(new AlphaTab.Rendering.Glyphs.BarSeperatorGlyph(0,0,!1)),this.AddPostBeatGlyph(new AlphaTab.Rendering.Glyphs.SpacingGlyph(0,0,3*this.get_Scale(),!1)),this.AddPostBeatGlyph(new AlphaTab.Rendering.Glyphs.BarSeperatorGlyph(0,0,!1))):null!=this.Bar.NextBar&&this.Bar.NextBar.get_MasterBar().IsRepeatStart||this.AddPostBeatGlyph(new AlphaTab.Rendering.Glyphs.BarSeperatorGlyph(0,0,this.get_IsLast()))},get_TopPadding:function(){return this.get_NumberOverflow()},get_BottomPadding:function(){return this.get_NumberOverflow()},GetTabY:function(line,correction){return this.get_LineOffset()*line+correction*this.get_Scale()},get_NumberOverflow:function(){var res=this.get_Resources();return res.TablatureFont.Size/2+.2*res.TablatureFont.Size},PaintBackground:function(cx,cy,canvas){var res=this.get_Resources();canvas.set_Color(res.StaveLineColor);for(var lineY=cy+this.Y+this.get_NumberOverflow(),i=0,j=this.Bar.Track.Tuning.length;j>i;i++)i>0&&(lineY+=this.get_LineOffset()),canvas.BeginPath(),canvas.MoveTo(cx+this.X,0|lineY),canvas.LineTo(cx+this.X+this.Width,0|lineY),canvas.Stroke();canvas.set_Color(res.MainGlyphColor)}},$StaticConstructor(function(){AlphaTab.Rendering.TabBarRenderer.LineSpacing=10}),$Inherit(AlphaTab.Rendering.TabBarRenderer,AlphaTab.Rendering.GroupedBarRenderer),AlphaTab.Rendering.TabBarRendererFactory=function(){AlphaTab.Rendering.BarRendererFactory.call(this)},AlphaTab.Rendering.TabBarRendererFactory.prototype={CanCreate:function(track){return track.Tuning.length>0},Create:function(bar){return new AlphaTab.Rendering.TabBarRenderer(bar)}},$Inherit(AlphaTab.Rendering.TabBarRendererFactory,AlphaTab.Rendering.BarRendererFactory),AlphaTab.Rendering.Utils=AlphaTab.Rendering.Utils||{},AlphaTab.Rendering.Utils.AccidentalHelper=function(){this._registeredAccidentals=null,this._appliedScoreLines=null,this._registeredAccidentals={},this._appliedScoreLines={}},AlphaTab.Rendering.Utils.AccidentalHelper.prototype={GetNoteId:function(n){return n.Beat.Index+"-"+n.String},ApplyAccidental:function(note){var noteValue=note.get_RealValue(),ks=note.Beat.Voice.Bar.get_MasterBar().KeySignature,ksi=ks+7,index=noteValue%12,accidentalToSet=AlphaTab.Rendering.Utils.AccidentalHelper.AccidentalNotes[ksi][index],noteLine=this.GetNoteLineWithAccidental(note,accidentalToSet),updateAccidental=!0;if(this._registeredAccidentals.hasOwnProperty(noteLine)){var registeredAccidental=this._registeredAccidentals[noteLine];registeredAccidental==accidentalToSet?(accidentalToSet=AlphaTab.Model.AccidentalType.None,updateAccidental=!1):accidentalToSet==AlphaTab.Model.AccidentalType.None&&(accidentalToSet=AlphaTab.Model.AccidentalType.Natural)}return updateAccidental&&(accidentalToSet==AlphaTab.Model.AccidentalType.None||accidentalToSet==AlphaTab.Model.AccidentalType.Natural?delete this._registeredAccidentals[noteLine]:this._registeredAccidentals[noteLine]=accidentalToSet),accidentalToSet},GetNoteLineWithAccidental:function(n){var value=n.Beat.Voice.Bar.Track.IsPercussion?AlphaTab.Rendering.Utils.PercussionMapper.MapValue(n):n.get_RealValue(),ks=n.Beat.Voice.Bar.get_MasterBar().KeySignature,clef=n.Beat.Voice.Bar.Clef,index=value%12,octave=value/12|0,steps=AlphaTab.Rendering.Utils.AccidentalHelper.OctaveSteps[clef];steps-=7*octave;var stepList=AlphaTab.Model.ModelUtils.KeySignatureIsSharp(ks)||AlphaTab.Model.ModelUtils.KeySignatureIsNatural(ks)?AlphaTab.Rendering.Utils.AccidentalHelper.SharpNoteSteps:AlphaTab.Rendering.Utils.AccidentalHelper.FlatNoteSteps,offset=0;switch(n.AccidentalMode){case AlphaTab.Model.NoteAccidentalMode.Default:case AlphaTab.Model.NoteAccidentalMode.SwapAccidentals:case AlphaTab.Model.NoteAccidentalMode.ForceNatural:case AlphaTab.Model.NoteAccidentalMode.ForceFlat:case AlphaTab.Model.NoteAccidentalMode.ForceSharp:default:offset=stepList[index]}steps-=stepList[index];var line=steps+1;return this._appliedScoreLines[this.GetNoteId(n)]=line,line},GetNoteLine:function(n){return this._appliedScoreLines[this.GetNoteId(n)]}},$StaticConstructor(function(){AlphaTab.Rendering.Utils.AccidentalHelper.AccidentalNotes=[[AlphaTab.Model.AccidentalType.Natural,AlphaTab.Model.AccidentalType.None,AlphaTab.Model.AccidentalType.Natural,AlphaTab.Model.AccidentalType.None,AlphaTab.Model.AccidentalType.Natural,AlphaTab.Model.AccidentalType.Natural,AlphaTab.Model.AccidentalType.None,AlphaTab.Model.AccidentalType.Natural,AlphaTab.Model.AccidentalType.None,AlphaTab.Model.AccidentalType.Natural,AlphaTab.Model.AccidentalType.None,AlphaTab.Model.AccidentalType.Natural],[AlphaTab.Model.AccidentalType.Natural,AlphaTab.Model.AccidentalType.None,AlphaTab.Model.AccidentalType.Natural,AlphaTab.Model.AccidentalType.None,AlphaTab.Model.AccidentalType.Natural,AlphaTab.Model.AccidentalType.None,AlphaTab.Model.AccidentalType.None,AlphaTab.Model.AccidentalType.Natural,AlphaTab.Model.AccidentalType.None,AlphaTab.Model.AccidentalType.Natural,AlphaTab.Model.AccidentalType.None,AlphaTab.Model.AccidentalType.Natural],[AlphaTab.Model.AccidentalType.None,AlphaTab.Model.AccidentalType.None,AlphaTab.Model.AccidentalType.Natural,AlphaTab.Model.AccidentalType.None,AlphaTab.Model.AccidentalType.Natural,AlphaTab.Model.AccidentalType.None,AlphaTab.Model.AccidentalType.None,AlphaTab.Model.AccidentalType.Natural,AlphaTab.Model.AccidentalType.None,AlphaTab.Model.AccidentalType.Natural,AlphaTab.Model.AccidentalType.None,AlphaTab.Model.AccidentalType.Natural],[AlphaTab.Model.AccidentalType.None,AlphaTab.Model.AccidentalType.None,AlphaTab.Model.AccidentalType.Natural,AlphaTab.Model.AccidentalType.None,AlphaTab.Model.AccidentalType.Natural,AlphaTab.Model.AccidentalType.None,AlphaTab.Model.AccidentalType.Flat,AlphaTab.Model.AccidentalType.Natural,AlphaTab.Model.AccidentalType.None,AlphaTab.Model.AccidentalType.Natural,AlphaTab.Model.AccidentalType.None,AlphaTab.Model.AccidentalType.Natural],[AlphaTab.Model.AccidentalType.None,AlphaTab.Model.AccidentalType.Flat,AlphaTab.Model.AccidentalType.Natural,AlphaTab.Model.AccidentalType.None,AlphaTab.Model.AccidentalType.Natural,AlphaTab.Model.AccidentalType.None,AlphaTab.Model.AccidentalType.Flat,AlphaTab.Model.AccidentalType.Natural,AlphaTab.Model.AccidentalType.None,AlphaTab.Model.AccidentalType.Natural,AlphaTab.Model.AccidentalType.None,AlphaTab.Model.AccidentalType.Natural],[AlphaTab.Model.AccidentalType.None,AlphaTab.Model.AccidentalType.Flat,AlphaTab.Model.AccidentalType.Natural,AlphaTab.Model.AccidentalType.None,AlphaTab.Model.AccidentalType.Natural,AlphaTab.Model.AccidentalType.None,AlphaTab.Model.AccidentalType.Flat,AlphaTab.Model.AccidentalType.Natural,AlphaTab.Model.AccidentalType.Flat,AlphaTab.Model.AccidentalType.Natural,AlphaTab.Model.AccidentalType.None,AlphaTab.Model.AccidentalType.Natural],[AlphaTab.Model.AccidentalType.None,AlphaTab.Model.AccidentalType.Flat,AlphaTab.Model.AccidentalType.Natural,AlphaTab.Model.AccidentalType.Flat,AlphaTab.Model.AccidentalType.Natural,AlphaTab.Model.AccidentalType.None,AlphaTab.Model.AccidentalType.Flat,AlphaTab.Model.AccidentalType.Natural,AlphaTab.Model.AccidentalType.Flat,AlphaTab.Model.AccidentalType.Natural,AlphaTab.Model.AccidentalType.None,AlphaTab.Model.AccidentalType.Natural],[AlphaTab.Model.AccidentalType.None,AlphaTab.Model.AccidentalType.Sharp,AlphaTab.Model.AccidentalType.None,AlphaTab.Model.AccidentalType.Sharp,AlphaTab.Model.AccidentalType.None,AlphaTab.Model.AccidentalType.None,AlphaTab.Model.AccidentalType.Sharp,AlphaTab.Model.AccidentalType.None,AlphaTab.Model.AccidentalType.Sharp,AlphaTab.Model.AccidentalType.None,AlphaTab.Model.AccidentalType.Sharp,AlphaTab.Model.AccidentalType.None],[AlphaTab.Model.AccidentalType.None,AlphaTab.Model.AccidentalType.Sharp,AlphaTab.Model.AccidentalType.None,AlphaTab.Model.AccidentalType.Sharp,AlphaTab.Model.AccidentalType.None,AlphaTab.Model.AccidentalType.Natural,AlphaTab.Model.AccidentalType.Sharp,AlphaTab.Model.AccidentalType.None,AlphaTab.Model.AccidentalType.Sharp,AlphaTab.Model.AccidentalType.None,AlphaTab.Model.AccidentalType.Sharp,AlphaTab.Model.AccidentalType.None],[AlphaTab.Model.AccidentalType.Natural,AlphaTab.Model.AccidentalType.Sharp,AlphaTab.Model.AccidentalType.None,AlphaTab.Model.AccidentalType.Sharp,AlphaTab.Model.AccidentalType.None,AlphaTab.Model.AccidentalType.Natural,AlphaTab.Model.AccidentalType.Sharp,AlphaTab.Model.AccidentalType.None,AlphaTab.Model.AccidentalType.Sharp,AlphaTab.Model.AccidentalType.None,AlphaTab.Model.AccidentalType.Sharp,AlphaTab.Model.AccidentalType.None],[AlphaTab.Model.AccidentalType.Natural,AlphaTab.Model.AccidentalType.Sharp,AlphaTab.Model.AccidentalType.None,AlphaTab.Model.AccidentalType.Sharp,AlphaTab.Model.AccidentalType.None,AlphaTab.Model.AccidentalType.Natural,AlphaTab.Model.AccidentalType.Sharp,AlphaTab.Model.AccidentalType.Natural,AlphaTab.Model.AccidentalType.Sharp,AlphaTab.Model.AccidentalType.None,AlphaTab.Model.AccidentalType.Sharp,AlphaTab.Model.AccidentalType.None],[AlphaTab.Model.AccidentalType.Natural,AlphaTab.Model.AccidentalType.Sharp,AlphaTab.Model.AccidentalType.Natural,AlphaTab.Model.AccidentalType.Sharp,AlphaTab.Model.AccidentalType.None,AlphaTab.Model.AccidentalType.Natural,AlphaTab.Model.AccidentalType.Sharp,AlphaTab.Model.AccidentalType.Natural,AlphaTab.Model.AccidentalType.Sharp,AlphaTab.Model.AccidentalType.None,AlphaTab.Model.AccidentalType.Sharp,AlphaTab.Model.AccidentalType.None],[AlphaTab.Model.AccidentalType.Natural,AlphaTab.Model.AccidentalType.Sharp,AlphaTab.Model.AccidentalType.Natural,AlphaTab.Model.AccidentalType.Sharp,AlphaTab.Model.AccidentalType.None,AlphaTab.Model.AccidentalType.Natural,AlphaTab.Model.AccidentalType.Sharp,AlphaTab.Model.AccidentalType.Natural,AlphaTab.Model.AccidentalType.Sharp,AlphaTab.Model.AccidentalType.Natural,AlphaTab.Model.AccidentalType.Sharp,AlphaTab.Model.AccidentalType.None],[AlphaTab.Model.AccidentalType.Natural,AlphaTab.Model.AccidentalType.Sharp,AlphaTab.Model.AccidentalType.Natural,AlphaTab.Model.AccidentalType.Sharp,AlphaTab.Model.AccidentalType.Natural,AlphaTab.Model.AccidentalType.Natural,AlphaTab.Model.AccidentalType.Sharp,AlphaTab.Model.AccidentalType.Natural,AlphaTab.Model.AccidentalType.Sharp,AlphaTab.Model.AccidentalType.Natural,AlphaTab.Model.AccidentalType.Sharp,AlphaTab.Model.AccidentalType.None],[AlphaTab.Model.AccidentalType.Natural,AlphaTab.Model.AccidentalType.Sharp,AlphaTab.Model.AccidentalType.Natural,AlphaTab.Model.AccidentalType.Sharp,AlphaTab.Model.AccidentalType.Natural,AlphaTab.Model.AccidentalType.Natural,AlphaTab.Model.AccidentalType.Sharp,AlphaTab.Model.AccidentalType.Natural,AlphaTab.Model.AccidentalType.Sharp,AlphaTab.Model.AccidentalType.Natural,AlphaTab.Model.AccidentalType.Sharp,AlphaTab.Model.AccidentalType.Natural]],AlphaTab.Rendering.Utils.AccidentalHelper.StepsPerOctave=7,AlphaTab.Rendering.Utils.AccidentalHelper.OctaveSteps=new Int32Array([38,32,30,26,38]),AlphaTab.Rendering.Utils.AccidentalHelper.SharpNoteSteps=new Int32Array([0,0,1,1,2,3,3,4,4,5,5,6]),AlphaTab.Rendering.Utils.AccidentalHelper.FlatNoteSteps=new Int32Array([0,1,1,2,2,3,4,4,5,5,6,6]),AlphaTab.Rendering.Utils.AccidentalHelper.NoteStepCorrection=1}),AlphaTab.Rendering.Utils.BarHelpers=function(bar){this.BeamHelpers=null,this.BeamHelperLookup=null,this.TupletHelpers=null,this.BeamHelpers=[],this.BeamHelperLookup=[],this.TupletHelpers=[];for(var currentBeamHelper=null,currentTupletHelper=null,i=0,j=bar.Voices.length;j>i;i++){var v=bar.Voices[i];this.BeamHelpers.push([]),this.BeamHelperLookup.push({}),this.TupletHelpers.push([]);for(var k=0,l=v.Beats.length;l>k;k++){var b=v.Beats[k],newBeamingHelper=!1;if(b.get_IsRest()||null!=currentBeamHelper&&currentBeamHelper.CheckBeat(b)||(currentBeamHelper=new AlphaTab.Rendering.Utils.BeamingHelper(bar.Track),currentBeamHelper.CheckBeat(b),this.BeamHelpers[v.Index].push(currentBeamHelper),newBeamingHelper=!0),b.get_HasTuplet()){var previousBeat=b.PreviousBeat;null!=previousBeat&&previousBeat.Voice!=b.Voice&&(previousBeat=null),newBeamingHelper&&null!=currentTupletHelper&&currentTupletHelper.Finish(),null!=previousBeat&&null!=currentTupletHelper&&currentTupletHelper.Check(b)||(currentTupletHelper=new AlphaTab.Rendering.Utils.TupletHelper(v.Index),currentTupletHelper.Check(b),this.TupletHelpers[v.Index].push(currentTupletHelper))}this.BeamHelperLookup[v.Index][b.Index]=currentBeamHelper}currentBeamHelper=null,currentTupletHelper=null}},AlphaTab.Rendering.Utils.BarHelpersGroup=function(){this.Helpers=null,this.Helpers={}},AlphaTab.Rendering.Utils.BarHelpersGroup.prototype={BuildHelpers:function(tracks,barIndex){for(var i=0;i<tracks.length;i++){var h,t=tracks[i];this.Helpers.hasOwnProperty(t.Index)?h=this.Helpers[t.Index]:(h={},this.Helpers[t.Index]=h),h.hasOwnProperty(barIndex)||(h[barIndex]=new AlphaTab.Rendering.Utils.BarHelpers(t.Bars[barIndex]))}}},AlphaTab.Rendering.Utils.BeamDirection={Up:0,Down:1},AlphaTab.Rendering.Utils.BeamBarType={Full:0,PartLeft:1,PartRight:2},AlphaTab.Rendering.Utils.BeatLinePositions=function(up,down){this.Up=0,this.Down=0,this.Up=up,this.Down=down},AlphaTab.Rendering.Utils.BeamingHelper=function(track){this._lastBeat=null,this._track=null,this._beatLineXPositions=null,this.Voice=null,this.Beats=null,this.MaxDuration=AlphaTab.Model.Duration.Whole,this.FirstMinNote=null,this.FirstMaxNote=null,this.LastMinNote=null,this.LastMaxNote=null,this.MinNote=null,this.MaxNote=null,this._track=track,this.Beats=[],this._beatLineXPositions={},this.MaxDuration=AlphaTab.Model.Duration.Whole},AlphaTab.Rendering.Utils.BeamingHelper.prototype={GetValue:function(n){return this._track.IsPercussion?AlphaTab.Rendering.Utils.PercussionMapper.MapValue(n):n.get_RealValue()},GetBeatLineX:function(beat){return this.HasBeatLineX(beat)?this.get_Direction()==AlphaTab.Rendering.Utils.BeamDirection.Up?this._beatLineXPositions[beat.Index].Up:this._beatLineXPositions[beat.Index].Down:0},HasBeatLineX:function(beat){return this._beatLineXPositions.hasOwnProperty(beat.Index)},RegisterBeatLineX:function(beat,up,down){this._beatLineXPositions[beat.Index]=new AlphaTab.Rendering.Utils.BeatLinePositions(up,down)},get_Direction:function(){if(this._track.IsPercussion)return AlphaTab.Rendering.Utils.BeamDirection.Up;var avg=(this.GetValue(this.MaxNote)+this.GetValue(this.MinNote))/2|0;return avg<=AlphaTab.Rendering.Utils.BeamingHelper.ScoreMiddleKeys[this._lastBeat.Voice.Bar.Clef]?AlphaTab.Rendering.Utils.BeamDirection.Up:AlphaTab.Rendering.Utils.BeamDirection.Down},CheckBeat:function(beat){null==this.Voice&&(this.Voice=beat.Voice);var add=!1;return 0==this.Beats.length?add=!0:AlphaTab.Rendering.Utils.BeamingHelper.CanJoin(this._lastBeat,beat)&&(add=!0),add&&(this._lastBeat=beat,this.Beats.push(beat),this.CheckNote(beat.get_MinNote()),this.CheckNote(beat.get_MaxNote()),this.MaxDuration<beat.Duration&&(this.MaxDuration=beat.Duration)),add},CheckNote:function(note){var value=this.GetValue(note);null==this.FirstMinNote||note.Beat.Start<this.FirstMinNote.Beat.Start?this.FirstMinNote=note:note.Beat.Start==this.FirstMinNote.Beat.Start&&value<this.GetValue(this.FirstMinNote)&&(this.FirstMinNote=note),null==this.FirstMaxNote||note.Beat.Start<this.FirstMaxNote.Beat.Start?this.FirstMaxNote=note:note.Beat.Start==this.FirstMaxNote.Beat.Start&&value>this.GetValue(this.FirstMaxNote)&&(this.FirstMaxNote=note),null==this.LastMinNote||note.Beat.Start>this.LastMinNote.Beat.Start?this.LastMinNote=note:note.Beat.Start==this.LastMinNote.Beat.Start&&value<this.GetValue(this.LastMinNote)&&(this.LastMinNote=note),null==this.LastMaxNote||note.Beat.Start>this.LastMaxNote.Beat.Start?this.LastMaxNote=note:note.Beat.Start==this.LastMaxNote.Beat.Start&&value>this.GetValue(this.LastMaxNote)&&(this.LastMaxNote=note),(null==this.MaxNote||value>this.GetValue(this.MaxNote))&&(this.MaxNote=note),(null==this.MinNote||value<this.GetValue(this.MinNote))&&(this.MinNote=note)},CalculateBeamY:function(stemSize,xCorrection,xPosition,scale,yPosition){var direction=this.get_Direction();if(1==this.Beats.length)return direction==AlphaTab.Rendering.Utils.BeamDirection.Up?yPosition(this.MaxNote)-stemSize:yPosition(this.MinNote)+stemSize;var maxDistance=10*scale;if(direction==AlphaTab.Rendering.Utils.BeamDirection.Down&&this.MinNote!=this.FirstMinNote&&this.MinNote!=this.LastMinNote)return yPosition(this.MinNote)+stemSize;if(direction==AlphaTab.Rendering.Utils.BeamDirection.Up&&this.MaxNote!=this.FirstMaxNote&&this.MaxNote!=this.LastMaxNote)return yPosition(this.MaxNote)-stemSize;var startX=this.GetBeatLineX(this.FirstMinNote.Beat)+xCorrection,startY=direction==AlphaTab.Rendering.Utils.BeamDirection.Up?yPosition(this.FirstMaxNote)-stemSize:yPosition(this.FirstMinNote)+stemSize,endX=this.GetBeatLineX(this.LastMaxNote.Beat)+xCorrection,endY=direction==AlphaTab.Rendering.Utils.BeamDirection.Up?yPosition(this.LastMaxNote)-stemSize:yPosition(this.LastMinNote)+stemSize;return direction==AlphaTab.Rendering.Utils.BeamDirection.Down&&startY>endY&&startY-endY>maxDistance&&(endY=startY-maxDistance),direction==AlphaTab.Rendering.Utils.BeamDirection.Down&&endY>startY&&endY-startY>maxDistance&&(startY=endY-maxDistance),direction==AlphaTab.Rendering.Utils.BeamDirection.Up&&endY>startY&&endY-startY>maxDistance&&(endY=startY+maxDistance),direction==AlphaTab.Rendering.Utils.BeamDirection.Up&&startY>endY&&startY-endY>maxDistance&&(startY=endY+maxDistance),startX==endX?startY:(endY-startY)/(endX-startX)*(xPosition-startX)+startY}},$StaticConstructor(function(){AlphaTab.Rendering.Utils.BeamingHelper.ScoreMiddleKeys=new Int32Array([48,48,45,38,59])}),AlphaTab.Rendering.Utils.BeamingHelper.CanJoin=function(b1,b2){if(null==b1||null==b2||b1.get_IsRest()||b2.get_IsRest()||b1.GraceType!=AlphaTab.Model.GraceType.None||b2.GraceType!=AlphaTab.Model.GraceType.None)return!1;var m1=b1.Voice.Bar,m2=b1.Voice.Bar;if(m1!=m2)return!1;var start1=b1.Start,start2=b2.Start;if(!AlphaTab.Rendering.Utils.BeamingHelper.CanJoinDuration(b1.Duration)||!AlphaTab.Rendering.Utils.BeamingHelper.CanJoinDuration(b2.Duration))return start1==start2;var divisionLength=960;switch(m1.get_MasterBar().TimeSignatureDenominator){case 8:m1.get_MasterBar().TimeSignatureNumerator%3==0&&(divisionLength+=480)}var division1=(divisionLength+start1)/divisionLength|0|0,division2=(divisionLength+start2)/divisionLength|0|0;return division1==division2},AlphaTab.Rendering.Utils.BeamingHelper.CanJoinDuration=function(d){switch(d){case AlphaTab.Model.Duration.Whole:case AlphaTab.Model.Duration.Half:case AlphaTab.Model.Duration.Quarter:return!1;default:return!0}},AlphaTab.Rendering.Utils.Bounds=function(x,y,w,h){this.X=0,this.Y=0,this.W=0,this.H=0,this.X=x,this.Y=y,this.W=w,this.H=h},AlphaTab.Rendering.Utils.BeatBoundings=function(){this.Beat=null,this.Bounds=null,this.VisualBounds=null},AlphaTab.Rendering.Utils.BarBoundings=function(){this.IsFirstOfLine=!1,this.IsLastOfLine=!1,this.Bar=null,this.Bounds=null,this.VisualBounds=null,this.Beats=null,this.Beats=[]},AlphaTab.Rendering.Utils.BarBoundings.prototype={FindBeatAtPos:function(x){for(var index=0;index<this.Beats.length-1&&x>this.Beats[index].Bounds.X+this.Beats[index].Bounds.W;)index++;return this.Beats[index].Beat}},AlphaTab.Rendering.Utils.BoundingsLookup=function(){this.Bars=null,this.Bars=[]},AlphaTab.Rendering.Utils.BoundingsLookup.prototype={GetBeatAtPos:function(x,y){for(var bottom=0,top=this.Bars.length-1,barIndex=-1;top>=bottom;){var middle=(top+bottom)/2|0,bar=this.Bars[middle];if(y>=bar.Bounds.Y&&y<=bar.Bounds.Y+bar.Bounds.H){barIndex=middle;break}y<bar.Bounds.Y?top=middle-1:bottom=middle+1}if(-1==barIndex)return null;var currentBar=this.Bars[barIndex];if(x<currentBar.Bounds.X)for(;barIndex>0&&x<this.Bars[barIndex].Bounds.X&&!this.Bars[barIndex].IsFirstOfLine;)barIndex--;else for(;barIndex<this.Bars.length-1&&x>this.Bars[barIndex].Bounds.X+this.Bars[barIndex].Bounds.W&&!this.Bars[barIndex].IsLastOfLine;)barIndex++;return this.Bars[barIndex].FindBeatAtPos(x)}},AlphaTab.Rendering.Utils.PercussionMapper=function(){},AlphaTab.Rendering.Utils.PercussionMapper.MapValue=function(note){var value=note.get_RealValue();return 61==value||66==value?50:60==value||65==value?52:value>=35&&36>=value||44==value?53:41==value||64==value?55:43==value||62==value?57:45==value||63==value?59:47==value||54==value?62:48==value||56==value?64:50==value?65:42==value||46==value||value>=49&&53>=value||57==value||59==value?67:60},AlphaTab.Rendering.Utils.SvgPathParser=function(svg){this._currentIndex=0,this.Svg=null,this.LastCommand=null,this.CurrentToken=null,this.Svg=svg},AlphaTab.Rendering.Utils.SvgPathParser.prototype={Reset:function(){this._currentIndex=0,this.NextToken()},get_Eof:function(){return this._currentIndex>=this.Svg.length},GetString:function(){var t=this.CurrentToken;return this.NextToken(),t},GetNumber:function(){return AlphaTab.Platform.Std.ParseFloat(this.GetString())},get_CurrentTokenIsNumber:function(){return AlphaTab.Platform.Std.IsStringNumber(this.CurrentToken,!0)},NextChar:function(){return this.get_Eof()?0:this.Svg.charCodeAt(this._currentIndex++)},PeekChar:function(){return this.get_Eof()?0:this.Svg.charCodeAt(this._currentIndex)},NextToken:function(){var c,skipChar,token=new Array;do c=this.NextChar(),skipChar=AlphaTab.Platform.Std.IsWhiteSpace(c)||32==c;while(!this.get_Eof()&&skipChar);if(!this.get_Eof()||!skipChar)if(token.push(String.fromCharCode(c)),AlphaTab.Platform.Std.IsCharNumber(c,!0))for(c=this.PeekChar();!this.get_Eof()&&(AlphaTab.Platform.Std.IsCharNumber(c,!1)||46==c);)token.push(String.fromCharCode(this.NextChar())),c=this.PeekChar();else this.LastCommand=token.join("");this.CurrentToken=token.join("")}},AlphaTab.Rendering.Utils.SvgRenderer=function(svg,xScale,yScale){this._svg=null,this._lastCmd=null,this._currentX=0,this._currentY=0,this._xScale=0,this._yScale=0,this._xGlyphScale=0,this._yGlyphScale=0,this._lastControlX=0,this._lastControlY=0,this._svg=svg,this._xGlyphScale=.0099*xScale,this._yGlyphScale=.0099*yScale},AlphaTab.Rendering.Utils.SvgRenderer.prototype={Paint:function(x,y,canvas){if(null!=this._svg){this._xScale=this._xGlyphScale,this._yScale=this._yGlyphScale;var startX=x,startY=y;this._currentX=startX,this._currentY=startY,canvas.BeginPath();for(var i=0,j=this._svg.get_Commands().length;j>i;i++)this.ParseCommand(startX,startY,canvas,this._svg.get_Commands()[i]);canvas.Fill()}},ParseCommand:function(cx,cy,canvas,cmd){var canContinue,i;switch(cmd.Cmd){case"M":this._currentX=cx+cmd.Numbers[0]*this._xScale,this._currentY=cy+cmd.Numbers[1]*this._yScale,canvas.MoveTo(this._currentX,this._currentY);break;case"m":this._currentX+=cmd.Numbers[0]*this._xScale,this._currentY+=cmd.Numbers[1]*this._yScale,canvas.MoveTo(this._currentX,this._currentY);break;case"Z":case"z":canvas.ClosePath();break;case"L":for(i=0;i<cmd.Numbers.length;)this._currentX=cx+cmd.Numbers[i++]*this._xScale,this._currentY=cy+cmd.Numbers[i++]*this._yScale,canvas.LineTo(this._currentX,this._currentY);break;case"l":for(i=0;i<cmd.Numbers.length;)this._currentX+=cmd.Numbers[i++]*this._xScale,this._currentY+=cmd.Numbers[i++]*this._yScale,canvas.LineTo(this._currentX,this._currentY);break;case"V":for(i=0;i<cmd.Numbers.length;)this._currentY=cy+cmd.Numbers[i++]*this._yScale,canvas.LineTo(this._currentX,this._currentY);break;case"v":for(i=0;i<cmd.Numbers.length;)this._currentY+=cmd.Numbers[i++]*this._yScale,canvas.LineTo(this._currentX,this._currentY);break;case"H":for(i=0;i<cmd.Numbers.length;)this._currentX=cx+cmd.Numbers[i++]*this._xScale,canvas.LineTo(this._currentX,this._currentY);break;case"h":for(i=0;i<cmd.Numbers.length;)this._currentX+=cmd.Numbers[i++]*this._xScale,canvas.LineTo(this._currentX,this._currentY);break;case"C":for(i=0;i<cmd.Numbers.length;){var x1=cx+cmd.Numbers[i++]*this._xScale,y1=cy+cmd.Numbers[i++]*this._yScale,x2=cx+cmd.Numbers[i++]*this._xScale,y2=cy+cmd.Numbers[i++]*this._yScale,x3=cx+cmd.Numbers[i++]*this._xScale,y3=cy+cmd.Numbers[i++]*this._yScale;this._lastControlX=x2,this._lastControlY=y2,this._currentX=x3,this._currentY=y3,canvas.BezierCurveTo(x1,y1,x2,y2,x3,y3)}break;case"c":for(i=0;i<cmd.Numbers.length;){var x1=this._currentX+cmd.Numbers[i++]*this._xScale,y1=this._currentY+cmd.Numbers[i++]*this._yScale,x2=this._currentX+cmd.Numbers[i++]*this._xScale,y2=this._currentY+cmd.Numbers[i++]*this._yScale,x3=this._currentX+cmd.Numbers[i++]*this._xScale,y3=this._currentY+cmd.Numbers[i++]*this._yScale;this._lastControlX=x2,this._lastControlY=y2,this._currentX=x3,this._currentY=y3,canvas.BezierCurveTo(x1,y1,x2,y2,x3,y3)}break;case"S":for(i=0;i<cmd.Numbers.length;){var x1=cx+cmd.Numbers[i++]*this._xScale,y1=cy+cmd.Numbers[i++]*this._yScale;canContinue="c"==this._lastCmd||"C"==this._lastCmd||"S"==this._lastCmd||"s"==this._lastCmd;var x2=canContinue?this._currentX+(this._currentX-this._lastControlX):this._currentX,y2=canContinue?this._currentY+(this._currentY-this._lastControlY):this._currentY,x3=cx+cmd.Numbers[i++]*this._xScale,y3=cy+cmd.Numbers[i++]*this._yScale;this._lastControlX=x2,this._lastControlY=y2,this._currentX=x3,this._currentY=y3,canvas.BezierCurveTo(x1,y1,x2,y2,x3,y3)}break;case"s":for(i=0;i<cmd.Numbers.length;){var x1=this._currentX+cmd.Numbers[i++]*this._xScale,y1=this._currentY+cmd.Numbers[i++]*this._yScale;canContinue="c"==this._lastCmd||"C"==this._lastCmd||"S"==this._lastCmd||"s"==this._lastCmd;var x2=canContinue?this._currentX+(this._currentX-this._lastControlX):this._currentX,y2=canContinue?this._currentY+(this._currentY-this._lastControlY):this._currentY,x3=this._currentX+cmd.Numbers[i++]*this._xScale,y3=this._currentY+cmd.Numbers[i++]*this._yScale;

this._lastControlX=x2,this._lastControlY=y2,this._currentX=x3,this._currentY=y3,canvas.BezierCurveTo(x1,y1,x2,y2,x3,y3)}break;case"Q":for(i=0;i<cmd.Numbers.length;){var x1=cx+cmd.Numbers[i++]*this._xScale,y1=cy+cmd.Numbers[i++]*this._yScale,x2=cx+cmd.Numbers[i++]*this._xScale,y2=cy+cmd.Numbers[i++]*this._yScale;this._lastControlX=x1,this._lastControlY=y1,this._currentX=x2,this._currentY=y2,canvas.QuadraticCurveTo(x1,y1,x2,y2)}break;case"q":for(i=0;i<cmd.Numbers.length;){var x1=this._currentX+cmd.Numbers[i++]*this._xScale,y1=this._currentY+cmd.Numbers[i++]*this._yScale,x2=this._currentX+cmd.Numbers[i++]*this._xScale,y2=this._currentY+cmd.Numbers[i++]*this._yScale;this._lastControlX=x1,this._lastControlY=y1,this._currentX=x2,this._currentY=y2,canvas.QuadraticCurveTo(x1,y1,x2,y2)}break;case"T":for(i=0;i<cmd.Numbers.length;){var x1=cx+cmd.Numbers[i++]*this._xScale,y1=cy+cmd.Numbers[i++]*this._yScale;canContinue="q"==this._lastCmd||"Q"==this._lastCmd||"t"==this._lastCmd||"T"==this._lastCmd;var cpx=canContinue?this._currentX+(this._currentX-this._lastControlX):this._currentX,cpy=canContinue?this._currentY+(this._currentY-this._lastControlY):this._currentY;this._currentX=x1,this._currentY=y1,this._lastControlX=cpx,this._lastControlY=cpy,canvas.QuadraticCurveTo(cpx,cpy,x1,y1)}break;case"t":for(i=0;i<cmd.Numbers.length;){var x1=this._currentX+cmd.Numbers[i++]*this._xScale,y1=this._currentY+cmd.Numbers[i++]*this._yScale;canContinue="q"==this._lastCmd||"Q"==this._lastCmd||"t"==this._lastCmd||"T"==this._lastCmd;var cpx=canContinue?this._currentX+(this._currentX-this._lastControlX):this._currentX,cpy=canContinue?this._currentY+(this._currentY-this._lastControlY):this._currentY;this._lastControlX=cpx,this._lastControlY=cpy,canvas.QuadraticCurveTo(cpx,cpy,x1,y1)}}this._lastCmd=cmd.Cmd}},AlphaTab.Rendering.Utils.TupletHelper=function(voice){this._isFinished=!1,this.Beats=null,this.VoiceIndex=0,this.Tuplet=0,this.VoiceIndex=voice,this.Beats=[]},AlphaTab.Rendering.Utils.TupletHelper.prototype={get_IsFull:function(){return this.Beats.length==this.Tuplet},Finish:function(){this._isFinished=!0},Check:function(beat){if(0==this.Beats.length)this.Tuplet=beat.TupletNumerator;else if(beat.Voice.Index!=this.VoiceIndex||beat.TupletNumerator!=this.Tuplet||this.get_IsFull()||this._isFinished)return!1;return this.Beats.push(beat),!0}},AlphaTab.LayoutSettings=function(){this.Mode=null,this.AdditionalSettings=null,this.AdditionalSettings={}},AlphaTab.LayoutSettings.prototype={Get:function(key,def){return this.AdditionalSettings.hasOwnProperty(key)?this.AdditionalSettings[key]:def}},AlphaTab.LayoutSettings.get_Defaults=function(){var settings=new AlphaTab.LayoutSettings;return settings.Mode="page",settings},AlphaTab.StaveSettings=function(id){this.Id=null,this.AdditionalSettings=null,this.Id=id,this.AdditionalSettings={}},AlphaTab.Util=AlphaTab.Util||{},AlphaTab.Util.Lazy=function(factory){this._factory=null,this._created=!1,this._value=null,this._factory=factory},AlphaTab.Util.Lazy.prototype={get_Value:function(){return this._created||(this._value=this._factory(),this._created=!0),this._value}},AlphaTab.Xml.XmlNodeType={None:0,Element:1,Attribute:2,Text:3,CDATA:4,EntityReference:5,Entity:6,ProcessingInstruction:7,Comment:8,Document:9,DocumentType:10,DocumentFragment:11,Notation:12,Whitespace:13,SignificantWhitespace:14,EndElement:15,EndEntity:16,XmlDeclaration:17};for(var i=0;i<$StaticConstructors.length;i++)$StaticConstructors[i]();
=======
"use strict";
/*
 * @version   : 1.10.3 - Bridge.NET
 * @author    : Object.NET, Inc. http://bridge.net/
 * @date      : 2015-12-22
 * @copyright : Copyright (c) 2008-2015, Object.NET, Inc. (http://object.net/). All rights reserved.
 * @license   : See license.txt and https://github.com/bridgedotnet/Bridge.NET/blob/master/LICENSE.
 */
(function(n){var bt={global:n,emptyFn:function(){},property:function(n,t,i){n[t]=i;var u=t.charAt(0)==="$",r=u?t.slice(1):t;n["get"+r]=function(n){return function(){return this[n]}}(t);n["set"+r]=function(n){return function(t){this[n]=t}}(t)},event:function(n,t,i){n[t]=i;var u=t.charAt(0)==="$",r=u?t.slice(1):t;n["add"+r]=function(n){return function(t){this[n]=Bridge.fn.combine(this[n],t)}}(t);n["remove"+r]=function(n){return function(t){this[n]=Bridge.fn.remove(this[n],t)}}(t)},clone:function(n){return Bridge.isArray(n)?Bridge.Array.clone(n):Bridge.is(n,Bridge.ICloneable)?n.clone():null},copy:function(n,t,i,r){typeof i=="string"&&(i=i.split(/[,;\s]+/));for(var u,f=0,e=i?i.length:0;f<e;f++)u=i[f],(r!==!0||n[u]==undefined)&&(n[u]=Bridge.is(t[u],Bridge.ICloneable)?Bridge.clone(t[u]):t[u]);return n},get:function(n){return n&&n.$staticInit&&n.$staticInit(),n},ns:function(n,t){var r=n.split("."),i=0;for(t||(t=Bridge.global),i=0;i<r.length;i++)typeof t[r[i]]=="undefined"&&(t[r[i]]={});return t},ready:function(n,t){var i=function(){t?n.apply(t):n()};if(typeof Bridge.global.jQuery!="undefined")Bridge.global.jQuery(i);else if(typeof Bridge.global.document=="undefined"||Bridge.global.document.readyState==="complete"||Bridge.global.document.readyState==="loaded")i();else Bridge.on("DOMContentLoaded",Bridge.global.document,i)},on:function(n,t,i,r){var u=function(n){var t=i.apply(r||this,arguments);return t===!1&&(n.stopPropagation(),n.preventDefault()),t},f=function(){var n=i.call(r||t,Bridge.global.event);return n===!1&&(Bridge.global.event.returnValue=!1,Bridge.global.event.cancelBubble=!0),n};t.addEventListener?t.addEventListener(n,u,!1):t.attachEvent("on"+n,f)},getHashCode:function(n,t){var h,u,r,e,c,i,o,s,l,f;if(Bridge.isEmpty(n,!0)){if(t)return 0;throw new Bridge.InvalidOperationException("HashCode cannot be calculated for empty value");}if(Bridge.isFunction(n.getHashCode)&&!n.__insideHashCode&&n.getHashCode.length===0)return n.__insideHashCode=!0,h=n.getHashCode(),delete n.__insideHashCode,h;if(Bridge.isBoolean(n))return n?1:0;if(Bridge.isDate(n))return n.valueOf()&4294967295;if(Bridge.isNumber(n))return n=n.toExponential(),parseInt(n.substr(0,n.indexOf("e")).replace(".",""),10)&4294967295;if(Bridge.isString(n)){for(u=0,i=0;i<n.length;i++)u=(u<<5)-u+n.charCodeAt(i)&4294967295;return u}if(n.$$hashCode)return n.$$hashCode;if(typeof n=="object"){for(r=0,e=!1,Bridge.$$hashCodeCache||(Bridge.$$hashCodeCache=[],Bridge.$$hashCodeCalculated=[],e=!0),i=0,c=Bridge.$$hashCodeCache.length;i<c;i+=1)if(o=Bridge.$$hashCodeCache[i],o.obj===n)return o.hash;s={obj:n,hash:0};Bridge.$$hashCodeCache.push(s);for(f in n)n.hasOwnProperty(f)&&f!=="__insideHashCode"&&(l=Bridge.isEmpty(n[f],!0)?0:Bridge.getHashCode(n[f]),r=29*r+l);if(s.hash=r,e&&delete Bridge.$$hashCodeCache,r!==0)return r}return n.$$hashCode||(n.$$hashCode=Math.random()*4294967296|0)},getDefaultValue:function(n){return n.getDefaultValue&&n.getDefaultValue.length===0?n.getDefaultValue():n===Boolean?!1:n===Date?new Date(-864e13):n===Number?0:null},getTypeName:function(n){var i,t;return n.$$name?n.$$name:(i=n.constructor===Function?n.toString():n.constructor.toString(),t=/function (.{1,})\(/.exec(i),t&&t.length>1?t[1]:"Object")},is:function(n,t,i,r){if(typeof t=="string"&&(t=Bridge.unroll(t)),n==null)return!!r;if(i!==!0){if(Bridge.isFunction(t.$is))return t.$is(n);if(Bridge.isFunction(t.instanceOf))return t.instanceOf(n)}if(n.constructor===t||n instanceof t)return!0;if(Bridge.isArray(n)||n instanceof Bridge.ArrayEnumerator)return Bridge.Array.is(n,t);if(Bridge.isString(n))return Bridge.String.is(n,t);if(!t.$$inheritors)return!1;for(var f=t.$$inheritors,u=0;u<f.length;u++)if(Bridge.is(n,f[u]))return!0;return!1},as:function(n,t,i){return Bridge.is(n,t,!1,i)?n:null},cast:function(n,t,i){if(n===null)return null;var r=Bridge.as(n,t,i);if(r===null)throw new Bridge.InvalidCastException("Unable to cast type "+(n?Bridge.getTypeName(n):"'null'")+" to type "+Bridge.getTypeName(t));return r},apply:function(n,t){for(var u=Bridge.getPropertyNames(t,!1),i,r=0;r<u.length;r++)i=u[r],typeof n[i]=="function"&&typeof t[i]!="function"?n[i](t[i]):n[i]=t[i];return n},merge:function(n,t){var i,u,r,e,o,f;if(n instanceof Bridge.Decimal&&Bridge.isNumber(t))return new Bridge.Decimal(t);if(n instanceof Boolean||n instanceof Number||n instanceof String||n instanceof Function||n instanceof Date||n instanceof Bridge.Int||n instanceof Bridge.Decimal)return t;if(Bridge.isArray(t)&&Bridge.isFunction(n.add||n.push))for(o=Bridge.isArray(n)?n.push:n.add,u=0;u<t.length;u++)o.apply(n,t[u]);else for(i in t)r=t[i],typeof n[i]=="function"&&typeof r!="function"?i.match(/^\s*get[A-Z]/)?Bridge.merge(n[i](),r):n[i](r):(f="set"+i.charAt(0).toUpperCase()+i.slice(1),typeof n[f]=="function"&&typeof r!="function"?n[f](r):r&&r.constructor===Object&&n[i]?(e=n[i],Bridge.merge(e,r)):n[i]=r);return n},getEnumerator:function(n,t){if(typeof n=="string"&&(n=Bridge.String.toCharArray(n)),t&&n&&n["getEnumerator"+t])return n["getEnumerator"+t].call(n);if(n&&n.getEnumerator)return n.getEnumerator();if(Object.prototype.toString.call(n)==="[object Array]"||n&&Bridge.isDefined(n.length))return new Bridge.ArrayEnumerator(n);throw new Bridge.InvalidOperationException("Cannot create enumerator");},getPropertyNames:function(n,t){var i=[];for(var r in n)(t||typeof n[r]!="function")&&i.push(r);return i},isDefined:function(n,t){return typeof n!="undefined"&&(t?n!==null:!0)},isEmpty:function(n,t){return n===null||(t?!1:n==="")||(!t&&Bridge.isArray(n)?n.length===0:!1)},toArray:function(n){var t,r,u,i=[];if(Bridge.isArray(n))for(t=0,u=n.length;t<u;++t)i.push(n[t]);else for(t=Bridge.getEnumerator(n);t.moveNext();)r=t.getCurrent(),i.push(r);return i},isArray:function(n){return Object.prototype.toString.call(n)in{"[object Array]":1,"[object Uint8Array]":1,"[object Int8Array]":1,"[object Int16Array]":1,"[object Uint16Array]":1,"[object Int32Array]":1,"[object Uint32Array]":1,"[object Float32Array]":1,"[object Float64Array]":1}},isFunction:function(n){return typeof n=="function"},isDate:function(n){return Object.prototype.toString.call(n)==="[object Date]"},isNull:function(n){return n===null||n===undefined},isBoolean:function(n){return typeof n=="boolean"},isNumber:function(n){return typeof n=="number"&&isFinite(n)},isString:function(n){return typeof n=="string"},unroll:function(n){var r=n.split("."),t=Bridge.global[r[0]],i=1;for(i;i<r.length;i++){if(!t)return null;t=t[r[i]]}return t},equals:function(n,t){return n&&Bridge.isFunction(n.equals)&&n.equals.length===1?n.equals(t):Bridge.isDate(n)&&Bridge.isDate(t)?n.valueOf()===t.valueOf():Bridge.isNull(n)&&Bridge.isNull(t)?!0:Bridge.isNull(n)!==Bridge.isNull(t)?!1:typeof n=="object"&&typeof t=="object"?Bridge.getHashCode(n)===Bridge.getHashCode(t)&&Bridge.objectEquals(n,t):n===t},objectEquals:function(n,t){Bridge.$$leftChain=[];Bridge.$$rightChain=[];var i=Bridge.deepEquals(n,t);return delete Bridge.$$leftChain,delete Bridge.$$rightChain,i},deepEquals:function(n,t){if(typeof n=="object"&&typeof t=="object"){if(Bridge.$$leftChain.indexOf(n)>-1||Bridge.$$rightChain.indexOf(t)>-1)return!1;for(var i in t)if(t.hasOwnProperty(i)!==n.hasOwnProperty(i)||typeof t[i]!=typeof n[i])return!1;for(i in n){if(t.hasOwnProperty(i)!==n.hasOwnProperty(i)||typeof n[i]!=typeof t[i])return!1;if(typeof n[i]=="object"){if(Bridge.$$leftChain.push(n),Bridge.$$rightChain.push(t),!Bridge.deepEquals(n[i],t[i]))return!1;Bridge.$$leftChain.pop();Bridge.$$rightChain.pop()}else if(!Bridge.equals(n[i],t[i]))return!1}return!0}return Bridge.equals(n,t)},compare:function(n,t,i){if(Bridge.isDefined(n,!0)){if(Bridge.isNumber(n)||Bridge.isString(n)||Bridge.isBoolean(n))return Bridge.isString(n)&&!Bridge.hasValue(t)?1:n<t?-1:n>t?1:0;if(Bridge.isDate(n))return Bridge.compare(n.valueOf(),t.valueOf())}else{if(i)return 0;throw new Bridge.NullReferenceException;}return i&&!n.compareTo?0:n.compareTo(t)},equalsT:function(n,t){if(Bridge.isDefined(n,!0)){if(Bridge.isNumber(n)||Bridge.isString(n)||Bridge.isBoolean(n))return n===t;if(Bridge.isDate(n))return n.valueOf()===t.valueOf()}else throw new Bridge.NullReferenceException;return n.equalsT(t)},format:function(n,t){return Bridge.isNumber(n)?Bridge.Int.format(n,t):Bridge.isDate(n)?Bridge.Date.format(n,t):n.format(t)},getType:function(n){if(!Bridge.isDefined(n,!0))throw new Bridge.NullReferenceException("instance is null");try{return n.constructor}catch(t){return Object}},isLower:function(n){var t=String.fromCharCode(n);return t===t.toLowerCase()&&t!==t.toUpperCase()},isUpper:function(n){var t=String.fromCharCode(n);return t!==t.toLowerCase()&&t===t.toUpperCase()},coalesce:function(n,t){return Bridge.hasValue(n)?n:t},fn:{call:function(n,t){var i=Array.prototype.slice.call(arguments,2);return n=n||Bridge.global,n[t].apply(n,i)},makeFn:function(n,t){switch(t){case 0:return function(){return n.apply(this,arguments)};case 1:return function(){return n.apply(this,arguments)};case 2:return function(){return n.apply(this,arguments)};case 3:return function(){return n.apply(this,arguments)};case 4:return function(){return n.apply(this,arguments)};case 5:return function(){return n.apply(this,arguments)};case 6:return function(){return n.apply(this,arguments)};case 7:return function(){return n.apply(this,arguments)};case 8:return function(){return n.apply(this,arguments)};case 9:return function(){return n.apply(this,arguments)};case 10:return function(){return n.apply(this,arguments)};case 11:return function(){return n.apply(this,arguments)};case 12:return function(){return n.apply(this,arguments)};case 13:return function(){return n.apply(this,arguments)};case 14:return function(){return n.apply(this,arguments)};case 15:return function(){return n.apply(this,arguments)};case 16:return function(){return n.apply(this,arguments)};case 17:return function(){return n.apply(this,arguments)};case 18:return function(){return n.apply(this,arguments)};case 19:return function(){return n.apply(this,arguments)};default:return function(){return n.apply(this,arguments)}}},bind:function(n,t,i,r){if(t&&t.$method===t&&t.$scope===n)return t;var u;return u=arguments.length===2?Bridge.fn.makeFn(function(){Bridge.caller.unshift(this);var i=t.apply(n,arguments);return Bridge.caller.shift(this),i},t.length):Bridge.fn.makeFn(function(){var u=i||arguments,f;return r===!0?(u=Array.prototype.slice.call(arguments,0),u=u.concat(i)):typeof r=="number"&&(u=Array.prototype.slice.call(arguments,0),r===0?u.unshift.apply(u,i):r<u.length?u.splice.apply(u,[r,0].concat(i)):u.push.apply(u,i)),Bridge.caller.unshift(this),f=t.apply(n,u),Bridge.caller.shift(this),f},t.length),u.$method=t,u.$scope=n,u},bindScope:function(n,t){var i=Bridge.fn.makeFn(function(){var i=Array.prototype.slice.call(arguments,0),r;return i.unshift.apply(i,[n]),Bridge.caller.unshift(this),r=t.apply(n,i),Bridge.caller.shift(this),r},t.length);return i.$method=t,i.$scope=n,i},$build:function(n){var t=function(){for(var i=t.$invocationList,r=null,u,n=0;n<i.length;n++)u=i[n],r=u.apply(null,arguments);return r};return(t.$invocationList=n?Array.prototype.slice.call(n,0):[],t.$invocationList.length===0)?null:t},combine:function(n,t){if(!n||!t)return n||t;var i=n.$invocationList?n.$invocationList:[n],r=t.$invocationList?t.$invocationList:[t];return Bridge.fn.$build(i.concat(r))},remove:function(n,t){if(!n||!t)return n||null;for(var r=n.$invocationList?n.$invocationList:[n],f=t.$invocationList?t.$invocationList:[t],e=[],o,u,i=r.length-1;i>=0;i--){for(o=!1,u=0;u<f.length;u++)if(r[i]===f[u]||r[i].$method&&r[i].$method===f[u].$method&&r[i].$scope&&r[i].$scope===f[u].$scope){o=!0;break}o||e.push(r[i])}return e.reverse(),Bridge.fn.$build(e)}}},g,nt,tt,e,w,vt,yt,pt,b,wt;Object.create||(Object.create=function(n,t){function i(){}if(typeof n!="object"&&typeof n!="function")throw new TypeError("Object prototype may only be an Object: "+n);else if(n===null)throw new Error("This browser's implementation of Object.create is a shim and doesn't support 'null' as the first argument");if(typeof t!="undefined")throw new Error("This browser's implementation of Object.create is a shim and doesn't support a second argument");return i.prototype=n,new i});n.Bridge=bt;n.Bridge.caller=[];g={hasValue:function(n){return n!==null&&n!==undefined},getValue:function(n){if(!Bridge.Nullable.hasValue(n))throw new Bridge.InvalidOperationException("Nullable instance doesn't have a value.");return n},getValueOrDefault:function(n,t){return Bridge.Nullable.hasValue(n)?n:t},add:function(n,t){return Bridge.hasValue(n)&&Bridge.hasValue(t)?n+t:null},band:function(n,t){return Bridge.hasValue(n)&&Bridge.hasValue(t)?n&t:null},bor:function(n,t){return Bridge.hasValue(n)&&Bridge.hasValue(t)?n|t:null},and:function(n,t){return n===!0&&t===!0?!0:n===!1||t===!1?!1:null},or:function(n,t){return n===!0||t===!0?!0:n===!1&&t===!1?!1:null},div:function(n,t){return Bridge.hasValue(n)&&Bridge.hasValue(t)?n/t:null},eq:function(n,t){return Bridge.hasValue(n)?n===t:!Bridge.hasValue(t)},xor:function(n,t){return Bridge.hasValue(n)&&Bridge.hasValue(t)?n^t:null},gt:function(n,t){return Bridge.hasValue(n)&&Bridge.hasValue(t)&&n>t},gte:function(n,t){return Bridge.hasValue(n)&&Bridge.hasValue(t)&&n>=t},neq:function(n,t){return Bridge.hasValue(n)?n!==t:Bridge.hasValue(t)},lt:function(n,t){return Bridge.hasValue(n)&&Bridge.hasValue(t)&&n<t},lte:function(n,t){return Bridge.hasValue(n)&&Bridge.hasValue(t)&&n<=t},mod:function(n,t){return Bridge.hasValue(n)&&Bridge.hasValue(t)?n%t:null},mul:function(n,t){return Bridge.hasValue(n)&&Bridge.hasValue(t)?n*t:null},sl:function(n,t){return Bridge.hasValue(n)&&Bridge.hasValue(t)?n<<t:null},sr:function(n,t){return Bridge.hasValue(n)&&Bridge.hasValue(t)?n>>t:null},srr:function(n,t){return Bridge.hasValue(n)&&Bridge.hasValue(t)?n>>>t:null},sub:function(n,t){return Bridge.hasValue(n)&&Bridge.hasValue(t)?n-t:null},bnot:function(n){return Bridge.hasValue(n)?~n:null},neg:function(n){return Bridge.hasValue(n)?-n:null},not:function(n){return Bridge.hasValue(n)?!n:null},pos:function(n){return Bridge.hasValue(n)?+n:null},lift:function(){for(var n=1;n<arguments.length;n++)if(!Bridge.hasValue(arguments[n]))return null;return arguments[0]==null?null:arguments[0].apply==undefined?arguments[0]:arguments[0].apply(null,Array.prototype.slice.call(arguments,1))},lift1:function(n,t){return Bridge.hasValue(t)?typeof n=="function"?n.apply(null,Array.prototype.slice.call(arguments,1)):t[n].apply(t,Array.prototype.slice.call(arguments,2)):null},lift2:function(n,t,i){return Bridge.hasValue(t)&&Bridge.hasValue(i)?typeof n=="function"?n.apply(null,Array.prototype.slice.call(arguments,1)):t[n].apply(t,Array.prototype.slice.call(arguments,2)):null},liftcmp:function(n,t,i){return Bridge.hasValue(t)&&Bridge.hasValue(i)?typeof n=="function"?n.apply(null,Array.prototype.slice.call(arguments,1)):t[n].apply(t,Array.prototype.slice.call(arguments,2)):!1},lifteq:function(n,t,i){var r=Bridge.hasValue(t),u=Bridge.hasValue(i);return!r&&!u||r&&u&&(typeof n=="function"?n.apply(null,Array.prototype.slice.call(arguments,1)):t[n].apply(t,Array.prototype.slice.call(arguments,2)))},liftne:function(n,t,i){var r=Bridge.hasValue(t),u=Bridge.hasValue(i);return r!==u||r&&(typeof n=="function"?n.apply(null,Array.prototype.slice.call(arguments,1)):t[n].apply(t,Array.prototype.slice.call(arguments,2)))}};Bridge.Nullable=g;Bridge.hasValue=Bridge.Nullable.hasValue;nt={charCodeAt:function(n,t){if(n==null)throw new Bridge.ArgumentNullException;if(n.length!=1)throw new Bridge.FormatException("String must be exactly one character long");return n.charCodeAt(t)},isWhiteSpace:function(n){return/\s/.test(n)},isDigit:function(n){return n<256?n>=48&&n<=57:new RegExp("[0-90-9----------------------------------]").test(String.fromCharCode(n))},isLetter:function(n){return n<256?n>=65&&n<=90||n>=97&&n<=122:new RegExp("[A-Za-za-z-------------------------------------------A-Z------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------]").test(String.fromCharCode(n))},isHighSurrogate:function(n){return new RegExp("[\uD800-\uDBFF]").test(String.fromCharCode(n))},isLowSurrogate:function(n){return new RegExp("[\uDC00-\uDFFF]").test(String.fromCharCode(n))},isSurrogate:function(n){return new RegExp("[\uD800-\uDFFF]").test(String.fromCharCode(n))},isSymbol:function(n){return n<256?[36,43,60,61,62,94,96,124,126,162,163,164,165,166,167,168,169,172,174,175,176,177,180,182,184,215,247].indexOf(n)!=-1:new RegExp("[-----------------]").test(String.fromCharCode(n))},isSeparator:function(n){return n<256?n==32||n==160:new RegExp("[\u2028\u2029 -]").test(String.fromCharCode(n))},isPunctuation:function(n){return n<256?[33,34,35,37,38,39,40,41,42,44,45,46,47,58,59,63,64,91,92,93,95,123,125,161,171,173,183,187,191].indexOf(n)!=-1:new RegExp("[!-#%-*,-/:;?@[-]_{}--------------------------------------------------([{)]}_-!-#%-'*,./:;?@\\---------------------------------------------]").test(String.fromCharCode(n))},isNumber:function(n){return n<256?[48,49,50,51,52,53,54,55,56,57,178,179,185,188,189,190].indexOf(n)!=-1:new RegExp("[0-9----------------------------------------------------------0-9--------------------------------------------------------------]").test(String.fromCharCode(n))},isControl:function(n){return n<256?n>=0&&n<=31||n>=127&&n<=159:new RegExp("[\x00-\x1f-]").test(String.fromCharCode(n))}};Bridge.Char=nt;tt={is:function(n,t){return Bridge.isString(n)?n.constructor===t||n instanceof t?!0:t===Bridge.IEnumerable||t.$$name&&Bridge.String.startsWith(t.$$name,"Bridge.IEnumerable$1")||t.$$name&&Bridge.String.startsWith(t.$$name,"Bridge.IComparable$1")||t.$$name&&Bridge.String.startsWith(t.$$name,"Bridge.IEquatable$1")?!0:!1:!1},lastIndexOf:function(n,t,i,r){var u=n.lastIndexOf(t,i);return u<i-r+1?-1:u},lastIndexOfAny:function(n,t,i,r){var e=n.length,f,u;if(!e)return-1;for(t=String.fromCharCode.apply(null,t),i=i||e-1,r=r||e,f=i-r+1,f<0&&(f=0),u=i;u>=f;u--)if(t.indexOf(n.charAt(u))>=0)return u;return-1},isNullOrWhiteSpace:function(n){return n==null||n.match(/^ *$/)!==null},isNullOrEmpty:function(n){return Bridge.isEmpty(n,!1)},fromCharCount:function(n,t){if(t>=0)return String(Array(t+1).join(String.fromCharCode(n)));throw new Bridge.ArgumentOutOfRangeException("count","cannot be less than zero");},format:function(n){var i=this,r=Array.prototype.slice.call(arguments,1),t=this.decodeBraceSequence;return n.replace(/(\{+)((\d+|[a-zA-Z_$]\w+(?:\.[a-zA-Z_$]\w+|\[\d+\])*)(?:\,(-?\d*))?(?:\:([^\}]*))?)(\}+)|(\{+)|(\}+)/g,function(n,u,f,e,o,s,h,c,l){return c?t(c):l?t(l):u.length%2==0||h.length%2==0?t(u)+f+t(h):t(u,!0)+i.handleElement(e,o,s,r)+t(h,!0)})},handleElement:function(n,t,i,r){var u;if(n=parseInt(n,10),n>r.length-1)throw new Bridge.FormatException("Input string was not in a correct format.");return u=r[n],u==null&&(u=""),u=i&&Bridge.is(u,Bridge.IFormattable)?Bridge.format(u,i):""+u,t&&(t=parseInt(t,10),Bridge.isNumber(t)||(t=null)),Bridge.String.alignString(u.toString(),t)},decodeBraceSequence:function(n,t){return n.substr(0,(n.length+(t?0:1))/2)},alignString:function(n,t,i,r){if(!t)return n;if(i||(i=" "),Bridge.isNumber(i)&&(i=String.fromCharCode(i)),r||(r=t<0?1:2),t=Math.abs(t),t+1>=n.length)switch(r){case 2:n=Array(t+1-n.length).join(i)+n;break;case 3:var u=t-n.length,f=Math.ceil(u/2),e=u-f;n=Array(e+1).join(i)+n+Array(f+1).join(i);break;case 1:default:n=n+Array(t+1-n.length).join(i)}return n},startsWith:function(n,t){return t.length?t.length>n.length?!1:(t=Bridge.String.escape(t),n.match("^"+t)!==null):!0},endsWith:function(n,t){return t.length?t.length>n.length?!1:(t=Bridge.String.escape(t),n.match(t+"$")!==null):!0},contains:function(n,t){if(t==null)throw new Bridge.ArgumentNullException;return n==null?!1:n.indexOf(t)>-1},indexOfAny:function(n,t){var i,r,e,u,o,f;if(t==null)throw new Bridge.ArgumentNullException;if(n==null||n==="")return-1;if(i=arguments.length>2?arguments[2]:0,i<0)throw new Bridge.ArgumentOutOfRangeException("startIndex","startIndex cannot be less than zero");if(r=arguments.length>3?arguments[3]:n.length-i,r<0)throw new Bridge.ArgumentOutOfRangeException("length","must be non-negative");if(r>n.length-i)throw new Bridge.ArgumentOutOfRangeException("Index and length must refer to a location within the string");for(e=n.substr(i,r),u=0;u<t.length;u++)if(o=String.fromCharCode(t[u]),f=e.indexOf(o),f>-1)return f+i;return-1},indexOf:function(n,t){var i,u,f,r;if(t==null)throw new Bridge.ArgumentNullException;if(n==null||n==="")return-1;if(i=arguments.length>2?arguments[2]:0,i<0||i>n.length)throw new Bridge.ArgumentOutOfRangeException("startIndex","startIndex cannot be less than zero and must refer to a location within the string");if(t==="")return arguments.length>2?i:0;if(u=arguments.length>3?arguments[3]:n.length-i,u<0)throw new Bridge.ArgumentOutOfRangeException("length","must be non-negative");if(u>n.length-i)throw new Bridge.ArgumentOutOfRangeException("Index and length must refer to a location within the string");return(f=n.substr(i,u),r=arguments.length===5&&arguments[4]%2!=0?f.toLocaleUpperCase().indexOf(t.toLocaleUpperCase()):f.indexOf(t),r>-1)?arguments.length===5?Bridge.String.compare(t,f.substr(r,t.length),arguments[4])===0?r+i:-1:r+i:-1},equals:function(){return Bridge.String.compare.apply(this,arguments)===0},compare:function(n,t){if(n==null)return t==null?0:-1;if(t==null)return 1;if(arguments.length>=3)if(Bridge.isBoolean(arguments[2])){if(arguments[2]&&(n=n.toLocaleUpperCase(),t=t.toLocaleUpperCase()),arguments.length===4)return n.localeCompare(t,arguments[3].name)}else switch(arguments[2]){case 1:return n.localeCompare(t,Bridge.CultureInfo.getCurrentCulture().name,{sensitivity:"accent"});case 2:return n.localeCompare(t,Bridge.CultureInfo.invariantCulture.name);case 3:return n.localeCompare(t,Bridge.CultureInfo.invariantCulture.name,{sensitivity:"accent"});case 4:return n===t?0:n>t?1:-1;case 5:return n.toUpperCase()===t.toUpperCase()?0:n.toUpperCase()>t.toUpperCase()?1:-1}return n.localeCompare(t)},toCharArray:function(n,t,i){var u,r;if(t<0||t>n.length||t>n.length-i)throw new Bridge.ArgumentOutOfRangeException("startIndex","startIndex cannot be less than zero and must refer to a location within the string");if(i<0)throw new Bridge.ArgumentOutOfRangeException("length","must be non-negative");for(Bridge.hasValue(t)||(t=0),Bridge.hasValue(i)||(i=n.length),u=[],r=t;r<t+i;r++)u.push(n.charCodeAt(r));return u},escape:function(n){return n.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},replaceAll:function(n,t,i){var r=new RegExp(Bridge.String.escape(t),"g");return n.replace(r,i)},insert:function(n,t,i){return n>0?t.substring(0,n)+i+t.substring(n,t.length):i+t},remove:function(n,t,i){return!i||t+i>this.length?n.substr(0,t):n.substr(0,t)+n.substr(t+i)},split:function(n,t,i,r){for(var o=new RegExp(t.map(Bridge.String.escape).join("|"),"g"),f=[],e,u=0;;u=o.lastIndex)if(e=o.exec(n)){if(r!==1||e.index>u){if(f.length===i-1)return f.push(n.substr(u)),f;f.push(n.substring(u,e.index))}}else return(r!==1||u!==n.length)&&f.push(n.substr(u)),f},trimEnd:function(n,t){return n.replace(t?new RegExp("["+String.fromCharCode.apply(null,t)+"]+$"):/\s*$/,"")},trimStart:function(n,t){return n.replace(t?new RegExp("^["+String.fromCharCode.apply(null,t)+"]+"):/^\s*/,"")},trim:function(n,t){return Bridge.String.trimStart(Bridge.String.trimEnd(n,t),t)}};Bridge.String=tt;e={nameEquals:function(n,t,i){return i?n.toLowerCase()===t.toLowerCase():n.charAt(0).toLowerCase()+n.slice(1)===t.charAt(0).toLowerCase()+t.slice(1)},checkEnumType:function(n){if(!n)throw new Bridge.ArgumentNullException("enumType");if(!n.prototype.$enum)throw new Bridge.ArgumentException("","enumType");},toName:function(n){return n.charAt(0).toUpperCase()+n.slice(1)},parse:function(n,t,i,r){var f=n,o,a,s,u;if(Bridge.Enum.checkEnumType(n),n.prototype.$flags){var h=t.split(","),c=0,l=!0;for(o=h.length-1;o>=0;o--){a=h[o].trim();s=!1;for(u in f)if(e.nameEquals(u,a,i)){c|=f[u];s=!0;break}if(!s){l=!1;break}}if(l)return c}else for(u in f)if(e.nameEquals(u,t,i))return f[u];if(r!==!0)throw new Bridge.ArgumentException("Invalid Enumeration Value");return null},toString:function(n,t,i){var u,f,r;if(Bridge.Enum.checkEnumType(n),u=n,(n.prototype.$flags||i===!0)&&t!==0){f=[];for(r in u)u[r]&t&&f.push(e.toName(r));return f.length?f.join(", "):t.toString()}for(r in u)if(u[r]===t)return e.toName(r);return t.toString()},getValues:function(n){var r,t,i;Bridge.Enum.checkEnumType(n);r=[];t=n;for(i in t)t.hasOwnProperty(i)&&i.indexOf("$")<0&&r.push(t[i]);return r},format:function(n,t,i){Bridge.Enum.checkEnumType(n);var r;if(!Bridge.hasValue(t)&&(r="value")||!Bridge.hasValue(i)&&(r="format"))throw new Bridge.ArgumentNullException(r);switch(i){case"G":case"g":return Bridge.Enum.toString(n,t);case"x":case"X":return t.toString(16);case"d":case"D":return t.toString();case"f":case"F":return Bridge.Enum.toString(n,t,!0);default:throw new Bridge.FormatException;}},getNames:function(n){var i,r,t;Bridge.Enum.checkEnumType(n);i=[];r=n;for(t in r)r.hasOwnProperty(t)&&t.indexOf("$")<0&&i.push(e.toName(t));return i},getName:function(n,t){var r,i;Bridge.Enum.checkEnumType(n);r=n;for(i in r)if(r[i]===t)return i.charAt(0).toUpperCase()+i.slice(1);return null},hasFlag:function(n,t){return!!(n&t)},isDefined:function(n,t){var i,u,r;Bridge.Enum.checkEnumType(n);i=n;u=Bridge.isString(t);for(r in i)if(u?e.nameEquals(r,t,!1):i[r]===t)return!0;return!1},tryParse:function(n,t,i,r){return(i.v=0,i.v=e.parse(n,t,r,!0),i.v==null)?!1:!0}};Bridge.Enum=e;var t=function(n){return n.test(navigator.userAgent.toLowerCase())},it=Bridge.global.document&&Bridge.global.document.compatMode==="CSS1Compat",l=function(n,t){var i;return n&&(i=t.exec(navigator.userAgent.toLowerCase()))?parseFloat(i[1]):0},i=Bridge.global.document?Bridge.global.document.documentMode:null,v=t(/opera/),kt=v&&t(/version\/10\.5/),rt=t(/\bchrome\b/),k=t(/webkit/),s=!rt&&t(/safari/),dt=s&&t(/applewebkit\/4/),gt=s&&t(/version\/3/),ni=s&&t(/version\/4/),ti=s&&t(/version\/5\.0/),ii=s&&t(/version\/5/),r=!v&&(t(/msie/)||t(/trident/)),f=r&&(t(/msie 7/)&&i!==8&&i!==9&&i!==10||i===7),o=r&&(t(/msie 8/)&&i!==7&&i!==9&&i!==10||i===8),h=r&&(t(/msie 9/)&&i!==7&&i!==8&&i!==10||i===9),y=r&&(t(/msie 10/)&&i!==7&&i!==8&&i!==9||i===10),ut=r&&(t(/trident\/7\.0/)&&i!==7&&i!==8&&i!==9&&i!==10||i===11),u=r&&t(/msie 6/),a=!k&&!r&&t(/gecko/),p=a&&t(/rv:1\.9/),ri=a&&t(/rv:2\.0/),ui=a&&t(/rv:5\./),fi=a&&t(/rv:10\./),ei=p&&t(/rv:1\.9\.0/),oi=p&&t(/rv:1\.9\.1/),si=p&&t(/rv:1\.9\.2/),ft=t(/windows|win32/),et=t(/macintosh|mac os x/),ot=t(/linux/),hi=l(!0,/\bchrome\/(\d+\.\d+)/),c=l(!0,/\bfirefox\/(\d+\.\d+)/),ci=l(r,/msie (\d+\.\d+)/),li=l(v,/version\/(\d+\.\d+)/),ai=l(s,/version\/(\d+\.\d+)/),vi=l(k,/webkit\/(\d+\.\d+)/),yi=Bridge.global.location?/^https/i.test(Bridge.global.location.protocol):!1,st=/iPhone/i.test(navigator.platform),ht=/iPod/i.test(navigator.platform),d=/iPad/i.test(navigator.userAgent),pi=/Blackberry/i.test(navigator.userAgent),ct=/Android/i.test(navigator.userAgent),lt=et||ft||ot&&!ct,at=d,wi=!lt&&!at,bi={isStrict:it,isIEQuirks:r&&!it&&(u||f||o||h),isOpera:v,isOpera10_5:kt,isWebKit:k,isChrome:rt,isSafari:s,isSafari3:gt,isSafari4:ni,isSafari5:ii,isSafari5_0:ti,isSafari2:dt,isIE:r,isIE6:u,isIE7:f,isIE7m:u||f,isIE7p:r&&!u,isIE8:o,isIE8m:u||f||o,isIE8p:r&&!(u||f),isIE9:h,isIE9m:u||f||o||h,isIE9p:r&&!(u||f||o),isIE10:y,isIE10m:u||f||o||h||y,isIE10p:r&&!(u||f||o||h),isIE11:ut,isIE11m:u||f||o||h||y||ut,isIE11p:r&&!(u||f||o||h||y),isGecko:a,isGecko3:p,isGecko4:ri,isGecko5:ui,isGecko10:fi,isFF3_0:ei,isFF3_5:oi,isFF3_6:si,isFF4:4<=c&&c<5,isFF5:5<=c&&c<6,isFF10:10<=c&&c<11,isLinux:ot,isWindows:ft,isMac:et,chromeVersion:hi,firefoxVersion:c,ieVersion:ci,operaVersion:li,safariVersion:ai,webKitVersion:vi,isSecure:yi,isiPhone:st,isiPod:ht,isiPad:d,isBlackberry:pi,isAndroid:ct,isDesktop:lt,isTablet:at,isPhone:wi,iOS:st||d||ht,standalone:Bridge.global.navigator?!!Bridge.global.navigator.standalone:!1};Bridge.Browser=bi;w=!1;vt={cache:{},initCtor:function(){var n=arguments[0];if(this.$multipleCtors&&arguments.length>0&&typeof n=="string"&&(n=n==="constructor"?"$constructor":n,(n==="$constructor"||Bridge.String.startsWith(n,"constructor$"))&&Bridge.isFunction(this[n]))){this[n].apply(this,Array.prototype.slice.call(arguments,1));return}this.$constructor&&this.$constructor.apply(this,arguments)},initConfig:function(n,t,i,r,u){var f,e=Bridge.isFunction(i),o=function(){var t,n;if(n=Bridge.isFunction(i)?i():i,n.fields)for(t in n.fields)this[t]=n.fields[t];if(n.properties)for(t in n.properties)Bridge.property(this,t,n.properties[t]);if(n.events)for(t in n.events)Bridge.event(this,t,n.events[t]);if(n.alias)for(t in n.alias)this[t]&&(this[t]=this[n.alias[t]]);n.init&&(f=n.init)};e||o.apply(u);u.$initMembers=function(){n&&!r&&t.$initMembers&&t.$initMembers.apply(this,arguments);e&&o.apply(this);f&&f.apply(this,arguments)}},define:function(n,t,i){function r(){if(!(this instanceof r)){var i=Array.prototype.slice.call(arguments,0),n=Object.create(r.prototype),t=r.apply(n,i);return typeof t=="object"?t:n}w||(this.$staticInit&&this.$staticInit(),this.$initMembers&&this.$initMembers.apply(this,arguments),this.$$initCtor.apply(this,arguments))}var b,k,c,o;if(i||(i=t,t=Bridge.global),Bridge.isFunction(i))return p=function(){var r=Array.prototype.slice.call(arguments),t,u,f;return(r.unshift(n),t=Bridge.Class.genericName.apply(null,r),f=Bridge.Class.cache[t],f)?f:(u=i.apply(null,r.slice(1)),u.$cacheName=t,Bridge.define(t,u))},Bridge.Class.generic(n,t,p);i=i||{};var u=i.$inherits||i.inherits,f=i.$statics||i.statics,l,d=i.$cacheName,s,h=i.$scope||Bridge.global,o,g,y,a,v,e,p;i.$inherits?delete i.$inherits:delete i.inherits;Bridge.isFunction(f)?f=null:i.$statics?delete i.$statics:delete i.statics;i.$cacheName&&delete i.$cacheName;h=Bridge.Class.set(h,n,r);d&&(Bridge.Class.cache[d]=r);u&&Bridge.isFunction(u)&&(u=u());l=u?u[0].prototype:this.prototype;w=!0;s=u?new u[0]:{};w=!1;f&&(b=f.$config||f.config,b&&!Bridge.isFunction(b)&&(Bridge.Class.initConfig(u,l,b,!0,r),f.$config?delete f.$config:delete f.config));k=i.$config||i.config;k&&!Bridge.isFunction(k)?(Bridge.Class.initConfig(u,l,k,!1,i),i.$config?delete i.$config:delete i.config):i.$initMembers=u?function(){l.$initMembers.apply(this,arguments)}:function(){};i.$$initCtor=Bridge.Class.initCtor;y=0;c=[];for(e in i)c.push(e);for(Bridge.Browser.isIE8&&i.hasOwnProperty("constructor")&&c.indexOf("constructor")<0&&c.push("constructor"),o=0;o<c.length;o++)e=c[o],g=i[e],a=e==="constructor",v=a?"$constructor":e,Bridge.isFunction(g)&&(a||Bridge.String.startsWith(e,"constructor$"))&&(y++,a=!0),s[v]=i[e],a&&(function(n){r[n]=function(){var t=Array.prototype.slice.call(arguments);this.$initMembers&&this.$initMembers.apply(this,t);t.unshift(n);this.$$initCtor.apply(this,t)}}(v),r[v].prototype=s,r[v].prototype.constructor=r);if(y===0&&(s.$constructor=u?function(){l.$constructor.apply(this,arguments)}:function(){}),y>1&&(s.$multipleCtors=!0),s.$$name=n,r.prototype=s,r.prototype.constructor=r,r.$$name=n,f)for(e in f)r[e]=f[e];for(u||(u=[Object]),r.$$inherits=u,o=0;o<u.length;o++)h=u[o],h.$$inheritors||(h.$$inheritors=[]),h.$$inheritors.push(r);return p=function(){r.$staticInit=null;r.$initMembers&&r.$initMembers.call(r);r.constructor&&r.constructor.call(r)},Bridge.Class.$queue.push(r),r.$staticInit=p,r},addExtend:function(n,t){var i,r;for(Array.prototype.push.apply(n.$$inherits,t),i=0;i<t.length;i++)r=t[i],r.$$inheritors||(r.$$inheritors=[]),r.$$inheritors.push(n)},set:function(n,t,i){for(var r=t.split("."),o,e,u,f=0;f<r.length-1;f++)typeof n[r[f]]=="undefined"&&(n[r[f]]={}),n=n[r[f]];if(o=r[r.length-1],u=n[o],u)for(e in u)typeof u[e]=="function"&&u[e].$$name&&(i[e]=u[e]);return n[o]=i,n},genericName:function(){for(var t=arguments[0],n=1;n<arguments.length;n++)t+="$"+Bridge.getTypeName(arguments[n]);return t},generic:function(n,t,i){return i||(i=t,t=Bridge.global),i.$$name=n,Bridge.Class.set(t,n,i),i},init:function(n){for(var i,t=0;t<Bridge.Class.$queue.length;t++)i=Bridge.Class.$queue[t],i.$staticInit&&i.$staticInit();Bridge.Class.$queue.length=0;n&&n()}};Bridge.Class=vt;Bridge.Class.$queue=[];Bridge.define=Bridge.Class.define;Bridge.init=Bridge.Class.init;Bridge.define("Bridge.Exception",{constructor:function(n,t){this.message=n;this.innerException=t;this.errorStack=new Error;this.data=new Bridge.Dictionary$2(Object,Object)()},getMessage:function(){return this.message},getInnerException:function(){return this.innerException},getStackTrace:function(){return this.errorStack.stack},getData:function(){return this.data},toString:function(){return this.getMessage()},statics:{create:function(n){return Bridge.is(n,Bridge.Exception)?n:n instanceof TypeError?new Bridge.NullReferenceException(n.message,new Bridge.ErrorException(n)):n instanceof RangeError?new Bridge.ArgumentOutOfRangeException(null,n.message,new Bridge.ErrorException(n)):n instanceof Error?new Bridge.ErrorException(n):new Bridge.Exception(n?n.toString():null)}}});Bridge.define("Bridge.ErrorException",{inherits:[Bridge.Exception],constructor:function(n){Bridge.Exception.prototype.$constructor.call(this,n.message);this.errorStack=n;this.error=n},getError:function(){return this.error}});Bridge.define("Bridge.ArgumentException",{inherits:[Bridge.Exception],constructor:function(n,t,i){Bridge.Exception.prototype.$constructor.call(this,n||"Value does not fall within the expected range.",i);this.paramName=t},getParamName:function(){return this.paramName}});Bridge.define("Bridge.ArgumentNullException",{inherits:[Bridge.ArgumentException],constructor:function(n,t,i){t||(t="Value cannot be null.",n&&(t+="\nParameter name: "+n));Bridge.ArgumentException.prototype.$constructor.call(this,t,n,i)}});Bridge.define("Bridge.ArgumentOutOfRangeException",{inherits:[Bridge.ArgumentException],constructor:function(n,t,i,r){t||(t="Value is out of range.",n&&(t+="\nParameter name: "+n));Bridge.ArgumentException.prototype.$constructor.call(this,t,n,i);this.actualValue=r},getActualValue:function(){return this.actualValue}});Bridge.define("Bridge.CultureNotFoundException",{inherits:[Bridge.ArgumentException],constructor:function(n,t,i,r){i||(i="Culture is not supported.",n&&(i+="\nParameter name: "+n),t&&(i+="\n"+t+" is an invalid culture identifier."));Bridge.ArgumentException.prototype.$constructor.call(this,i,n,r);this.invalidCultureName=t},getInvalidCultureName:function(){return this.invalidCultureName}});Bridge.define("Bridge.KeyNotFoundException",{inherits:[Bridge.Exception],constructor:function(n,t){Bridge.Exception.prototype.$constructor.call(this,n||"Key not found.",t)}});Bridge.define("Bridge.ArithmeticException",{inherits:[Bridge.Exception],constructor:function(n,t){Bridge.Exception.prototype.$constructor.call(this,n||"Overflow or underflow in the arithmetic operation.",t)}});Bridge.define("Bridge.DivideByZeroException",{inherits:[Bridge.ArithmeticException],constructor:function(n,t){Bridge.ArithmeticException.prototype.$constructor.call(this,n||"Division by 0.",t)}});Bridge.define("Bridge.OverflowException",{inherits:[Bridge.ArithmeticException],constructor:function(n,t){Bridge.ArithmeticException.prototype.$constructor.call(this,n||"Arithmetic operation resulted in an overflow.",t)}});Bridge.define("Bridge.FormatException",{inherits:[Bridge.Exception],constructor:function(n,t){Bridge.Exception.prototype.$constructor.call(this,n||"Invalid format.",t)}});Bridge.define("Bridge.InvalidCastException",{inherits:[Bridge.Exception],constructor:function(n,t){Bridge.Exception.prototype.$constructor.call(this,n||"The cast is not valid.",t)}});Bridge.define("Bridge.InvalidOperationException",{inherits:[Bridge.Exception],constructor:function(n,t){Bridge.Exception.prototype.$constructor.call(this,n||"Operation is not valid due to the current state of the object.",t)}});Bridge.define("Bridge.NotImplementedException",{inherits:[Bridge.Exception],constructor:function(n,t){Bridge.Exception.prototype.$constructor.call(this,n||"The method or operation is not implemented.",t)}});Bridge.define("Bridge.NotSupportedException",{inherits:[Bridge.Exception],constructor:function(n,t){Bridge.Exception.prototype.$constructor.call(this,n||"Specified method is not supported.",t)}});Bridge.define("Bridge.NullReferenceException",{inherits:[Bridge.Exception],constructor:function(n,t){Bridge.Exception.prototype.$constructor.call(this,n||"Object is null.",t)}});Bridge.define("Bridge.RankException",{inherits:[Bridge.Exception],constructor:function(n,t){Bridge.Exception.prototype.$constructor.call(this,n||"Attempted to operate on an array with the incorrect number of dimensions.",t)}});Bridge.define("Bridge.IFormattable",{statics:{$is:function(n){return Bridge.isNumber(n)?!0:Bridge.isDate(n)?!0:Bridge.is(n,Bridge.IFormattable,!0)}}});Bridge.define("Bridge.IComparable");Bridge.define("Bridge.IFormatProvider");Bridge.define("Bridge.ICloneable");Bridge.Class.generic("Bridge.IComparable$1",function(n){var t=Bridge.Class.genericName("Bridge.IComparable$1",n);return Bridge.Class.cache[t]||(Bridge.Class.cache[t]=Bridge.define(t))});Bridge.Class.generic("Bridge.IEquatable$1",function(n){var t=Bridge.Class.genericName("Bridge.IEquatable$1",n);return Bridge.Class.cache[t]||(Bridge.Class.cache[t]=Bridge.define(t))});Bridge.define("Bridge.IPromise");Bridge.define("Bridge.IDisposable");Bridge.define("Bridge.DateTimeFormatInfo",{inherits:[Bridge.IFormatProvider,Bridge.ICloneable],statics:{$allStandardFormats:{d:"shortDatePattern",D:"longDatePattern",f:"longDatePattern shortTimePattern",F:"longDatePattern longTimePattern",g:"shortDatePattern shortTimePattern",G:"shortDatePattern longTimePattern",m:"monthDayPattern",M:"monthDayPattern",o:"roundtripFormat",O:"roundtripFormat",r:"rfc1123",R:"rfc1123",s:"sortableDateTimePattern",S:"sortableDateTimePattern1",t:"shortTimePattern",T:"longTimePattern",u:"universalSortableDateTimePattern",U:"longDatePattern longTimePattern",y:"yearMonthPattern",Y:"yearMonthPattern"},constructor:function(){this.invariantInfo=Bridge.merge(new Bridge.DateTimeFormatInfo,{abbreviatedDayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],abbreviatedMonthGenitiveNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec",""],abbreviatedMonthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec",""],amDesignator:"AM",dateSeparator:"/",dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],firstDayOfWeek:0,fullDateTimePattern:"dddd, MMMM dd, yyyy h:mm:ss tt",longDatePattern:"dddd, MMMM dd, yyyy",longTimePattern:"h:mm:ss tt",monthDayPattern:"MMMM dd",monthGenitiveNames:["January","February","March","April","May","June","July","August","September","October","November","December",""],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December",""],pmDesignator:"PM",rfc1123:"ddd, dd MMM yyyy HH':'mm':'ss 'GMT'",shortDatePattern:"M/d/yyyy",shortestDayNames:["Su","Mo","Tu","We","Th","Fr","Sa"],shortTimePattern:"h:mm tt",sortableDateTimePattern:"yyyy'-'MM'-'dd'T'HH':'mm':'ss",sortableDateTimePattern1:"yyyy'-'MM'-'dd",timeSeparator:":",universalSortableDateTimePattern:"yyyy'-'MM'-'dd HH':'mm':'ss'Z'",yearMonthPattern:"MMMM, yyyy",roundtripFormat:"yyyy'-'MM'-'dd'T'HH':'mm':'ss.uzzz"})}},getFormat:function(n){switch(n){case Bridge.DateTimeFormatInfo:return this;default:return null}},getAbbreviatedDayName:function(n){if(n<0||n>6)throw new Bridge.ArgumentOutOfRangeException("dayofweek");return this.abbreviatedDayNames[n]},getAbbreviatedMonthName:function(n){if(n<1||n>13)throw new Bridge.ArgumentOutOfRangeException("month");return this.abbreviatedMonthNames[n-1]},getAllDateTimePatterns:function(n,t){var i=Bridge.DateTimeFormatInfo.$allStandardFormats,r,e,f,u,o=[];if(n){if(!i[n]){if(t)return null;throw new Bridge.ArgumentException(null,"format");}r={};r[n]=i[n]}else r=i;for(i in r){for(e=r[i].split(" "),f="",u=0;u<e.length;u++)f=(u===0?"":f+" ")+this[e[u]];o.push(f)}return o},getDayName:function(n){if(n<0||n>6)throw new Bridge.ArgumentOutOfRangeException("dayofweek");return this.dayNames[n]},getMonthName:function(n){if(n<1||n>13)throw new Bridge.ArgumentOutOfRangeException("month");return this.monthNames[n-1]},getShortestDayName:function(n){if(n<0||n>6)throw new Bridge.ArgumentOutOfRangeException("dayOfWeek");return this.shortestDayNames[n]},clone:function(){return Bridge.copy(new Bridge.DateTimeFormatInfo,this,["abbreviatedDayNames","abbreviatedMonthGenitiveNames","abbreviatedMonthNames","amDesignator","dateSeparator","dayNames","firstDayOfWeek","fullDateTimePattern","longDatePattern","longTimePattern","monthDayPattern","monthGenitiveNames","monthNames","pmDesignator","rfc1123","shortDatePattern","shortestDayNames","shortTimePattern","sortableDateTimePattern","timeSeparator","universalSortableDateTimePattern","yearMonthPattern","roundtripFormat"])}});Bridge.define("Bridge.NumberFormatInfo",{inherits:[Bridge.IFormatProvider,Bridge.ICloneable],statics:{constructor:function(){this.numberNegativePatterns=["(n)","-n","- n","n-","n -"];this.currencyNegativePatterns=["($n)","-$n","$-n","$n-","(n$)","-n$","n-$","n$-","-n $","-$ n","n $-","$ n-","$ -n","n- $","($ n)","(n $)"];this.currencyPositivePatterns=["$n","n$","$ n","n $"];this.percentNegativePatterns=["-n %","-n%","-%n","%-n","%n-","n-%","n%-","-% n","n %-","% n-","% -n","n- %"];this.percentPositivePatterns=["n %","n%","%n","% n"];this.invariantInfo=Bridge.merge(new Bridge.NumberFormatInfo,{nanSymbol:"NaN",negativeSign:"-",positiveSign:"+",negativeInfinitySymbol:"-Infinity",positiveInfinitySymbol:"Infinity",percentSymbol:"%",percentGroupSizes:[3],percentDecimalDigits:2,percentDecimalSeparator:".",percentGroupSeparator:",",percentPositivePattern:0,percentNegativePattern:0,currencySymbol:"",currencyGroupSizes:[3],currencyDecimalDigits:2,currencyDecimalSeparator:".",currencyGroupSeparator:",",currencyNegativePattern:0,currencyPositivePattern:0,numberGroupSizes:[3],numberDecimalDigits:2,numberDecimalSeparator:".",numberGroupSeparator:",",numberNegativePattern:1})}},getFormat:function(n){switch(n){case Bridge.NumberFormatInfo:return this;default:return null}},clone:function(){return Bridge.copy(new Bridge.NumberFormatInfo,this,["nanSymbol","negativeSign","positiveSign","negativeInfinitySymbol","positiveInfinitySymbol","percentSymbol","percentGroupSizes","percentDecimalDigits","percentDecimalSeparator","percentGroupSeparator","percentPositivePattern","percentNegativePattern","currencySymbol","currencyGroupSizes","currencyDecimalDigits","currencyDecimalSeparator","currencyGroupSeparator","currencyNegativePattern","currencyPositivePattern","numberGroupSizes","numberDecimalDigits","numberDecimalSeparator","numberGroupSeparator","numberNegativePattern"])}});Bridge.define("Bridge.CultureInfo",{inherits:[Bridge.IFormatProvider,Bridge.ICloneable],statics:{constructor:function(){this.cultures=this.cultures||{};this.invariantCulture=Bridge.merge(new Bridge.CultureInfo("iv",!0),{englishName:"Invariant Language (Invariant Country)",nativeName:"Invariant Language (Invariant Country)",numberFormat:Bridge.NumberFormatInfo.invariantInfo,dateTimeFormat:Bridge.DateTimeFormatInfo.invariantInfo});this.setCurrentCulture(Bridge.CultureInfo.invariantCulture)},getCurrentCulture:function(){return this.currentCulture},setCurrentCulture:function(n){this.currentCulture=n;Bridge.DateTimeFormatInfo.currentInfo=n.dateTimeFormat;Bridge.NumberFormatInfo.currentInfo=n.numberFormat},getCultureInfo:function(n){if(!n)throw new Bridge.ArgumentNullException("name");return this.cultures[n]},getCultures:function(){for(var t=Bridge.getPropertyNames(this.cultures),i=[],n=0;n<t.length;n++)i.push(this.cultures[t[n]]);return i}},constructor:function(n,t){if(this.name=n,Bridge.CultureInfo.cultures||(Bridge.CultureInfo.cultures={}),Bridge.CultureInfo.cultures[n])Bridge.copy(this,Bridge.CultureInfo.cultures[n],["englishName","nativeName","numberFormat","dateTimeFormat"]);else{if(!t)throw new Bridge.CultureNotFoundException("name",n);Bridge.CultureInfo.cultures[n]=this}},getFormat:function(n){switch(n){case Bridge.NumberFormatInfo:return this.numberFormat;case Bridge.DateTimeFormatInfo:return this.dateTimeFormat;default:return null}},clone:function(){return new Bridge.CultureInfo(this.name)}});yt={divRem:function(n,t,i){var r=n%t;return i.v=r,(n-r)/t},round:function(n,t,i){var u=Math.pow(10,t||0),r,f;return(n*=u,r=n>0|-(n<0),n%1==.5*r)?(f=Math.floor(n),(f+(i===4?r>0:f%2*r))/u):Math.round(n)/u}};Bridge.Math=yt;Bridge.define("Bridge.Int",{inherits:[Bridge.IComparable,Bridge.IFormattable],statics:{instanceOf:function(n){return typeof n=="number"&&isFinite(n)&&Math.round(n,0)===n},getDefaultValue:function(){return 0},format:function(n,t,i){var u=(i||Bridge.CultureInfo.getCurrentCulture()).getFormat(Bridge.NumberFormatInfo),b=u.numberDecimalSeparator,k=u.numberGroupSeparator,s,r,c,y,o,p,h;if(!isFinite(n))return Number.NEGATIVE_INFINITY===n?u.negativeInfinitySymbol:u.positiveInfinitySymbol;if(!t)return this.defaultFormat(n,0,0,15,u,!0);if(s=t.match(/^([a-zA-Z])(\d*)$/),s){y=s[1].toUpperCase();r=parseInt(s[2],10);r=r>15?15:r;switch(y){case"D":return this.defaultFormat(n,isNaN(r)?1:r,0,0,u,!0);case"F":case"N":return isNaN(r)&&(r=u.numberDecimalDigits),this.defaultFormat(n,1,r,r,u,y==="F");case"G":case"E":for(var f=0,e=Math.abs(n),l=s[1],w=3,a,v;e>=10;)e/=10,f++;while(e!==0&&e<1)e*=10,f--;if(y==="G"){if(f>-5&&(!r||f<r))return a=r?r-(f>0?f+1:1):0,v=r?r-(f>0?f+1:1):10,this.defaultFormat(n,1,a,v,u,!0);l=l==="G"?"E":"e";w=2;a=(r||1)-1;v=(r||11)-1}else a=v=isNaN(r)?6:r;return f>=0?l+=u.positiveSign:(l+=u.negativeSign,f=-f),n<0&&(e*=-1),this.defaultFormat(e,1,a,v,u)+l+this.defaultFormat(f,w,0,0,u,!0);case"P":return isNaN(r)&&(r=u.percentDecimalDigits),this.defaultFormat(n*100,1,r,r,u,!1,"percent");case"X":for(o=Math.round(n).toString(16),s[1]==="X"&&(o=o.toUpperCase()),r-=o.length;r-->0;)o="0"+o;return o;case"C":return isNaN(r)&&(r=u.currencyDecimalDigits),this.defaultFormat(n,1,r,r,u,!1,"currency");case"R":return""+n}}if(t.indexOf(",.")!==-1||Bridge.String.endsWith(t,",")){for(p=0,h=t.indexOf(",."),h===-1&&(h=t.length-1);h>-1&&t.charAt(h)===",";)p++,h--;n/=Math.pow(1e3,p)}return t.indexOf("%")!==-1&&(n*=100),c=t.split(";"),n<0&&c.length>1?(n*=-1,t=c[1]):t=c[!n&&c.length>2?2:0],this.customFormat(n,t,u,!t.match(/^[^\.]*[0#],[0#]/))},defaultFormat:function(n,t,i,r,u,f,e){e=e||"number";var h=(u||Bridge.CultureInfo.getCurrentCulture()).getFormat(Bridge.NumberFormatInfo),o,p,w,b,v,y,k=h[e+"GroupSizes"],s,d,g,l,a,nt,tt,c="";if(b=Math.pow(10,r),o=""+Math.round(Math.abs(n)*b)/b,p=o.indexOf("."),p>0&&(s=h[e+"DecimalSeparator"]+o.substr(p+1),o=o.substr(0,p)),o.length<t&&(o=Array(t-o.length+1).join("0")+o),s&&(s.length-1<i&&(s+=Array(i-s.length+2).join("0")),r===0?s=null:s.length-1>r&&(s=s.substr(0,r+1))),v=0,y=k[v],o.length<y)c=o,s&&(c+=s);else{for(d=o.length,g=!1,tt=f?"":h[e+"GroupSeparator"];!g;){if(a=y,l=d-a,l<0&&(y+=l,a+=l,l=0,g=!0),!a)break;nt=o.substr(l,a);c=c.length?nt+tt+c:nt;d-=a;v<k.length-1&&(v++,y=k[v])}s&&(c+=s)}return n<0?(w=Bridge.NumberFormatInfo[e+"NegativePatterns"][h[e+"NegativePattern"]],w.replace("-",h.negativeSign).replace("%",h.percentSymbol).replace("$",h.currencySymbol).replace("n",c)):Bridge.NumberFormatInfo[e+"PositivePatterns"]?(w=Bridge.NumberFormatInfo[e+"PositivePatterns"][h[e+"PositivePattern"]],w.replace("%",h.percentSymbol).replace("$",h.currencySymbol).replace("n",c)):c},customFormat:function(n,t,i,r){var y=0,s=-1,c=-1,p=0,w=-1,l=0,d=1,u,f,e,a,b,k,g=!1,v,h,o="";for(v="number",t.indexOf("%")!==-1?v="percent":t.indexOf("$")!==-1&&(v="currency"),f=0;f<t.length;f++)if(u=t.charAt(f),u==="'"||u==='"'){if(f=t.indexOf(u,f+1),f<0)break}else u==="\\"?f++:((u==="0"||u==="#")&&(p+=l,u==="0"&&(l?w=p:s<0&&(s=y)),y+=!l),l=l||u===".");for(s=s<0?1:y-s,n<0&&(g=!0),b=Math.pow(10,p),n=""+Math.round(Math.abs(n)*b)/b,k=n.indexOf("."),c=k<0?n.length:k,f=c-y,h={groupIndex:Math.max(c,s),sep:r?"":i[v+"GroupSeparator"]},e=0;e<t.length;e++)if(u=t.charAt(e),u==="'"||u==='"'){if(a=t.indexOf(u,e+1),o+=t.substring(e+1,a<0?t.length:a),a<0)break;e=a}else u==="\\"?(o+=t.charAt(e+1),e++):u==="#"||u==="0"?(h.buffer=o,f<c?(f>=0?(d&&this.addGroup(n.substr(0,f),h),this.addGroup(n.charAt(f),h)):f>=c-s&&this.addGroup("0",h),d=0):(w-->0||f<n.length)&&this.addGroup(f>=n.length?"0":n.charAt(f),h),o=h.buffer,f++):u==="."?(n.length>++f||w>0)&&(o+=i[v+"DecimalSeparator"]):u!==","&&(o+=u);return g<0&&(o="-"+o),o},addGroup:function(n,t){for(var i=t.buffer,f=t.sep,r=t.groupIndex,u=0,e=n.length;u<e;u++)i+=n.charAt(u),f&&r>1&&r--%3==1&&(i+=f);t.buffer=i;t.groupIndex=r},parseFloat:function(n,t){if(n==null)throw new Bridge.ArgumentNullException("str");var i=(t||Bridge.CultureInfo.getCurrentCulture()).getFormat(Bridge.NumberFormatInfo),r=parseFloat(n.replace(i.numberDecimalSeparator,"."));if(isNaN(r)&&n!==i.nanSymbol){if(n===i.negativeInfinitySymbol)return Number.NEGATIVE_INFINITY;if(n===i.positiveInfinitySymbol)return Number.POSITIVE_INFINITY;throw new Bridge.FormatException("Input string was not in a correct format.");}return r},tryParseFloat:function(n,t,i){if(i.v=0,n==null)return!1;var r=(t||Bridge.CultureInfo.getCurrentCulture()).getFormat(Bridge.NumberFormatInfo);return(i.v=parseFloat(n.replace(r.numberDecimalSeparator,".")),isNaN(i.v)&&n!==r.nanSymbol)?n===r.negativeInfinitySymbol?(i.v=Number.NEGATIVE_INFINITY,!0):n===r.positiveInfinitySymbol?(i.v=Number.POSITIVE_INFINITY,!0):!1:!0},parseInt:function(n,t,i,r){if(n==null)throw new Bridge.ArgumentNullException("str");if(!/^[+-]?[0-9]+$/.test(n))throw new Bridge.FormatException("Input string was not in a correct format.");var u=parseInt(n,r||10);if(isNaN(u))throw new Bridge.FormatException("Input string was not in a correct format.");if(u<t||u>i)throw new Bridge.OverflowException;return u},tryParseInt:function(n,t,i,r,u){return(t.v=0,!/^[+-]?[0-9]+$/.test(n))?!1:(t.v=parseInt(n,u||10),t.v<i||t.v>r)?!1:!0},trunc:function(n){return Bridge.isNumber(n)?n>0?Math.floor(n):Math.ceil(n):null},div:function(n,t){if(!Bridge.isNumber(n)||!Bridge.isNumber(t))return null;if(t===0)throw new Bridge.DivideByZeroException;return this.trunc(n/t)},mod:function(n,t){if(!Bridge.isNumber(n)||!Bridge.isNumber(t))return null;if(t===0)throw new Bridge.DivideByZeroException;return n%t},check:function(n,t){if(Bridge.isNumber(n)&&!t.instanceOf(n))throw new Bridge.OverflowException;return n},sxb:function(n){return n|(n&128?4294967040:0)},sxs:function(n){return n|(n&32768?4294901760:0)},clip8:function(n){return Bridge.isNumber(n)?Bridge.Int.sxb(n&255):null},clipu8:function(n){return Bridge.isNumber(n)?n&255:null},clip16:function(n){return Bridge.isNumber(n)?Bridge.Int.sxs(n&65535):null},clipu16:function(n){return Bridge.isNumber(n)?n&65535:null},clip32:function(n){return Bridge.isNumber(n)?n|0:null},clipu32:function(n){return Bridge.isNumber(n)?n>>>0:null},clip64:function(n){return Bridge.isNumber(n)?(Math.floor(n/4294967296)|0)*4294967296+(n>>>0):null},clipu64:function(n){return Bridge.isNumber(n)?(Math.floor(n/4294967296)>>>0)*4294967296+(n>>>0):null},sign:function(n){return Bridge.isNumber(n)?n===0?0:n<0?-1:1:null}}});Bridge.Class.addExtend(Bridge.Int,[Bridge.IComparable$1(Bridge.Int),Bridge.IEquatable$1(Bridge.Int)]);!function(n){function c(n){for(var t,e,f=1,r=n.length,u=n[0]+"";r>f;f++){for(t=n[f]+"",e=i-t.length;e--;)t="0"+t;u+=t}for(r=u.length;48===u.charCodeAt(--r););return u.slice(0,r+1||1)}function g(n,t,r,u){for(var s,c,f,o=1,e=n[0];e>=10;e/=10,o++);return e=t-o,0>e?(e+=i,s=0):(s=Math.ceil((e+1)/i),e%=i),o=h(10,i-e),f=n[s]%o|0,null==u?3>e?(0==e?f=f/100|0:1==e&&(f=f/10|0),c=4>r&&99999==f||r>3&&49999==f||5e4==f||0==f):c=(4>r&&f+1==o||r>3&&f+1==o/2)&&(n[s+1]/o/100|0)==h(10,e-2)-1||(f==o/2||0==f)&&0==(n[s+1]/o/100|0):4>e?(0==e?f=f/1e3|0:1==e?f=f/100|0:2==e&&(f=f/10|0),c=(u||4>r)&&9999==f||!u&&r>3&&4999==f):c=((u||4>r)&&f+1==o||!u&&r>3&&f+1==o/2)&&(n[s+1]/o/1e3|0)==h(10,e-3)-1,c}function w(n,t,i){var r=n.constructor;return null==t||((l=0>t||t>8)||0!==t&&(r.errors?parseInt:parseFloat)(t)!=t)&&!u(r,"rounding mode",t,i,0)?r.rounding:0|t}function b(n,t,i,r){var f=n.constructor;return!(l=(r||0)>t||t>=st+1)&&(0===t||(f.errors?parseInt:parseFloat)(t)==t)||u(f,"argument",t,i,0)}function tt(n,t){var l,v,k,a,i,f,o,y=0,d=0,p=0,u=n.constructor,w=u.ONE,nt=u.rounding,b=u.precision;if(!n.c||!n.c[0]||n.e>17)return new u(n.c?n.c[0]?n.s<0?0:1/0:w:n.s?n.s<0?0:n:NaN);for(null==t?(e=!1,i=b):i=t,o=new u(.03125);n.e>-2;)n=n.times(o),p+=5;for(v=Math.log(h(2,p))/Math.LN10*2+5|0,i+=v,l=a=f=new u(w),u.precision=i;;){if(a=r(a.times(n),i,1),l=l.times(++d),o=f.plus(s(a,l,i,1)),c(o.c).slice(0,i)===c(f.c).slice(0,i)){for(k=p;k--;)f=r(f.times(f),i,1);if(null!=t)return u.precision=b,f;if(!(3>y&&g(f.c,i-v,nt,y)))return r(f,u.precision=b,nt,e=!0);u.precision=i+=10;l=a=o=new u(w);d=0;y++}f=o}}function nt(n,t,i,u){var f,o,s=n.constructor,e=(n=new s(n)).e;if(null==t?i=0:(r(n,++t,i),i=u?t:t+n.e-e),e=n.e,f=c(n.c),1==u||2==u&&(e>=t||e<=s.toExpNeg)){for(;f.length<i;f+="0");f.length>1&&(f=f.charAt(0)+"."+f.slice(1));f+=(0>e?"e":"e+")+e}else{if(u=f.length,0>e){for(o=i-u;++e;f="0"+f);f="0."+f}else if(++e>u){for(o=i-e,e-=u;e--;f+="0");o>0&&(f+=".")}else o=i-u,u>e?f=f.slice(0,e)+"."+f.slice(e):o>0&&(f+=".");if(o>0)for(;o--;f+="0");}return n.s<0&&n.c[0]?"-"+f:f}function ut(n){var t=n.length-1,r=t*i+1;if(t=n[t]){for(;t%10==0;t/=10,r--);for(t=n[0];t>=10;t/=10,r++);}return r}function u(n,t,i,r,u){if(n.errors){var e=new Error((r||["new Decimal","cmp","div","eq","gt","gte","lt","lte","minus","mod","plus","times","toFraction","pow","random","log","sqrt","toNearest","divToInt"][f?0>f?-f:f:0>1/f?1:0])+"() "+(["number type has more than 15 significant digits","LN10 out of digits"][t]||t+([l?" out of range":" not an integer"," not a boolean or binary digit"][u]||""))+": "+i);throw e.name="Decimal Error",l=f=0,e;}}function ft(n,t,i){var r=new n(n.ONE);for(e=!1;1&i&&(r=r.times(t)),i>>=1,i;)t=t.times(t);return e=!0,r}function y(n,t){var l,a,d,w,b,et,f,h,nt,rt,ut,ot=1,tt=10,i=n,v=i.c,o=i.constructor,it=o.ONE,ft=o.rounding,k=o.precision;if(i.s<0||!v||!v[0]||!i.e&&1==v[0]&&1==v.length)return new o(v&&!v[0]?-1/0:1!=i.s?NaN:v?0:i);if(null==t?(e=!1,f=k):f=t,o.precision=f+=tt,l=c(v),a=l.charAt(0),!(Math.abs(w=i.e)<15e14))return i=new o(a+"."+l.slice(1)),f+2>p.length&&u(o,1,f+2,"ln"),i=y(i,f-tt).plus(new o(p.slice(0,f+2)).times(w+"")),o.precision=k,null==t?r(i,k,ft,e=!0):i;for(;7>a&&1!=a||1==a&&l.charAt(1)>3;)i=i.times(n),l=c(i.c),a=l.charAt(0),ot++;for(w=i.e,a>1?(i=new o("0."+l),w++):i=new o(a+"."+l.slice(1)),rt=i,h=b=i=s(i.minus(it),i.plus(it),f,1),ut=r(i.times(i),f,1),d=3;;){if(b=r(b.times(ut),f,1),nt=h.plus(s(b,new o(d),f,1)),c(nt.c).slice(0,f)===c(h.c).slice(0,f)){if(h=h.times(2),0!==w&&(f+2>p.length&&u(o,1,f+2,"ln"),h=h.plus(new o(p.slice(0,f+2)).times(w+""))),h=s(h,new o(ot),f,1),null!=t)return o.precision=k,h;if(!g(h.c,f-tt,ft,et))return r(h,o.precision=k,ft,e=!0);o.precision=f+=tt;nt=b=i=s(rt.minus(it),rt.plus(it),f,1);ut=r(i.times(i),f,1);d=et=1}h=nt;d+=2}}function r(n,t,r,u){var y,c,s,l,p,w,f,a,b=n.constructor;n:if(null!=t){if(!(f=n.c))return n;for(y=1,l=f[0];l>=10;l/=10,y++);if(c=t-y,0>c)c+=i,s=t,p=f[a=0],w=p/h(10,y-s-1)%10|0;else if(a=Math.ceil((c+1)/i),a>=f.length){if(!u)break n;for(;f.length<=a;f.push(0));p=w=0;y=1;c%=i;s=c-i+1}else{for(p=l=f[a],y=1;l>=10;l/=10,y++);c%=i;s=c-i+y;w=0>s?0:o(p/h(10,y-s-1)%10)}if(u=u||0>t||null!=f[a+1]||(0>s?p:p%h(10,y-s-1)),u=4>r?(w||u)&&(0==r||r==(n.s<0?3:2)):w>5||5==w&&(4==r||u||6==r&&(c>0?s>0?p/h(10,y-s):0:f[a-1])%10&1||r==(n.s<0?8:7)),1>t||!f[0])return f.length=0,u?(t-=n.e+1,f[0]=h(10,t%i),n.e=-t||0):f[0]=n.e=0,n;if(0==c?(f.length=a,l=1,a--):(f.length=a+1,l=h(10,i-c),f[a]=s>0?(p/h(10,y-s)%h(10,s)|0)*l:0),u)for(;;){if(0==a){for(c=1,s=f[0];s>=10;s/=10,c++);for(s=f[0]+=l,l=1;s>=10;s/=10,l++);c!=l&&(n.e++,f[0]==v&&(f[0]=1));break}if(f[a]+=l,f[a]!=v)break;f[a--]=0;l=1}for(c=f.length;0===f[--c];f.pop());}return e&&(n.e>b.maxE?n.c=n.e=null:n.e<b.minE&&(n.c=[n.e=0])),n}var it,k,et,l,a=n.crypto,e=!0,f=0,o=Math.floor,h=Math.pow,ot=Object.prototype.toString,v=1e7,i=7,rt="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ$_",t={},d=9e15,st=1e9,ht=3e3,p="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",s;if(t.absoluteValue=t.abs=function(){var n=new this.constructor(this);return n.s<0&&(n.s=1),r(n)},t.ceil=function(){return r(new this.constructor(this),this.e+1,2)},t.comparedTo=t.cmp=function(n,t){var r,c=this,u=c.c,s=(f=-f,n=new c.constructor(n,t),n.c),i=c.s,h=n.s,e=c.e,o=n.e;if(!i||!h)return null;if(r=u&&!u[0],t=s&&!s[0],r||t)return r?t?0:-h:i;if(i!=h)return i;if(r=0>i,!u||!s)return e==o?0:!u^r?1:-1;if(e!=o)return e>o^r?1:-1;for(i=-1,h=(e=u.length)<(o=s.length)?e:o;++i<h;)if(u[i]!=s[i])return u[i]>s[i]^r?1:-1;return e==o?0:e>o^r?1:-1},t.decimalPlaces=t.dp=function(){var r,n,t=null;if(r=this.c){if(t=((n=r.length-1)-o(this.e/i))*i,n=r[n])for(;n%10==0;n/=10,t--);0>t&&(t=0)}return t},t.dividedBy=t.div=function(n,t){return f=2,s(this,new this.constructor(n,t))},t.dividedToIntegerBy=t.divToInt=function(n,t){var u=this,i=u.constructor;return f=18,r(s(u,new i(n,t),0,1,1),i.precision,i.rounding)},t.equals=t.eq=function(n,t){return f=3,0===this.cmp(n,t)},t.exponential=t.exp=function(){return tt(this)},t.floor=function(){return r(new this.constructor(this),this.e+1,3)},t.greaterThan=t.gt=function(n,t){return f=4,this.cmp(n,t)>0},t.greaterThanOrEqualTo=t.gte=function(n,t){return f=5,t=this.cmp(n,t),1==t||0===t},t.isFinite=function(){return!!this.c},t.isInteger=t.isInt=function(){return!!this.c&&o(this.e/i)>this.c.length-2},t.isNaN=function(){return!this.s},t.isNegative=t.isNeg=function(){return this.s<0},t.isZero=function(){return!!this.c&&0==this.c[0]},t.lessThan=t.lt=function(n,t){return f=6,this.cmp(n,t)<0},t.lessThanOrEqualTo=t.lte=function(n,t){return f=7,t=this.cmp(n,t),-1==t||0===t},t.logarithm=t.log=function(n,t){var k,i,b,o,it,d,h,a,v,w=this,l=w.constructor,nt=l.precision,tt=l.rounding;if(null==n)n=new l(10),k=!0;else{if(f=15,n=new l(n,t),i=n.c,n.s<0||!i||!i[0]||!n.e&&1==i[0]&&1==i.length)return new l(NaN);k=n.eq(10)}if(i=w.c,w.s<0||!i||!i[0]||!w.e&&1==i[0]&&1==i.length)return new l(i&&!i[0]?-1/0:1!=w.s?NaN:i?0:1/0);if(it=k&&(o=i[0],i.length>1||1!=o&&10!=o&&100!=o&&1e3!=o&&1e4!=o&&1e5!=o&&1e6!=o),e=!1,h=nt+5,a=h+10,d=y(w,h),k?(a>p.length&&u(l,1,a,"log"),b=new l(p.slice(0,a))):b=y(n,h),v=s(d,b,h,1),g(v.c,o=nt,tt))do if(h+=10,d=y(w,h),k?(a=h+10,a>p.length&&u(l,1,a,"log"),b=new l(p.slice(0,a))):b=y(n,h),v=s(d,b,h,1),!it){+c(v.c).slice(o+1,o+15)+1==1e14&&(v=r(v,nt+1,0));break}while(g(v.c,o+=10,tt));return e=!0,r(v,nt,tt)},t.minus=function(n,t){var a,c,p,k,l=this,w=l.constructor,h=l.s;if(f=8,n=new w(n,t),t=n.s,!h||!t)return new w(NaN);if(h!=t)return n.s=-t,l.plus(n);var u=l.c,s=n.c,b=o(n.e/i),y=o(l.e/i),g=w.precision,d=w.rounding;if(!y||!b){if(!u||!s)return u?(n.s=-t,n):new w(s?l:NaN);if(!u[0]||!s[0])return l=s[0]?(n.s=-t,n):new w(u[0]?l:3==d?-0:0),e?r(l,g,d):l}if(u=u.slice(),c=u.length,h=y-b){for((k=0>h)?(h=-h,a=u,c=s.length):(b=y,a=s),(y=Math.ceil(g/i))>c&&(c=y),h>(c+=2)&&(h=c,a.length=1),a.reverse(),t=h;t--;a.push(0));a.reverse()}else for((k=c<(p=s.length))&&(p=c),h=t=0;p>t;t++)if(u[t]!=s[t]){k=u[t]<s[t];break}if(k&&(a=u,u=s,s=a,n.s=-n.s),(t=-((p=u.length)-s.length))>0)for(;t--;u[p++]=0);for(y=v-1,t=s.length;t>h;){if(u[--t]<s[t]){for(c=t;c&&!u[--c];u[c]=y);--u[c];u[t]+=v}u[t]-=s[t]}for(;0==u[--p];u.pop());for(;0==u[0];u.shift(),--b);for(u[0]||(u=[b=0],n.s=3==d?-1:1),n.c=u,h=1,t=u[0];t>=10;t/=10,h++);return n.e=h+b*i-1,e?r(n,g,d):n},t.modulo=t.mod=function(n,t){var h,u,i=this,o=i.constructor,c=o.modulo;return f=9,n=new o(n,t),t=n.s,h=!i.c||!t||n.c&&!n.c[0],h||!n.c||i.c&&!i.c[0]?h?new o(NaN):r(new o(i),o.precision,o.rounding):(e=!1,9==c?(n.s=1,u=s(i,n,0,3,1),n.s=t,u.s*=t):u=s(i,n,0,c,1),u=u.times(n),e=!0,i.minus(u))},t.naturalLogarithm=t.ln=function(){return y(this)},t.negated=t.neg=function(){var n=new this.constructor(this);return n.s=-n.s||null,r(n)},t.plus=function(n,t){var l,c=this,y=c.constructor,u=c.s;if(f=10,n=new y(n,t),t=n.s,!u||!t)return new y(NaN);if(u!=t)return n.s=-t,c.minus(n);var s=c.c,h=n.c,p=o(n.e/i),a=o(c.e/i),w=y.precision,b=y.rounding;if(!a||!p){if(!s||!h)return new y(u/0);if(!s[0]||!h[0])return c=h[0]?n:new y(s[0]?c:0*u),e?r(c,w,b):c}if(s=s.slice(),u=a-p){for(0>u?(u=-u,l=s,t=h.length):(p=a,l=h,t=s.length),(a=Math.ceil(w/i))>t&&(t=a),u>++t&&(u=t,l.length=1),l.reverse();u--;l.push(0));l.reverse()}for(s.length-h.length<0&&(l=h,h=s,s=l),u=h.length,t=0,a=v;u;s[u]%=a)t=(s[--u]=s[u]+h[u]+t)/a|0;for(t&&(s.unshift(t),++p),u=s.length;0==s[--u];s.pop());for(n.c=s,u=1,t=s[0];t>=10;t/=10,u++);return n.e=u+p*i-1,e?r(n,w,b):n},t.precision=t.sd=function(n){var t=null,i=this;return n!=t&&n!==!!n&&1!==n&&0!==n&&u(i.constructor,"argument",n,"precision",1),i.c&&(t=ut(i.c),n&&i.e+1>t&&(t=i.e+1)),t},t.round=function(){var n=this,t=n.constructor;return r(new t(n),n.e+1,t.rounding)},t.squareRoot=t.sqrt=function(){var p,n,l,i,y,h,f=this,a=f.c,u=f.s,t=f.e,v=f.constructor,w=new v(.5);if(1!==u||!a||!a[0])return new v(!u||0>u&&(!a||a[0])?NaN:a?f:1/0);for(e=!1,u=Math.sqrt(+f),0==u||u==1/0?(n=c(a),(n.length+t)%2==0&&(n+="0"),u=Math.sqrt(n),t=o((t+1)/2)-(0>t||t%2),u==1/0?n="1e"+t:(n=u.toExponential(),n=n.slice(0,n.indexOf("e")+1)+t),i=new v(n)):i=new v(u.toString()),l=(t=v.precision)+3;;)if(h=i,i=w.times(h.plus(s(f,h,l+2,1))),c(h.c).slice(0,l)===(n=c(i.c)).slice(0,l)){if(n=n.slice(l-3,l+1),"9999"!=n&&(y||"4999"!=n)){+n&&(+n.slice(1)||"5"!=n.charAt(0))||(r(i,t+1,1),p=!i.times(i).eq(f));break}if(!y&&(r(h,t+1,0),h.times(h).eq(f))){i=h;break}l+=4;y=1}return e=!0,r(i,t,v.rounding,p)},t.times=function(n,t){var u,w,y=this,p=y.constructor,c=y.c,l=(f=11,n=new p(n,t),n.c),a=o(y.e/i),s=o(n.e/i),h=y.s;if(t=n.s,n.s=h==t?1:-1,!((a||c&&c[0])&&(s||l&&l[0])))return new p(!h||!t||c&&!c[0]&&!l||l&&!l[0]&&!c?NaN:c&&l?0*n.s:n.s/0);for(w=a+s,h=c.length,t=l.length,t>h&&(u=c,c=l,l=u,s=h,h=t,t=s),s=h+t,u=[];s--;u.push(0));for(a=t-1;a>-1;a--){for(t=0,s=h+a;s>a;)t=u[s]+l[a]*c[s-a-1]+t,u[s--]=t%v|0,t=t/v|0;u[s]=(u[s]+t)%v|0}for(t?++w:u[0]||u.shift(),s=u.length;!u[--s];u.pop());for(n.c=u,h=1,t=u[0];t>=10;t/=10,h++);return n.e=h+w*i-1,e?r(n,p.precision,p.rounding):n},t.toDecimalPlaces=t.toDP=function(n,t){var i=this;return i=new i.constructor(i),null!=n&&b(i,n,"toDP")?r(i,(0|n)+i.e+1,w(i,t,"toDP")):i},t.toExponential=function(n,t){var i=this;return i.c?nt(i,null!=n&&b(i,n,"toExponential")?0|n:null,null!=n&&w(i,t,"toExponential"),1):i.toString()},t.toFixed=function(n,t){var i,r=this,u=r.constructor,f=u.toExpNeg,e=u.toExpPos;return null!=n&&(n=b(r,n,i="toFixed")?r.e+(0|n):null,t=w(r,t,i)),u.toExpNeg=-(u.toExpPos=1/0),null!=n&&r.c?(i=nt(r,n,t),r.s<0&&r.c&&(r.c[0]?i.indexOf("-")<0&&(i="-"+i):i=i.replace("-",""))):i=r.toString(),u.toExpNeg=f,u.toExpPos=e,i},t.toFormat=function(n,t){var o=this;if(!o.c)return o.toString();var r,l=o.s<0,f=o.constructor.format,a=f.groupSeparator,u=+f.groupSize,e=+f.secondaryGroupSize,v=o.toFixed(n,t).split("."),i=v[0],c=v[1],s=l?i.slice(1):i,h=s.length;if(e&&(r=u,u=e,h-=e=r),u>0&&h>0){for(r=h%u||u,i=s.substr(0,r);h>r;r+=u)i+=a+s.substr(r,u);e>0&&(i+=a+s.slice(r));l&&(i="-"+i)}return c?i+f.decimalSeparator+((e=+f.fractionGroupSize)?c.replace(new RegExp("\\d{"+e+"}\\B","g"),"$&"+f.fractionGroupSeparator):c):i},t.toFraction=function(n){var v,r,d,it,a,y,g,nt,b=this,t=b.constructor,p=v=new t(t.ONE),w=y=new t(0),tt=b.c,k=new t(w);if(!tt)return b.toString();for(d=k.e=ut(tt)-b.e-1,k.c[0]=h(10,(g=d%i)<0?i+g:g),(null==n||(!(f=12,a=new t(n)).s||(l=a.cmp(p)<0||!a.c)||t.errors&&o(a.e/i)<a.c.length-1)&&!u(t,"max denominator",n,"toFraction",0)||(n=a).cmp(k)>0)&&(n=d>0?k:p),e=!1,a=new t(c(tt)),g=t.precision,t.precision=d=tt.length*i*2;nt=s(a,k,0,1,1),r=v.plus(nt.times(w)),1!=r.cmp(n);)v=w,w=r,p=y.plus(nt.times(r=p)),y=r,k=a.minus(nt.times(r=k)),a=r;return r=s(n.minus(v),w,0,1,1),y=y.plus(r.times(p)),v=v.plus(r.times(w)),y.s=p.s=b.s,it=s(p,w,d,1).minus(b).abs().cmp(s(y,v,d,1).minus(b).abs())<1?[p+"",w+""]:[y+"",v+""],e=!0,t.precision=g,it},t.toNearest=function(n,t){var i=this,u=i.constructor;return i=new u(i),null==n?(n=new u(u.ONE),t=u.rounding):(f=17,n=new u(n),t=w(i,t,"toNearest")),n.c?i.c&&(n.c[0]?(e=!1,i=s(i,n,0,4>t?[4,5,7,8][t]:t,1).times(n),e=!0,r(i)):i.c=[i.e=0]):i.s&&(n.s&&(n.s=i.s),i=n),i},t.toNumber=function(){var n=this;return+n||(n.s?0*n.s:NaN)},t.toPower=t.pow=function(n,t){var nt,a,b,s,u=this,l=u.constructor,p=u.s,w=(f=13,+(n=new l(n,t))),k=0>w?-w:w,v=l.precision,d=l.rounding;if(!u.c||!n.c||(b=!u.c[0])||!n.c[0])return new l(h(b?0*p:+u,w));if(u=new l(u),nt=u.c.length,!u.e&&u.c[0]==u.s&&1==nt)return u;if(t=n.c.length-1,n.e||n.c[0]!=n.s||t)if(a=o(n.e/i),b=a>=t,!b&&0>p)s=new l(NaN);else{if(b&&ht>nt*i*k){if(s=ft(l,u,k),n.s<0)return l.ONE.div(s)}else{if(p=0>p&&1&n.c[Math.max(a,t)]?-1:1,t=h(+u,w),a=0!=t&&isFinite(t)?new l(t+"").e:o(w*(Math.log("0."+c(u.c))/Math.LN10+u.e+1)),a>l.maxE+1||a<l.minE-1)return new l(a>0?p/0:0);e=!1;l.rounding=u.s=1;k=Math.min(12,(a+"").length);s=tt(n.times(y(u,v+k)),v);s=r(s,v+5,1);g(s.c,v,d)&&(a=v+10,s=r(tt(n.times(y(u,a+k)),a),a+5,1),+c(s.c).slice(v+1,v+15)+1==1e14&&(s=r(s,v+1,0)));s.s=p;e=!0;l.rounding=d}s=r(s,v,d)}else s=r(u,v,d);return s},t.toPrecision=function(n,t){var i=this;return null!=n&&b(i,n,"toPrecision",1)&&i.c?nt(i,0|--n,w(i,t,"toPrecision"),2):i.toString()},t.toSignificantDigits=t.toSD=function(n,t){var i=this,u=i.constructor;return i=new u(i),null!=n&&b(i,n,"toSD",1)?r(i,0|n,w(i,t,"toSD")):r(i,u.precision,u.rounding)},t.toString=function(n){var e,t,o,r=this,f=r.constructor,i=r.e;if(null===i)t=r.s?"Infinity":"NaN";else{if(n===e&&(i<=f.toExpNeg||i>=f.toExpPos))return nt(r,null,f.rounding,1);if(t=c(r.c),0>i){for(;++i;t="0"+t);t="0."+t}else if(o=t.length,i>0)if(++i>o)for(i-=o;i--;t+="0");else o>i&&(t=t.slice(0,i)+"."+t.slice(i));else if(e=t.charAt(0),o>1)t=e+"."+t.slice(1);else if("0"==e)return e;if(null!=n)if((l=!(n>=2&&65>n))||n!=(0|n)&&f.errors)u(f,"base",n,"toString",0);else if(t=it(f,t,0|n,10,r.s),"0"==t)return t}return r.s<0?"-"+t:t},t.truncated=t.trunc=function(){return r(new this.constructor(this),this.e+1,1)},t.valueOf=t.toJSON=function(){return this.toString()},it=function(){function n(n,t,i){for(var u,f,r=[0],e=0,o=n.length;o>e;){for(f=r.length;f--;r[f]*=t);for(r[u=0]+=rt.indexOf(n.charAt(e++));u<r.length;u++)r[u]>i-1&&(null==r[u+1]&&(r[u+1]=0),r[u+1]+=r[u]/i|0,r[u]%=i)}return r.reverse()}return function(t,i,r,u,f){var h,a,p,c,e,y,o=i.indexOf("."),l=t.precision,v=t.rounding;for(37>u&&(i=i.toLowerCase()),o>=0&&(i=i.replace(".",""),y=new t(u),c=ft(t,y,i.length-o),y.c=n(c.toFixed(),10,r),y.e=y.c.length),e=n(i,u,r),h=a=e.length;0==e[--a];e.pop());if(!e[0])return"0";if(0>o?h--:(c.c=e,c.e=h,c.s=f,c=s(c,y,l,v,0,r),e=c.c,p=c.r,h=c.e),o=e[l],a=r/2,p=p||null!=e[l+1],4>v?(null!=o||p)&&(0==v||v==(c.s<0?3:2)):o>a||o==a&&(4==v||p||6==v&&1&e[l-1]||v==(c.s<0?8:7)))for(e.length=l,--r;++e[--l]>r;)e[l]=0,l||(++h,e.unshift(1));else e.length=l;for(a=e.length;!e[--a];);for(o=0,i="";a>=o;i+=rt.charAt(e[o++]));if(0>h){for(;++h;i="0"+i);i="0."+i}else if(o=i.length,++h>o)for(h-=o;h--;i+="0");else o>h&&(i=i.slice(0,h)+"."+i.slice(h));return i}}(),s=function(){function n(n,t,i){var u,r=0,f=n.length;for(n=n.slice();f--;)u=n[f]*t+r,n[f]=u%i|0,r=u/i|0;return r&&n.unshift(r),n}function t(n,t,i,r){var u,f;if(i!=r)f=i>r?1:-1;else for(u=f=0;i>u;u++)if(n[u]!=t[u]){f=n[u]>t[u]?1:-1;break}return f}function u(n,t,i,r){for(var u=0;i--;)n[i]-=u,u=n[i]<t[i]?1:0,n[i]=u*r+n[i]-t[i];for(;!n[0]&&n.length>1;n.shift());}return function(f,e,s,h,c,l){var nt,et,w,rt,ot,y,tt,ft,it,ut,p,b,ht,vt,ct,st,yt,g,lt,at=f.constructor,d=f.s==e.s?1:-1,k=f.c,a=e.c;if(!(k&&k[0]&&a&&a[0]))return new at(f.s&&e.s&&(k?!a||k[0]!=a[0]:a)?k&&0==k[0]||!a?0*d:d/0:NaN);for(l?(rt=1,et=f.e-e.e):(l=v,rt=i,et=o(f.e/rt)-o(e.e/rt)),g=a.length,st=k.length,it=new at(d),ut=it.c=[],w=0;a[w]==(k[w]||0);w++);if(a[w]>(k[w]||0)&&et--,null==s?(d=s=at.precision,h=at.rounding):d=c?s+(f.e-e.e)+1:s,0>d)ut.push(1),ot=!0;else{if(d=d/rt+2|0,w=0,1==g){for(y=0,a=a[0],d++;(st>w||y)&&d--;w++)vt=y*l+(k[w]||0),ut[w]=vt/a|0,y=vt%a|0;ot=y||st>w}else{for(y=l/(a[0]+1)|0,y>1&&(a=n(a,y,l),k=n(k,y,l),g=a.length,st=k.length),ct=g,p=k.slice(0,g),b=p.length;g>b;p[b++]=0);lt=a.slice();lt.unshift(0);yt=a[0];a[1]>=l/2&&yt++;do y=0,nt=t(a,p,g,b),0>nt?(ht=p[0],g!=b&&(ht=ht*l+(p[1]||0)),y=ht/yt|0,y>1?(y>=l&&(y=l-1),tt=n(a,y,l),ft=tt.length,b=p.length,nt=t(tt,p,ft,b),1==nt&&(y--,u(tt,ft>g?lt:a,ft,l))):(0==y&&(nt=y=1),tt=a.slice()),ft=tt.length,b>ft&&tt.unshift(0),u(p,tt,b,l),-1==nt&&(b=p.length,nt=t(a,p,g,b),1>nt&&(y++,u(p,b>g?lt:a,b,l))),b=p.length):0===nt&&(y++,p=[0]),ut[w++]=y,nt&&p[0]?p[b++]=k[ct]||0:(p=[k[ct]],b=1);while((ct++<st||null!=p[0])&&d--);ot=null!=p[0]}ut[0]||ut.shift()}if(1==rt)it.e=et,it.r=+ot;else{for(w=1,d=ut[0];d>=10;d/=10,w++);it.e=w+et*rt-1;r(it,c?s+it.e+1:s,h,ot)}return it}}(),k=function(){function c(n){var i,e,t,r=this,s="config",h=r.errors?parseInt:parseFloat;return n==e||"object"!=typeof n&&!u(r,"object expected",n,s)?r:((t=n[i="precision"])!=e&&((l=1>t||t>st)||h(t)!=t?u(r,i,t,s,0):r[i]=0|t),(t=n[i="rounding"])!=e&&((l=0>t||t>8)||h(t)!=t?u(r,i,t,s,0):r[i]=0|t),(t=n[i="toExpNeg"])!=e&&((l=-d>t||t>0)||h(t)!=t?u(r,i,t,s,0):r[i]=o(t)),(t=n[i="toExpPos"])!=e&&((l=0>t||t>d)||h(t)!=t?u(r,i,t,s,0):r[i]=o(t)),(t=n[i="minE"])!=e&&((l=-d>t||t>0)||h(t)!=t?u(r,i,t,s,0):r[i]=o(t)),(t=n[i="maxE"])!=e&&((l=0>t||t>d)||h(t)!=t?u(r,i,t,s,0):r[i]=o(t)),(t=n[i="errors"])!=e&&(t===!!t||1===t||0===t?(l=f=0,r[i]=!!t):u(r,i,t,s,1)),(t=n[i="crypto"])!=e&&(t===!!t||1===t||0===t?r[i]=!(!t||!a||"object"!=typeof a):u(r,i,t,s,1)),(t=n[i="modulo"])!=e&&((l=0>t||t>9)||h(t)!=t?u(r,i,t,s,0):r[i]=0|t),(n=n[i="format"])!=e&&("object"==typeof n?r[i]=n:u(r,"format object expected",n,s)),r)}function v(n){return new this(n).exp()}function y(n){return new this(n).ln()}function p(n,t){return new this(n).log(t)}function n(n,t,i){var r,u,f=0;for("[object Array]"==ot.call(t[0])&&(t=t[0]),r=new n(t[0]);++f<t.length;){if(u=new n(t[f]),!u.s){r=u;break}r[i](u)&&(r=u)}return r}function w(){return n(this,arguments,"lt")}function k(){return n(this,arguments,"gt")}function g(n,t){return new this(n).pow(t)}function nt(n){var o,r,f,t=0,e=[],s=this,c=new s(s.ONE);if(null!=n&&b(c,n,"random")?n|=0:n=s.precision,r=Math.ceil(n/i),s.crypto)if(a&&a.getRandomValues)for(o=a.getRandomValues(new Uint32Array(r));r>t;)f=o[t],f>=429e7?o[t]=a.getRandomValues(new Uint32Array(1))[0]:e[t++]=f%1e7;else if(a&&a.randomBytes){for(o=a.randomBytes(r*=4);r>t;)f=o[t]+(o[t+1]<<8)+(o[t+2]<<16)+((127&o[t+3])<<24),f>=214e7?a.randomBytes(4).copy(o,t):(e.push(f%1e7),t+=4);t=r/4}else u(s,"crypto unavailable",a,"random");if(!t)for(;r>t;)e[t++]=1e7*Math.random()|0;for(r=e[--t],n%=i,r&&n&&(f=h(10,i-n),e[t]=(r/f|0)*f);0===e[t];t--)e.pop();if(0>t)e=[r=0];else{for(r=-1;0===e[0];)e.shift(),r-=i;for(t=1,f=e[0];f>=10;)f/=10,t++;i>t&&(r-=i-t)}return c.e=r,c.c=e,c}function tt(n){return new this(n).sqrt()}function s(n){function i(n,t){var e=this;if(!(e instanceof i))return u(i,"Decimal called without new",n),new i(n,t);if(e.constructor=i,n instanceof i){if(null==t)return f=0,e.s=n.s,e.e=n.e,e.c=(n=n.c)?n.slice():n,e;if(10==t)return r(new i(n),i.precision,i.rounding);n+=""}return ut(i,e,n,t)}return i.precision=20,i.rounding=4,i.modulo=1,i.toExpNeg=-7,i.toExpPos=21,i.minE=-d,i.maxE=d,i.errors=!0,i.crypto=!1,i.format={decimalSeparator:".",groupSeparator:",",groupSize:3,secondaryGroupSize:0,fractionGroupSeparator:"",fractionGroupSize:0},i.prototype=t,i.ONE=new i(1),i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.EUCLID=9,i.config=c,i.constructor=s,i.exp=v,i.ln=y,i.log=p,i.max=w,i.min=k,i.pow=g,i.sqrt=tt,i.random=nt,null!=n&&i.config(n),i}var ut=function(){var n=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,t=String.prototype.trim||function(){return this.replace(/^\s+|\s+$/g,"")};return function(o,s,h,c){var b,v,a,y,p,w;if("string"!=typeof h&&(h=(y="number"==typeof h||"[object Number]"==ot.call(h))&&0===h&&0>1/h?"-0":h+""),p=h,null==c&&n.test(h))s.s=45===h.charCodeAt(0)?(h=h.slice(1),-1):1;else{if(10==c)return r(new o(h),o.precision,o.rounding);if(h=t.call(h).replace(/^\+(?!-)/,""),s.s=45===h.charCodeAt(0)?(h=h.replace(/^-(?!-)/,""),-1):1,null!=c?c!=(0|c)&&o.errors||(l=!(c>=2&&65>c))?(u(o,"base",c,0,0),w=n.test(h)):(b="["+rt.slice(0,c=0|c)+"]+",h=h.replace(/\.$/,"").replace(/^\./,"0."),(w=new RegExp("^"+b+"(?:\\."+b+")?$",37>c?"i":"").test(h))?(y&&(h.replace(/^0\.0*|\./,"").length>15&&u(o,0,p),y=!y),h=it(o,h,10,c,s.s)):"Infinity"!=h&&"NaN"!=h&&(u(o,"not a base "+c+" number",p),h="NaN")):w=n.test(h),!w)return s.c=s.e=null,"Infinity"!=h&&("NaN"!=h&&u(o,"not a number",p),s.s=null),f=0,s}for((v=h.indexOf("."))>-1&&(h=h.replace(".","")),(a=h.search(/e/i))>0?(0>v&&(v=a),v+=+h.slice(a+1),h=h.substring(0,a)):0>v&&(v=h.length),a=0;48===h.charCodeAt(a);a++);for(c=h.length;48===h.charCodeAt(--c););if(h=h.slice(a,c+1)){if(c=h.length,y&&c>15&&u(o,0,p),s.e=v=v-a-1,s.c=[],a=(v+1)%i,0>v&&(a+=i),c>a){for(a&&s.c.push(+h.slice(0,a)),c-=i;c>a;)s.c.push(+h.slice(a,a+=i));h=h.slice(a);a=i-h.length}else a-=c;for(;a--;h+="0");s.c.push(+h);e&&(s.e>o.maxE?s.c=s.e=null:s.e<o.minE&&(s.c=[s.e=0]))}else s.c=[s.e=0];return f=0,s}}();return s()}(),Bridge.$Decimal=k,"function"==typeof define&&define.amd)define(function(){return k});else if("undefined"!=typeof module&&module.exports){if(module.exports=k,!a)try{a=require("crypto")}catch(ct){}}else et=n.Decimal,k.noConflict=function(){return n.Decimal=et,k}}(Bridge.global);Bridge.Decimal=function(n,t){if(this.constructor!==Bridge.Decimal)return new Bridge.Decimal(n);if(typeof n=="string"){t=t||Bridge.CultureInfo.getCurrentCulture();var i=t&&t.getFormat(Bridge.NumberFormatInfo);if(i&&i.numberDecimalSeparator!=="."&&(n=n.replace(i.numberDecimalSeparator,".")),!/^\s*[+-]?(\d+|\d*\.\d+)(e|E[+-]?\d+)?\s*$/.test(n))throw new Bridge.FormatException;n=n.replace(/\s/g,"")}this.value=Bridge.Decimal.getValue(n)};Bridge.Decimal.$$name="Bridge.Decimal";Bridge.Decimal.prototype.$$name="Bridge.Decimal";Bridge.Decimal.$$inherits=[];Bridge.Class.addExtend(Bridge.Decimal,[Bridge.IComparable,Bridge.IFormattable,Bridge.IComparable$1(Bridge.Decimal),Bridge.IEquatable$1(Bridge.Decimal)]);Bridge.Decimal.getDefaultValue=function(){return new Bridge.Decimal(0)};Bridge.Decimal.getValue=function(n){return Bridge.hasValue(n)?n instanceof Bridge.Decimal?n.value:new Bridge.$Decimal(n):null};Bridge.Decimal.create=function(n){return Bridge.hasValue(n)?n instanceof Bridge.Decimal?n:new Bridge.Decimal(n):null};Bridge.Decimal.lift=function(n){return n==null?null:Bridge.Decimal.create(n)};Bridge.Decimal.prototype.toString=function(n,t){return!n&&!t?this.value.toString():Bridge.Int.format(this.toFloat(),n,t)};Bridge.Decimal.prototype.toFloat=function(){return this.value.toNumber()};Bridge.Decimal.prototype.format=function(n,t){return Bridge.Int.format(this.toFloat(),n,t)};Bridge.Decimal.prototype.decimalPlaces=function(){return this.value.decimalPlaces()};Bridge.Decimal.prototype.dividedToIntegerBy=function(n){return new Bridge.Decimal(this.value.dividedToIntegerBy(Bridge.Decimal.getValue(n)))};Bridge.Decimal.prototype.exponential=function(){return new Bridge.Decimal(this.value.exponential())};Bridge.Decimal.prototype.abs=function(){return new Bridge.Decimal(this.value.abs())};Bridge.Decimal.prototype.floor=function(){return new Bridge.Decimal(this.value.floor())};Bridge.Decimal.prototype.ceil=function(){return new Bridge.Decimal(this.value.ceil())};Bridge.Decimal.prototype.trunc=function(){return new Bridge.Decimal(this.value.trunc())};Bridge.Decimal.round=function(n,t){var i,r;return n=Bridge.Decimal.create(n),i=Bridge.$Decimal.rounding,Bridge.$Decimal.rounding=t,r=new Bridge.Decimal(n.value.round()),Bridge.$Decimal.rounding=i,r};Bridge.Decimal.toDecimalPlaces=function(n,t,i){n=Bridge.Decimal.create(n);return new Bridge.Decimal(n.value.toDecimalPlaces(t,i))};Bridge.Decimal.prototype.compareTo=function(n){return this.value.comparedTo(Bridge.Decimal.getValue(n))};Bridge.Decimal.prototype.add=function(n){return new Bridge.Decimal(this.value.plus(Bridge.Decimal.getValue(n)))};Bridge.Decimal.prototype.sub=function(n){return new Bridge.Decimal(this.value.minus(Bridge.Decimal.getValue(n)))};Bridge.Decimal.prototype.isZero=function(){return this.value.isZero};Bridge.Decimal.prototype.mul=function(n){return new Bridge.Decimal(this.value.times(Bridge.Decimal.getValue(n)))};Bridge.Decimal.prototype.div=function(n){return new Bridge.Decimal(this.value.dividedBy(Bridge.Decimal.getValue(n)))};Bridge.Decimal.prototype.mod=function(n){return new Bridge.Decimal(this.value.modulo(Bridge.Decimal.getValue(n)))};Bridge.Decimal.prototype.neg=function(){return new Bridge.Decimal(this.value.negated())};Bridge.Decimal.prototype.inc=function(){return new Bridge.Decimal(this.value.plus(Bridge.Decimal.getValue(1)))};Bridge.Decimal.prototype.dec=function(){return new Bridge.Decimal(this.value.minus(Bridge.Decimal.getValue(1)))};Bridge.Decimal.prototype.sign=function(){return this.value.isZero()?0:this.value.isNegative()?-1:1};Bridge.Decimal.prototype.clone=function(){return new Bridge.Decimal(this)};Bridge.Decimal.prototype.ne=function(n){return!!this.compareTo(n)};Bridge.Decimal.prototype.lt=function(n){return this.compareTo(n)<0};Bridge.Decimal.prototype.lte=function(n){return this.compareTo(n)<=0};Bridge.Decimal.prototype.gt=function(n){return this.compareTo(n)>0};Bridge.Decimal.prototype.gte=function(n){return this.compareTo(n)>=0};Bridge.Decimal.prototype.equals=function(n){return!this.compareTo(n)};Bridge.Decimal.prototype.equalsT=function(n){return!this.compareTo(n)};Bridge.Decimal.prototype.getHashCode=function(){for(var n=this.sign()*397+this.value.e|0,t=0;t<this.value.c.length;t++)n=n*397+this.value.c[t]|0;return n};Bridge.Decimal.toInt=function(n){if(!n)return null;var t=Bridge.Int.trunc(Bridge.Decimal.getValue(n).toNumber());if(!Bridge.Int.instanceOf(t))throw new Bridge.OverflowException;return t};Bridge.Decimal.tryParse=function(n,t,i){try{return i.v=new Bridge.Decimal(n,t),!0}catch(r){return i.v=new Bridge.Decimal(0),!1}};Bridge.Decimal.toFloat=function(n){return n?Bridge.Decimal.getValue(n).toNumber():null};Bridge.Decimal.setConfig=function(n){Bridge.$Decimal.config(n)};Bridge.Decimal.min=function(){for(var t=[],n=0,i=arguments.length;n<i;n++)t.push(Bridge.Decimal.getValue(arguments[n]));return new Bridge.Decimal(Bridge.$Decimal.min.apply(Bridge.$Decimal,t))};Bridge.Decimal.max=function(){for(var t=[],n=0,i=arguments.length;n<i;n++)t.push(Bridge.Decimal.getValue(arguments[n]));return new Bridge.Decimal(Bridge.$Decimal.max.apply(Bridge.$Decimal,t))};Bridge.Decimal.random=function(n){return new Bridge.Decimal(Bridge.$Decimal.random(n))};Bridge.Decimal.exp=function(n){return new Bridge.Decimal(Bridge.Decimal.getValue(n).exp())};Bridge.Decimal.exp=function(n){return new Bridge.Decimal(Bridge.Decimal.getValue(n).exp())};Bridge.Decimal.ln=function(n){return new Bridge.Decimal(Bridge.Decimal.getValue(n).ln())};Bridge.Decimal.log=function(n,t){return new Bridge.Decimal(Bridge.Decimal.getValue(n).log(t))};Bridge.Decimal.pow=function(n,t){return new Bridge.Decimal(Bridge.Decimal.getValue(n).pow(t))};Bridge.Decimal.sqrt=function(n){return new Bridge.Decimal(Bridge.Decimal.getValue(n).sqrt())};Bridge.Decimal.prototype.isFinite=function(){return this.value.isFinite()};Bridge.Decimal.prototype.isInteger=function(){return this.value.isInteger()};Bridge.Decimal.prototype.isNaN=function(){return this.value.isNaN()};Bridge.Decimal.prototype.isNegative=function(){return this.value.isNegative()};Bridge.Decimal.prototype.isZero=function(){return this.value.isZero()};Bridge.Decimal.prototype.log=function(n){return new Bridge.Decimal(this.value.log(n))};Bridge.Decimal.prototype.ln=function(){return new Bridge.Decimal(this.value.ln())};Bridge.Decimal.prototype.precision=function(){return this.value.precision()};Bridge.Decimal.prototype.round=function(){var t=Bridge.$Decimal.rounding,n;return Bridge.$Decimal.rounding=6,n=new Bridge.Decimal(this.value.round()),Bridge.$Decimal.rounding=t,n};Bridge.Decimal.prototype.sqrt=function(){return new Bridge.Decimal(this.value.sqrt())};Bridge.Decimal.prototype.toDecimalPlaces=function(n,t){return new Bridge.Decimal(this.value.toDecimalPlaces(n,t))};Bridge.Decimal.prototype.toExponential=function(n,t){return this.value.toExponential(n,t)};Bridge.Decimal.prototype.toFixed=function(n,t){return this.value.toFixed(n,t)};Bridge.Decimal.prototype.pow=function(n){return new Bridge.Decimal(this.value.pow(n))};Bridge.Decimal.prototype.toPrecision=function(n,t){return this.value.toPrecision(n,t)};Bridge.Decimal.prototype.toSignificantDigits=function(n,t){return new Bridge.Decimal(this.value.toSignificantDigits(n,t))};Bridge.Decimal.prototype.valueOf=function(){return this.value.valueOf()};Bridge.Decimal.prototype.toFormat=function(n,t,i){var f=Bridge.$Decimal.format,u,e,r;return i&&!i.getFormat?(e=Bridge.merge({},f||{}),Bridge.$Decimal.format=Bridge.merge(e,i),u=this.value.toFormat(n,t)):(i=i||Bridge.CultureInfo.getCurrentCulture(),r=i&&i.getFormat(Bridge.NumberFormatInfo),r&&(Bridge.$Decimal.format.decimalSeparator=r.numberDecimalSeparator,Bridge.$Decimal.format.groupSeparator=r.numberGroupSeparator,Bridge.$Decimal.format.groupSize=r.numberGroupSizes[0]),u=this.value.toFormat(n,t)),Bridge.$Decimal.format=f,u};Bridge.$Decimal.config({precision:29});Bridge.Decimal.Zero=Bridge.Decimal(0);Bridge.Decimal.One=Bridge.Decimal(1);Bridge.Decimal.MinusOne=Bridge.Decimal(-1);Bridge.Decimal.MinValue=Bridge.Decimal("-79228162514264337593543950335");Bridge.Decimal.MaxValue=Bridge.Decimal("79228162514264337593543950335");pt={utcNow:function(){var n=new Date;return new Date(n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate(),n.getUTCHours(),n.getUTCMinutes(),n.getUTCSeconds(),n.getUTCMilliseconds())},today:function(){var n=new Date;return new Date(n.getFullYear(),n.getMonth(),n.getDate())},timeOfDay:function(n){return new Bridge.TimeSpan((n-new Date(n.getFullYear(),n.getMonth(),n.getDate()))*1e4)},isUseGenitiveForm:function(n,t,i,r){for(var f=0,u=t-1;u>=0&&n[u]!==r;u--);if(u>=0){while(--u>=0&&n[u]===r)f++;if(f<=1)return!0}for(u=t+i;u<n.length&&n[u]!==r;u++);if(u<n.length){for(f=0;++u<n.length&&n[u]===r;)f++;if(f<=1)return!0}return!1},format:function(n,t,i){var c=this,r=(i||Bridge.CultureInfo.getCurrentCulture()).getFormat(Bridge.DateTimeFormatInfo),o=n.getFullYear(),u=n.getMonth(),f=n.getDate(),l=n.getDay(),e=n.getHours(),a=n.getMinutes(),v=n.getSeconds(),y=n.getMilliseconds(),s=n.getTimezoneOffset(),h;return t=t||"G",t.length===1?(h=r.getAllDateTimePatterns(t,!0),t=h?h[0]:t):t.length===2&&t.charAt(0)==="%"&&(t=t.charAt(1)),t.replace(/(\\.|'[^']*'|"[^"]*"|d{1,4}|M{1,4}|yyyy|yy|y|HH?|hh?|mm?|ss?|tt?|f{1,3}|z{1,3}|\:|\/)/g,function(n,i,h){var p=n;switch(n){case"dddd":p=r.dayNames[l];break;case"ddd":p=r.abbreviatedDayNames[l];break;case"dd":p=f<10?"0"+f:f;break;case"d":p=f;break;case"MMMM":p=c.isUseGenitiveForm(t,h,4,"d")?r.monthGenitiveNames[u]:r.monthNames[u];break;case"MMM":p=c.isUseGenitiveForm(t,h,3,"d")?r.abbreviatedMonthGenitiveNames[u]:r.abbreviatedMonthNames[u];break;case"MM":p=u+1<10?"0"+(u+1):u+1;break;case"M":p=u+1;break;case"yyyy":p=o;break;case"yy":p=(o%100).toString();p.length===1&&(p="0"+p);break;case"y":p=o%100;break;case"h":case"hh":p=e%12;p?n==="hh"&&p.length===1&&(p="0"+p):p="12";break;case"HH":p=e.toString();p.length===1&&(p="0"+p);break;case"H":p=e;break;case"mm":p=a.toString();p.length===1&&(p="0"+p);break;case"m":p=a;break;case"ss":p=v.toString();p.length===1&&(p="0"+p);break;case"s":p=v;break;case"t":case"tt":p=e<12?r.amDesignator:r.pmDesignator;n==="t"&&(p=p.charAt(0));break;case"f":case"ff":case"fff":p=y.toString();p.length<3&&(p=Array(3-p.length).join("0")+p);n==="ff"?p=p.substr(0,2):n==="f"&&(p=p.charAt(0));break;case"z":p=s/60;p=(p>=0?"-":"+")+Math.floor(Math.abs(p));break;case"zz":case"zzz":p=s/60;p=(p>=0?"-":"+")+Bridge.String.alignString(Math.floor(Math.abs(p)).toString(),2,"0",2);n==="zzz"&&(p+=r.timeSeparator+Bridge.String.alignString(Math.floor(Math.abs(s%60)).toString(),2,"0",2));break;case":":p=r.timeSeparator;break;case"/":p=r.dateSeparator;break;default:p=n.substr(1,n.length-1-(n.charAt(0)!=="\\"))}return p})},parse:function(n,t,i,r){var u=this.parseExact(n,null,t,i,!0);if(u!==null)return u;if(u=Date.parse(n),isNaN(u)){if(!r)throw new Bridge.FormatException("String does not contain a valid string representation of a date and time.");}else return new Date(u)},parseExact:function(n,t,i,r,u){var ft,ct;if(t||(t=["G","g","F","f","D","d","R","r","s","S","U","u","O","o","Y","y","M","m","T","t"]),Bridge.isArray(t)){for(ft=0,ft;ft<t.length;ft++)if(ct=Bridge.Date.parseExact(n,t[ft],i,r,!0),ct!=null)return ct;if(u)return null;throw new Bridge.FormatException("String does not contain a valid string representation of a date and time.");}var y=(i||Bridge.CultureInfo.getCurrentCulture()).getFormat(Bridge.DateTimeFormatInfo),et=y.amDesignator,ot=y.pmDesignator,e=0,k=0,b=0,st,f,c=0,l=1,w=1,h=0,d=0,g=0,v=0,nt="",a=0,ht=0,tt,it,rt,ut,s,o=!1,p=!1,lt,at;if(n==null)throw new Bridge.ArgumentNullException("str");for(t=t||"G",t.length===1?(at=y.getAllDateTimePatterns(t,!0),t=at?at[0]:t):t.length===2&&t.charAt(0)==="%"&&(t=t.charAt(1));k<t.length;){if(st=t.charAt(k),f="",p==="\\")f+=st,k++;else while(t.charAt(k)===st&&k<t.length)f+=st,k++;if(lt=!0,!p)if(f==="yyyy"||f==="yy"||f==="y"){if(f==="yyyy"?c=this.subparseInt(n,e,4,4):f==="yy"?c=this.subparseInt(n,e,2,2):f==="y"&&(c=this.subparseInt(n,e,2,4)),c==null){o=!0;break}e+=c.length;c.length===2&&(c=~~c,c=(c>30?1900:2e3)+c)}else if(f==="MMM"||f==="MMMM"){for(l=0,ut=f==="MMM"?this.isUseGenitiveForm(t,k,3,"d")?y.abbreviatedMonthGenitiveNames:y.abbreviatedMonthNames:this.isUseGenitiveForm(t,k,4,"d")?y.monthGenitiveNames:y.monthNames,b=0;b<ut.length;b++)if(s=ut[b],n.substring(e,e+s.length).toLowerCase()===s.toLowerCase()){l=b%12+1;e+=s.length;break}if(l<1||l>12){o=!0;break}}else if(f==="MM"||f==="M"){if(l=this.subparseInt(n,e,f.length,2),l==null||l<1||l>12){o=!0;break}e+=l.length}else if(f==="dddd"||f==="ddd"){for(ut=f==="ddd"?y.abbreviatedDayNames:y.dayNames,b=0;b<ut.length;b++)if(s=ut[b],n.substring(e,e+s.length).toLowerCase()===s.toLowerCase()){e+=s.length;break}}else if(f==="dd"||f==="d"){if(w=this.subparseInt(n,e,f.length,2),w==null||w<1||w>31){o=!0;break}e+=w.length}else if(f==="hh"||f==="h"){if(h=this.subparseInt(n,e,f.length,2),h==null||h<1||h>12){o=!0;break}e+=h.length}else if(f==="HH"||f==="H"){if(h=this.subparseInt(n,e,f.length,2),h==null||h<0||h>23){o=!0;break}e+=h.length}else if(f==="mm"||f==="m"){if(d=this.subparseInt(n,e,f.length,2),d==null||d<0||d>59)return null;e+=d.length}else if(f==="ss"||f==="s"){if(g=this.subparseInt(n,e,f.length,2),g==null||g<0||g>59){o=!0;break}e+=g.length}else if(f==="u"){if(v=this.subparseInt(n,e,1,7),v==null){o=!0;break}e+=v.length;v.length>3&&(v=v.substring(0,3))}else if(f==="fffffff"||f==="ffffff"||f==="fffff"||f==="ffff"||f==="fff"||f==="ff"||f==="f"){if(v=this.subparseInt(n,e,f.length,7),v==null){o=!0;break}e+=v.length;v.length>3&&(v=v.substring(0,3))}else if(f==="t"){if(n.substring(e,e+1).toLowerCase()===et.charAt(0).toLowerCase())nt=et;else if(n.substring(e,e+1).toLowerCase()===ot.charAt(0).toLowerCase())nt=ot;else{o=!0;break}e+=1}else if(f==="tt"){if(n.substring(e,e+2).toLowerCase()===et.toLowerCase())nt=et;else if(n.substring(e,e+2).toLowerCase()===ot.toLowerCase())nt=ot;else{o=!0;break}e+=2}else if(f==="z"||f==="zz"){if(it=n.charAt(e),it==="-")rt=!0;else if(it==="+")rt=!1;else{o=!0;break}if(e++,a=this.subparseInt(n,e,1,2),a==null||a>14){o=!0;break}e+=a.length;rt&&(a=-a)}else if(f==="zzz"){if(s=n.substring(e,e+6),e+=6,s.length!==6){o=!0;break}if(it=s.charAt(0),it==="-")rt=!0;else if(it==="+")rt=!1;else{o=!0;break}if(tt=1,a=this.subparseInt(s,tt,1,2),a==null||a>14){o=!0;break}if(tt+=a.length,rt&&(a=-a),s.charAt(tt)!==y.timeSeparator){o=!0;break}if(tt++,ht=this.subparseInt(s,tt,1,2),ht==null||a>59){o=!0;break}}else lt=!1;if(p||!lt){if(s=n.substring(e,e+f.length),!p&&(f===":"&&s!==y.timeSeparator||f==="/"&&s!==y.dateSeparator)||s!==f&&f!=="'"&&f!=='"'&&f!=="\\"){o=!0;break}if(p==="\\"&&(p=!1),f!=="'"&&f!=='"'&&f!=="\\")e+=f.length;else if(p===!1)p=f;else{if(p!==f){o=!0;break}p=!1}}}if(p&&(o=!0),o||(e!==n.length?o=!0:l===2?c%4==0&&c%100!=0||c%400==0?w>29&&(o=!0):w>28&&(o=!0):(l===4||l===6||l===9||l===11)&&w>30&&(o=!0)),o){if(u)return null;throw new Bridge.FormatException("String does not contain a valid string representation of a date and time.");}return(h<12&&nt===ot?h=+h+12:h>11&&nt===et&&(h-=12),a===0&&ht===0&&!r)?new Date(c,l-1,w,h,d,g,v):new Date(Date.UTC(c,l-1,w,h-a,d-ht,g,v))},subparseInt:function(n,t,i,r){for(var f,u=r;u>=i;u--){if(f=n.substring(t,t+u),f.length<i)return null;if(/^\d+$/.test(f))return f}return null},tryParse:function(n,t,i,r){return(i.v=this.parse(n,t,r,!0),i.v==null)?(i.v=new Date(-864e13),!1):!0},tryParseExact:function(n,t,i,r,u){return(r.v=this.parseExact(n,t,i,u,!0),r.v==null)?(r.v=new Date(-864e13),!1):!0},isDaylightSavingTime:function(n){var t=Bridge.Date.today();return t.setMonth(0),t.setDate(1),t.getTimezoneOffset()!==n.getTimezoneOffset()},toUTC:function(n){return new Date(n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate(),n.getUTCHours(),n.getUTCMinutes(),n.getUTCSeconds(),n.getUTCMilliseconds())},toLocal:function(n){return new Date(Date.UTC(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()))}};Bridge.Date=pt;Bridge.define("Bridge.TimeSpan",{inherits:[Bridge.IComparable],statics:{fromDays:function(n){return new Bridge.TimeSpan(n*864e9)},fromHours:function(n){return new Bridge.TimeSpan(n*36e9)},fromMilliseconds:function(n){return new Bridge.TimeSpan(n*1e4)},fromMinutes:function(n){return new Bridge.TimeSpan(n*6e8)},fromSeconds:function(n){return new Bridge.TimeSpan(n*1e7)},fromTicks:function(n){return new Bridge.TimeSpan(n)},constructor:function(){this.zero=new Bridge.TimeSpan(0);this.maxValue=new Bridge.TimeSpan(864e13);this.minValue=new Bridge.TimeSpan(-864e13)},getDefaultValue:function(){return new Bridge.TimeSpan(0)}},constructor:function(){this.ticks=0;arguments.length===1?this.ticks=arguments[0]:arguments.length===3?this.ticks=((arguments[0]*60+arguments[1])*60+arguments[2])*1e7:arguments.length===4?this.ticks=(((arguments[0]*24+arguments[1])*60+arguments[2])*60+arguments[3])*1e7:arguments.length===5&&(this.ticks=((((arguments[0]*24+arguments[1])*60+arguments[2])*60+arguments[3])*1e3+arguments[4])*1e4)},getTicks:function(){return this.ticks},getDays:function(){return this.ticks/864e9|0},getHours:function(){return this.ticks/36e9%24|0},getMilliseconds:function(){return this.ticks/1e4%1e3|0},getMinutes:function(){return this.ticks/6e8%60|0},getSeconds:function(){return this.ticks/1e7%60|0},getTotalDays:function(){return this.ticks/864e9},getTotalHours:function(){return this.ticks/36e9},getTotalMilliseconds:function(){return this.ticks/1e4},getTotalMinutes:function(){return this.ticks/6e8},getTotalSeconds:function(){return this.ticks/1e7},get12HourHour:function(){return this.getHours()>12?this.getHours()-12:this.getHours()===0?12:this.getHours()},add:function(n){return new Bridge.TimeSpan(this.ticks+n.ticks)},subtract:function(n){return new Bridge.TimeSpan(this.ticks-n.ticks)},duration:function(){return new Bridge.TimeSpan(Math.abs(this.ticks))},negate:function(){return new Bridge.TimeSpan(-this.ticks)},compareTo:function(n){return this.ticks<n.ticks?-1:this.ticks>n.ticks?1:0},equals:function(n){return n.ticks===this.ticks},format:function(n,t){return this.toString(n,t)},toString:function(n,t){var r=this.ticks,f="",i=this,e=(t||Bridge.CultureInfo.getCurrentCulture()).getFormat(Bridge.DateTimeFormatInfo),u=function(n,t){return Bridge.String.alignString((n|0).toString(),t||2,"0",2)};return n?n.replace(/dd?|HH?|hh?|mm?|ss?|tt?/g,function(n){switch(n){case"d":return i.getDays();case"dd":return u(i.getDays());case"H":return i.getHours();case"HH":return u(i.getHours());case"h":return i.get12HourHour();case"hh":return u(i.get12HourHour());case"m":return i.getMinutes();case"mm":return u(i.getMinutes());case"s":return i.getSeconds();case"ss":return u(i.getSeconds());case"t":return(i.getHours()<12?e.amDesignator:e.pmDesignator).substring(0,1);case"tt":return i.getHours()<12?e.amDesignator:e.pmDesignator}}):(Math.abs(r)>=864e9&&(f+=u(r/864e9)+".",r%=864e9),f+=u(r/36e9)+":",r%=36e9,f+=u(r/6e8|0)+":",r%=6e8,f+=u(r/1e7),r%=1e7,r>0&&(f+="."+u(r,7)),f)}});Bridge.Class.addExtend(Bridge.TimeSpan,[Bridge.IComparable$1(Bridge.TimeSpan),Bridge.IEquatable$1(Bridge.TimeSpan)]);Bridge.define("Bridge.Text.StringBuilder",{constructor:function(){this.buffer=[];this.capacity=16;arguments.length===1?this.append(arguments[0]):arguments.length===2?(this.append(arguments[0]),this.setCapacity(arguments[1])):arguments.length===3&&this.append(arguments[0],arguments[1],arguments[2])},getLength:function(){if(this.buffer.length<2)return this.buffer[0]?this.buffer[0].length:0;var n=this.buffer.join("");return this.buffer=[],this.buffer[0]=n,n.length},getCapacity:function(){var n=this.getLength();return this.capacity>n?this.capacity:n},setCapacity:function(n){var t=this.getLength();n>t&&(this.capacity=n)},toString:function(){var n=this.buffer.join(""),t,i;return(this.buffer=[],this.buffer[0]=n,arguments.length===2)?(t=arguments[0],i=arguments[1],this.checkLimits(n,t,i),n.substr(t,i)):n},append:function(n){var i,t;if(n==null)return this;if(arguments.length===2){if(t=arguments[1],t===0)return this;if(t<0)throw new Bridge.ArgumentOutOfRangeException("count","cannot be less than zero");n=Array(t+1).join(n).toString()}else if(arguments.length===3){if(i=arguments[1],t=arguments[2],t===0)return this;this.checkLimits(n,i,t);n=n.substr(i,t)}return this.buffer[this.buffer.length]=n,this},appendFormat:function(){return this.append(Bridge.String.format.apply(Bridge.String,arguments))},clear:function(){return this.buffer=[],this},appendLine:function(){return arguments.length===1&&this.append(arguments[0]),this.append("\r\n")},equals:function(n){return n==null?!1:n===this?!0:this.toString()===n.toString()},remove:function(n,t){var i=this.buffer.join("");return(this.checkLimits(i,n,t),i.length===t&&n===0)?this.clear():(t>0&&(this.buffer=[],this.buffer[0]=i.substring(0,n),this.buffer[1]=i.substring(n+t,i.length)),this)},insert:function(n,t){var r,i;if(t==null)return this;if(arguments.length===3){if(r=arguments[2],r===0)return this;if(r<0)throw new Bridge.ArgumentOutOfRangeException("count","cannot be less than zero");t=Array(r+1).join(t).toString()}return i=this.buffer.join(""),this.buffer=[],n<1?(this.buffer[0]=t,this.buffer[1]=i):n>=i.length?(this.buffer[0]=i,this.buffer[1]=t):(this.buffer[0]=i.substring(0,n),this.buffer[1]=t,this.buffer[2]=i.substring(n,i.length)),this},replace:function(n,t){var f=new RegExp(n,"g"),i=this.buffer.join("");if(this.buffer=[],arguments.length===4){var r=arguments[2],u=arguments[3],e=i.substr(r,u);this.checkLimits(i,r,u);this.buffer[0]=i.substring(0,r);this.buffer[1]=e.replace(f,t);this.buffer[2]=i.substring(r+u,i.length)}else this.buffer[0]=i.replace(f,t);return this},checkLimits:function(n,t,i){if(i<0)throw new Bridge.ArgumentOutOfRangeException("length","must be non-negative");if(t<0)throw new Bridge.ArgumentOutOfRangeException("startIndex","startIndex cannot be less than zero");if(i>n.length-t)throw new Bridge.ArgumentOutOfRangeException("Index and length must refer to a location within the string");}}),function(){var n=RegExp("[-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]","g"),t=function(t){return t.replace(n,"\\$&")};Bridge.regexpEscape=t}();b={toIndex:function(n,t){if(t.length!==(n.$s?n.$s.length:1))throw new Bridge.ArgumentException("Invalid number of indices");if(t[0]<0||t[0]>=(n.$s?n.$s[0]:n.length))throw new Bridge.ArgumentException("Index 0 out of range");var r=t[0],i;if(n.$s)for(i=1;i<n.$s.length;i++){if(t[i]<0||t[i]>=n.$s[i])throw new Bridge.ArgumentException("Index "+i+" out of range");r=r*n.$s[i]+t[i]}return r},$get:function(n){var t=this[Bridge.Array.toIndex(this,n)];return typeof t!="undefined"?t:this.$v},get:function(n){var t=n[Bridge.Array.toIndex(n,Array.prototype.slice.call(arguments,1))];return typeof t!="undefined"?t:n.$v},$set:function(n,t){this[Bridge.Array.toIndex(this,Array.prototype.slice.call(n,0))]=t},set:function(n,t){var i=Array.prototype.slice.call(arguments,2);n[Bridge.Array.toIndex(n,i)]=t},getLength:function(n,t){if(t>=(n.$s?n.$s.length:1))throw new Bridge.ArgumentException("Invalid dimension");return n.$s?n.$s[t]:n.length},getRank:function(n){return n.$s?n.$s.length:1},getLower:function(){return 0},create:function(n,t){var i=[],h=arguments.length>2?1:0,r,f,e,u,o,s;for(i.$v=n,i.$s=[],i.get=Bridge.Array.$get,i.set=Bridge.Array.$set,r=2;r<arguments.length;r++)h*=arguments[r],i.$s[r-2]=arguments[r];if(i.length=h,t)for(r=0;r<i.length;r++){for(o=[],s=r,f=i.$s.length-1;f>=0;f--)u=s%i.$s[f],o.unshift(u),s=Bridge.Int.div(s-u,i.$s[f]);for(e=t,u=0;u<o.length;u++)e=e[o[u]];i[r]=e}return i},init:function(n,t){for(var r=new Array(n),u=Bridge.isFunction(t),i=0;i<n;i++)r[i]=u?t():t;return r},toEnumerable:function(n){return new Bridge.ArrayEnumerable(n)},toEnumerator:function(n){return new Bridge.ArrayEnumerator(n)},is:function(n,t){return n instanceof Bridge.ArrayEnumerator?n.constructor===t||n instanceof t||t===Bridge.ArrayEnumerator||t.$$name&&Bridge.String.startsWith(t.$$name,"Bridge.IEnumerator")?!0:!1:Bridge.isArray(n)?n.constructor===t||n instanceof t?!0:t===Bridge.IEnumerable||t===Bridge.ICollection||t===Bridge.ICloneable||t.$$name&&Bridge.String.startsWith(t.$$name,"Bridge.IEnumerable$1")||t.$$name&&Bridge.String.startsWith(t.$$name,"Bridge.ICollection$1")||t.$$name&&Bridge.String.startsWith(t.$$name,"Bridge.IList$1")?!0:!1:!1},clone:function(n){return n.length===1?[n[0]]:n.slice(0)},getCount:function(n){return Bridge.isArray(n)?n.length:Bridge.isFunction(n.getCount)?n.getCount():0},add:function(n,t){Bridge.isArray(n)?n.push(t):Bridge.isFunction(n.add)&&n.add(t)},clear:function(n){Bridge.isArray(n)?n.length=0:Bridge.isFunction(n.clear)&&n.clear()},fill:function(n,t,i,r){if(i<0||r<0||i+r>n.length)throw new Bridge.ArgumentException;for(var u=Bridge.isFunction(t);--r>=0;)n[i+r]=u?t():t},copy:function(n,t,i,r,u){if(t<0||r<0||u<0)throw new Bridge.ArgumentOutOfRangeException;if(u>n.length-t||u>i.length-r)throw new Bridge.ArgumentException;if(t<r&&n===i)while(--u>=0)i[r+u]=n[t+u];else for(var f=0;f<u;f++)i[r+f]=n[t+f]},indexOf:function(n,t){if(Bridge.isArray(n)){for(var r,i=0,u=n.length;i<u;i++)if(r=n[i],r===t||Bridge.EqualityComparer$1.$default.equals(r,t))return i}else if(Bridge.isFunction(n.indexOf))return n.indexOf(t);return-1},contains:function(n,t){return Bridge.isArray(n)?Bridge.Array.indexOf(n,t)>-1:Bridge.isFunction(n.contains)?n.contains(t):!1},remove:function(n,t){if(Bridge.isArray(n)){var i=Bridge.Array.indexOf(n,t);if(i>-1)return n.splice(i,1),!0}else if(Bridge.isFunction(n.remove))return n.remove(t);return!1},insert:function(n,t,i){Bridge.isArray(n)?n.splice(t,0,i):Bridge.isFunction(n.insert)&&n.insert(t,i)},removeAt:function(n,t){Bridge.isArray(n)?n.splice(t,1):Bridge.isFunction(n.removeAt)&&n.removeAt(t)},getItem:function(n,t){return Bridge.isArray(n)?n[t]:Bridge.isFunction(n.get)?n.get(t):Bridge.isFunction(n.getItem)?n.getItem(t):Bridge.isFunction(n.get_Item)?n.get_Item(t):void 0},setItem:function(n,t,i){Bridge.isArray(n)?n[t]=i:Bridge.isFunction(n.set)?n.set(t,i):Bridge.isFunction(n.setItem)?n.setItem(t,i):Bridge.isFunction(n.set_Item)&&n.set_Item(t,i)},resize:function(n,t,i){var u,f,r;if(t<0)throw new Bridge.ArgumentOutOfRangeException("newSize",null,null,t);for(u=0,f=Bridge.isFunction(i),n?(u=n.length,n.length=t):n=new Array(t),r=u;r<t;r++)n[r]=f?i():i},reverse:function(n,t,i){var r,u,f;if(!b)throw new Bridge.ArgumentNullException("arr");if(t||t===0||(t=0,i=n.length),t<0||i<0)throw new Bridge.ArgumentOutOfRangeException(t<0?"index":"length","Non-negative number required.");if(b.length-t<i)throw new Bridge.ArgumentException("Offset and length were out of bounds for the array or count is greater than the number of elements from index to the end of the source collection.");if(Bridge.Array.getRank(n)!==1)throw new Bridge.Exception("Only single dimension arrays are supported here.");for(r=t,u=t+i-1;r<u;)f=n[r],n[r]=n[u],n[u]=f,r++,u--},binarySearch:function(n,t,i,r,u){var o,f,s,e,h;if(!n)throw new Bridge.ArgumentNullException("array");if(o=0,t<o||i<0)throw new Bridge.ArgumentOutOfRangeException(t<o?"index":"length","Non-negative number required.");if(n.length-(t-o)<i)throw new Bridge.ArgumentException("Offset and length were out of bounds for the array or count is greater than the number of elements from index to the end of the source collection.");if(Bridge.Array.getRank(n)!==1)throw new Bridge.RankException("Only single dimensional arrays are supported for the requested action.");for(u||(u=Bridge.Comparer$1.$default),f=t,s=t+i-1;f<=s;){e=f+(s-f>>1);try{h=u.compare(n[e],r)}catch(c){throw new Bridge.InvalidOperationException("Failed to compare two elements in the array.",c);}if(h===0)return e;h<0?f=e+1:s=e-1}return~f},sort:function(n,t,i,r){var f,u;if(!n)throw new Bridge.ArgumentNullException("array");if(arguments.length===2&&typeof t=="object"&&(r=t,t=null),Bridge.isNumber(t)||(t=0),Bridge.isNumber(i)||(i=n.length),r||(r=Bridge.Comparer$1.$default),t===0&&i===n.length)n.sort(Bridge.fn.bind(r,r.compare));else for(f=n.slice(t,t+i),f.sort(Bridge.fn.bind(r,r.compare)),u=t;u<t+i;u++)n[u]=f[u-t]}};Bridge.Array=b;Array.prototype.map||(Array.prototype.map=function(n,t){for(var r=this.length,u=new Array(r),i=0;i<r;i++)i in this&&(u[i]=n.call(t,this[i],i,this));return u});Array.prototype.some||(Array.prototype.some=function(n,t){for(var r=this.length,i=0;i<r;i++)if(i in this&&n.call(t,this[i],i,this))return!0;return!1});Array.prototype.indexOf||(Array.prototype.indexOf=function(n,t){var r,f,u,i;if(this==null)throw new TypeError('"this" is null or not defined');if((f=Object(this),u=f.length>>>0,u===0)||(i=+t||0,Math.abs(i)===Infinity&&(i=0),i>=u))return-1;for(r=Math.max(i>=0?i:u-Math.abs(i),0);r<u;){if(r in f&&f[r]===n)return r;r++}return-1});Bridge.define("Bridge.IEnumerable");Bridge.define("Bridge.IEnumerator");Bridge.define("Bridge.IEqualityComparer");Bridge.define("Bridge.ICollection",{inherits:[Bridge.IEnumerable]});Bridge.Class.generic("Bridge.IEnumerator$1",function(n){var t=Bridge.Class.genericName("Bridge.IEnumerator$1",n);return Bridge.Class.cache[t]||(Bridge.Class.cache[t]=Bridge.define(t,{inherits:[Bridge.IEnumerator]}))});Bridge.Class.generic("Bridge.IEnumerable$1",function(n){var t=Bridge.Class.genericName("Bridge.IEnumerable$1",n);return Bridge.Class.cache[t]||(Bridge.Class.cache[t]=Bridge.define(t,{inherits:[Bridge.IEnumerable]}))});Bridge.Class.generic("Bridge.ICollection$1",function(n){var t=Bridge.Class.genericName("Bridge.ICollection$1",n);return Bridge.Class.cache[t]||(Bridge.Class.cache[t]=Bridge.define(t,{inherits:[Bridge.IEnumerable$1(n)]}))});Bridge.Class.generic("Bridge.IEqualityComparer$1",function(n){var t=Bridge.Class.genericName("Bridge.IEqualityComparer$1",n);return Bridge.Class.cache[t]||(Bridge.Class.cache[t]=Bridge.define(t,{}))});Bridge.Class.generic("Bridge.IDictionary$2",function(n,t){var i=Bridge.Class.genericName("Bridge.IDictionary$2",n,t);return Bridge.Class.cache[i]||(Bridge.Class.cache[i]=Bridge.define(i,{inherits:[Bridge.IEnumerable$1(Bridge.KeyValuePair$2(n,t))]}))});Bridge.Class.generic("Bridge.IList$1",function(n){var t=Bridge.Class.genericName("Bridge.IList$1",n);return Bridge.Class.cache[t]||(Bridge.Class.cache[t]=Bridge.define(t,{inherits:[Bridge.ICollection$1(n)]}))});Bridge.Class.generic("Bridge.IComparer$1",function(n){var t=Bridge.Class.genericName("Bridge.IComparer$1",n);return Bridge.Class.cache[t]||(Bridge.Class.cache[t]=Bridge.define(t,{}))});Bridge.Class.generic("Bridge.ISet$1",function(n){var t=Bridge.Class.genericName("Bridge.ISet$1",n);return Bridge.Class.cache[t]||(Bridge.Class.cache[t]=Bridge.define(t,{inherits:[Bridge.ICollection$1(n)]}))});Bridge.define("Bridge.CustomEnumerator",{inherits:[Bridge.IEnumerator],constructor:function(n,t,i,r,u){this.$moveNext=n;this.$getCurrent=t;this.$dispose=r;this.$reset=i;this.scope=u},moveNext:function(){try{return this.$moveNext.call(this.scope)}catch(n){this.dispose.call(this.scope);throw n;}},getCurrent:function(){return this.$getCurrent.call(this.scope)},getCurrent$1:function(){return this.$getCurrent.call(this.scope)},reset:function(){this.$reset&&this.$reset.call(this.scope)},dispose:function(){this.$dispose&&this.$dispose.call(this.scope)}});Bridge.define("Bridge.ArrayEnumerator",{inherits:[Bridge.IEnumerator],constructor:function(n){this.array=n;this.reset()},moveNext:function(){return this.index++,this.index<this.array.length},getCurrent:function(){return this.array[this.index]},getCurrent$1:function(){return this.array[this.index]},reset:function(){this.index=-1},dispose:Bridge.emptyFn});Bridge.define("Bridge.ArrayEnumerable",{inherits:[Bridge.IEnumerable],constructor:function(n){this.array=n},getEnumerator:function(){return new Bridge.ArrayEnumerator(this.array)}});Bridge.Class.generic("Bridge.EqualityComparer$1",function(n){var t=Bridge.Class.genericName("Bridge.EqualityComparer$1",n);return Bridge.Class.cache[t]||(Bridge.Class.cache[t]=Bridge.define(t,{inherits:[Bridge.IEqualityComparer$1(n)],equals:function(n,t){if(Bridge.isDefined(n,!0)){if(Bridge.isDefined(t,!0)){var i=n&&n.$$name;return!i||Bridge.isFunction(n.equals)?Bridge.equals(n,t):n===t}}else return!Bridge.isDefined(t,!0);return!1},getHashCode:function(n){return Bridge.isDefined(n,!0)?Bridge.getHashCode(n):0}}))});Bridge.EqualityComparer$1.$default=new Bridge.EqualityComparer$1(Object)();Bridge.Class.generic("Bridge.Comparer$1",function(n){var t=Bridge.Class.genericName("Bridge.Comparer$1",n);return Bridge.Class.cache[t]||(Bridge.Class.cache[t]=Bridge.define(t,{inherits:[Bridge.IComparer$1(n)],constructor:function(n){this.fn=n;this.compare=n}}))});Bridge.Comparer$1.$default=new Bridge.Comparer$1(Object)(function(n,t){if(Bridge.hasValue(n)){if(!Bridge.hasValue(t))return 1}else return Bridge.hasValue(t)?-1:0;return Bridge.compare(n,t)});Bridge.Class.generic("Bridge.KeyValuePair$2",function(n,t){var i=Bridge.Class.genericName("Bridge.KeyValuePair$2",n,t);return Bridge.Class.cache[i]||(Bridge.Class.cache[i]=Bridge.define(i,{constructor:function(n,t){this.key=n;this.value=t},toString:function(){var n="[";return this.key!=null&&(n+=this.key.toString()),n+=", ",this.value!=null&&(n+=this.value.toString()),n+"]"}}))});Bridge.Class.generic("Bridge.Dictionary$2",function(n,t){var i=Bridge.Class.genericName("Bridge.Dictionary$2",n,t);return Bridge.Class.cache[i]||(Bridge.Class.cache[i]=Bridge.define(i,{inherits:[Bridge.IDictionary$2(n,t)],constructor:function(i,r){var f,e,o,s,u;if(this.comparer=r||Bridge.EqualityComparer$1.$default,this.clear(),Bridge.is(i,Bridge.Dictionary$2(n,t)))for(f=Bridge.getEnumerator(i);f.moveNext();)e=f.getCurrent(),this.add(e.key,e.value);else if(Object.prototype.toString.call(i)==="[object Object]")for(o=Bridge.getPropertyNames(i),u=0;u<o.length;u++)s=o[u],this.add(s,i[s])},getKeys:function(){return new Bridge.DictionaryCollection$1(n)(this,!0)},getValues:function(){return new Bridge.DictionaryCollection$1(t)(this,!1)},clear:function(){this.entries={};this.count=0},findEntry:function(n){var r=this.comparer.getHashCode(n),i,t;if(Bridge.isDefined(this.entries[r]))for(i=this.entries[r],t=0;t<i.length;t++)if(this.comparer.equals(i[t].key,n))return i[t]},containsKey:function(n){return!!this.findEntry(n)},containsValue:function(n){var i,t,r;for(i in this.entries)if(this.entries.hasOwnProperty(i))for(r=this.entries[i],t=0;t<r.length;t++)if(this.comparer.equals(r[t].value,n))return!0;return!1},get:function(n){var t=this.findEntry(n);if(!t)throw new Bridge.KeyNotFoundException("Key "+n+" does not exist.");return t.value},getItem:function(n){return this.get(n)},set:function(i,r,u){var f=this.findEntry(i),e;if(f){if(u)throw new Bridge.ArgumentException("Key "+i+" already exists.");f.value=r;return}e=this.comparer.getHashCode(i);f=new Bridge.KeyValuePair$2(n,t)(i,r);this.entries[e]?this.entries[e].push(f):this.entries[e]=[f];this.count++},setItem:function(n,t,i){this.set(n,t,i)},add:function(n,t){this.set(n,t,!0)},remove:function(n){var r=this.comparer.getHashCode(n),t,i;if(!this.entries[r])return!1;for(t=this.entries[r],i=0;i<t.length;i++)if(this.comparer.equals(t[i].key,n))return t.splice(i,1),t.length==0&&delete this.entries[r],this.count--,!0;return!1},getCount:function(){return this.count},getComparer:function(){return this.comparer},tryGetValue:function(n,i){var r=this.findEntry(n);return i.v=r?r.value:Bridge.getDefaultValue(t),!!r},getCustomEnumerator:function(n){var r=Bridge.getPropertyNames(this.entries),t=-1,i;return new Bridge.CustomEnumerator(function(){return((t<0||i>=this.entries[r[t]].length-1)&&(i=-1,t++),t>=r.length)?!1:(i++,!0)},function(){return n(this.entries[r[t]][i])},function(){t=-1},null,this)},getEnumerator:function(){return this.getCustomEnumerator(function(n){return n})}}))});Bridge.Class.generic("Bridge.DictionaryCollection$1",function(n){var t=Bridge.Class.genericName("Bridge.DictionaryCollection$1",n);return Bridge.Class.cache[t]||(Bridge.Class.cache[t]=Bridge.define(t,{inherits:[Bridge.ICollection$1(n)],constructor:function(n,t){this.dictionary=n;this.keys=t},getCount:function(){return this.dictionary.getCount()},getEnumerator:function(){return this.dictionary.getCustomEnumerator(this.keys?function(n){return n.key}:function(n){return n.value})},contains:function(n){return this.keys?this.dictionary.containsKey(n):this.dictionary.containsValue(n)},add:function(){throw new Bridge.NotSupportedException;},clear:function(){throw new Bridge.NotSupportedException;},remove:function(){throw new Bridge.NotSupportedException;}}))});Bridge.Class.generic("Bridge.List$1",function(n){var t=Bridge.Class.genericName("Bridge.List$1",n);return Bridge.Class.cache[t]||(Bridge.Class.cache[t]=Bridge.define(t,{inherits:[Bridge.ICollection$1(n),Bridge.ICollection,Bridge.IList$1(n)],constructor:function(n){this.items=Object.prototype.toString.call(n)==="[object Array]"?Bridge.Array.clone(n):Bridge.is(n,Bridge.IEnumerable)?Bridge.toArray(n):[]},checkIndex:function(n){if(n<0||n>this.items.length-1)throw new Bridge.ArgumentOutOfRangeException("Index out of range");},getCount:function(){return this.items.length},get:function(n){return this.checkIndex(n),this.items[n]},getItem:function(n){return this.get(n)},set:function(n,t){this.checkReadOnly();this.checkIndex(n);this.items[n]=t},setItem:function(n,t){this.set(n,t)},add:function(n){this.checkReadOnly();this.items.push(n)},addRange:function(n){this.checkReadOnly();for(var i=Bridge.toArray(n),t=0,r=i.length;t<r;++t)this.items.push(i[t])},clear:function(){this.checkReadOnly();this.items=[]},indexOf:function(n,t){var i,r;for(Bridge.isDefined(t)||(t=0),t!==0&&this.checkIndex(t),i=t;i<this.items.length;i++)if(r=this.items[i],r===n||Bridge.EqualityComparer$1.$default.equals(r,n))return i;return-1},insertRange:function(n,t){var r,i;for(this.checkReadOnly(),n!==this.items.length&&this.checkIndex(n),r=Bridge.toArray(t),i=0;i<r.length;i++)this.insert(n++,r[i])},contains:function(n){return this.indexOf(n)>-1},getEnumerator:function(){return new Bridge.ArrayEnumerator(this.items)},getRange:function(t,i){Bridge.isDefined(t)||(t=0);Bridge.isDefined(i)||(i=this.items.length);t!==0&&this.checkIndex(t);this.checkIndex(t+i-1);for(var u=[],f=t+i,r=t;r<f;r++)u.push(this.items[r]);return new Bridge.List$1(n)(u)},insert:function(n,t){if(this.checkReadOnly(),n!==this.items.length&&this.checkIndex(n),Bridge.isArray(t))for(var i=0;i<t.length;i++)this.insert(n++,t[i]);else this.items.splice(n,0,t)},join:function(n){return this.items.join(n)},lastIndexOf:function(n,t){Bridge.isDefined(t)||(t=this.items.length-1);t!==0&&this.checkIndex(t);for(var i=t;i>=0;i--)if(n===this.items[i])return i;return-1},remove:function(n){this.checkReadOnly();var t=this.indexOf(n);return t<0?!1:(this.checkIndex(t),this.items.splice(t,1),!0)},removeAt:function(n){this.checkReadOnly();this.checkIndex(n);this.items.splice(n,1)},removeRange:function(n,t){this.checkReadOnly();this.checkIndex(n);this.items.splice(n,t)},reverse:function(){this.checkReadOnly();this.items.reverse()},slice:function(n,t){return this.checkReadOnly(),new Bridge.List$1(this.$$name.substr(this.$$name.lastIndexOf("$")+1))(this.items.slice(n,t))},sort:function(n){this.checkReadOnly();this.items.sort(n||Bridge.Comparer$1.$default.compare)},splice:function(n,t,i){this.checkReadOnly();this.items.splice(n,t,i)},unshift:function(){this.checkReadOnly();this.items.unshift()},toArray:function(){return Bridge.toArray(this)},checkReadOnly:function(){if(this.readOnly)throw new Bridge.NotSupportedException;},binarySearch:function(n,t,i,r){return arguments.length===1&&(i=n,n=null),arguments.length===2&&(i=n,r=t,n=null,t=null),Bridge.isNumber(n)||(n=0),Bridge.isNumber(t)||(t=this.items.length),r||(r=Bridge.Comparer$1.$default),Bridge.Array.binarySearch(this.items,n,t,i,r)}}))});Bridge.Class.generic("Bridge.ReadOnlyCollection$1",function(n){var t=Bridge.Class.genericName("Bridge.ReadOnlyCollection$1",n);return Bridge.Class.cache[t]||(Bridge.Class.cache[t]=Bridge.define(t,{inherits:[Bridge.List$1(n)],constructor:function(n){if(n==null)throw new Bridge.ArgumentNullException("list");Bridge.ReadOnlyCollection$1.prototype.$constructor.call(this,n);this.readOnly=!0}}))});Bridge.define("Bridge.Task",{constructor:function(n,t){this.action=n;this.state=t;this.error=null;this.status=Bridge.TaskStatus.created;this.callbacks=[];this.result=null},statics:{delay:function(n,t){var i=new Bridge.Task;return setTimeout(function(){i.setResult(t)},n),i},fromResult:function(n){var t=new Bridge.Task;return t.status=Bridge.TaskStatus.ranToCompletion,t.result=n,t},run:function(n){var t=new Bridge.Task;return setTimeout(function(){try{t.setResult(n())}catch(i){t.setError(i)}},0),t},whenAll:function(n){var t=new Bridge.Task,r,f=n.length,e=!1,u=[],i;if(Bridge.is(n,Bridge.IEnumerable)?n=Bridge.toArray(n):Bridge.isArray(n)||(n=Array.prototype.slice.call(arguments,0)),n.length===0)return t.setResult([]),t;for(r=new Array(n.length),i=0;i<n.length;i++)n[i].$index=i,n[i].continueWith(function(n){switch(n.status){case Bridge.TaskStatus.ranToCompletion:r[n.$index]=n.getResult();break;case Bridge.TaskStatus.canceled:e=!0;break;case Bridge.TaskStatus.faulted:u.push(n.error);break;default:throw new Bridge.InvalidOperationException("Invalid task status: "+n.status);}f--;f||(u.length>0?t.setError(u):e?t.setCanceled():t.setResult(r))});return t},whenAny:function(n){if(Bridge.is(n,Bridge.IEnumerable)?n=Bridge.toArray(n):Bridge.isArray(n)||(n=Array.prototype.slice.call(arguments,0)),!n.length)throw new Bridge.ArgumentException("At least one task is required");for(var t=new Bridge.Task,i=0;i<n.length;i++)n[i].continueWith(function(n){switch(n.status){case Bridge.TaskStatus.ranToCompletion:t.complete(n);break;case Bridge.TaskStatus.canceled:t.cancel();break;case Bridge.TaskStatus.faulted:t.fail(n.error);break;default:throw new Bridge.InvalidOperationException("Invalid task status: "+n.status);}});return t},fromCallback:function(n,t){var i=new Bridge.Task,r=Array.prototype.slice.call(arguments,2),u;return u=function(n){i.setResult(n)},r.push(u),n[t].apply(n,r),i},fromCallbackResult:function(n,t,i){var r=new Bridge.Task,u=Array.prototype.slice.call(arguments,3),f;return f=function(n){r.setResult(n)},i(u,f),n[t].apply(n,u),r},fromCallbackOptions:function(n,t,i){var u=new Bridge.Task,r=Array.prototype.slice.call(arguments,3),f;return f=function(n){u.setResult(n)},r[0]=r[0]||{},r[0][i]=f,n[t].apply(n,r),u},fromPromise:function(n,t,i){var r=new Bridge.Task;return n.then||(n=n.promise()),n.then(function(){r.setResult(t?t.apply(null,arguments):arguments)},function(){r.setError(i?i.apply(null,arguments):new Error(Array.prototype.slice.call(arguments,0)))}),r}},continueWith:function(n,t){var i=new Bridge.Task,r=this,u=t?function(){i.setResult(n(r))}:function(){try{i.setResult(n(r))}catch(t){i.setError(t)}};return this.isCompleted()?setTimeout(u,0):this.callbacks.push(u),i},start:function(){if(this.status!==Bridge.TaskStatus.created)throw new Error("Task was already started.");var n=this;this.status=Bridge.TaskStatus.running;setTimeout(function(){try{var t=n.action(n.state);delete n.action;delete n.state;n.complete(t)}catch(i){n.fail(i)}},0)},runCallbacks:function(){var n=this;setTimeout(function(){for(var t=0;t<n.callbacks.length;t++)n.callbacks[t](n);delete n.callbacks},0)},complete:function(n){return this.isCompleted()?!1:(this.result=n,this.status=Bridge.TaskStatus.ranToCompletion,this.runCallbacks(),!0)},fail:function(n){return this.isCompleted()?!1:(this.error=n,this.status=Bridge.TaskStatus.faulted,this.runCallbacks(),!0)},cancel:function(){return this.isCompleted()?!1:(this.status=Bridge.TaskStatus.canceled,this.runCallbacks(),!0)},isCanceled:function(){return this.status===Bridge.TaskStatus.canceled},isCompleted:function(){return this.status===Bridge.TaskStatus.ranToCompletion||this.status===Bridge.TaskStatus.canceled||this.status===Bridge.TaskStatus.faulted},isFaulted:function(){return this.status===Bridge.TaskStatus.faulted},getResult:function(){switch(this.status){case Bridge.TaskStatus.ranToCompletion:return this.result;case Bridge.TaskStatus.canceled:throw new Error("Task was cancelled.");case Bridge.TaskStatus.faulted:throw this.error;default:throw new Error("Task is not yet completed.");}},setCanceled:function(){if(!this.cancel())throw new Error("Task was already completed.");},setResult:function(n){if(!this.complete(n))throw new Error("Task was already completed.");},setError:function(n){if(!this.fail(n))throw new Error("Task was already completed.");},dispose:function(){},getAwaiter:function(){return this}});Bridge.define("Bridge.TaskStatus",{$statics:{created:0,waitingForActivation:1,waitingToRun:2,running:3,waitingForChildrenToComplete:4,ranToCompletion:5,canceled:6,faulted:7}});wt={isNull:function(n){return!Bridge.isDefined(n,!0)},isEmpty:function(n){return n==null||n.length===0||Bridge.is(n,Bridge.ICollection)?n.getCount()===0:!1},isNotEmptyOrWhitespace:function(n){return Bridge.isDefined(n,!0)&&!/^$|\s+/.test(n)},isNotNull:function(n){return Bridge.isDefined(n,!0)},isNotEmpty:function(n){return!Bridge.Validation.isEmpty(n)},email:function(n){return/^(")?(?:[^\."])(?:(?:[\.])?(?:[\w\-!#$%&'*+/=?^_`{|}~]))*\1@(\w[\-\w]*\.){1,5}([A-Za-z]){2,6}$/.test(n)},url:function(n){return/(((^https?)|(^ftp)):\/\/((([\-\w]+\.)+\w{2,3}(\/[%\-\w]+(\.\w{2,})?)*(([\w\-\.\?\\\/+@&#;`~=%!]*)(\.\w{2,})?)*)|(localhost|LOCALHOST))\/?)/i.test(n)},alpha:function(n){return/^[a-zA-Z_]+$/.test(n)},alphaNum:function(n){return/^[a-zA-Z_]+$/.test(n)},creditCard:function(n,t){var r,u,i,f;if(t==="Visa")r=/^4\d{3}-?\d{4}-?\d{4}-?\d{4}$/;else if(t==="MasterCard")r=/^5[1-5]\d{2}-?\d{4}-?\d{4}-?\d{4}$/;else if(t==="Discover")r=/^6011-?\d{4}-?\d{4}-?\d{4}$/;else if(t==="AmericanExpress")r=/^3[4,7]\d{13}$/;else if(t==="DinersClub")r=/^3[0,6,8]\d{12}$/;else{if(!n||n.length<13||n.length>19)return!1;r=/[^0-9 \-]+/}if(!r.test(n))return!1;for(n=n.split("-").join(""),u=0,i=2-n.length%2;i<=n.length;i+=2)u+=parseInt(n.charAt(i-1));for(i=n.length%2+1;i<n.length;i+=2)f=parseInt(n.charAt(i-1))*2,u+=f<10?f:f-9;return u%10==0}};Bridge.Validation=wt;Bridge.define("Bridge.Version",{inherits:function(){return[Bridge.ICloneable,Bridge.IComparable$1(Bridge.Version),Bridge.IEquatable$1(Bridge.Version)]},statics:{separatorsArray:".",config:{init:function(){this.ZERO_CHAR_VALUE=Bridge.cast(48,Bridge.Int)}},appendPositiveNumber:function(n,t){var r=t.getLength(),i;do i=n%10,n=Bridge.Int.div(n,10),t.insert(r,String.fromCharCode(Bridge.cast(Bridge.Version.ZERO_CHAR_VALUE+i,Bridge.Int)));while(n>0)},parse:function(n){if(n===null)throw new Bridge.ArgumentNullException("input");var t={v:new Bridge.Version.VersionResult};if(t.v.init("input",!0),!Bridge.Version.tryParseVersion(n,t))throw t.v.getVersionParseException();return t.v.m_parsedVersion},tryParse:function(n,t){var i={v:new Bridge.Version.VersionResult},r;return i.v.init("input",!1),r=Bridge.Version.tryParseVersion(n,i),t.v=i.v.m_parsedVersion,r},tryParseVersion:function(n,t){var u={},f={},e={},o={},r,i;if(n===null)return t.v.setFailure(Bridge.Version.ParseFailureKind.argumentNullException),!1;if(r=n.split(Bridge.Version.separatorsArray),i=r.length,i<2||i>4)return t.v.setFailure(Bridge.Version.ParseFailureKind.argumentException),!1;if(!Bridge.Version.tryParseComponent(r[0],"version",t,u)||!Bridge.Version.tryParseComponent(r[1],"version",t,f))return!1;if(i-=2,i>0){if(!Bridge.Version.tryParseComponent(r[2],"build",t,e))return!1;if(i--,i>0)if(Bridge.Version.tryParseComponent(r[3],"revision",t,o))t.v.m_parsedVersion=new Bridge.Version("constructor$3",u.v,f.v,e.v,o.v);else return!1;else t.v.m_parsedVersion=new Bridge.Version("constructor$2",u.v,f.v,e.v)}else t.v.m_parsedVersion=new Bridge.Version("constructor$1",u.v,f.v);return!0},tryParseComponent:function(n,t,i,r){return Bridge.Int.tryParseInt(n,r,-2147483648,2147483647)?r.v<0?(i.v.setFailure$1(Bridge.Version.ParseFailureKind.argumentOutOfRangeException,t),!1):!0:(i.v.setFailure$1(Bridge.Version.ParseFailureKind.formatException,n),!1)},op_Equality:function(n,t){return n===null?t===null:n.equals(t)},op_Inequality:function(n,t){return!Bridge.Version.op_Equality(n,t)},op_LessThan:function(n,t){return n===null&&t===null?!1:t===null?n.compareTo(t)<0:t.compareTo(n)>0},op_LessThanOrEqual:function(n,t){return n===null&&t===null?!1:t===null?n.compareTo(t)<=0:t.compareTo(n)>=0},op_GreaterThan:function(n,t){return Bridge.Version.op_LessThan(t,n)},op_GreaterThanOrEqual:function(n,t){return Bridge.Version.op_LessThanOrEqual(t,n)}},_Major:0,_Minor:0,config:{init:function(){this._Build=-1;this._Revision=-1}},constructor$3:function(n,t,i,r){if(n<0)throw new Bridge.ArgumentOutOfRangeException("major","Cannot be < 0");if(t<0)throw new Bridge.ArgumentOutOfRangeException("minor","Cannot be < 0");if(i<0)throw new Bridge.ArgumentOutOfRangeException("build","Cannot be < 0");if(r<0)throw new Bridge.ArgumentOutOfRangeException("revision","Cannot be < 0");this._Major=n;this._Minor=t;this._Build=i;this._Revision=r},constructor$2:function(n,t,i){if(n<0)throw new Bridge.ArgumentOutOfRangeException("major","Cannot be < 0");if(t<0)throw new Bridge.ArgumentOutOfRangeException("minor","Cannot be < 0");if(i<0)throw new Bridge.ArgumentOutOfRangeException("build","Cannot be < 0");this._Major=n;this._Minor=t;this._Build=i},constructor$1:function(n,t){if(n<0)throw new Bridge.ArgumentOutOfRangeException("major","Cannot be < 0");if(t<0)throw new Bridge.ArgumentOutOfRangeException("minor","Cannot be < 0");this._Major=n;this._Minor=t},constructor$4:function(n){var t=Bridge.Version.parse(n);this._Major=t.getMajor();this._Minor=t.getMinor();this._Build=t.getBuild();this._Revision=t.getRevision()},constructor:function(){this._Major=0;this._Minor=0},getMajor:function(){return this._Major},getMinor:function(){return this._Minor},getBuild:function(){return this._Build},getRevision:function(){return this._Revision},getMajorRevision:function(){return this._Revision>>16},getMinorRevision:function(){var n=this._Revision&65535;return n>32767&&(n=-(n&32767^32767)-1),n},clone:function(){var n=new Bridge.Version("constructor");return n._Major=this._Major,n._Minor=this._Minor,n._Build=this._Build,n._Revision=this._Revision,n},compareInternal:function(n){return this._Major!==n._Major?this._Major>n._Major?1:-1:this._Minor!==n._Minor?this._Minor>n._Minor?1:-1:this._Build!==n._Build?this._Build>n._Build?1:-1:this._Revision!==n._Revision?this._Revision>n._Revision?1:-1:0},compareTo$1:function(n){if(n===null)return 1;var t=Bridge.as(n,Bridge.Version);if(t===null)throw new Bridge.ArgumentException("version should be of Bridge.Version type");return this.compareInternal(t)},compareTo:function(n){return n===null?1:this.compareInternal(n)},equals$1:function(n){var t=Bridge.as(n,Bridge.Version);return t===null?!1:this._Major!==t._Major||this._Minor!==t._Minor||this._Build!==t._Build||this._Revision!==t._Revision?!1:!0},equals:function(n){return this.equals$1(n)},getHashCode:function(){var n=0;return n|=(this._Major&15)<<28,n|=(this._Minor&255)<<20,n|=(this._Build&255)<<12,n|this._Revision&4095},toString:function(){return this._Build===-1?this.toString$1(2):this._Revision===-1?this.toString$1(3):this.toString$1(4)},toString$1:function(n){var t;switch(n){case 0:return"";case 1:return this._Major.toString();case 2:return t=new Bridge.Text.StringBuilder,Bridge.Version.appendPositiveNumber(this._Major,t),t.append(String.fromCharCode(46)),Bridge.Version.appendPositiveNumber(this._Minor,t),t.toString();default:if(this._Build===-1)throw new Bridge.ArgumentException("Build should be > 0 if fieldCount > 2","fieldCount");if(n===3)return t=new Bridge.Text.StringBuilder,Bridge.Version.appendPositiveNumber(this._Major,t),t.append(String.fromCharCode(46)),Bridge.Version.appendPositiveNumber(this._Minor,t),t.append(String.fromCharCode(46)),Bridge.Version.appendPositiveNumber(this._Build,t),t.toString();if(this._Revision===-1)throw new Bridge.ArgumentException("Revision should be > 0 if fieldCount > 3","fieldCount");if(n===4)return t=new Bridge.Text.StringBuilder,Bridge.Version.appendPositiveNumber(this._Major,t),t.append(String.fromCharCode(46)),Bridge.Version.appendPositiveNumber(this._Minor,t),t.append(String.fromCharCode(46)),Bridge.Version.appendPositiveNumber(this._Build,t),t.append(String.fromCharCode(46)),Bridge.Version.appendPositiveNumber(this._Revision,t),t.toString();throw new Bridge.ArgumentException("Should be < 5","fieldCount");}}});Bridge.define("Bridge.Version.ParseFailureKind",{statics:{argumentNullException:0,argumentException:1,argumentOutOfRangeException:2,formatException:3}});Bridge.define("Bridge.Version.VersionResult",{m_parsedVersion:null,m_failure:0,m_exceptionArgument:null,m_argumentName:null,m_canThrow:!1,constructor:function(){},init:function(n,t){this.m_canThrow=t;this.m_argumentName=n},setFailure:function(n){this.setFailure$1(n,"")},setFailure$1:function(n,t){if(this.m_failure=n,this.m_exceptionArgument=t,this.m_canThrow)throw this.getVersionParseException();},getVersionParseException:function(){switch(this.m_failure){case Bridge.Version.ParseFailureKind.argumentNullException:return new Bridge.ArgumentNullException(this.m_argumentName);case Bridge.Version.ParseFailureKind.argumentException:return new Bridge.ArgumentException("VersionString");case Bridge.Version.ParseFailureKind.argumentOutOfRangeException:return new Bridge.ArgumentOutOfRangeException(this.m_exceptionArgument,"Cannot be < 0");case Bridge.Version.ParseFailureKind.formatException:try{Bridge.Int.parseInt(this.m_exceptionArgument,-2147483648,2147483647)}catch(n){n=Bridge.Exception.create(n);var t;if(Bridge.is(n,Bridge.FormatException)||Bridge.is(n,Bridge.OverflowException))return t=n;throw n;}return new Bridge.FormatException("InvalidString");default:return new Bridge.ArgumentException("VersionString")}},getHashCode:function(){var n=17;return n=n*23+(this.m_parsedVersion==null?0:Bridge.getHashCode(this.m_parsedVersion)),n=n*23+(this.m_failure==null?0:Bridge.getHashCode(this.m_failure)),n=n*23+(this.m_exceptionArgument==null?0:Bridge.getHashCode(this.m_exceptionArgument)),n=n*23+(this.m_argumentName==null?0:Bridge.getHashCode(this.m_argumentName)),n*23+(this.m_canThrow==null?0:Bridge.getHashCode(this.m_canThrow))},equals:function(n){return Bridge.is(n,Bridge.Version.VersionResult)?Bridge.equals(this.m_parsedVersion,n.m_parsedVersion)&&Bridge.equals(this.m_failure,n.m_failure)&&Bridge.equals(this.m_exceptionArgument,n.m_exceptionArgument)&&Bridge.equals(this.m_argumentName,n.m_argumentName)&&Bridge.equals(this.m_canThrow,n.m_canThrow):!1},$clone:function(n){var t=n||new Bridge.Version.VersionResult;return t.m_parsedVersion=this.m_parsedVersion,t.m_failure=this.m_failure,t.m_exceptionArgument=this.m_exceptionArgument,t.m_argumentName=this.m_argumentName,t.m_canThrow=this.m_canThrow,t}});Bridge.define("Bridge.Attribute");Bridge.define("Bridge.INotifyPropertyChanged");Bridge.define("Bridge.PropertyChangedEventArgs",{constructor:function(n){this.propertyName=n}}),function(n,t){var f={Identity:function(n){return n},True:function(){return!0},Blank:function(){}},o={Boolean:"boolean",Number:"number",String:"string",Object:"object",Undefined:typeof t,Function:typeof function(){}},p={"":f.Identity},r={createLambda:function(n){var t,l,i,a,u,e,r,s,h,v,c;if(n==null)return f.Identity;if(typeof n===o.String){if(t=p[n],t!=null)return t;if(n.indexOf("=>")===-1){for(l=new RegExp("[$]+","g"),i=0;(a=l.exec(n))!=null;)u=a[0].length,u>i&&(i=u);for(e=[],r=1;r<=i;r++){for(s="",h=0;h<r;h++)s+="$";e.push(s)}return v=Array.prototype.join.call(e,","),t=new Function(v,"return "+n),p[n]=t,t}return c=n.match(/^[(\s]*([^()]*?)[)\s]*=>(.*)/),t=new Function(c[1],"return "+c[2]),p[n]=t,t}return n},isIEnumerable:function(n){if(typeof Enumerator!==o.Undefined)try{return new Enumerator(n),!0}catch(t){}return!1},defineProperty:Object.defineProperties!=null?function(n,t,i){Object.defineProperty(n,t,{enumerable:!1,configurable:!0,writable:!0,value:i})}:function(n,t,i){n[t]=i},compare:function(n,t){return n===t?0:n>t?1:-1},dispose:function(n){n!=null&&n.dispose()}},l={Before:0,Running:1,After:2},u=function(n,t,i){var u=new b,r=l.Before;this.getCurrent=u.getCurrent;this.reset=function(){throw new Error("Reset is not supported");};this.moveNext=function(){try{switch(r){case l.Before:r=l.Running;n();case l.Running:return t.apply(u)?!0:(this.dispose(),!1);case l.After:return!1}}catch(i){this.dispose();throw i;}};this.dispose=function(){if(r==l.Running)try{i()}finally{r=l.After}}},b,i,k,s,a,v,e,h,c,w,y;u.$$inheritors=[Bridge.IDisposable];b=function(){var n=null;this.getCurrent=function(){return n};this.yieldReturn=function(t){return n=t,!0};this.yieldBreak=function(){return!1}};i=function(n){this.getEnumerator=n};i.$$inheritors=[Bridge.IEnumerable];i.Utils={};i.Utils.createLambda=function(n){return r.createLambda(n)};i.Utils.createEnumerable=function(n){return new i(n)};i.Utils.createEnumerator=function(n,t,i){return new u(n,t,i)};i.Utils.extendTo=function(n){var u=n.prototype,o,t,f;n===Array?(o=e.prototype,r.defineProperty(u,"getSource",function(){return this})):(o=i.prototype,r.defineProperty(u,"getEnumerator",function(){return i.from(this).getEnumerator()}));for(t in o)(f=o[t],u[t]!=f)&&(u[t]==null||(t=t+"ByLinq",u[t]!=f))&&f instanceof Function&&r.defineProperty(u,t,f)};i.choice=function(){var n=arguments;return new i(function(){return new u(function(){n=n[0]instanceof Array?n[0]:n[0].getEnumerator!=null?n[0].toArray():n},function(){return this.yieldReturn(n[Math.floor(Math.random()*n.length)])},f.Blank)})};i.cycle=function(){var n=arguments;return new i(function(){var t=0;return new u(function(){n=n[0]instanceof Array?n[0]:n[0].getEnumerator!=null?n[0].toArray():n},function(){return t>=n.length&&(t=0),this.yieldReturn(n[t++])},f.Blank)})};k=new i(function(){return new u(f.Blank,function(){return!1},f.Blank)});i.empty=function(){return k};i.from=function(n){if(n==null)return i.empty();if(n instanceof i)return n;if(typeof n==o.Number||typeof n==o.Boolean)return i.repeat(n,1);if(typeof n==o.String)return new i(function(){var t=0;return new u(f.Blank,function(){return t<n.length?this.yieldReturn(n.charAt(t++)):!1},f.Blank)});var t=Bridge.as(n,Bridge.IEnumerable);if(t)return new i(function(){var n;return new u(function(){n=Bridge.getEnumerator(t)},function(){var t=n.moveNext();return t?this.yieldReturn(n.getCurrent()):!1},function(){var t=Bridge.as(n,Bridge.IDisposable);t&&t.dispose()})});if(typeof n!=o.Function){if(typeof n.length==o.Number)return new e(n);if(!(n instanceof Object)&&r.isIEnumerable(n))return new i(function(){var i=!0,t;return new u(function(){t=new Enumerator(n)},function(){return i?i=!1:t.moveNext(),t.atEnd()?!1:this.yieldReturn(t.item())},f.Blank)});if(typeof Windows===o.Object&&typeof n.first===o.Function)return new i(function(){var i=!0,t;return new u(function(){t=n.first()},function(){return i?i=!1:t.moveNext(),t.hasCurrent?this.yieldReturn(t.current):this.yieldBreak()},f.Blank)})}return new i(function(){var t=[],i=0;return new u(function(){var i,r;for(i in n)r=n[i],r instanceof Function||!Object.prototype.hasOwnProperty.call(n,i)||t.push({key:i,value:r})},function(){return i<t.length?this.yieldReturn(t[i++]):!1},f.Blank)})};i.make=function(n){return i.repeat(n,1)};i.matches=function(n,t,r){return r==null&&(r=""),t instanceof RegExp&&(r+=t.ignoreCase?"i":"",r+=t.multiline?"m":"",t=t.source),r.indexOf("g")===-1&&(r+="g"),new i(function(){var i;return new u(function(){i=new RegExp(t,r)},function(){var t=i.exec(n);return t?this.yieldReturn(t):!1},f.Blank)})};i.range=function(n,t,r){return r==null&&(r=1),new i(function(){var i,e=0;return new u(function(){i=n-r},function(){return e++<t?this.yieldReturn(i+=r):this.yieldBreak()},f.Blank)})};i.rangeDown=function(n,t,r){return r==null&&(r=1),new i(function(){var i,e=0;return new u(function(){i=n+r},function(){return e++<t?this.yieldReturn(i-=r):this.yieldBreak()},f.Blank)})};i.rangeTo=function(n,t,r){return r==null&&(r=1),n<t?new i(function(){var i;return new u(function(){i=n-r},function(){var n=i+=r;return n<=t?this.yieldReturn(n):this.yieldBreak()},f.Blank)}):new i(function(){var i;return new u(function(){i=n+r},function(){var n=i-=r;return n>=t?this.yieldReturn(n):this.yieldBreak()},f.Blank)})};i.repeat=function(n,t){return t!=null?i.repeat(n).take(t):new i(function(){return new u(f.Blank,function(){return this.yieldReturn(n)},f.Blank)})};i.repeatWithFinalize=function(n,t){return n=r.createLambda(n),t=r.createLambda(t),new i(function(){var i;return new u(function(){i=n()},function(){return this.yieldReturn(i)},function(){i!=null&&(t(i),i=null)})})};i.generate=function(n,t){return t!=null?i.generate(n).take(t):(n=r.createLambda(n),new i(function(){return new u(f.Blank,function(){return this.yieldReturn(n())},f.Blank)}))};i.toInfinity=function(n,t){return n==null&&(n=0),t==null&&(t=1),new i(function(){var i;return new u(function(){i=n-t},function(){return this.yieldReturn(i+=t)},f.Blank)})};i.toNegativeInfinity=function(n,t){return n==null&&(n=0),t==null&&(t=1),new i(function(){var i;return new u(function(){i=n+t},function(){return this.yieldReturn(i-=t)},f.Blank)})};i.unfold=function(n,t){return t=r.createLambda(t),new i(function(){var r=!0,i;return new u(f.Blank,function(){return r?(r=!1,i=n,this.yieldReturn(i)):(i=t(i),this.yieldReturn(i))},f.Blank)})};i.defer=function(n){return new i(function(){var t;return new u(function(){t=i.from(n()).getEnumerator()},function(){return t.moveNext()?this.yieldReturn(t.getCurrent()):this.yieldBreak()},function(){r.dispose(t)})})};i.prototype.traverseBreadthFirst=function(n,t){var f=this;return n=r.createLambda(n),t=r.createLambda(t),new i(function(){var e,s=0,o=[];return new u(function(){e=f.getEnumerator()},function(){for(;;){if(e.moveNext())return o.push(e.getCurrent()),this.yieldReturn(t(e.getCurrent(),s));var u=i.from(o).selectMany(function(t){return n(t)});if(u.any())s++,o=[],r.dispose(e),e=u.getEnumerator();else return!1}},function(){r.dispose(e)})})};i.prototype.traverseDepthFirst=function(n,t){var f=this;return n=r.createLambda(n),t=r.createLambda(t),new i(function(){var o=[],e;return new u(function(){e=f.getEnumerator()},function(){for(;;){if(e.moveNext()){var u=t(e.getCurrent(),o.length);return o.push(e),e=i.from(n(e.getCurrent())).getEnumerator(),this.yieldReturn(u)}if(o.length<=0)return!1;r.dispose(e);e=o.pop()}},function(){try{r.dispose(e)}finally{i.from(o).forEach(function(n){n.dispose()})}})})};i.prototype.flatten=function(){var n=this;return new i(function(){var e,t=null;return new u(function(){e=n.getEnumerator()},function(){for(;;){if(t!=null){if(t.moveNext())return this.yieldReturn(t.getCurrent());t=null}if(e.moveNext())if(e.getCurrent()instanceof Array){r.dispose(t);t=i.from(e.getCurrent()).selectMany(f.Identity).flatten().getEnumerator();continue}else return this.yieldReturn(e.getCurrent());return!1}},function(){try{r.dispose(e)}finally{r.dispose(t)}})})};i.prototype.pairwise=function(n){var t=this;return n=r.createLambda(n),new i(function(){var i;return new u(function(){i=t.getEnumerator();i.moveNext()},function(){var t=i.getCurrent();return i.moveNext()?this.yieldReturn(n(t,i.getCurrent())):!1},function(){r.dispose(i)})})};i.prototype.scan=function(n,t){var f,e;return t==null?(t=r.createLambda(n),f=!1):(t=r.createLambda(t),f=!0),e=this,new i(function(){var i,o,s=!0;return new u(function(){i=e.getEnumerator()},function(){if(s){if(s=!1,f)return this.yieldReturn(o=n);if(i.moveNext())return this.yieldReturn(o=i.getCurrent())}return i.moveNext()?this.yieldReturn(o=t(o,i.getCurrent())):!1},function(){r.dispose(i)})})};i.prototype.select=function(n){if(n=r.createLambda(n),n.length<=1)return new c(this,null,n);var t=this;return new i(function(){var i,f=0;return new u(function(){i=t.getEnumerator()},function(){return i.moveNext()?this.yieldReturn(n(i.getCurrent(),f++)):!1},function(){r.dispose(i)})})};i.prototype.selectMany=function(n,f){var e=this;return n=r.createLambda(n),f==null&&(f=function(n,t){return t}),f=r.createLambda(f),new i(function(){var s,o=t,h=0;return new u(function(){s=e.getEnumerator()},function(){if(o===t&&!s.moveNext())return!1;do{if(o==null){var u=n(s.getCurrent(),h++);o=i.from(u).getEnumerator()}if(o.moveNext())return this.yieldReturn(f(s.getCurrent(),o.getCurrent()));r.dispose(o);o=null}while(s.moveNext());return!1},function(){try{r.dispose(s)}finally{r.dispose(o)}})})};i.prototype.where=function(n){if(n=r.createLambda(n),n.length<=1)return new h(this,n);var t=this;return new i(function(){var i,f=0;return new u(function(){i=t.getEnumerator()},function(){while(i.moveNext())if(n(i.getCurrent(),f++))return this.yieldReturn(i.getCurrent());return!1},function(){r.dispose(i)})})};i.prototype.choose=function(n){n=r.createLambda(n);var t=this;return new i(function(){var i,f=0;return new u(function(){i=t.getEnumerator()},function(){while(i.moveNext()){var t=n(i.getCurrent(),f++);if(t!=null)return this.yieldReturn(t)}return this.yieldBreak()},function(){r.dispose(i)})})};i.prototype.ofType=function(n){var t=this;return new i(function(){var i;return new u(function(){i=Bridge.getEnumerator(t)},function(){while(i.moveNext()){var t=Bridge.as(i.getCurrent(),n);if(Bridge.hasValue(t))return this.yieldReturn(t)}return!1},function(){r.dispose(i)})})};i.prototype.zip=function(){var e=arguments,n=r.createLambda(arguments[arguments.length-1]),t=this,f;return arguments.length==2?(f=arguments[0],new i(function(){var e,o,s=0;return new u(function(){e=t.getEnumerator();o=i.from(f).getEnumerator()},function(){return e.moveNext()&&o.moveNext()?this.yieldReturn(n(e.getCurrent(),o.getCurrent(),s++)):!1},function(){try{r.dispose(e)}finally{r.dispose(o)}})})):new i(function(){var f,o=0;return new u(function(){var n=i.make(t).concat(i.from(e).takeExceptLast().select(i.from)).select(function(n){return n.getEnumerator()}).toArray();f=i.from(n)},function(){if(f.all(function(n){return n.moveNext()})){var t=f.select(function(n){return n.getCurrent()}).toArray();return t.push(o++),this.yieldReturn(n.apply(null,t))}return this.yieldBreak()},function(){i.from(f).forEach(r.dispose)})})};i.prototype.merge=function(){var n=arguments,t=this;return new i(function(){var f,e=-1;return new u(function(){f=i.make(t).concat(i.from(n).select(i.from)).select(function(n){return n.getEnumerator()}).toArray()},function(){while(f.length>0){e=e>=f.length-1?0:e+1;var n=f[e];if(n.moveNext())return this.yieldReturn(n.getCurrent());n.dispose();f.splice(e--,1)}return this.yieldBreak()},function(){i.from(f).forEach(r.dispose)})})};i.prototype.join=function(n,e,o,s,h){e=r.createLambda(e);o=r.createLambda(o);s=r.createLambda(s);var c=this;return new i(function(){var l,v,a=null,y=0;return new u(function(){l=c.getEnumerator();v=i.from(n).toLookup(o,f.Identity,h)},function(){for(var n,i;;){if(a!=null){if(n=a[y++],n!==t)return this.yieldReturn(s(l.getCurrent(),n));n=null;y=0}if(l.moveNext())i=e(l.getCurrent()),a=v.get(i).toArray();else return!1}},function(){r.dispose(l)})})};i.prototype.groupJoin=function(n,t,e,o,s){t=r.createLambda(t);e=r.createLambda(e);o=r.createLambda(o);var h=this;return new i(function(){var c=h.getEnumerator(),l=null;return new u(function(){c=h.getEnumerator();l=i.from(n).toLookup(e,f.Identity,s)},function(){if(c.moveNext()){var n=l.get(t(c.getCurrent()));return this.yieldReturn(o(c.getCurrent(),n))}return!1},function(){r.dispose(c)})})};i.prototype.all=function(n){n=r.createLambda(n);var t=!0;return this.forEach(function(i){if(!n(i))return t=!1,!1}),t};i.prototype.any=function(n){n=r.createLambda(n);var t=this.getEnumerator();try{if(arguments.length==0)return t.moveNext();while(t.moveNext())if(n(t.getCurrent()))return!0;return!1}finally{r.dispose(t)}};i.prototype.isEmpty=function(){return!this.any()};i.prototype.concat=function(){var n=this,t,f;return arguments.length==1?(t=arguments[0],new i(function(){var e,f;return new u(function(){e=n.getEnumerator()},function(){if(f==null){if(e.moveNext())return this.yieldReturn(e.getCurrent());f=i.from(t).getEnumerator()}return f.moveNext()?this.yieldReturn(f.getCurrent()):!1},function(){try{r.dispose(e)}finally{r.dispose(f)}})})):(f=arguments,new i(function(){var t;return new u(function(){t=i.make(n).concat(i.from(f).select(i.from)).select(function(n){return n.getEnumerator()}).toArray()},function(){while(t.length>0){var n=t[0];if(n.moveNext())return this.yieldReturn(n.getCurrent());n.dispose();t.splice(0,1)}return this.yieldBreak()},function(){i.from(t).forEach(r.dispose)})}))};i.prototype.insert=function(n,t){var f=this;return new i(function(){var o,e,s=0,h=!1;return new u(function(){o=f.getEnumerator();e=i.from(t).getEnumerator()},function(){return s==n&&e.moveNext()?(h=!0,this.yieldReturn(e.getCurrent())):o.moveNext()?(s++,this.yieldReturn(o.getCurrent())):!h&&e.moveNext()?this.yieldReturn(e.getCurrent()):!1},function(){try{r.dispose(o)}finally{r.dispose(e)}})})};i.prototype.alternate=function(n){var t=this;return new i(function(){var f,e,s,o;return new u(function(){s=n instanceof Array||n.getEnumerator!=null?i.from(i.from(n).toArray()):i.make(n);e=t.getEnumerator();e.moveNext()&&(f=e.getCurrent())},function(){for(;;){if(o!=null){if(o.moveNext())return this.yieldReturn(o.getCurrent());o=null}if(f==null&&e.moveNext()){f=e.getCurrent();o=s.getEnumerator();continue}else if(f!=null){var n=f;return f=null,this.yieldReturn(n)}return this.yieldBreak()}},function(){try{r.dispose(e)}finally{r.dispose(o)}})})};i.prototype.contains=function(n,t){t=t||Bridge.EqualityComparer$1.$default;var i=this.getEnumerator();try{while(i.moveNext())if(t.equals(i.getCurrent(),n))return!0;return!1}finally{r.dispose(i)}};i.prototype.defaultIfEmpty=function(n){var f=this;return n===t&&(n=null),new i(function(){var t,i=!0;return new u(function(){t=f.getEnumerator()},function(){return t.moveNext()?(i=!1,this.yieldReturn(t.getCurrent())):i?(i=!1,this.yieldReturn(n)):!1},function(){r.dispose(t)})})};i.prototype.distinct=function(n){return this.except(i.empty(),n)};i.prototype.distinctUntilChanged=function(n){n=r.createLambda(n);var t=this;return new i(function(){var i,f,e;return new u(function(){i=t.getEnumerator()},function(){while(i.moveNext()){var t=n(i.getCurrent());if(e)return e=!1,f=t,this.yieldReturn(i.getCurrent());if(f!==t)return f=t,this.yieldReturn(i.getCurrent())}return this.yieldBreak()},function(){r.dispose(i)})})};i.prototype.except=function(n,t){var f=this;return new i(function(){var e,o;return new u(function(){e=f.getEnumerator();o=new Bridge.Dictionary$2(Object,Object)(null,t);i.from(n).forEach(function(n){o.add(n)})},function(){while(e.moveNext()){var n=e.getCurrent();if(!o.containsKey(n))return o.add(n),this.yieldReturn(n)}return!1},function(){r.dispose(e)})})};i.prototype.intersect=function(n,t){var f=this;return new i(function(){var e,o,s;return new u(function(){e=f.getEnumerator();o=new Bridge.Dictionary$2(Object,Object)(null,t);i.from(n).forEach(function(n){o.add(n)});s=new Bridge.Dictionary$2(Object,Object)(null,t)},function(){while(e.moveNext()){var n=e.getCurrent();if(!s.containsKey(n)&&o.containsKey(n))return s.add(n),this.yieldReturn(n)}return!1},function(){r.dispose(e)})})};i.prototype.sequenceEqual=function(n,t){var f,u;t=t||Bridge.EqualityComparer$1.$default;f=this.getEnumerator();try{u=i.from(n).getEnumerator();try{while(f.moveNext())if(!u.moveNext()||!t.equals(f.getCurrent(),u.getCurrent()))return!1;return u.moveNext()?!1:!0}finally{r.dispose(u)}}finally{r.dispose(f)}};i.prototype.union=function(n,f){var e=this;return new i(function(){var h,o,s;return new u(function(){h=e.getEnumerator();s=new Bridge.Dictionary$2(Object,Object)(null,f)},function(){var r;if(o===t){while(h.moveNext())if(r=h.getCurrent(),!s.containsKey(r))return s.add(r),this.yieldReturn(r);o=i.from(n).getEnumerator()}while(o.moveNext())if(r=o.getCurrent(),!s.containsKey(r))return s.add(r),this.yieldReturn(r);return!1},function(){try{r.dispose(h)}finally{r.dispose(o)}})})};i.prototype.orderBy=function(n,t){return new s(this,n,t,!1)};i.prototype.orderByDescending=function(n,t){return new s(this,n,t,!0)};i.prototype.reverse=function(){var n=this;return new i(function(){var t,i;return new u(function(){t=n.toArray();i=t.length},function(){return i>0?this.yieldReturn(t[--i]):!1},f.Blank)})};i.prototype.shuffle=function(){var n=this;return new i(function(){var t;return new u(function(){t=n.toArray()},function(){if(t.length>0){var n=Math.floor(Math.random()*t.length);return this.yieldReturn(t.splice(n,1)[0])}return!1},f.Blank)})};i.prototype.weightedSample=function(n){n=r.createLambda(n);var t=this;return new i(function(){var i,r=0;return new u(function(){i=t.choose(function(t){var i=n(t);return i<=0?null:(r+=i,{value:t,bound:r})}).toArray()},function(){var t;if(i.length>0){for(var f=Math.floor(Math.random()*r)+1,u=-1,n=i.length;n-u>1;)t=Math.floor((u+n)/2),i[t].bound>=f?n=t:u=t;return this.yieldReturn(i[n].value)}return this.yieldBreak()},f.Blank)})};i.prototype.groupBy=function(n,t,f,e){var o=this;return n=r.createLambda(n),t=r.createLambda(t),f!=null&&(f=r.createLambda(f)),new i(function(){var i;return new u(function(){i=o.toLookup(n,t,e).toEnumerable().getEnumerator()},function(){while(i.moveNext())return f==null?this.yieldReturn(i.getCurrent()):this.yieldReturn(f(i.getCurrent().key(),i.getCurrent()));return!1},function(){r.dispose(i)})})};i.prototype.partitionBy=function(n,t,f,e){var s=this,o;return n=r.createLambda(n),t=r.createLambda(t),e=e||Bridge.EqualityComparer$1.$default,f==null?(o=!1,f=function(n,t){return new y(n,t)}):(o=!0,f=r.createLambda(f)),new i(function(){var h,l,c=[];return new u(function(){h=s.getEnumerator();h.moveNext()&&(l=n(h.getCurrent()),c.push(t(h.getCurrent())))},function(){for(var r,u;(r=h.moveNext())==!0;)if(e.equals(l,n(h.getCurrent())))c.push(t(h.getCurrent()));else break;return c.length>0?(u=o?f(l,i.from(c)):f(l,c),r?(l=n(h.getCurrent()),c=[t(h.getCurrent())]):c=[],this.yieldReturn(u)):!1},function(){r.dispose(h)})})};i.prototype.buffer=function(n){var t=this;return new i(function(){var i;return new u(function(){i=t.getEnumerator()},function(){for(var t=[],r=0;i.moveNext();)if(t.push(i.getCurrent()),++r>=n)return this.yieldReturn(t);return t.length>0?this.yieldReturn(t):!1},function(){r.dispose(i)})})};i.prototype.aggregate=function(n,t,i){return i=r.createLambda(i),i(this.scan(n,t,i).last())};i.prototype.average=function(n){n=r.createLambda(n);var t=0,i=0;return this.forEach(function(r){t+=n(r);++i}),t/i};i.prototype.nullableAverage=function(n){return this.any(Bridge.isNull)?null:this.average(n)};i.prototype.count=function(n){n=n==null?f.True:r.createLambda(n);var t=0;return this.forEach(function(i,r){n(i,r)&&++t}),t};i.prototype.max=function(n){return n==null&&(n=f.Identity),this.select(n).aggregate(function(n,t){return Bridge.compare(n,t,!0)===1?n:t})};i.prototype.nullableMax=function(n){return this.any(Bridge.isNull)?null:this.max(n)};i.prototype.min=function(n){return n==null&&(n=f.Identity),this.select(n).aggregate(function(n,t){return Bridge.compare(n,t,!0)===-1?n:t})};i.prototype.nullableMin=function(n){return this.any(Bridge.isNull)?null:this.min(n)};i.prototype.maxBy=function(n){return n=r.createLambda(n),this.aggregate(function(t,i){return Bridge.compare(n(t),n(i),!0)===1?t:i})};i.prototype.minBy=function(n){return n=r.createLambda(n),this.aggregate(function(t,i){return Bridge.compare(n(t),n(i),!0)===-1?t:i})};i.prototype.sum=function(n){return n==null&&(n=f.Identity),this.select(n).aggregate(0,function(n,t){return n+t})};i.prototype.nullableSum=function(n){return this.any(Bridge.isNull)?null:this.sum(n)};i.prototype.elementAt=function(n){var t,i=!1;if(this.forEach(function(r,u){if(u==n)return t=r,i=!0,!1}),!i)throw new Error("index is less than 0 or greater than or equal to the number of elements in source.");return t};i.prototype.elementAtOrDefault=function(n,i){i===t&&(i=null);var r,u=!1;return this.forEach(function(t,i){if(i==n)return r=t,u=!0,!1}),u?r:i};i.prototype.first=function(n){if(n!=null)return this.where(n).first();var t,i=!1;if(this.forEach(function(n){return t=n,i=!0,!1}),!i)throw new Error("first:No element satisfies the condition.");return t};i.prototype.firstOrDefault=function(n,i){if(i===t&&(i=null),n!=null)return this.where(n).firstOrDefault(null,i);var r,u=!1;return this.forEach(function(n){return r=n,u=!0,!1}),u?r:i};i.prototype.last=function(n){if(n!=null)return this.where(n).last();var t,i=!1;if(this.forEach(function(n){i=!0;t=n}),!i)throw new Error("last:No element satisfies the condition.");return t};i.prototype.lastOrDefault=function(n,i){if(i===t&&(i=null),n!=null)return this.where(n).lastOrDefault(null,i);var r,u=!1;return this.forEach(function(n){u=!0;r=n}),u?r:i};i.prototype.single=function(n){if(n!=null)return this.where(n).single();var i,t=!1;if(this.forEach(function(n){if(t)throw new Error("single:sequence contains more than one element.");else t=!0,i=n}),!t)throw new Error("single:No element satisfies the condition.");return i};i.prototype.singleOrDefault=function(n,i){if(i===t&&(i=null),n!=null)return this.where(n).singleOrDefault(null,i);var u,r=!1;return this.forEach(function(n){if(r)throw new Error("single:sequence contains more than one element.");else r=!0,u=n}),r?u:i};i.prototype.skip=function(n){var t=this;return new i(function(){var i,f=0;return new u(function(){for(i=t.getEnumerator();f++<n&&i.moveNext(););},function(){return i.moveNext()?this.yieldReturn(i.getCurrent()):!1},function(){r.dispose(i)})})};i.prototype.skipWhile=function(n){n=r.createLambda(n);var t=this;return new i(function(){var i,e=0,f=!1;return new u(function(){i=t.getEnumerator()},function(){while(!f)if(i.moveNext()){if(!n(i.getCurrent(),e++))return f=!0,this.yieldReturn(i.getCurrent());continue}else return!1;return i.moveNext()?this.yieldReturn(i.getCurrent()):!1},function(){r.dispose(i)})})};i.prototype.take=function(n){var t=this;return new i(function(){var i,f=0;return new u(function(){i=t.getEnumerator()},function(){return f++<n&&i.moveNext()?this.yieldReturn(i.getCurrent()):!1},function(){r.dispose(i)})})};i.prototype.takeWhile=function(n){n=r.createLambda(n);var t=this;return new i(function(){var i,f=0;return new u(function(){i=t.getEnumerator()},function(){return i.moveNext()&&n(i.getCurrent(),f++)?this.yieldReturn(i.getCurrent()):!1},function(){r.dispose(i)})})};i.prototype.takeExceptLast=function(n){n==null&&(n=1);var t=this;return new i(function(){if(n<=0)return t.getEnumerator();var i,f=[];return new u(function(){i=t.getEnumerator()},function(){while(i.moveNext()){if(f.length==n)return f.push(i.getCurrent()),this.yieldReturn(f.shift());f.push(i.getCurrent())}return!1},function(){r.dispose(i)})})};i.prototype.takeFromLast=function(n){if(n<=0||n==null)return i.empty();var t=this;return new i(function(){var o,f,e=[];return new u(function(){o=t.getEnumerator()},function(){if(f==null){while(o.moveNext())e.length==n&&e.shift(),e.push(o.getCurrent());f=i.from(e).getEnumerator()}return f.moveNext()?this.yieldReturn(f.getCurrent()):!1},function(){r.dispose(f)})})};i.prototype.indexOf=function(n,t){var i=null;return typeof n===o.Function?this.forEach(function(t,r){if(n(t,r))return i=r,!1}):(t=t||Bridge.EqualityComparer$1.$default,this.forEach(function(r,u){if(t.equals(r,n))return i=u,!1})),i!==null?i:-1};i.prototype.lastIndexOf=function(n,t){var i=-1;return typeof n===o.Function?this.forEach(function(t,r){n(t,r)&&(i=r)}):(t=t||Bridge.EqualityComparer$1.$default,this.forEach(function(r,u){t.equals(r,n)&&(i=u)})),i};i.prototype.asEnumerable=function(){return i.from(this)};i.prototype.toArray=function(){var n=[];return this.forEach(function(t){n.push(t)}),n};i.prototype.toList=function(n){var t=[];return this.forEach(function(n){t.push(n)}),new Bridge.List$1(n||Object)(t)};i.prototype.toLookup=function(n,t,i){n=r.createLambda(n);t=r.createLambda(t);var u=new Bridge.Dictionary$2(Object,Object)(null,i),f=[];return this.forEach(function(i){var r=n(i),e=t(i),o={v:null};u.tryGetValue(r,o)?o.v.push(e):(f.push(r),u.add(r,[e]))}),new w(u,f)};i.prototype.toObject=function(n,t){n=r.createLambda(n);t=r.createLambda(t);var i={};return this.forEach(function(r){i[n(r)]=t(r)}),i};i.prototype.toDictionary=function(n,t,i,u,f){n=r.createLambda(n);t=r.createLambda(t);var e=new Bridge.Dictionary$2(i,u)(null,f);return this.forEach(function(i){e.add(n(i),t(i))}),e};i.prototype.toJSONString=function(n,t){if(typeof JSON===o.Undefined||JSON.stringify==null)throw new Error("toJSONString can't find JSON.stringify. This works native JSON support Browser or include json2.js");return JSON.stringify(this.toArray(),n,t)};i.prototype.toJoinedString=function(n,t){return n==null&&(n=""),t==null&&(t=f.Identity),this.select(t).toArray().join(n)};i.prototype.doAction=function(n){var t=this;return n=r.createLambda(n),new i(function(){var i,f=0;return new u(function(){i=t.getEnumerator()},function(){return i.moveNext()?(n(i.getCurrent(),f++),this.yieldReturn(i.getCurrent())):!1},function(){r.dispose(i)})})};i.prototype.forEach=function(n){n=r.createLambda(n);var i=0,t=this.getEnumerator();try{while(t.moveNext())if(n(t.getCurrent(),i++)===!1)break}finally{r.dispose(t)}};i.prototype.write=function(n,t){n==null&&(n="");t=r.createLambda(t);var i=!0;this.forEach(function(r){i?i=!1:document.write(n);document.write(t(r))})};i.prototype.writeLine=function(n){n=r.createLambda(n);this.forEach(function(t){document.writeln(n(t)+"<br />")})};i.prototype.force=function(){var n=this.getEnumerator();try{while(n.moveNext());}finally{r.dispose(n)}};i.prototype.letBind=function(n){n=r.createLambda(n);var t=this;return new i(function(){var f;return new u(function(){f=i.from(n(t)).getEnumerator()},function(){return f.moveNext()?this.yieldReturn(f.getCurrent()):!1},function(){r.dispose(f)})})};i.prototype.share=function(){var i=this,n,t=!1;return new v(function(){return new u(function(){n==null&&(n=i.getEnumerator())},function(){if(t)throw new Error("enumerator is disposed");return n.moveNext()?this.yieldReturn(n.getCurrent()):!1},f.Blank)},function(){t=!0;r.dispose(n)})};i.prototype.memoize=function(){var e=this,n,t,i=!1;return new v(function(){var r=-1;return new u(function(){t==null&&(t=e.getEnumerator(),n=[])},function(){if(i)throw new Error("enumerator is disposed");return(r++,n.length<=r)?t.moveNext()?this.yieldReturn(n[r]=t.getCurrent()):!1:this.yieldReturn(n[r])},f.Blank)},function(){i=!0;r.dispose(t);n=null})};i.prototype.catchError=function(n){n=r.createLambda(n);var t=this;return new i(function(){var i;return new u(function(){i=t.getEnumerator()},function(){try{return i.moveNext()?this.yieldReturn(i.getCurrent()):!1}catch(t){return n(t),!1}},function(){r.dispose(i)})})};i.prototype.finallyAction=function(n){n=r.createLambda(n);var t=this;return new i(function(){var i;return new u(function(){i=t.getEnumerator()},function(){return i.moveNext()?this.yieldReturn(i.getCurrent()):!1},function(){try{r.dispose(i)}finally{n()}})})};i.prototype.log=function(n){return n=r.createLambda(n),this.doAction(function(t){typeof console!==o.Undefined&&console.log(n(t))})};i.prototype.trace=function(n,t){return n==null&&(n="Trace"),t=r.createLambda(t),this.doAction(function(i){typeof console!==o.Undefined&&console.log(n,t(i))})};s=function(n,t,i,u,f){this.source=n;this.keySelector=r.createLambda(t);this.comparer=i||Bridge.Comparer$1.$default;this.descending=u;this.parent=f};s.prototype=new i;s.prototype.createOrderedEnumerable=function(n,t,i){return new s(this.source,n,t,i,this)};s.prototype.thenBy=function(n,t){return this.createOrderedEnumerable(n,t,!1)};s.prototype.thenByDescending=function(n,t){return this.createOrderedEnumerable(n,t,!0)};s.prototype.getEnumerator=function(){var i=this,t,n,r=0;return new u(function(){t=[];n=[];i.source.forEach(function(i,r){t.push(i);n.push(r)});var r=a.create(i,null);r.GenerateKeys(t);n.sort(function(n,t){return r.compare(n,t)})},function(){return r<n.length?this.yieldReturn(t[n[r++]]):!1},f.Blank)};a=function(n,t,i,r){this.keySelector=n;this.comparer=t;this.descending=i;this.child=r;this.keys=null};a.create=function(n,t){var i=new a(n.keySelector,n.comparer,n.descending,t);return n.parent!=null?a.create(n.parent,i):i};a.prototype.GenerateKeys=function(n){for(var i=n.length,u=this.keySelector,r=new Array(i),t=0;t<i;t++)r[t]=u(n[t]);this.keys=r;this.child!=null&&this.child.GenerateKeys(n)};a.prototype.compare=function(n,t){var i=this.comparer.compare(this.keys[n],this.keys[t]);return i==0?this.child!=null?this.child.compare(n,t):r.compare(n,t):this.descending?-i:i};v=function(n,t){this.dispose=t;i.call(this,n)};v.prototype=new i;e=function(n){this.getSource=function(){return n}};e.prototype=new i;e.prototype.any=function(n){return n==null?this.getSource().length>0:i.prototype.any.apply(this,arguments)};e.prototype.count=function(n){return n==null?this.getSource().length:i.prototype.count.apply(this,arguments)};e.prototype.elementAt=function(n){var t=this.getSource();return 0<=n&&n<t.length?t[n]:i.prototype.elementAt.apply(this,arguments)};e.prototype.elementAtOrDefault=function(n,i){i===t&&(i=null);var r=this.getSource();return 0<=n&&n<r.length?r[n]:i};e.prototype.first=function(n){var t=this.getSource();return n==null&&t.length>0?t[0]:i.prototype.first.apply(this,arguments)};e.prototype.firstOrDefault=function(n,r){if(r===t&&(r=null),n!=null)return i.prototype.firstOrDefault.apply(this,arguments);var u=this.getSource();return u.length>0?u[0]:r};e.prototype.last=function(n){var t=this.getSource();return n==null&&t.length>0?t[t.length-1]:i.prototype.last.apply(this,arguments)};e.prototype.lastOrDefault=function(n,r){if(r===t&&(r=null),n!=null)return i.prototype.lastOrDefault.apply(this,arguments);var u=this.getSource();return u.length>0?u[u.length-1]:r};e.prototype.skip=function(n){var t=this.getSource();return new i(function(){var i;return new u(function(){i=n<0?0:n},function(){return i<t.length?this.yieldReturn(t[i++]):!1},f.Blank)})};e.prototype.takeExceptLast=function(n){return n==null&&(n=1),this.take(this.getSource().length-n)};e.prototype.takeFromLast=function(n){return this.skip(this.getSource().length-n)};e.prototype.reverse=function(){var n=this.getSource();return new i(function(){var t;return new u(function(){t=n.length},function(){return t>0?this.yieldReturn(n[--t]):!1},f.Blank)})};e.prototype.sequenceEqual=function(n,t){return(n instanceof e||n instanceof Array)&&t==null&&i.from(n).count()!=this.count()?!1:i.prototype.sequenceEqual.apply(this,arguments)};e.prototype.toJoinedString=function(n,t){var r=this.getSource();return t!=null||!(r instanceof Array)?i.prototype.toJoinedString.apply(this,arguments):(n==null&&(n=""),r.join(n))};e.prototype.getEnumerator=function(){return new Bridge.ArrayEnumerator(this.getSource())};h=function(n,t){this.prevSource=n;this.prevPredicate=t};h.prototype=new i;h.prototype.where=function(n){if(n=r.createLambda(n),n.length<=1){var t=this.prevPredicate,u=function(i){return t(i)&&n(i)};return new h(this.prevSource,u)}return i.prototype.where.call(this,n)};h.prototype.select=function(n){return n=r.createLambda(n),n.length<=1?new c(this.prevSource,this.prevPredicate,n):i.prototype.select.call(this,n)};h.prototype.getEnumerator=function(){var t=this.prevPredicate,i=this.prevSource,n;return new u(function(){n=i.getEnumerator()},function(){while(n.moveNext())if(t(n.getCurrent()))return this.yieldReturn(n.getCurrent());return!1},function(){r.dispose(n)})};c=function(n,t,i){this.prevSource=n;this.prevPredicate=t;this.prevSelector=i};c.prototype=new i;c.prototype.where=function(n){return n=r.createLambda(n),n.length<=1?new h(this,n):i.prototype.where.call(this,n)};c.prototype.select=function(n){if(n=r.createLambda(n),n.length<=1){var t=this.prevSelector,u=function(i){return n(t(i))};return new c(this.prevSource,this.prevPredicate,u)}return i.prototype.select.call(this,n)};c.prototype.getEnumerator=function(){var t=this.prevPredicate,i=this.prevSelector,f=this.prevSource,n;return new u(function(){n=f.getEnumerator()},function(){while(n.moveNext())if(t==null||t(n.getCurrent()))return this.yieldReturn(i(n.getCurrent()));return!1},function(){r.dispose(n)})};w=function(n,t){this.count=function(){return n.getCount()};this.get=function(t){var r={v:null},u=n.tryGetValue(t,r);return i.from(u?r.v:[])};this.contains=function(t){return n.containsKey(t)};this.toEnumerable=function(){return i.from(t).select(function(t){return new y(t,n.get(t))})};this.getEnumerator=function(){return this.toEnumerable().getEnumerator()}};w.$$inheritors=[Bridge.IEnumerable];y=function(n,t){this.key=function(){return n};e.call(this,t)};y.prototype=new e;typeof define===o.Function&&define.amd?define("linqjs",[],function(){return i}):typeof module!==o.Undefined&&module.exports?module.exports=i:n.Enumerable=i;Bridge.Linq={};Bridge.Linq.Enumerable=i}(Bridge.global);typeof define=="function"&&define.amd?define("bridge",[],function(){return Bridge}):typeof module!="undefined"&&module.exports&&(module.exports=Bridge)})(this);"use strict";Bridge.define("AlphaTab.Audio.GeneralMidi",{statics:{_values:null,getValue:function(name){return Bridge.get(AlphaTab.Audio.GeneralMidi)._values===null&&(Bridge.get(AlphaTab.Audio.GeneralMidi)._values={},Bridge.get(AlphaTab.Audio.GeneralMidi)._values.acousticgrandpiano=0,Bridge.get(AlphaTab.Audio.GeneralMidi)._values.brightacousticpiano=1,Bridge.get(AlphaTab.Audio.GeneralMidi)._values.electricgrandpiano=2,Bridge.get(AlphaTab.Audio.GeneralMidi)._values.honkytonkpiano=3,Bridge.get(AlphaTab.Audio.GeneralMidi)._values.electricpiano1=4,Bridge.get(AlphaTab.Audio.GeneralMidi)._values.electricpiano2=5,Bridge.get(AlphaTab.Audio.GeneralMidi)._values.harpsichord=6,Bridge.get(AlphaTab.Audio.GeneralMidi)._values.clavinet=7,Bridge.get(AlphaTab.Audio.GeneralMidi)._values.celesta=8,Bridge.get(AlphaTab.Audio.GeneralMidi)._values.glockenspiel=9,Bridge.get(AlphaTab.Audio.GeneralMidi)._values.musicbox=10,Bridge.get(AlphaTab.Audio.GeneralMidi)._values.vibraphone=11,Bridge.get(AlphaTab.Audio.GeneralMidi)._values.marimba=12,Bridge.get(AlphaTab.Audio.GeneralMidi)._values.xylophone=13,Bridge.get(AlphaTab.Audio.GeneralMidi)._values.tubularbells=14,Bridge.get(AlphaTab.Audio.GeneralMidi)._values.dulcimer=15,Bridge.get(AlphaTab.Audio.GeneralMidi)._values.drawbarorgan=16,Bridge.get(AlphaTab.Audio.GeneralMidi)._values.percussiveorgan=17,Bridge.get(AlphaTab.Audio.GeneralMidi)._values.rockorgan=18,Bridge.get(AlphaTab.Audio.GeneralMidi)._values.churchorgan=19,Bridge.get(AlphaTab.Audio.GeneralMidi)._values.reedorgan=20,Bridge.get(AlphaTab.Audio.GeneralMidi)._values.accordion=21,Bridge.get(AlphaTab.Audio.GeneralMidi)._values.harmonica=22,Bridge.get(AlphaTab.Audio.GeneralMidi)._values.tangoaccordion=23,Bridge.get(AlphaTab.Audio.GeneralMidi)._values.acousticguitarnylon=24,Bridge.get(AlphaTab.Audio.GeneralMidi)._values.acousticguitarsteel=25,Bridge.get(AlphaTab.Audio.GeneralMidi)._values.electricguitarjazz=26,Bridge.get(AlphaTab.Audio.GeneralMidi)._values.electricguitarclean=27,Bridge.get(AlphaTab.Audio.GeneralMidi)._values.electricguitarmuted=28,Bridge.get(AlphaTab.Audio.GeneralMidi)._values.overdrivenguitar=29,Bridge.get(AlphaTab.Audio.GeneralMidi)._values.distortionguitar=30,Bridge.get(AlphaTab.Audio.GeneralMidi)._values.guitarharmonics=31,Bridge.get(AlphaTab.Audio.GeneralMidi)._values.acousticbass=32,Bridge.get(AlphaTab.Audio.GeneralMidi)._values.electricbassfinger=33,Bridge.get(AlphaTab.Audio.GeneralMidi)._values.electricbasspick=34,Bridge.get(AlphaTab.Audio.GeneralMidi)._values.fretlessbass=35,Bridge.get(AlphaTab.Audio.GeneralMidi)._values.slapbass1=36,Bridge.get(AlphaTab.Audio.GeneralMidi)._values.slapbass2=37,Bridge.get(AlphaTab.Audio.GeneralMidi)._values.synthbass1=38,Bridge.get(AlphaTab.Audio.GeneralMidi)._values.synthbass2=39,Bridge.get(AlphaTab.Audio.GeneralMidi)._values.violin=40,Bridge.get(AlphaTab.Audio.GeneralMidi)._values.viola=41,Bridge.get(AlphaTab.Audio.GeneralMidi)._values.cello=42,Bridge.get(AlphaTab.Audio.GeneralMidi)._values.contrabass=43,Bridge.get(AlphaTab.Audio.GeneralMidi)._values.tremolostrings=44,Bridge.get(AlphaTab.Audio.GeneralMidi)._values.pizzicatostrings=45,Bridge.get(AlphaTab.Audio.GeneralMidi)._values.orchestralharp=46,Bridge.get(AlphaTab.Audio.GeneralMidi)._values.timpani=47,Bridge.get(AlphaTab.Audio.GeneralMidi)._values.stringensemble1=48,Bridge.get(AlphaTab.Audio.GeneralMidi)._values.stringensemble2=49,Bridge.get(AlphaTab.Audio.GeneralMidi)._values.synthstrings1=50,Bridge.get(AlphaTab.Audio.GeneralMidi)._values.synthstrings2=51,Bridge.get(AlphaTab.Audio.GeneralMidi)._values.choiraahs=52,Bridge.get(AlphaTab.Audio.GeneralMidi)._values.voiceoohs=53,Bridge.get(AlphaTab.Audio.GeneralMidi)._values.synthvoice=54,Bridge.get(AlphaTab.Audio.GeneralMidi)._values.orchestrahit=55,Bridge.get(AlphaTab.Audio.GeneralMidi)._values.trumpet=56,Bridge.get(AlphaTab.Audio.GeneralMidi)._values.trombone=57,Bridge.get(AlphaTab.Audio.GeneralMidi)._values.tuba=58,Bridge.get(AlphaTab.Audio.GeneralMidi)._values.mutedtrumpet=59,Bridge.get(AlphaTab.Audio.GeneralMidi)._values.frenchhorn=60,Bridge.get(AlphaTab.Audio.GeneralMidi)._values.brasssection=61,Bridge.get(AlphaTab.Audio.GeneralMidi)._values.synthbrass1=62,Bridge.get(AlphaTab.Audio.GeneralMidi)._values.synthbrass2=63,Bridge.get(AlphaTab.Audio.GeneralMidi)._values.sopranosax=64,Bridge.get(AlphaTab.Audio.GeneralMidi)._values.altosax=65,Bridge.get(AlphaTab.Audio.GeneralMidi)._values.tenorsax=66,Bridge.get(AlphaTab.Audio.GeneralMidi)._values.baritonesax=67,Bridge.get(AlphaTab.Audio.GeneralMidi)._values.oboe=68,Bridge.get(AlphaTab.Audio.GeneralMidi)._values.englishhorn=69,Bridge.get(AlphaTab.Audio.GeneralMidi)._values.bassoon=70,Bridge.get(AlphaTab.Audio.GeneralMidi)._values.clarinet=71,Bridge.get(AlphaTab.Audio.GeneralMidi)._values.piccolo=72,Bridge.get(AlphaTab.Audio.GeneralMidi)._values.flute=73,Bridge.get(AlphaTab.Audio.GeneralMidi)._values.recorder=74,Bridge.get(AlphaTab.Audio.GeneralMidi)._values.panflute=75,Bridge.get(AlphaTab.Audio.GeneralMidi)._values.blownbottle=76,Bridge.get(AlphaTab.Audio.GeneralMidi)._values.shakuhachi=77,Bridge.get(AlphaTab.Audio.GeneralMidi)._values.whistle=78,Bridge.get(AlphaTab.Audio.GeneralMidi)._values.ocarina=79,Bridge.get(AlphaTab.Audio.GeneralMidi)._values.lead1square=80,Bridge.get(AlphaTab.Audio.GeneralMidi)._values.lead2sawtooth=81,Bridge.get(AlphaTab.Audio.GeneralMidi)._values.lead3calliope=82,Bridge.get(AlphaTab.Audio.GeneralMidi)._values.lead4chiff=83,Bridge.get(AlphaTab.Audio.GeneralMidi)._values.lead5charang=84,Bridge.get(AlphaTab.Audio.GeneralMidi)._values.lead6voice=85,Bridge.get(AlphaTab.Audio.GeneralMidi)._values.lead7fifths=86,Bridge.get(AlphaTab.Audio.GeneralMidi)._values.lead8bassandlead=87,Bridge.get(AlphaTab.Audio.GeneralMidi)._values.pad1newage=88,Bridge.get(AlphaTab.Audio.GeneralMidi)._values.pad2warm=89,Bridge.get(AlphaTab.Audio.GeneralMidi)._values.pad3polysynth=90,Bridge.get(AlphaTab.Audio.GeneralMidi)._values.pad4choir=91,Bridge.get(AlphaTab.Audio.GeneralMidi)._values.pad5bowed=92,Bridge.get(AlphaTab.Audio.GeneralMidi)._values.pad6metallic=93,Bridge.get(AlphaTab.Audio.GeneralMidi)._values.pad7halo=94,Bridge.get(AlphaTab.Audio.GeneralMidi)._values.pad8sweep=95,Bridge.get(AlphaTab.Audio.GeneralMidi)._values.fx1rain=96,Bridge.get(AlphaTab.Audio.GeneralMidi)._values.fx2soundtrack=97,Bridge.get(AlphaTab.Audio.GeneralMidi)._values.fx3crystal=98,Bridge.get(AlphaTab.Audio.GeneralMidi)._values.fx4atmosphere=99,Bridge.get(AlphaTab.Audio.GeneralMidi)._values.fx5brightness=100,Bridge.get(AlphaTab.Audio.GeneralMidi)._values.fx6goblins=101,Bridge.get(AlphaTab.Audio.GeneralMidi)._values.fx7echoes=102,Bridge.get(AlphaTab.Audio.GeneralMidi)._values.fx8scifi=103,Bridge.get(AlphaTab.Audio.GeneralMidi)._values.sitar=104,Bridge.get(AlphaTab.Audio.GeneralMidi)._values.banjo=105,Bridge.get(AlphaTab.Audio.GeneralMidi)._values.shamisen=106,Bridge.get(AlphaTab.Audio.GeneralMidi)._values.koto=107,Bridge.get(AlphaTab.Audio.GeneralMidi)._values.kalimba=108,Bridge.get(AlphaTab.Audio.GeneralMidi)._values.bagpipe=109,Bridge.get(AlphaTab.Audio.GeneralMidi)._values.fiddle=110,Bridge.get(AlphaTab.Audio.GeneralMidi)._values.shanai=111,Bridge.get(AlphaTab.Audio.GeneralMidi)._values.tinklebell=112,Bridge.get(AlphaTab.Audio.GeneralMidi)._values.agogo=113,Bridge.get(AlphaTab.Audio.GeneralMidi)._values.steeldrums=114,Bridge.get(AlphaTab.Audio.GeneralMidi)._values.woodblock=115,Bridge.get(AlphaTab.Audio.GeneralMidi)._values.taikodrum=116,Bridge.get(AlphaTab.Audio.GeneralMidi)._values.melodictom=117,Bridge.get(AlphaTab.Audio.GeneralMidi)._values.synthdrum=118,Bridge.get(AlphaTab.Audio.GeneralMidi)._values.reversecymbal=119,Bridge.get(AlphaTab.Audio.GeneralMidi)._values.guitarfretnoise=120,Bridge.get(AlphaTab.Audio.GeneralMidi)._values.breathnoise=121,Bridge.get(AlphaTab.Audio.GeneralMidi)._values.seashore=122,Bridge.get(AlphaTab.Audio.GeneralMidi)._values.birdtweet=123,Bridge.get(AlphaTab.Audio.GeneralMidi)._values.telephonering=124,Bridge.get(AlphaTab.Audio.GeneralMidi)._values.helicopter=125,Bridge.get(AlphaTab.Audio.GeneralMidi)._values.applause=126,Bridge.get(AlphaTab.Audio.GeneralMidi)._values.gunshot=127),name=Bridge.String.replaceAll(name.toLowerCase()," ",""),Bridge.get(AlphaTab.Audio.GeneralMidi)._values.hasOwnProperty(name)?Bridge.get(AlphaTab.Audio.GeneralMidi)._values[name]:0}}});Bridge.define("AlphaTab.Audio.Generator.IMidiFileHandler");Bridge.define("AlphaTab.Audio.Generator.MidiFileHandler",{inherits:[AlphaTab.Audio.Generator.IMidiFileHandler],statics:{DefaultMetronomeKey:37,DefaultDurationDead:30,DefaultDurationPalmMute:80,RestMessage:0,fixValue:function(value){return value>127?127:value},buildMetaMessage:function(metaType,data){var meta=Bridge.get(AlphaTab.IO.ByteBuffer).empty();return meta.writeByte(255),meta.writeByte(metaType&255),Bridge.get(AlphaTab.Audio.Generator.MidiFileHandler).writeVarInt(meta,data.length),meta.write(data,0,data.length),new AlphaTab.Audio.Model.MidiMessage(meta.toArray())},writeVarInt:function(data,v){var n=0,array=new Uint8Array(4);do array[n++]=v&127,v>>=7;while(v>0);while(n>0)n--,n>0?data.writeByte((array[n]|128)&255):data.writeByte(array[n])},buildSysExMessage:function(data){var sysex=Bridge.get(AlphaTab.IO.ByteBuffer).empty();return sysex.writeByte(240),Bridge.get(AlphaTab.Audio.Generator.MidiFileHandler).writeVarInt(sysex,data.length+2),sysex.writeByte(0),sysex.write(data,0,data.length),sysex.writeByte(247),new AlphaTab.Audio.Model.MidiMessage(sysex.toArray())}},_midiFile:null,_metronomeTrack:0,constructor:function(midiFile){this._midiFile=midiFile;this._metronomeTrack=-1},addEvent:function(track,tick,message){this._midiFile.tracks[track].addEvent(new AlphaTab.Audio.Model.MidiEvent(tick,message))},makeCommand:function(command,channel){return command&240|channel&15},addTimeSignature:function(tick,timeSignatureNumerator,timeSignatureDenominator){for(var $t,denominatorIndex=0;($t=timeSignatureDenominator>>1,timeSignatureDenominator=$t,$t)>0;)denominatorIndex++;this.addEvent(this._midiFile.infoTrack,tick,Bridge.get(AlphaTab.Audio.Generator.MidiFileHandler).buildMetaMessage(88,[timeSignatureNumerator&255,denominatorIndex&255,48,8]))},addRest:function(track,tick){this.addEvent(track,tick,Bridge.get(AlphaTab.Audio.Generator.MidiFileHandler).buildSysExMessage([Bridge.get(AlphaTab.Audio.Generator.MidiFileHandler).RestMessage]))},addNote:function(track,start,length,key,dynamicValue,channel){var velocity=Bridge.get(AlphaTab.Audio.MidiUtils).dynamicToVelocity(dynamicValue);this.addEvent(track,start,new AlphaTab.Audio.Model.MidiMessage([this.makeCommand(144,channel),Bridge.get(AlphaTab.Audio.Generator.MidiFileHandler).fixValue(key),Bridge.get(AlphaTab.Audio.Generator.MidiFileHandler).fixValue(velocity)]));this.addEvent(track,start+length,new AlphaTab.Audio.Model.MidiMessage([this.makeCommand(128,channel),Bridge.get(AlphaTab.Audio.Generator.MidiFileHandler).fixValue(key),Bridge.get(AlphaTab.Audio.Generator.MidiFileHandler).fixValue(velocity)]))},addControlChange:function(track,tick,channel,controller,value){this.addEvent(track,tick,new AlphaTab.Audio.Model.MidiMessage([this.makeCommand(176,channel),Bridge.get(AlphaTab.Audio.Generator.MidiFileHandler).fixValue(controller),Bridge.get(AlphaTab.Audio.Generator.MidiFileHandler).fixValue(value)]))},addProgramChange:function(track,tick,channel,program){this.addEvent(track,tick,new AlphaTab.Audio.Model.MidiMessage([this.makeCommand(192,channel),Bridge.get(AlphaTab.Audio.Generator.MidiFileHandler).fixValue(program)]))},addTempo:function(tick,tempo){var tempoInUsq=Bridge.Int.div(6e7,tempo);this.addEvent(this._midiFile.infoTrack,tick,Bridge.get(AlphaTab.Audio.Generator.MidiFileHandler).buildMetaMessage(81,[tempoInUsq>>16&255,tempoInUsq>>8&255,tempoInUsq&255]))},addBend:function(track,tick,channel,value){this.addEvent(track,tick,new AlphaTab.Audio.Model.MidiMessage([this.makeCommand(224,channel),0,Bridge.get(AlphaTab.Audio.Generator.MidiFileHandler).fixValue(value)]))},addMetronome:function(start,length){this._metronomeTrack===-1&&(this._midiFile.createTrack(),this._metronomeTrack=this._midiFile.tracks.length-1);this.addNote(this._metronomeTrack,start,length,Bridge.get(AlphaTab.Audio.Generator.MidiFileHandler).DefaultMetronomeKey,Bridge.get(AlphaTab.Model.DynamicValue).f,Bridge.get(AlphaTab.Audio.MidiUtils).PercussionChannel)}});Bridge.define("AlphaTab.Audio.Model.MidiFile",{config:{properties:{tracks:null,infoTrack:0}},constructor:function(){this.tracks=[]},createTrack:function(){var track=new AlphaTab.Audio.Model.MidiTrack;return track.index=this.tracks.length,track.file=this,this.tracks.push(track),track},writeTo:function(s){var b,v,i,j;for(b=[77,84,104,100],s.write(b,0,b.length),b=[0,0,0,6],s.write(b,0,b.length),b=[0,1],s.write(b,0,b.length),v=this.tracks.length,b=[v>>8&255,v&255],s.write(b,0,b.length),v=Bridge.get(AlphaTab.Audio.MidiUtils).QuarterTime,b=[v>>8&255,v&255],s.write(b,0,b.length),i=0,j=this.tracks.length;i<j;i++)this.tracks[i].writeTo(s)}});Bridge.define("AlphaTab.Model.Score",{statics:{copyTo:function(src,dst){dst.album=src.album;dst.artist=src.artist;dst.copyright=src.copyright;dst.instructions=src.instructions;dst.music=src.music;dst.notices=src.notices;dst.subTitle=src.subTitle;dst.title=src.title;dst.words=src.words;dst.tab=src.tab;dst.tempo=src.tempo;dst.tempoLabel=src.tempoLabel}},_currentRepeatGroup:null,config:{properties:{album:null,artist:null,copyright:null,instructions:null,music:null,notices:null,subTitle:null,title:null,words:null,tab:null,tempo:0,tempoLabel:null,masterBars:null,tracks:null}},constructor:function(){this.masterBars=[];this.tracks=[];this._currentRepeatGroup=new AlphaTab.Model.RepeatGroup},addMasterBar:function(bar){bar.score=this;bar.index=this.masterBars.length;this.masterBars.length!==0&&(bar.previousMasterBar=this.masterBars[this.masterBars.length-1],bar.previousMasterBar.nextMasterBar=bar,bar.start=bar.previousMasterBar.start+bar.previousMasterBar.calculateDuration());(bar.isRepeatStart||this._currentRepeatGroup.isClosed&&bar.alternateEndings<=0)&&(this._currentRepeatGroup=new AlphaTab.Model.RepeatGroup);this._currentRepeatGroup.addMasterBar(bar);this.masterBars.push(bar)},addTrack:function(track){track.score=this;track.index=this.tracks.length;this.tracks.push(track)},finish:function(){for(var i=0,j=this.tracks.length;i<j;i++)this.tracks[i].finish()}});Bridge.define("AlphaTab.Audio.Model.MidiMessage",{config:{properties:{event:null,data:null}},constructor:function(data){this.data=data},writeTo:function(s){s.write(this.data,0,this.data.length)}});Bridge.define("AlphaTab.Audio.Generator.MidiPlaybackController",{_score:null,_currentAlternateEndings:0,_repeatStartIndex:0,_repeatNumber:0,_repeatOpen:!1,config:{properties:{shouldPlay:!1,index:0,currentTick:0}},constructor:function(score){this._score=score;this.shouldPlay=!0;this.index=0;this.currentTick=0},getFinished:function(){return this.index>=this._score.masterBars.length},processCurrent:function(){var masterBar=this._score.masterBars[this.index],masterBarAlternateEndings=masterBar.alternateEndings;masterBar.repeatGroup.isClosed||masterBar.repeatGroup.openings[masterBar.repeatGroup.openings.length-1]!==masterBar||(this._repeatNumber=0,this._repeatOpen=!1);(masterBar.isRepeatStart||masterBar.index===0)&&this._repeatNumber===0?(this._repeatStartIndex=this.index,this._repeatOpen=!0):masterBar.isRepeatStart&&(this.shouldPlay=!0);this._repeatOpen&&masterBarAlternateEndings>0&&(this.shouldPlay=(masterBarAlternateEndings&1<<this._repeatNumber)==0?!1:!0);this.shouldPlay&&(this.currentTick+=masterBar.calculateDuration())},moveNext:function(){var masterBar=this._score.masterBars[this.index],masterBarAlternateEndings=masterBar.alternateEndings,masterBarRepeatCount=masterBar.repeatCount-1;this._repeatOpen&&masterBarRepeatCount>0?this._repeatNumber<masterBarRepeatCount?(this.index=this._repeatStartIndex,this._repeatNumber++):(this._repeatNumber=0,this._repeatOpen=!1,this._currentAlternateEndings=0,this.shouldPlay=!0,this.index):this.index}});Bridge.define("AlphaTab.Model.Duration",{statics:{whole:1,half:2,quarter:4,eighth:8,sixteenth:16,thirtySecond:32,sixtyFourth:64},$enum:!0});Bridge.define("AlphaTab.Model.DynamicValue",{statics:{pPP:0,pP:1,p:2,mP:3,mF:4,f:5,fF:6,fFF:7},$enum:!0});Bridge.define("AlphaTab.Audio.Model.MidiTickLookup",{_lastBeat:null,config:{properties:{bars:null}},constructor:function(){this.bars=[]},findBeat:function(track,tick){var lookup,masterBar,bar,beat,i,j,b;if(this._lastBeat!==null&&this._lastBeat.nextBeat!==null&&this._lastBeat.voice.bar.track===track&&tick>=this._lastBeat.getAbsoluteStart()&&tick<this._lastBeat.nextBeat.getAbsoluteStart())return this._lastBeat;if(lookup=this.findBar(tick),lookup===null)return null;for(masterBar=lookup.bar,bar=track.bars[masterBar.index],tick=tick-lookup.start+masterBar.start,beat=null,i=0,j=bar.voices[0].beats.length;i<j;i++)if(b=bar.voices[0].beats[i],beat===null||b.getAbsoluteStart()<=tick)beat=b;else break;return this._lastBeat=beat,this._lastBeat},findBar:function(tick){for(var bottom=0,top=this.bars.length-1,middle,bar;bottom<=top;){if(middle=Bridge.Int.div(top+bottom,2),bar=this.bars[middle],tick>=bar.start&&tick<=bar.end)return bar;tick<bar.start?top=middle-1:bottom=middle+1}return null}});Bridge.define("AlphaTab.Audio.Model.BarTickLookup",{config:{properties:{start:0,end:0,bar:null}}});Bridge.define("AlphaTab.Model.MasterBar",{statics:{MaxAlternateEndings:8,copyTo:function(src,dst){dst.alternateEndings=src.alternateEndings;dst.index=src.index;dst.keySignature=src.keySignature;dst.isDoubleBar=src.isDoubleBar;dst.isRepeatStart=src.isRepeatStart;dst.repeatCount=src.repeatCount;dst.timeSignatureNumerator=src.timeSignatureNumerator;dst.timeSignatureDenominator=src.timeSignatureDenominator;dst.tripletFeel=src.tripletFeel;dst.start=src.start}},config:{properties:{alternateEndings:0,nextMasterBar:null,previousMasterBar:null,index:0,keySignature:0,isDoubleBar:!1,isRepeatStart:!1,repeatCount:0,repeatGroup:null,timeSignatureNumerator:0,timeSignatureDenominator:0,tripletFeel:0,section:null,tempoAutomation:null,volumeAutomation:null,score:null,start:0}},constructor:function(){this.timeSignatureDenominator=4;this.timeSignatureNumerator=4;this.tripletFeel=Bridge.get(AlphaTab.Model.TripletFeel).noTripletFeel},getIsRepeatEnd:function(){return this.repeatCount>0},getIsSectionStart:function(){return this.section!==null},calculateDuration:function(){return this.timeSignatureNumerator*Bridge.get(AlphaTab.Audio.MidiUtils).valueToTicks(this.timeSignatureDenominator)}});Bridge.define("AlphaTab.Audio.Model.MidiController",{statics:{allNotesOff:123,balance:10,chorus:93,dataEntryLsb:38,dataEntryMsb:6,expression:11,phaser:95,reverb:91,rpnLsb:100,rpnMsb:101,tremolo:92,volume:7},$enum:!0});Bridge.define("AlphaTab.Audio.Model.MidiEvent",{config:{properties:{track:null,tick:0,message:null,nextEvent:null,previousEvent:null}},constructor:function(tick,message){this.tick=tick;this.message=message},getDeltaTicks:function(){return this.previousEvent===null?0:this.tick-this.previousEvent.tick},writeTo:function(s){this.writeVariableInt(s,this.getDeltaTicks());this.message.writeTo(s)},writeVariableInt:function(s,value){var array=new Uint8Array(4),n=0;do array[n++]=value&127,value>>=7;while(value>0);while(n>0)n--,n>0?s.writeByte(array[n]|128):s.writeByte(array[n])}});Bridge.define("AlphaTab.Audio.Model.MidiTrack",{config:{properties:{index:0,file:null,firstEvent:null,lastEvent:null}},addEvent:function(e){var firstDelta,lastDelta,previous,next,next1,previous1;if(e.track=this,this.firstEvent===null)this.firstEvent=e,this.lastEvent=e;else if(this.lastEvent.tick<=e.tick)this.lastEvent.nextEvent=e,e.previousEvent=this.lastEvent,this.lastEvent=e;else if(this.firstEvent.tick>e.tick)e.nextEvent=this.firstEvent,this.firstEvent.previousEvent=e,this.firstEvent=e;else if(firstDelta=e.tick-this.firstEvent.tick,lastDelta=this.lastEvent.tick-e.tick,firstDelta<lastDelta){for(previous=this.firstEvent;previous!==null&&previous.nextEvent!==null&&previous.nextEvent.tick<e.tick;)previous=previous.nextEvent;if(previous===null)return;next=previous.nextEvent;previous.nextEvent=e;e.previousEvent=previous;e.nextEvent=next;next!==null&&(next.previousEvent=e)}else{for(next1=this.lastEvent;next1!==null&&next1.previousEvent!==null&&next1.previousEvent.tick>e.tick;)next1=next1.previousEvent;if(next1===null)return;previous1=next1.previousEvent;next1.previousEvent=e;e.nextEvent=next1;e.previousEvent=previous1;previous1!==null?previous1.nextEvent=e:this.firstEvent=e}},writeTo:function(s){for(var trackData=Bridge.get(AlphaTab.IO.ByteBuffer).empty(),current=this.firstEvent,count=0,b,data,l;current!==null;)current.writeTo(trackData),current=current.nextEvent,count++;b=[77,84,114,107];s.write(b,0,b.length);data=trackData.toArray();l=data.length;b=[l>>24&255,l>>16&255,l>>8&255,l>>0&255];s.write(b,0,b.length);s.write(data,0,data.length)}});Bridge.define("AlphaTab.Importer.AlphaTexException",{inherits:[Bridge.Exception],config:{properties:{position:0,nonTerm:null,expected:0,symbol:0,symbolData:null}},constructor:function(position,nonTerm,expected,symbol,symbolData){Bridge.Exception.prototype.$constructor.call(this);symbolData===void 0&&(symbolData=null);this.position=position;this.nonTerm=nonTerm;this.expected=expected;this.symbol=symbol;this.symbolData=symbolData},getMessage:function(){return this.symbolData===null?this.position+": Error on block "+this.nonTerm+", expected a "+this.expected+" found a "+this.symbol:this.position+": Error on block "+this.nonTerm+", invalid value: "+this.symbolData}});Bridge.define("AlphaTab.Importer.AlphaTexSymbols",{statics:{no:0,eof:1,number:2,doubleDot:3,dot:4,string:5,tuning:6,lParensis:7,rParensis:8,lBrace:9,rBrace:10,pipe:11,metaCommand:12,multiply:13},$enum:!0});Bridge.define("AlphaTab.Importer.GpxFile",{config:{properties:{fileName:null,fileSize:0,data:null}}});Bridge.define("AlphaTab.Importer.GpxFileSystem",{statics:{HeaderBcFs:"BCFS",HeaderBcFz:"BCFZ",ScoreGpif:"score.gpif"},config:{properties:{fileFilter:null,files:null}},constructor:function(){this.files=[];this.fileFilter=function(){return!0}},load:function(s){var src=new AlphaTab.IO.BitReader(s);this.readBlock(src)},readHeader:function(src){return this.getString(src.readBytes(4),0,4)},decompress:function(src,skipHeader){var uncompressed,buffer,expectedLength,flag,size1,i;skipHeader===void 0&&(skipHeader=!1);uncompressed=Bridge.get(AlphaTab.IO.ByteBuffer).empty();expectedLength=this.getInteger(src.readBytes(4),0);try{while(uncompressed.getLength()<expectedLength)if(flag=src.readBits(1),flag===1){var wordSize=src.readBits(4),offset=src.readBitsReversed(wordSize),size=src.readBitsReversed(wordSize),sourcePosition=uncompressed.getLength()-offset,toRead=Math.min(offset,size);buffer=uncompressed.getBuffer();uncompressed.write(buffer,sourcePosition,toRead)}else for(size1=src.readBitsReversed(2),i=0;i<size1;i++)uncompressed.writeByte(src.readByte())}catch($e){if($e=Bridge.Exception.create($e),!Bridge.is($e,AlphaTab.IO.EndOfReaderException))throw $e;}buffer=uncompressed.getBuffer();var resultOffset=skipHeader?4:0,resultSize=uncompressed.getLength()-resultOffset,result=new Uint8Array(resultSize);return result.set(buffer.subarray(resultOffset,resultOffset+resultSize),0),result},readBlock:function(data){var header=this.readHeader(data);if(header===Bridge.get(AlphaTab.Importer.GpxFileSystem).HeaderBcFz)this.readUncompressedBlock(this.decompress(data,!0));else if(header===Bridge.get(AlphaTab.Importer.GpxFileSystem).HeaderBcFs)this.readUncompressedBlock(data.readAll());else throw new AlphaTab.Importer.UnsupportedFormatException;},readUncompressedBlock:function(data){for(var $t,sectorSize=4096,offset=sectorSize,entryType,file,storeFile,raw;offset+3<data.length;){if(entryType=this.getInteger(data,offset),entryType===2){file=new AlphaTab.Importer.GpxFile;file.fileName=this.getString(data,offset+4,127);file.fileSize=this.getInteger(data,offset+140);storeFile=this.fileFilter===null||this.fileFilter(file.fileName);storeFile&&this.files.push(file);for(var dataPointerOffset=offset+148,sector=0,sectorCount=0,fileData=storeFile?Bridge.get(AlphaTab.IO.ByteBuffer).withCapactiy(file.fileSize):null;($t=this.getInteger(data,dataPointerOffset+4*sectorCount++),sector=$t,$t)!==0;)offset=sector*sectorSize,storeFile&&fileData.write(data,offset,sectorSize);storeFile&&(file.data=new Uint8Array(Math.min(file.fileSize,fileData.getLength())),raw=fileData.toArray(),file.data.set(raw.subarray(0,0+file.data.length),0))}offset+=sectorSize}},getString:function(data,offset,length){for(var code,buf=[],i=0;i<length;i++){if(code=data[offset+i]&255,code===0)break;buf.push(String.fromCharCode(code))}return buf.join("")},getInteger:function(data,offset){return data[offset+3]<<24|data[offset+2]<<16|data[offset+1]<<8|data[offset]}});Bridge.define("AlphaTab.Importer.GpxParser",{statics:{InvalidId:"-1",BendPointPositionFactor:.6,BendPointValueFactor:.04},_automations:null,_tracksMapping:null,_tracksById:null,_masterBars:null,_barsOfMasterBar:null,_barsById:null,_voicesOfBar:null,_voiceById:null,_beatsOfVoice:null,_rhythmOfBeat:null,_beatById:null,_rhythmById:null,_noteById:null,_notesOfBeat:null,_tappedNotes:null,config:{properties:{score:null}},parseXml:function(xml){this._automations={};this._tracksMapping=Bridge.Array.init(0,null);this._tracksById={};this._masterBars=[];this._barsOfMasterBar=[];this._voicesOfBar={};this._barsById={};this._voiceById={};this._beatsOfVoice={};this._beatById={};this._rhythmOfBeat={};this._rhythmById={};this._notesOfBeat={};this._noteById={};this._tappedNotes={};this.parseDom(Bridge.get(AlphaTab.Platform.Std).loadXml(xml))},parseDom:function(dom){var root=dom.getDocumentElement();if(root!==null){if(root.getLocalName()==="GPIF")this.score=new AlphaTab.Model.Score,AlphaTab.Platform.Std.iterateChildren(root,Bridge.fn.bind(this,function(n){if(n.getNodeType()===Bridge.get(AlphaTab.Xml.XmlNodeType).element)switch(n.getLocalName()){case"Score":this.parseScoreNode(n);break;case"MasterTrack":this.parseMasterTrackNode(n);break;case"Tracks":this.parseTracksNode(n);break;case"MasterBars":this.parseMasterBarsNode(n);break;case"Bars":this.parseBars(n);break;case"Voices":this.parseVoices(n);break;case"Beats":this.parseBeats(n);break;case"Notes":this.parseNotes(n);break;case"Rhythms":this.parseRhythms(n)}}));else throw new AlphaTab.Importer.UnsupportedFormatException;this.buildModel()}},parseScoreNode:function(element){AlphaTab.Platform.Std.iterateChildren(element,Bridge.fn.bind(this,function(c){if(c.getNodeType()===Bridge.get(AlphaTab.Xml.XmlNodeType).element)switch(c.getLocalName()){case"Title":this.score.title=this.getValue(c.getFirstChild());break;case"SubTitle":this.score.subTitle=this.getValue(c.getFirstChild());break;case"Artist":this.score.artist=this.getValue(c.getFirstChild());break;case"Album":this.score.album=this.getValue(c.getFirstChild());break;case"Words":this.score.words=this.getValue(c.getFirstChild());break;case"Music":this.score.music=this.getValue(c.getFirstChild());break;case"WordsAndMusic":if(c.getFirstChild()!==null&&c.getFirstChild().toString()!==""){var wordsAndMusic=this.getValue(c.getFirstChild());!Bridge.String.isNullOrEmpty(wordsAndMusic)&&Bridge.String.isNullOrEmpty(this.score.words)&&(this.score.words=wordsAndMusic);!Bridge.String.isNullOrEmpty(wordsAndMusic)&&Bridge.String.isNullOrEmpty(this.score.music)&&(this.score.music=wordsAndMusic)}break;case"Copyright":this.score.copyright=this.getValue(c.getFirstChild());break;case"Tabber":this.score.tab=this.getValue(c.getFirstChild());break;case"Instructions":this.score.instructions=this.getValue(c.getFirstChild());break;case"Notices":this.score.notices=this.getValue(c.getFirstChild())}}))},parseMasterTrackNode:function(node){AlphaTab.Platform.Std.iterateChildren(node,Bridge.fn.bind(this,function(c){if(c.getNodeType()===Bridge.get(AlphaTab.Xml.XmlNodeType).element)switch(c.getLocalName()){case"Automations":this.parseAutomations(c);break;case"Tracks":this._tracksMapping=this.getValue(c).split(String.fromCharCode(32))}}))},parseAutomations:function(node){AlphaTab.Platform.Std.iterateChildren(node,Bridge.fn.bind(this,function(c){if(c.getNodeType()===Bridge.get(AlphaTab.Xml.XmlNodeType).element)switch(c.getLocalName()){case"Automation":this.parseAutomation(c)}}))},parseAutomation:function(node){var type=null,isLinear=!1,barId=null,ratioPosition=0,value=0,reference=0,text=null,automation;if(AlphaTab.Platform.Std.iterateChildren(node,Bridge.fn.bind(this,function(c){if(c.getNodeType()===Bridge.get(AlphaTab.Xml.XmlNodeType).element)switch(c.getLocalName()){case"Type":type=this.getValue(c);break;case"Linear":isLinear=this.getValue(c).toLowerCase()==="true";break;case"Bar":barId=this.getValue(c);break;case"Position":ratioPosition=parseFloat(this.getValue(c));break;case"Value":var parts=this.getValue(c).split(String.fromCharCode(32));value=parseFloat(parts[0]);reference=parseInt(parts[1]);break;case"Text":text=this.getValue(c)}})),type!==null){automation=null;switch(type){case"Tempo":automation=Bridge.get(AlphaTab.Model.Automation).buildTempoAutomation(isLinear,ratioPosition,value,reference)}automation!==null&&(automation.text=text);barId!==null&&(this._automations.hasOwnProperty(barId)||(this._automations[barId]=[]),this._automations[barId].push(automation))}},parseTracksNode:function(node){AlphaTab.Platform.Std.iterateChildren(node,Bridge.fn.bind(this,function(c){if(c.getNodeType()===Bridge.get(AlphaTab.Xml.XmlNodeType).element)switch(c.getLocalName()){case"Track":this.parseTrack(c)}}))},parseTrack:function(node){var track=new AlphaTab.Model.Track,trackId=node.getAttributes().get("id").getValue();AlphaTab.Platform.Std.iterateChildren(node,Bridge.fn.bind(this,function(c){if(c.getNodeType()===Bridge.get(AlphaTab.Xml.XmlNodeType).element)switch(c.getLocalName()){case"Name":track.name=this.getValue(c);break;case"ShortName":track.shortName=this.getValue(c);break;case"Properties":this.parseTrackProperties(track,c);break;case"GeneralMidi":this.parseGeneralMidi(track,c);break;case"PlaybackState":var state=this.getValue(c);track.playbackInfo.isSolo=state==="Solo";track.playbackInfo.isMute=state==="Mute"}}));this._tracksById[trackId]=track},parseDiagramCollection:function(track,node){var items=this.findChildElement(node,"Items");AlphaTab.Platform.Std.iterateChildren(items,Bridge.fn.bind(this,function(c){if(c.getNodeType()===Bridge.get(AlphaTab.Xml.XmlNodeType).element)switch(c.getLocalName()){case"Item":this.parseDiagramItem(track,c)}}))},parseDiagramItem:function(track,node){var chord=new AlphaTab.Model.Chord,chordId=node.getAttributes().get("id").getValue();chord.name=node.getAttributes().get("name").getValue();track.chords[chordId]=chord},findChildElement:function(node,name){for(var c,i=0;i<node.getChildNodes().getCount();i++)if(c=node.getChildNodes().get(i),c!==null&&c.getNodeType()===Bridge.get(AlphaTab.Xml.XmlNodeType).element&&c.getLocalName()===name)return c;return null},parseTrackProperties:function(track,node){AlphaTab.Platform.Std.iterateChildren(node,Bridge.fn.bind(this,function(c){if(c.getNodeType()===Bridge.get(AlphaTab.Xml.XmlNodeType).element)switch(c.getLocalName()){case"Property":this.parseTrackProperty(track,c)}}))},parseTrackProperty:function(track,node){var propertyName=node.getAttributes().get("name").getValue(),tuningParts,tuning,i;switch(propertyName){case"Tuning":for(tuningParts=this.getValue(this.findChildElement(node,"Pitches")).split(String.fromCharCode(32)),tuning=new Int32Array(tuningParts.length),i=0;i<tuning.length;i++)tuning[tuning.length-1-i]=parseInt(tuningParts[i]);track.tuning=tuning;break;case"DiagramCollection":this.parseDiagramCollection(track,node);break;case"CapoFret":track.capo=parseInt(this.getValue(this.findChildElement(node,"Fret")))}},parseGeneralMidi:function(track,node){track.playbackInfo.port=parseInt(this.getValue(this.findChildElement(node,"Port")));track.playbackInfo.program=parseInt(this.getValue(this.findChildElement(node,"Program")));track.playbackInfo.primaryChannel=parseInt(this.getValue(this.findChildElement(node,"PrimaryChannel")));track.playbackInfo.secondaryChannel=parseInt(this.getValue(this.findChildElement(node,"SecondaryChannel")));track.isPercussion=node.getAttributes().get("table")!==null&&node.getAttributes().get("table").getValue()==="Percussion"},parseMasterBarsNode:function(node){AlphaTab.Platform.Std.iterateChildren(node,Bridge.fn.bind(this,function(c){if(c.getNodeType()===Bridge.get(AlphaTab.Xml.XmlNodeType).element)switch(c.getLocalName()){case"MasterBar":this.parseMasterBar(c)}}))},parseMasterBar:function(node){var masterBar=new AlphaTab.Model.MasterBar;AlphaTab.Platform.Std.iterateChildren(node,Bridge.fn.bind(this,function(c){var timeParts,alternateEndings,i,k;if(c.getNodeType()===Bridge.get(AlphaTab.Xml.XmlNodeType).element)switch(c.getLocalName()){case"Time":timeParts=this.getValue(c).split(String.fromCharCode(47));masterBar.timeSignatureNumerator=parseInt(timeParts[0]);masterBar.timeSignatureDenominator=parseInt(timeParts[1]);break;case"DoubleBar":masterBar.isDoubleBar=!0;break;case"Section":masterBar.section=new AlphaTab.Model.Section;masterBar.section.marker=this.getValue(this.findChildElement(c,"Letter"));masterBar.section.text=this.getValue(this.findChildElement(c,"Text"));break;case"Repeat":c.getAttributes().get("start").getValue().toLowerCase()==="true"&&(masterBar.isRepeatStart=!0);c.getAttributes().get("end").getValue().toLowerCase()==="true"&&c.getAttributes().get("count").getValue()!==null&&(masterBar.repeatCount=parseInt(c.getAttributes().get("count").getValue()));break;case"AlternateEndings":for(alternateEndings=this.getValue(c).split(String.fromCharCode(32)),i=0,k=0;k<alternateEndings.length;k++)i|=1<<-1+parseInt(alternateEndings[k]);masterBar.alternateEndings=i;break;case"Bars":this._barsOfMasterBar.push(this.getValue(c).split(String.fromCharCode(32)));break;case"TripletFeel":switch(this.getValue(c)){case"NoTripletFeel":masterBar.tripletFeel=Bridge.get(AlphaTab.Model.TripletFeel).noTripletFeel;break;case"Triplet8th":masterBar.tripletFeel=Bridge.get(AlphaTab.Model.TripletFeel).triplet8th;break;case"Triplet16th":masterBar.tripletFeel=Bridge.get(AlphaTab.Model.TripletFeel).triplet16th;break;case"Dotted8th":masterBar.tripletFeel=Bridge.get(AlphaTab.Model.TripletFeel).dotted8th;break;case"Dotted16th":masterBar.tripletFeel=Bridge.get(AlphaTab.Model.TripletFeel).dotted16th;break;case"Scottish8th":masterBar.tripletFeel=Bridge.get(AlphaTab.Model.TripletFeel).scottish8th;break;case"Scottish16th":masterBar.tripletFeel=Bridge.get(AlphaTab.Model.TripletFeel).scottish16th}break;case"Key":masterBar.keySignature=parseInt(this.getValue(this.findChildElement(c,"AccidentalCount")))}}));this._masterBars.push(masterBar)},parseBars:function(node){AlphaTab.Platform.Std.iterateChildren(node,Bridge.fn.bind(this,function(c){if(c.getNodeType()===Bridge.get(AlphaTab.Xml.XmlNodeType).element)switch(c.getLocalName()){case"Bar":this.parseBar(c)}}))},parseBar:function(node){var bar=new AlphaTab.Model.Bar,barId=node.getAttributes().get("id").getValue();AlphaTab.Platform.Std.iterateChildren(node,Bridge.fn.bind(this,function(c){if(c.getNodeType()===Bridge.get(AlphaTab.Xml.XmlNodeType).element)switch(c.getLocalName()){case"Voices":this._voicesOfBar[barId]=this.getValue(c).split(String.fromCharCode(32));break;case"Clef":switch(this.getValue(c)){case"Neutral":bar.clef=Bridge.get(AlphaTab.Model.Clef).neutral;break;case"G2":bar.clef=Bridge.get(AlphaTab.Model.Clef).g2;break;case"F4":bar.clef=Bridge.get(AlphaTab.Model.Clef).f4;break;case"C4":bar.clef=Bridge.get(AlphaTab.Model.Clef).c4;break;case"C3":bar.clef=Bridge.get(AlphaTab.Model.Clef).c3}}}));this._barsById[barId]=bar},parseVoices:function(node){AlphaTab.Platform.Std.iterateChildren(node,Bridge.fn.bind(this,function(c){if(c.getNodeType()===Bridge.get(AlphaTab.Xml.XmlNodeType).element)switch(c.getLocalName()){case"Voice":this.parseVoice(c)}}))},parseVoice:function(node){var voice=new AlphaTab.Model.Voice,voiceId=node.getAttributes().get("id").getValue();AlphaTab.Platform.Std.iterateChildren(node,Bridge.fn.bind(this,function(c){if(c.getNodeType()===Bridge.get(AlphaTab.Xml.XmlNodeType).element)switch(c.getLocalName()){case"Beats":this._beatsOfVoice[voiceId]=this.getValue(c).split(String.fromCharCode(32))}}));this._voiceById[voiceId]=voice},parseBeats:function(node){AlphaTab.Platform.Std.iterateChildren(node,Bridge.fn.bind(this,function(c){if(c.getNodeType()===Bridge.get(AlphaTab.Xml.XmlNodeType).element)switch(c.getLocalName()){case"Beat":this.parseBeat(c)}}))},parseBeat:function(node){var beat=new AlphaTab.Model.Beat,beatId=node.getAttributes().get("id").getValue();AlphaTab.Platform.Std.iterateChildren(node,Bridge.fn.bind(this,function(c){if(c.getNodeType()===Bridge.get(AlphaTab.Xml.XmlNodeType).element)switch(c.getLocalName()){case"Notes":this._notesOfBeat[beatId]=this.getValue(c).split(String.fromCharCode(32));break;case"Rhythm":this._rhythmOfBeat[beatId]=c.getAttributes().get("ref").getValue();break;case"Fadding":this.getValue(c)==="FadeIn"&&(beat.fadeIn=!0);break;case"Tremolo":switch(this.getValue(c)){case"1/2":beat.tremoloSpeed=Bridge.get(AlphaTab.Model.Duration).eighth;break;case"1/4":beat.tremoloSpeed=Bridge.get(AlphaTab.Model.Duration).sixteenth;break;case"1/8":beat.tremoloSpeed=Bridge.get(AlphaTab.Model.Duration).thirtySecond}break;case"Chord":beat.chordId=this.getValue(c);break;case"Hairpin":switch(this.getValue(c)){case"Crescendo":beat.crescendo=Bridge.get(AlphaTab.Model.CrescendoType).crescendo;break;case"Decrescendo":beat.crescendo=Bridge.get(AlphaTab.Model.CrescendoType).decrescendo}break;case"Arpeggio":beat.brushType=this.getValue(c)==="Up"?Bridge.get(AlphaTab.Model.BrushType).arpeggioUp:Bridge.get(AlphaTab.Model.BrushType).arpeggioDown;break;case"Properties":this.parseBeatProperties(c,beat);break;case"FreeText":beat.text=this.getValue(c);break;case"Dynamic":switch(this.getValue(c)){case"PPP":beat.dynamic=Bridge.get(AlphaTab.Model.DynamicValue).pPP;break;case"PP":beat.dynamic=Bridge.get(AlphaTab.Model.DynamicValue).pP;break;case"P":beat.dynamic=Bridge.get(AlphaTab.Model.DynamicValue).p;break;case"MP":beat.dynamic=Bridge.get(AlphaTab.Model.DynamicValue).mP;break;case"MF":beat.dynamic=Bridge.get(AlphaTab.Model.DynamicValue).mF;break;case"F":beat.dynamic=Bridge.get(AlphaTab.Model.DynamicValue).f;break;case"FF":beat.dynamic=Bridge.get(AlphaTab.Model.DynamicValue).fF;break;case"FFF":beat.dynamic=Bridge.get(AlphaTab.Model.DynamicValue).fFF}break;case"GraceNotes":switch(this.getValue(c)){case"OnBeat":beat.graceType=Bridge.get(AlphaTab.Model.GraceType).onBeat;break;case"BeforeBeat":beat.graceType=Bridge.get(AlphaTab.Model.GraceType).beforeBeat}}}));this._beatById[beatId]=beat},parseBeatProperties:function(node,beat){var isWhammy=!1,whammyOrigin=null,whammyMiddleValue=null,whammyMiddleOffset1=null,whammyMiddleOffset2=null,whammyDestination=null,whammy;AlphaTab.Platform.Std.iterateChildren(node,Bridge.fn.bind(this,function(c){if(c.getNodeType()===Bridge.get(AlphaTab.Xml.XmlNodeType).element)switch(c.getLocalName()){case"Property":var name=c.getAttributes().get("name").getValue();switch(name){case"Brush":beat.brushType=this.getValue(this.findChildElement(c,"Direction"))==="Up"?Bridge.get(AlphaTab.Model.BrushType).brushUp:Bridge.get(AlphaTab.Model.BrushType).brushDown;break;case"PickStroke":beat.pickStroke=this.getValue(this.findChildElement(c,"Direction"))==="Up"?Bridge.get(AlphaTab.Model.PickStrokeType).up:Bridge.get(AlphaTab.Model.PickStrokeType).down;break;case"Slapped":this.findChildElement(c,"Enable")!==null&&(beat.slap=!0);break;case"Popped":this.findChildElement(c,"Enable")!==null&&(beat.pop=!0);break;case"VibratoWTremBar":switch(this.getValue(this.findChildElement(c,"Strength"))){case"Wide":beat.vibrato=Bridge.get(AlphaTab.Model.VibratoType).wide;break;case"Slight":beat.vibrato=Bridge.get(AlphaTab.Model.VibratoType).slight}break;case"WhammyBar":isWhammy=!0;break;case"WhammyBarExtend":case"WhammyBarOriginValue":whammyOrigin===null&&(whammyOrigin=new AlphaTab.Model.BendPoint);whammyOrigin.value=this.toBendValue(parseFloat(this.getValue(this.findChildElement(c,"Float"))));break;case"WhammyBarOriginOffset":whammyOrigin===null&&(whammyOrigin=new AlphaTab.Model.BendPoint);whammyOrigin.offset=this.toBendOffset(parseFloat(this.getValue(this.findChildElement(c,"Float"))));break;case"WhammyBarMiddleValue":whammyMiddleValue=this.toBendValue(parseFloat(this.getValue(this.findChildElement(c,"Float"))));break;case"WhammyBarMiddleOffset1":whammyMiddleOffset1=this.toBendOffset(parseFloat(this.getValue(this.findChildElement(c,"Float"))));break;case"WhammyBarMiddleOffset2":whammyMiddleOffset2=this.toBendOffset(parseFloat(this.getValue(this.findChildElement(c,"Float"))));break;case"WhammyBarDestinationValue":whammyDestination===null&&(whammyDestination=new AlphaTab.Model.BendPoint(Bridge.get(AlphaTab.Model.BendPoint).MaxPosition));whammyDestination.value=this.toBendValue(parseFloat(this.getValue(this.findChildElement(c,"Float"))));break;case"WhammyBarDestinationOffset":whammyDestination===null&&(whammyDestination=new AlphaTab.Model.BendPoint);whammyDestination.offset=this.toBendOffset(parseFloat(this.getValue(this.findChildElement(c,"Float"))))}}}));isWhammy&&(whammyOrigin===null&&(whammyOrigin=new AlphaTab.Model.BendPoint),whammyDestination===null&&(whammyDestination=new AlphaTab.Model.BendPoint(Bridge.get(AlphaTab.Model.BendPoint).MaxPosition)),whammy=[],whammy.push(whammyOrigin),Bridge.Nullable.neq(whammyMiddleOffset1,null)&&Bridge.Nullable.neq(whammyMiddleValue,null)&&whammy.push(new AlphaTab.Model.BendPoint(Bridge.Nullable.getValue(whammyMiddleOffset1),Bridge.Nullable.getValue(whammyMiddleValue))),Bridge.Nullable.neq(whammyMiddleOffset2,null)&&Bridge.Nullable.neq(whammyMiddleValue,null)&&whammy.push(new AlphaTab.Model.BendPoint(Bridge.Nullable.getValue(whammyMiddleOffset2),Bridge.Nullable.getValue(whammyMiddleValue))),Bridge.Nullable.eq(whammyMiddleOffset1,null)&&Bridge.Nullable.eq(whammyMiddleOffset2,null)&&Bridge.Nullable.neq(whammyMiddleValue,null)&&whammy.push(new AlphaTab.Model.BendPoint(30,Bridge.Nullable.getValue(whammyMiddleValue))),whammy.push(whammyDestination),beat.whammyBarPoints=whammy)},parseNotes:function(node){AlphaTab.Platform.Std.iterateChildren(node,Bridge.fn.bind(this,function(c){if(c.getNodeType()===Bridge.get(AlphaTab.Xml.XmlNodeType).element)switch(c.getLocalName()){case"Note":this.parseNote(c)}}))},parseNote:function(node){var note=new AlphaTab.Model.Note,noteId=node.getAttributes().get("id").getValue();AlphaTab.Platform.Std.iterateChildren(node,Bridge.fn.bind(this,function(c){if(c.getNodeType()===Bridge.get(AlphaTab.Xml.XmlNodeType).element)switch(c.getLocalName()){case"Properties":this.parseNoteProperties(c,note,noteId);break;case"AntiAccent":this.getValue(c).toLowerCase()==="normal"&&(note.isGhost=!0);break;case"LetRing":note.isLetRing=!0;break;case"Trill":note.trillValue=parseInt(this.getValue(c));note.trillSpeed=Bridge.get(AlphaTab.Model.Duration).sixteenth;break;case"Accent":var accentFlags=parseInt(this.getValue(c));(accentFlags&1)!=0&&(note.isStaccato=!0);(accentFlags&4)!=0&&(note.accentuated=Bridge.get(AlphaTab.Model.AccentuationType).heavy);(accentFlags&8)!=0&&(note.accentuated=Bridge.get(AlphaTab.Model.AccentuationType).normal);break;case"Tie":c.getAttributes().get("origin").getValue().toLowerCase()==="true"&&(note.isTieOrigin=!0);c.getAttributes().get("destination").getValue().toLowerCase()==="true"&&(note.isTieDestination=!0);break;case"Vibrato":switch(this.getValue(c)){case"Slight":note.vibrato=Bridge.get(AlphaTab.Model.VibratoType).slight;break;case"Wide":note.vibrato=Bridge.get(AlphaTab.Model.VibratoType).wide}break;case"LeftFingering":note.isFingering=!0;switch(this.getValue(c)){case"P":note.leftHandFinger=Bridge.get(AlphaTab.Model.Fingers).thumb;break;case"I":note.leftHandFinger=Bridge.get(AlphaTab.Model.Fingers).indexFinger;break;case"M":note.leftHandFinger=Bridge.get(AlphaTab.Model.Fingers).middleFinger;break;case"A":note.leftHandFinger=Bridge.get(AlphaTab.Model.Fingers).annularFinger;break;case"C":note.leftHandFinger=Bridge.get(AlphaTab.Model.Fingers).littleFinger}break;case"RightFingering":note.isFingering=!0;switch(this.getValue(c)){case"P":note.rightHandFinger=Bridge.get(AlphaTab.Model.Fingers).thumb;break;case"I":note.rightHandFinger=Bridge.get(AlphaTab.Model.Fingers).indexFinger;break;case"M":note.rightHandFinger=Bridge.get(AlphaTab.Model.Fingers).middleFinger;break;case"A":note.rightHandFinger=Bridge.get(AlphaTab.Model.Fingers).annularFinger;break;case"C":note.rightHandFinger=Bridge.get(AlphaTab.Model.Fingers).littleFinger}}}));this._noteById[noteId]=note},parseNoteProperties:function(node,note,noteId){var isBended=!1,bendOrigin=null,bendMiddleValue=null,bendMiddleOffset1=null,bendMiddleOffset2=null,bendDestination=null,bend;AlphaTab.Platform.Std.iterateChildren(node,Bridge.fn.bind(this,function(c){var name,htype,hfret,slideFlags;if(c.getNodeType()===Bridge.get(AlphaTab.Xml.XmlNodeType).element)switch(c.getLocalName()){case"Property":name=c.getAttributes().get("name").getValue();switch(name){case"String":note.string=parseInt(this.getValue(this.findChildElement(c,"String")))+1;break;case"Fret":note.fret=parseInt(this.getValue(this.findChildElement(c,"Fret")));break;case"Tapped":this._tappedNotes[noteId]=!0;break;case"HarmonicType":if(htype=this.findChildElement(c,"HType"),htype!==null)switch(this.getValue(htype)){case"NoHarmonic":note.harmonicType=Bridge.get(AlphaTab.Model.HarmonicType).none;break;case"Natural":note.harmonicType=Bridge.get(AlphaTab.Model.HarmonicType).natural;break;case"Artificial":note.harmonicType=Bridge.get(AlphaTab.Model.HarmonicType).artificial;break;case"Pinch":note.harmonicType=Bridge.get(AlphaTab.Model.HarmonicType).pinch;break;case"Tap":note.harmonicType=Bridge.get(AlphaTab.Model.HarmonicType).tap;break;case"Semi":note.harmonicType=Bridge.get(AlphaTab.Model.HarmonicType).semi;break;case"Feedback":note.harmonicType=Bridge.get(AlphaTab.Model.HarmonicType).feedback}break;case"HarmonicFret":hfret=this.findChildElement(c,"HFret");hfret!==null&&(note.harmonicValue=parseFloat(this.getValue(hfret)));break;case"Muted":this.findChildElement(c,"Enable")!==null&&(note.isDead=!0);break;case"PalmMuted":this.findChildElement(c,"Enable")!==null&&(note.isPalmMute=!0);break;case"Octave":note.octave=parseInt(this.getValue(this.findChildElement(c,"Number")))-1;break;case"Tone":note.tone=parseInt(this.getValue(this.findChildElement(c,"Step")));break;case"Bended":isBended=!0;break;case"BendOriginValue":bendOrigin===null&&(bendOrigin=new AlphaTab.Model.BendPoint);bendOrigin.value=this.toBendValue(parseFloat(this.getValue(this.findChildElement(c,"Float"))));break;case"BendOriginOffset":bendOrigin===null&&(bendOrigin=new AlphaTab.Model.BendPoint);bendOrigin.offset=this.toBendOffset(parseFloat(this.getValue(this.findChildElement(c,"Float"))));break;case"BendMiddleValue":bendMiddleValue=this.toBendValue(parseFloat(this.getValue(this.findChildElement(c,"Float"))));break;case"BendMiddleOffset1":bendMiddleOffset1=this.toBendOffset(parseFloat(this.getValue(this.findChildElement(c,"Float"))));break;case"BendMiddleOffset2":bendMiddleOffset2=this.toBendOffset(parseFloat(this.getValue(this.findChildElement(c,"Float"))));break;case"BendDestinationValue":bendDestination===null&&(bendDestination=new AlphaTab.Model.BendPoint(Bridge.get(AlphaTab.Model.BendPoint).MaxPosition));bendDestination.value=this.toBendValue(parseFloat(this.getValue(this.findChildElement(c,"Float"))));break;case"BendDestinationOffset":bendDestination===null&&(bendDestination=new AlphaTab.Model.BendPoint);bendDestination.offset=this.toBendOffset(parseFloat(this.getValue(this.findChildElement(c,"Float"))));break;case"HopoOrigin":this.findChildElement(c,"Enable")!==null&&(note.isHammerPullOrigin=!0);break;case"Slide":slideFlags=parseInt(this.getValue(this.findChildElement(c,"Flags")));(slideFlags&1)!=0&&(note.slideType=Bridge.get(AlphaTab.Model.SlideType).shift);(slideFlags&2)!=0&&(note.slideType=Bridge.get(AlphaTab.Model.SlideType).legato);(slideFlags&4)!=0&&(note.slideType=Bridge.get(AlphaTab.Model.SlideType).outDown);(slideFlags&8)!=0&&(note.slideType=Bridge.get(AlphaTab.Model.SlideType).outUp);(slideFlags&16)!=0&&(note.slideType=Bridge.get(AlphaTab.Model.SlideType).intoFromBelow);(slideFlags&32)!=0&&(note.slideType=Bridge.get(AlphaTab.Model.SlideType).intoFromAbove)}}}));isBended&&(bendOrigin===null&&(bendOrigin=new AlphaTab.Model.BendPoint),bendDestination===null&&(bendDestination=new AlphaTab.Model.BendPoint(Bridge.get(AlphaTab.Model.BendPoint).MaxPosition)),bend=[],bend.push(bendOrigin),Bridge.Nullable.neq(bendMiddleOffset1,null)&&Bridge.Nullable.neq(bendMiddleValue,null)&&bend.push(new AlphaTab.Model.BendPoint(Bridge.Nullable.getValue(bendMiddleOffset1),Bridge.Nullable.getValue(bendMiddleValue))),Bridge.Nullable.neq(bendMiddleOffset2,null)&&Bridge.Nullable.neq(bendMiddleValue,null)&&bend.push(new AlphaTab.Model.BendPoint(Bridge.Nullable.getValue(bendMiddleOffset2),Bridge.Nullable.getValue(bendMiddleValue))),Bridge.Nullable.eq(bendMiddleOffset1,null)&&Bridge.Nullable.eq(bendMiddleOffset2,null)&&Bridge.Nullable.neq(bendMiddleValue,null)&&bend.push(new AlphaTab.Model.BendPoint(30,Bridge.Nullable.getValue(bendMiddleValue))),bend.push(bendDestination),note.bendPoints=bend)},toBendValue:function(gpxValue){return gpxValue*Bridge.get(AlphaTab.Importer.GpxParser).BendPointValueFactor},toBendOffset:function(gpxOffset){return gpxOffset*Bridge.get(AlphaTab.Importer.GpxParser).BendPointPositionFactor},parseRhythms:function(node){AlphaTab.Platform.Std.iterateChildren(node,Bridge.fn.bind(this,function(c){if(c.getNodeType()===Bridge.get(AlphaTab.Xml.XmlNodeType).element)switch(c.getLocalName()){case"Rhythm":this.parseRhythm(c)}}))},parseRhythm:function(node){var rhythm=new AlphaTab.Importer.GpxRhythm,rhythmId=node.getAttributes().get("id").getValue();AlphaTab.Platform.Std.iterateChildren(node,Bridge.fn.bind(this,function(c){if(c.getNodeType()===Bridge.get(AlphaTab.Xml.XmlNodeType).element)switch(c.getLocalName()){case"NoteValue":switch(this.getValue(c)){case"Whole":rhythm.value=Bridge.get(AlphaTab.Model.Duration).whole;break;case"Half":rhythm.value=Bridge.get(AlphaTab.Model.Duration).half;break;case"Quarter":rhythm.value=Bridge.get(AlphaTab.Model.Duration).quarter;break;case"Eighth":rhythm.value=Bridge.get(AlphaTab.Model.Duration).eighth;break;case"16th":rhythm.value=Bridge.get(AlphaTab.Model.Duration).sixteenth;break;case"32nd":rhythm.value=Bridge.get(AlphaTab.Model.Duration).thirtySecond;break;case"64th":rhythm.value=Bridge.get(AlphaTab.Model.Duration).sixtyFourth}break;case"PrimaryTuplet":rhythm.tupletNumerator=parseInt(c.getAttributes().get("num").getValue());rhythm.tupletDenominator=parseInt(c.getAttributes().get("den").getValue());break;case"AugmentationDot":rhythm.dots=parseInt(c.getAttributes().get("count").getValue())}}));this._rhythmById[rhythmId]=rhythm},getValue:function(n){return Bridge.get(AlphaTab.Platform.Std).getNodeValue(n)},buildModel:function(){for(var masterBar,trackIndex,trackId,track,i1,j1,barIds,barId,barId1,bar,voiceId,voice,beat,noteId,voiceId1,voice1,beatId1,barId2,bar1,i2,j2,v,k,l,automation,i3,j3,automation1,$t,$t1,$t2,$t3,$t4,$t5,$t6,$t7,$t8,i=0,j=this._masterBars.length;i<j;i++)masterBar=this._masterBars[i],this.score.addMasterBar(masterBar);for(trackIndex=0,$t=Bridge.getEnumerator(this._tracksMapping);$t.moveNext();){for(trackId=$t.getCurrent(),track=this._tracksById[trackId],this.score.addTrack(track),i1=0,j1=this._barsOfMasterBar.length;i1<j1;i1++)barIds=this._barsOfMasterBar[i1],barId=barIds[trackIndex],barId!==Bridge.get(AlphaTab.Importer.GpxParser).InvalidId&&track.addBar(this._barsById[barId]);trackIndex++}for($t1=Bridge.getEnumerator(Object.keys(this._barsById));$t1.moveNext();)if(barId1=$t1.getCurrent(),bar=this._barsById[barId1],this._voicesOfBar.hasOwnProperty(barId1))for($t2=Bridge.getEnumerator(this._voicesOfBar[barId1]);$t2.moveNext();)voiceId=$t2.getCurrent(),voiceId!==Bridge.get(AlphaTab.Importer.GpxParser).InvalidId?bar.addVoice(this._voiceById[voiceId]):(voice=new AlphaTab.Model.Voice,bar.addVoice(voice),beat=new AlphaTab.Model.Beat,beat.isEmpty=!0,beat.duration=Bridge.get(AlphaTab.Model.Duration).quarter,voice.addBeat(beat));for($t3=Bridge.getEnumerator(Object.keys(this._beatById));$t3.moveNext();){var beatId=$t3.getCurrent(),beat1=this._beatById[beatId],rhythmId=this._rhythmOfBeat[beatId],rhythm=this._rhythmById[rhythmId];if(beat1.duration=rhythm.value,beat1.dots=rhythm.dots,beat1.tupletNumerator=rhythm.tupletNumerator,beat1.tupletDenominator=rhythm.tupletDenominator,this._notesOfBeat.hasOwnProperty(beatId))for($t4=Bridge.getEnumerator(this._notesOfBeat[beatId]);$t4.moveNext();)noteId=$t4.getCurrent(),noteId!==Bridge.get(AlphaTab.Importer.GpxParser).InvalidId&&(beat1.addNote(this._noteById[noteId]),this._tappedNotes.hasOwnProperty(noteId)&&(beat1.tap=!0))}for($t5=Bridge.getEnumerator(Object.keys(this._voiceById));$t5.moveNext();)if(voiceId1=$t5.getCurrent(),voice1=this._voiceById[voiceId1],this._beatsOfVoice.hasOwnProperty(voiceId1))for($t6=Bridge.getEnumerator(this._beatsOfVoice[voiceId1]);$t6.moveNext();)beatId1=$t6.getCurrent(),beatId1!==Bridge.get(AlphaTab.Importer.GpxParser).InvalidId&&voice1.addBeat(this._beatById[beatId1].clone());for($t7=Bridge.getEnumerator(Object.keys(this._automations));$t7.moveNext();)for(barId2=$t7.getCurrent(),bar1=this._barsById[barId2],i2=0,j2=bar1.voices.length;i2<j2;i2++)if(v=bar1.voices[i2],v.beats.length>0)for(k=0,l=this._automations[barId2].length;k<l;k++)automation=this._automations[barId2][k],v.beats[0].automations.push(automation);for($t8=Bridge.getEnumerator(Object.keys(this._automations));$t8.moveNext();){var barId3=$t8.getCurrent(),automations=this._automations[barId3],bar2=this._barsById[barId3];for(i3=0,j3=automations.length;i3<j3;i3++)automation1=automations[i3],automation1.type===Bridge.get(AlphaTab.Model.AutomationType).tempo&&(barId3==="0"&&(this.score.tempo=automation1.value,this.score.tempoLabel=automation1.text),bar2.getMasterBar().tempoAutomation=automation1)}}});Bridge.define("AlphaTab.Importer.GpxRhythm",{config:{properties:{dots:0,tupletDenominator:0,tupletNumerator:0,value:0}},constructor:function(){this.tupletDenominator=1;this.tupletNumerator=1;this.value=Bridge.get(AlphaTab.Model.Duration).quarter}});Bridge.define("AlphaTab.Importer.MixTableChange",{config:{properties:{volume:0,balance:0,instrument:0,tempoName:null,tempo:0,duration:0}},constructor:function(){this.volume=-1;this.balance=-1;this.instrument=-1;this.tempoName=null;this.tempo=-1;this.duration=0}});Bridge.define("AlphaTab.Xml.IXmlNode");Bridge.define("AlphaTab.Xml.XmlNodeWrapper",{inherits:[AlphaTab.Xml.IXmlNode],_node:null,constructor:function(node){this._node=node},getNodeType:function(){return this._node.nodeType},getLocalName:function(){return this._node.nodeName},getValue:function(){return this._node.nodeValue},getChildNodes:function(){return new AlphaTab.Xml.XmlNodeCollectionWrapper(this._node.childNodes)},getFirstChild:function(){return new AlphaTab.Xml.XmlNodeWrapper(this._node.firstChild)},getAttributes:function(){return new AlphaTab.Xml.XmlAttributeCollectionWrapper(this._node.attributes)},getAttribute:function(name){return this._node.getAttribute(name)},getElementsByTagName:function(nodeName){return new AlphaTab.Xml.XmlNodeCollectionWrapper(this._node.getElementsByTagName(nodeName))}});Bridge.define("AlphaTab.Importer.NoCompatibleReaderFoundException",{inherits:[Bridge.Exception]});Bridge.define("AlphaTab.Platform.IFileLoader");Bridge.define("AlphaTab.Platform.JavaScript.JsFileLoader",{inherits:[AlphaTab.Platform.IFileLoader],statics:{getIEVersion:function(){var rv=-1,appName=window.navigator.appName,agent=window.navigator.userAgent,r,m;return appName==="Microsoft Internet Explorer"&&(r=new RegExp("MSIE ([0-9]{1,}[\\.0-9]{0,})"),m=r.exec(agent),m!==null&&(rv=parseFloat(m[1]))),rv}},loadBinary:function(path){var ie=Bridge.get(AlphaTab.Platform.JavaScript.JsFileLoader).getIEVersion(),i,xhr;if(ie>=0&&ie<=9){var vbArr=VbAjaxLoader("GET",path),fileContents=vbArr.toArray(),data=new Uint8Array(fileContents.length);for(i=0;i<fileContents.length;i++)data[i]=fileContents[i];return data}if(xhr=new XMLHttpRequest,xhr.open("GET",path,!1),xhr.responseType="arraybuffer",xhr.send(),xhr.status===200)return new Uint8Array(xhr.response);if(xhr.status===0)throw new AlphaTab.IO.FileLoadException("You are offline!!\n Please Check Your Network.");if(xhr.status===404)throw new AlphaTab.IO.FileLoadException("Requested URL not found.");if(xhr.status===500)throw new AlphaTab.IO.FileLoadException("Internel Server Error.");if(xhr.statusText==="parsererror")throw new AlphaTab.IO.FileLoadException("Error.\nParsing JSON Request failed.");if(xhr.statusText==="timeout")throw new AlphaTab.IO.FileLoadException("Request Time out.");throw new AlphaTab.IO.FileLoadException("Unknow Error: "+xhr.responseText);},loadBinaryAsync:function(path,success,error){var ie=Bridge.get(AlphaTab.Platform.JavaScript.JsFileLoader).getIEVersion(),i,xhr;if(ie>=0&&ie<=9){var vbArr=VbAjaxLoader("GET",path),fileContents=vbArr.toArray(),data=new Uint8Array(fileContents.length);for(i=0;i<fileContents.length;i++)data[i]=fileContents[i];success(data)}else xhr=new XMLHttpRequest,xhr.onreadystatechange=function(){if(xhr.readyState===4)if(xhr.status===200){var reader=new Uint8Array(xhr.response);success(reader)}else xhr.status===0?error(new AlphaTab.IO.FileLoadException("You are offline!!\n Please Check Your Network.")):xhr.status===404?error(new AlphaTab.IO.FileLoadException("Requested URL not found.")):xhr.status===500?error(new AlphaTab.IO.FileLoadException("Internel Server Error.")):xhr.statusText==="parsererror"?error(new AlphaTab.IO.FileLoadException("Error.\nParsing JSON Request failed.")):xhr.statusText==="timeout"?error(new AlphaTab.IO.FileLoadException("Request Time out.")):error(new AlphaTab.IO.FileLoadException("Unknow Error: "+xhr.responseText))},xhr.open("GET",path,!0),xhr.responseType="arraybuffer",xhr.send()}});Bridge.define("AlphaTab.Importer.UnsupportedFormatException",{inherits:[Bridge.Exception]});Bridge.define("AlphaTab.IO.BitReader",{statics:{ByteSize:8},_currentByte:0,_position:0,_source:null,constructor:function(source){this._source=source;this._position=Bridge.get(AlphaTab.IO.BitReader).ByteSize},readByte:function(){return this.readBits(Bridge.get(AlphaTab.IO.BitReader).ByteSize)},readBytes:function(count){for(var bytes=new Uint8Array(count),i=0;i<count;i++)bytes[i]=this.readByte();return bytes},readBits:function(count){for(var bits=0,i=count-1;i>=0;)bits|=this.readBit()<<i,i--;return bits},readBitsReversed:function(count){for(var bits=0,i=0;i<count;i++)bits|=this.readBit()<<i;return bits},readBit:function(){if(this._position>=Bridge.get(AlphaTab.IO.BitReader).ByteSize){if(this._currentByte=this._source.readByte(),this._currentByte===-1)throw new AlphaTab.IO.EndOfReaderException;this._position=0}var value=this._currentByte>>Bridge.get(AlphaTab.IO.BitReader).ByteSize-this._position-1&1;return this._position++,value},readAll:function(){var all=Bridge.get(AlphaTab.IO.ByteBuffer).empty();try{for(;;)all.writeByte(this.readByte())}catch($e){if($e=Bridge.Exception.create($e),!Bridge.is($e,AlphaTab.IO.EndOfReaderException))throw $e;}return all.toArray()}});Bridge.define("AlphaTab.IO.EndOfReaderException",{inherits:[Bridge.Exception]});Bridge.define("AlphaTab.IO.FileLoadException",{inherits:[Bridge.Exception],constructor:function(message){Bridge.Exception.prototype.$constructor.call(this,message)}});Bridge.define("AlphaTab.IO.IReadable");Bridge.define("AlphaTab.IO.IWriteable");Bridge.define("AlphaTab.IO.ByteBuffer",{inherits:[AlphaTab.IO.IWriteable,AlphaTab.IO.IReadable],statics:{empty:function(){return Bridge.get(AlphaTab.IO.ByteBuffer).withCapactiy(0)},withCapactiy:function(capacity){var buffer=new AlphaTab.IO.ByteBuffer;return buffer._buffer=new Uint8Array(capacity),buffer._capacity=capacity,buffer},fromBuffer:function(data){var $t,buffer=new AlphaTab.IO.ByteBuffer;return buffer._buffer=data,buffer._capacity=($t=data.length,buffer._length=$t,$t),buffer}},_buffer:null,_position:0,_length:0,_capacity:0,constructor:function(){},getLength:function(){return this._length},getBuffer:function(){return this._buffer},reset:function(){this._position=0},skip:function(offset){this._position+=offset},setCapacity:function(value){if(value!==this._capacity){if(value>0){var newBuffer=new Uint8Array(value);this._length>0&&newBuffer.set(this._buffer.subarray(0,0+this._length),0);this._buffer=newBuffer}else this._buffer=null;this._capacity=value}},readByte:function(){var n=this._length-this._position;return n<=0?-1:this._buffer[this._position++]},read:function(buffer,offset,count){var n=this._length-this._position,byteCount;if(n>count&&(n=count),n<=0)return 0;if(n<=8)for(byteCount=n;--byteCount>=0;)buffer[offset+byteCount]=this._buffer[this._position+byteCount];else buffer.set(this._buffer.subarray(this._position,this._position+n),offset);return this._position+=n,n},writeByte:function(value){var buffer=new Uint8Array(1);buffer[0]=value;this.write(buffer,0,1)},write:function(buffer,offset,count){var i=this._position+count,byteCount;if(i>this._length&&(i>this._capacity&&this.ensureCapacity(i),this._length=i),count<=8&&buffer!==this._buffer)for(byteCount=count;--byteCount>=0;)this._buffer[this._position+byteCount]=buffer[offset+byteCount];else this._buffer.set(buffer.subarray(offset,offset+count),this._position);this._position=i},ensureCapacity:function(value){if(value>this._capacity){var newCapacity=value;newCapacity<256&&(newCapacity=256);newCapacity<this._capacity*2&&(newCapacity=this._capacity*2);this.setCapacity(newCapacity)}},readAll:function(){return this.toArray()},toArray:function(){var copy=new Uint8Array(this._length);return copy.set(this._buffer.subarray(0,0+this._length),0),copy}});Bridge.define("AlphaTab.LayoutSettings",{statics:{getDefaults:function(){var settings=new AlphaTab.LayoutSettings;return settings.mode="page",settings}},config:{properties:{mode:null,additionalSettings:null}},constructor:function(){this.additionalSettings={}},get:function(key,def){return this.additionalSettings.hasOwnProperty(key)?this.additionalSettings[key]:def}});Bridge.define("AlphaTab.Model.AccentuationType",{statics:{none:0,normal:1,heavy:2},$enum:!0});Bridge.define("AlphaTab.Model.AccidentalType",{statics:{none:0,natural:1,sharp:2,flat:3},$enum:!0});Bridge.define("AlphaTab.Model.AutomationType",{statics:{tempo:0,volume:1,instrument:2,balance:3},$enum:!0});Bridge.define("AlphaTab.Model.Bar",{statics:{copyTo:function(src,dst){dst.index=src.index;dst.clef=src.clef}},config:{properties:{index:0,nextBar:null,previousBar:null,clef:0,track:null,voices:null,minDuration:null,maxDuration:null}},constructor:function(){this.voices=[];this.clef=Bridge.get(AlphaTab.Model.Clef).g2},getMasterBar:function(){return this.track.score.masterBars[this.index]},getIsEmpty:function(){for(var i=0,j=this.voices.length;i<j;i++)if(!this.voices[i].getIsEmpty())return!1;return!0},addVoice:function(voice){voice.bar=this;voice.index=this.voices.length;this.voices.push(voice)},finish:function(){for(var voice,i=0,j=this.voices.length;i<j;i++)voice=this.voices[i],voice.finish(),(Bridge.Nullable.eq(voice.minDuration,null)||Bridge.Nullable.eq(this.minDuration,null)||Bridge.Nullable.getValue(this.minDuration)>Bridge.Nullable.getValue(voice.minDuration))&&(this.minDuration=voice.minDuration),(Bridge.Nullable.eq(voice.maxDuration,null)||Bridge.Nullable.eq(this.maxDuration,null)||Bridge.Nullable.getValue(this.maxDuration)>Bridge.Nullable.getValue(voice.maxDuration))&&(this.minDuration=voice.maxDuration)}});Bridge.define("AlphaTab.Model.Beat",{statics:{WhammyBarMaxPosition:60,WhammyBarMaxValue:24,copyTo:function(src,dst){dst.index=src.index;dst.isEmpty=src.isEmpty;dst.duration=src.duration;dst.dots=src.dots;dst.fadeIn=src.fadeIn;dst.lyrics=src.lyrics===null?null:src.lyrics.slice();dst.pop=src.pop;dst.hasRasgueado=src.hasRasgueado;dst.slap=src.slap;dst.tap=src.tap;dst.text=src.text;dst.brushType=src.brushType;dst.brushDuration=src.brushDuration;dst.tupletDenominator=src.tupletDenominator;dst.tupletNumerator=src.tupletNumerator;dst.vibrato=src.vibrato;dst.chordId=src.chordId;dst.graceType=src.graceType;dst.pickStroke=src.pickStroke;dst.tremoloSpeed=src.tremoloSpeed;dst.crescendo=src.crescendo;dst.start=src.start;dst.dynamic=src.dynamic}},_minNote:null,_maxNote:null,config:{properties:{previousBeat:null,nextBeat:null,index:0,voice:null,notes:null,isEmpty:!1,duration:0,automations:null,dots:0,fadeIn:!1,lyrics:null,pop:!1,hasRasgueado:!1,slap:!1,tap:!1,text:null,brushType:0,brushDuration:0,tupletDenominator:0,tupletNumerator:0,whammyBarPoints:null,vibrato:0,chordId:null,graceType:0,pickStroke:0,tremoloSpeed:null,crescendo:0,start:0,dynamic:0}},constructor:function(){this.whammyBarPoints=[];this.notes=[];this.brushType=Bridge.get(AlphaTab.Model.BrushType).none;this.vibrato=Bridge.get(AlphaTab.Model.VibratoType).none;this.graceType=Bridge.get(AlphaTab.Model.GraceType).none;this.pickStroke=Bridge.get(AlphaTab.Model.PickStrokeType).none;this.duration=Bridge.get(AlphaTab.Model.Duration).quarter;this.tremoloSpeed=null;this.automations=[];this.dots=0;this.start=0;this.tupletDenominator=-1;this.tupletNumerator=-1;this.dynamic=Bridge.get(AlphaTab.Model.DynamicValue).f;this.crescendo=Bridge.get(AlphaTab.Model.CrescendoType).none},getMinNote:function(){return this._minNote===null&&this.refreshNotes(),this._minNote},getMaxNote:function(){return this._maxNote===null&&this.refreshNotes(),this._maxNote},getIsRest:function(){return this.notes.length===0},getHasTuplet:function(){return!(this.tupletDenominator===-1&&this.tupletNumerator===-1)&&!(this.tupletDenominator===1&&this.tupletNumerator===1)},getHasWhammyBar:function(){return this.whammyBarPoints.length>0},getHasChord:function(){return this.chordId!==null},getChord:function(){return this.voice.bar.track.chords[this.chordId]},getIsTremolo:function(){return Bridge.Nullable.neq(this.tremoloSpeed,null)},getAbsoluteStart:function(){return this.voice.bar.getMasterBar().start+this.start},clone:function(){for(var i1,j1,i2,j2,beat=new AlphaTab.Model.Beat,i=0,j=this.whammyBarPoints.length;i<j;i++)beat.whammyBarPoints.push(this.whammyBarPoints[i].clone());for(i1=0,j1=this.notes.length;i1<j1;i1++)beat.addNote(this.notes[i1].clone());for(Bridge.get(AlphaTab.Model.Beat).copyTo(this,beat),i2=0,j2=this.automations.length;i2<j2;i2++)beat.automations.push(this.automations[i2].clone());return beat},calculateDuration:function(){var duration=this.duration,ticks=AlphaTab.Audio.MidiUtils.toTicks(duration);return this.dots===2?ticks=Bridge.get(AlphaTab.Audio.MidiUtils).applyDot(ticks,!0):this.dots===1&&(ticks=Bridge.get(AlphaTab.Audio.MidiUtils).applyDot(ticks,!1)),this.tupletDenominator>0&&this.tupletNumerator>=0&&(ticks=Bridge.get(AlphaTab.Audio.MidiUtils).applyTuplet(ticks,this.tupletNumerator,this.tupletDenominator)),ticks},addNote:function(note){note.beat=this;this.notes.push(note)},refreshNotes:function(){for(var note,i=0,j=this.notes.length;i<j;i++)note=this.notes[i],(this._minNote===null||note.getRealValue()<this._minNote.getRealValue())&&(this._minNote=note),(this._maxNote===null||note.getRealValue()>this._maxNote.getRealValue())&&(this._maxNote=note)},getAutomation:function(type){for(var automation,i=0,j=this.automations.length;i<j;i++)if(automation=this.automations[i],automation.type===type)return automation;return null},getNoteOnString:function(string){for(var note,i=0,j=this.notes.length;i<j;i++)if(note=this.notes[i],note.string===string)return note;return null},finish:function(){this.start=this.index===0?0:this.previousBeat.start+this.previousBeat.calculateDuration();for(var i=0,j=this.notes.length;i<j;i++)this.notes[i].finish()}});Bridge.define("AlphaTab.Model.BendPoint",{statics:{MaxPosition:60,MaxValue:12,copyTo:function(src,dst){dst.offset=src.offset;dst.value=src.value}},config:{properties:{offset:0,value:0}},constructor:function(offset,value){offset===void 0&&(offset=0);value===void 0&&(value=0);this.offset=offset;this.value=value},clone:function(){var point=new AlphaTab.Model.BendPoint;return Bridge.get(AlphaTab.Model.BendPoint).copyTo(this,point),point}});Bridge.define("AlphaTab.Model.BrushType",{statics:{none:0,brushUp:1,brushDown:2,arpeggioUp:3,arpeggioDown:4},$enum:!0});Bridge.define("AlphaTab.Model.Chord",{statics:{copyTo:function(src,dst){dst.firstFret=src.firstFret;dst.name=src.name;dst.strings=src.strings.slice()}},config:{properties:{name:null,firstFret:0,strings:null}},constructor:function(){this.strings=[]}});Bridge.define("AlphaTab.Model.Clef",{statics:{neutral:0,c3:1,c4:2,f4:3,g2:4},$enum:!0});Bridge.define("AlphaTab.Model.CrescendoType",{statics:{none:0,crescendo:1,decrescendo:2},$enum:!0});Bridge.define("AlphaTab.Model.Fingers",{statics:{unknown:-2,noOrDead:-1,thumb:0,indexFinger:1,middleFinger:2,annularFinger:3,littleFinger:4},$enum:!0});Bridge.define("AlphaTab.Model.GraceType",{statics:{none:0,onBeat:1,beforeBeat:2},$enum:!0});Bridge.define("AlphaTab.Model.HarmonicType",{statics:{none:0,natural:1,artificial:2,pinch:3,tap:4,semi:5,feedback:6},$enum:!0});Bridge.define("AlphaTab.Model.JsonConverter",{scoreToJsObject:function(score){var $t,score2={},i,masterBar,masterBar2,t,track,track2,b,bar,bar2,v,voice,voice2,bb,beat,beat2,a,automation,i1,point,n,note,note2,i2,point1;for(Bridge.get(AlphaTab.Model.Score).copyTo(score,score2),score2.masterBars=[],score2.tracks=[],i=0;i<score.masterBars.length;i++)masterBar=score.masterBars[i],masterBar2={},Bridge.get(AlphaTab.Model.MasterBar).copyTo(masterBar,masterBar2),masterBar.tempoAutomation&&(masterBar2.tempoAutomation={},Bridge.get(AlphaTab.Model.Automation).copyTo(masterBar.tempoAutomation,masterBar2.tempoAutomation)),masterBar.volumeAutomation&&(masterBar2.volumeAutomation={},Bridge.get(AlphaTab.Model.Automation).copyTo(masterBar.volumeAutomation,masterBar2.volumeAutomation)),masterBar.section&&(masterBar2.section={},Bridge.get(AlphaTab.Model.Section).copyTo(masterBar.section,masterBar2.section)),score2.masterBars.push(masterBar2);for(t=0;t<score.tracks.length;t++){for(track=score.tracks[t],track2={},track2.color={},Bridge.get(AlphaTab.Model.Track).copyTo(track,track2),track2.playbackInfo={},Bridge.get(AlphaTab.Model.PlaybackInformation).copyTo(track.playbackInfo,track2.playbackInfo),track2.chords={},$t=Bridge.getEnumerator(Object.keys(track.chords));$t.moveNext();){var key=$t.getCurrent(),chord=track.chords[key];Bridge.get(AlphaTab.Model.Chord).copyTo(chord,{});track2.chords[key]=chord}for(track2.bars=[],b=0;b<track.bars.length;b++){for(bar=track.bars[b],bar2={},Bridge.get(AlphaTab.Model.Bar).copyTo(bar,bar2),bar2.voices=[],v=0;v<bar.voices.length;v++){for(voice=bar.voices[v],voice2={},Bridge.get(AlphaTab.Model.Voice).copyTo(voice,voice2),voice2.beats=[],bb=0;bb<voice.beats.length;bb++){for(beat=voice.beats[bb],beat2={},Bridge.get(AlphaTab.Model.Beat).copyTo(beat,beat2),beat2.automations=[],a=0;a<beat.automations.length;a++)automation={},Bridge.get(AlphaTab.Model.Automation).copyTo(beat.automations[a],automation),beat2.automations.push(automation);for(beat2.whammyBarPoints=[],i1=0;i1<beat.whammyBarPoints.length;i1++)point={},Bridge.get(AlphaTab.Model.BendPoint).copyTo(beat.whammyBarPoints[i1],point),beat2.whammyBarPoints.push(point);for(beat2.notes=[],n=0;n<beat.notes.length;n++){for(note=beat.notes[n],note2={},Bridge.get(AlphaTab.Model.Note).copyTo(note,note2),note2.bendPoints=[],i2=0;i2<note.bendPoints.length;i2++)point1={},Bridge.get(AlphaTab.Model.BendPoint).copyTo(note.bendPoints[i2],point1),note2.bendPoints.push(point1);beat2.notes.push(note2)}voice2.beats.push(beat2)}bar2.voices.push(voice2)}track2.bars.push(bar2)}score2.tracks.push(track2)}return score2},jsObjectToScore:function(score){var $t,score2=new AlphaTab.Model.Score,i,masterBar,masterBar2,t,track,track2,b,bar,bar2,v,voice,voice2,bb,beat,beat2,a,automation,i1,point,n,note,note2,i2,point1;for(Bridge.get(AlphaTab.Model.Score).copyTo(score,score2),i=0;i<score.masterBars.length;i++)masterBar=score.masterBars[i],masterBar2=new AlphaTab.Model.MasterBar,Bridge.get(AlphaTab.Model.MasterBar).copyTo(masterBar,masterBar2),masterBar.tempoAutomation&&(masterBar2.tempoAutomation=new AlphaTab.Model.Automation,Bridge.get(AlphaTab.Model.Automation).copyTo(masterBar.tempoAutomation,masterBar2.tempoAutomation)),masterBar.volumeAutomation&&(masterBar2.volumeAutomation=new AlphaTab.Model.Automation,Bridge.get(AlphaTab.Model.Automation).copyTo(masterBar.volumeAutomation,masterBar2.volumeAutomation)),masterBar.section&&(masterBar2.section=new AlphaTab.Model.Section,Bridge.get(AlphaTab.Model.Section).copyTo(masterBar.section,masterBar2.section)),score2.addMasterBar(masterBar2);for(t=0;t<score.tracks.length;t++){for(track=score.tracks[t],track2=new AlphaTab.Model.Track,Bridge.get(AlphaTab.Model.Track).copyTo(track,track2),score2.addTrack(track2),Bridge.get(AlphaTab.Model.PlaybackInformation).copyTo(track.playbackInfo,track2.playbackInfo),$t=Bridge.getEnumerator(Object.keys(track.chords));$t.moveNext();){var key=$t.getCurrent(),chord=track.chords[key],chord2=new AlphaTab.Model.Chord;Bridge.get(AlphaTab.Model.Chord).copyTo(chord,chord2);track2.chords[key]=chord2}for(b=0;b<track.bars.length;b++)for(bar=track.bars[b],bar2=new AlphaTab.Model.Bar,Bridge.get(AlphaTab.Model.Bar).copyTo(bar,bar2),track2.addBar(bar2),v=0;v<bar.voices.length;v++)for(voice=bar.voices[v],voice2=new AlphaTab.Model.Voice,Bridge.get(AlphaTab.Model.Voice).copyTo(voice,voice2),bar2.addVoice(voice2),bb=0;bb<voice.beats.length;bb++){for(beat=voice.beats[bb],beat2=new AlphaTab.Model.Beat,Bridge.get(AlphaTab.Model.Beat).copyTo(beat,beat2),voice2.addBeat(beat2),a=0;a<beat.automations.length;a++)automation=new AlphaTab.Model.Automation,Bridge.get(AlphaTab.Model.Automation).copyTo(beat.automations[a],automation),beat2.automations.push(automation);for(i1=0;i1<beat.whammyBarPoints.length;i1++)point=new AlphaTab.Model.BendPoint,Bridge.get(AlphaTab.Model.BendPoint).copyTo(beat.whammyBarPoints[i1],point),beat2.whammyBarPoints.push(point);for(n=0;n<beat.notes.length;n++)for(note=beat.notes[n],note2=new AlphaTab.Model.Note,Bridge.get(AlphaTab.Model.Note).copyTo(note,note2),beat2.addNote(note2),i2=0;i2<note.bendPoints.length;i2++)point1=new AlphaTab.Model.BendPoint,Bridge.get(AlphaTab.Model.BendPoint).copyTo(note.bendPoints[i2],point1),note2.bendPoints.push(point1)}}return score2.finish(),score2}});Bridge.define("AlphaTab.Model.KeySignatureType",{statics:{major:0,minor:1},$enum:!0});Bridge.define("AlphaTab.Model.Voice",{statics:{copyTo:function(src,dst){dst.index=src.index}},config:{properties:{index:0,bar:null,beats:null,minDuration:null,maxDuration:null}},constructor:function(){this.beats=[]},getIsEmpty:function(){return this.beats.length===0},addBeat:function(beat){beat.voice=this;beat.index=this.beats.length;this.beats.push(beat)},chain:function(beat){if(this.bar!==null)if(this.bar.index===0&&beat.index===0)beat.previousBeat=null;else if(beat.index===0){var previousVoice=this.bar.previousBar.voices[this.index];beat.previousBeat=previousVoice.beats[previousVoice.beats.length-1];beat.previousBeat.nextBeat=beat}else beat.previousBeat=this.beats[beat.index-1],beat.previousBeat.nextBeat=beat},addGraceBeat:function(beat){if(this.beats.length===0){this.addBeat(beat);return}var lastBeat=this.beats[this.beats.length-1];this.beats.splice(this.beats.length-1,1);this.addBeat(beat);this.addBeat(lastBeat)},finish:function(){for(var beat,i1,j1,beat1,i=0,j=this.beats.length;i<j;i++)beat=this.beats[i],this.chain(beat);for(i1=0,j1=this.beats.length;i1<j1;i1++)beat1=this.beats[i1],beat1.finish(),(Bridge.Nullable.eq(this.minDuration,null)||Bridge.Nullable.getValue(this.minDuration)>beat1.duration)&&(this.minDuration=beat1.duration),(Bridge.Nullable.eq(this.maxDuration,null)||Bridge.Nullable.getValue(this.maxDuration)<beat1.duration)&&(this.maxDuration=beat1.duration)}});Bridge.define("AlphaTab.Model.NoteAccidentalMode",{statics:{$default:0,swapAccidentals:1,forceNatural:2,forceSharp:3,forceFlat:4},$enum:!0});Bridge.define("AlphaTab.Model.PickStrokeType",{statics:{none:0,up:1,down:2},$enum:!0});Bridge.define("AlphaTab.Model.PlaybackInformation",{statics:{copyTo:function(src,dst){dst.volume=src.volume;dst.balance=src.balance;dst.port=src.port;dst.program=src.program;dst.primaryChannel=src.primaryChannel;dst.secondaryChannel=src.secondaryChannel;dst.isMute=src.isMute;dst.isSolo=src.isSolo}},config:{properties:{volume:0,balance:0,port:0,program:0,primaryChannel:0,secondaryChannel:0,isMute:!1,isSolo:!1}},constructor:function(){this.volume=15;this.balance=8;this.port=1}});Bridge.define("AlphaTab.Model.RepeatGroup",{config:{properties:{masterBars:null,openings:null,closings:null,isClosed:!1}},constructor:function(){this.masterBars=[];this.openings=[];this.closings=[];this.isClosed=!1},addMasterBar:function(masterBar){this.openings.length===0&&this.openings.push(masterBar);this.masterBars.push(masterBar);masterBar.repeatGroup=this;masterBar.getIsRepeatEnd()?(this.closings.push(masterBar),this.isClosed=!0):this.isClosed&&(this.isClosed=!1,this.openings.push(masterBar))}});Bridge.define("AlphaTab.Model.Section",{statics:{copyTo:function(src,dst){dst.marker=src.marker;dst.text=src.text}},config:{properties:{marker:null,text:null}}});Bridge.define("AlphaTab.Model.SlideType",{statics:{none:0,shift:1,legato:2,intoFromBelow:3,intoFromAbove:4,outUp:5,outDown:6},$enum:!0});Bridge.define("AlphaTab.Platform.Model.Color",{config:{properties:{raw:0}},constructor:function(r,g,b,a){a===void 0&&(a=255);this.raw=a<<24|r<<16|g<<8|b},getA:function(){return this.raw>>24&255},getR:function(){return this.raw>>16&255},getG:function(){return this.raw>>8&255},getB:function(){return this.raw&255},toRgbaString:function(){return"rgba("+this.getR()+","+this.getG()+","+this.getB()+","+this.getA()/255+")"}});Bridge.define("AlphaTab.Model.TripletFeel",{statics:{noTripletFeel:0,triplet16th:1,triplet8th:2,dotted16th:3,dotted8th:4,scottish16th:5,scottish8th:6},$enum:!0});Bridge.define("AlphaTab.Model.Tuning",{statics:{_sevenStrings:null,_sixStrings:null,_fiveStrings:null,_fourStrings:null,_defaultTunings:null,getTextForTuning:function(tuning,includeOctave){var octave=Bridge.Int.div(tuning,12),note=tuning%12,result=["C","Db","D","Eb","E","F","Gb","G","Ab","A","Bb","B"][note];return includeOctave&&(result+=octave),result},getDefaultTuningFor:function(stringCount){return(Bridge.get(AlphaTab.Model.Tuning)._sevenStrings===null&&Bridge.get(AlphaTab.Model.Tuning).initialize(),Bridge.get(AlphaTab.Model.Tuning)._defaultTunings.hasOwnProperty(stringCount))?Bridge.get(AlphaTab.Model.Tuning)._defaultTunings[stringCount]:null},getPresetsFor:function(stringCount){Bridge.get(AlphaTab.Model.Tuning)._sevenStrings===null&&Bridge.get(AlphaTab.Model.Tuning).initialize();switch(stringCount){case 7:return Bridge.get(AlphaTab.Model.Tuning)._sevenStrings;case 6:return Bridge.get(AlphaTab.Model.Tuning)._sixStrings;case 5:return Bridge.get(AlphaTab.Model.Tuning)._fiveStrings;case 4:return Bridge.get(AlphaTab.Model.Tuning)._fourStrings}return[]},initialize:function(){Bridge.get(AlphaTab.Model.Tuning)._sevenStrings=[];Bridge.get(AlphaTab.Model.Tuning)._sixStrings=[];Bridge.get(AlphaTab.Model.Tuning)._fiveStrings=[];Bridge.get(AlphaTab.Model.Tuning)._fourStrings=[];Bridge.get(AlphaTab.Model.Tuning)._defaultTunings={};Bridge.get(AlphaTab.Model.Tuning)._defaultTunings[7]=new AlphaTab.Model.Tuning("Guitar 7 strings",[64,59,55,50,45,40,35],!0);Bridge.get(AlphaTab.Model.Tuning)._sevenStrings.push(Bridge.get(AlphaTab.Model.Tuning)._defaultTunings[7]);Bridge.get(AlphaTab.Model.Tuning)._defaultTunings[6]=new AlphaTab.Model.Tuning("Guitar Standard Tuning",[64,59,55,50,45,40],!0);Bridge.get(AlphaTab.Model.Tuning)._sixStrings.push(Bridge.get(AlphaTab.Model.Tuning)._defaultTunings[6]);Bridge.get(AlphaTab.Model.Tuning)._sixStrings.push(new AlphaTab.Model.Tuning("Guitar Tune down  step",[63,58,54,49,44,39],!1));Bridge.get(AlphaTab.Model.Tuning)._sixStrings.push(new AlphaTab.Model.Tuning("Guitar Tune down 1 step",[62,57,53,48,43,38],!1));Bridge.get(AlphaTab.Model.Tuning)._sixStrings.push(new AlphaTab.Model.Tuning("Guitar Tune down 2 step",[60,55,51,46,41,36],!1));Bridge.get(AlphaTab.Model.Tuning)._sixStrings.push(new AlphaTab.Model.Tuning("Guitar Dropped D Tuning",[64,59,55,50,45,38],!1));Bridge.get(AlphaTab.Model.Tuning)._sixStrings.push(new AlphaTab.Model.Tuning("Guitar Dropped D Tuning variant",[64,57,55,50,45,38],!1));Bridge.get(AlphaTab.Model.Tuning)._sixStrings.push(new AlphaTab.Model.Tuning("Guitar Double Dropped D Tuning",[62,59,55,50,45,38],!1));Bridge.get(AlphaTab.Model.Tuning)._sixStrings.push(new AlphaTab.Model.Tuning("Guitar Dropped E Tuning",[66,61,57,52,47,40],!1));Bridge.get(AlphaTab.Model.Tuning)._sixStrings.push(new AlphaTab.Model.Tuning("Guitar Dropped C Tuning",[62,57,53,48,43,36],!1));Bridge.get(AlphaTab.Model.Tuning)._sixStrings.push(new AlphaTab.Model.Tuning("Guitar Open C Tuning",[64,60,55,48,43,36],!1));Bridge.get(AlphaTab.Model.Tuning)._sixStrings.push(new AlphaTab.Model.Tuning("Guitar Open Cm Tuning",[63,60,55,48,43,36],!1));Bridge.get(AlphaTab.Model.Tuning)._sixStrings.push(new AlphaTab.Model.Tuning("Guitar Open C6 Tuning",[64,57,55,48,43,36],!1));Bridge.get(AlphaTab.Model.Tuning)._sixStrings.push(new AlphaTab.Model.Tuning("Guitar Open Cmaj7 Tuning",[64,59,55,52,43,36],!1));Bridge.get(AlphaTab.Model.Tuning)._sixStrings.push(new AlphaTab.Model.Tuning("Guitar Open D Tuning",[62,57,54,50,45,38],!1));Bridge.get(AlphaTab.Model.Tuning)._sixStrings.push(new AlphaTab.Model.Tuning("Guitar Open Dm Tuning",[62,57,53,50,45,38],!1));Bridge.get(AlphaTab.Model.Tuning)._sixStrings.push(new AlphaTab.Model.Tuning("Guitar Open D5 Tuning",[62,57,50,50,45,38],!1));Bridge.get(AlphaTab.Model.Tuning)._sixStrings.push(new AlphaTab.Model.Tuning("Guitar Open D6 Tuning",[62,59,54,50,45,38],!1));Bridge.get(AlphaTab.Model.Tuning)._sixStrings.push(new AlphaTab.Model.Tuning("Guitar Open Dsus4 Tuning",[62,57,55,50,45,38],!1));Bridge.get(AlphaTab.Model.Tuning)._sixStrings.push(new AlphaTab.Model.Tuning("Guitar Open E Tuning",[64,59,56,52,47,40],!1));Bridge.get(AlphaTab.Model.Tuning)._sixStrings.push(new AlphaTab.Model.Tuning("Guitar Open Em Tuning",[64,59,55,52,47,40],!1));Bridge.get(AlphaTab.Model.Tuning)._sixStrings.push(new AlphaTab.Model.Tuning("Guitar Open Esus11 Tuning",[64,59,55,52,45,40],!1));Bridge.get(AlphaTab.Model.Tuning)._sixStrings.push(new AlphaTab.Model.Tuning("Guitar Open F Tuning",[65,60,53,48,45,41],!1));Bridge.get(AlphaTab.Model.Tuning)._sixStrings.push(new AlphaTab.Model.Tuning("Guitar Open G Tuning",[62,59,55,50,43,38],!1));Bridge.get(AlphaTab.Model.Tuning)._sixStrings.push(new AlphaTab.Model.Tuning("Guitar Open Gm Tuning",[62,58,55,50,43,38],!1));Bridge.get(AlphaTab.Model.Tuning)._sixStrings.push(new AlphaTab.Model.Tuning("Guitar Open G6 Tuning",[64,59,55,50,43,38],!1));Bridge.get(AlphaTab.Model.Tuning)._sixStrings.push(new AlphaTab.Model.Tuning("Guitar Open Gsus4 Tuning",[62,60,55,50,43,38],!1));Bridge.get(AlphaTab.Model.Tuning)._sixStrings.push(new AlphaTab.Model.Tuning("Guitar Open A Tuning",[64,61,57,52,45,40],!1));Bridge.get(AlphaTab.Model.Tuning)._sixStrings.push(new AlphaTab.Model.Tuning("Guitar Open Am Tuning",[64,60,57,52,45,40],!1));Bridge.get(AlphaTab.Model.Tuning)._sixStrings.push(new AlphaTab.Model.Tuning("Guitar Nashville Tuning",[64,59,67,62,57,52],!1));Bridge.get(AlphaTab.Model.Tuning)._sixStrings.push(new AlphaTab.Model.Tuning("Bass 6 Strings Tuning",[48,43,38,33,28,23],!1));Bridge.get(AlphaTab.Model.Tuning)._sixStrings.push(new AlphaTab.Model.Tuning("Lute or Vihuela Tuning",[64,59,54,50,45,40],!1));Bridge.get(AlphaTab.Model.Tuning)._defaultTunings[5]=new AlphaTab.Model.Tuning("Bass 5 Strings Tuning",[43,38,33,28,23],!0);Bridge.get(AlphaTab.Model.Tuning)._fiveStrings.push(Bridge.get(AlphaTab.Model.Tuning)._defaultTunings[5]);Bridge.get(AlphaTab.Model.Tuning)._fiveStrings.push(new AlphaTab.Model.Tuning("Banjo Dropped C Tuning",[62,59,55,48,67],!1));Bridge.get(AlphaTab.Model.Tuning)._fiveStrings.push(new AlphaTab.Model.Tuning("Banjo Open D Tuning",[62,57,54,50,69],!1));Bridge.get(AlphaTab.Model.Tuning)._fiveStrings.push(new AlphaTab.Model.Tuning("Banjo Open G Tuning",[62,59,55,50,67],!1));Bridge.get(AlphaTab.Model.Tuning)._fiveStrings.push(new AlphaTab.Model.Tuning("Banjo G Minor Tuning",[62,58,55,50,67],!1));Bridge.get(AlphaTab.Model.Tuning)._fiveStrings.push(new AlphaTab.Model.Tuning("Banjo G Modal Tuning",[62,57,55,50,67],!1));Bridge.get(AlphaTab.Model.Tuning)._defaultTunings[4]=new AlphaTab.Model.Tuning("Bass Standard Tuning",[43,38,33,28],!0);Bridge.get(AlphaTab.Model.Tuning)._fourStrings.push(Bridge.get(AlphaTab.Model.Tuning)._defaultTunings[4]);Bridge.get(AlphaTab.Model.Tuning)._fourStrings.push(new AlphaTab.Model.Tuning("Bass Tune down  step",[42,37,32,27],!1));Bridge.get(AlphaTab.Model.Tuning)._fourStrings.push(new AlphaTab.Model.Tuning("Bass Tune down 1 step",[41,36,31,26],!1));Bridge.get(AlphaTab.Model.Tuning)._fourStrings.push(new AlphaTab.Model.Tuning("Bass Tune down 2 step",[39,34,29,24],!1));Bridge.get(AlphaTab.Model.Tuning)._fourStrings.push(new AlphaTab.Model.Tuning("Bass Dropped D Tuning",[43,38,33,26],!1));Bridge.get(AlphaTab.Model.Tuning)._fourStrings.push(new AlphaTab.Model.Tuning("Ukulele C Tuning",[45,40,36,43],!1));Bridge.get(AlphaTab.Model.Tuning)._fourStrings.push(new AlphaTab.Model.Tuning("Ukulele G Tuning",[52,47,43,38],!1));Bridge.get(AlphaTab.Model.Tuning)._fourStrings.push(new AlphaTab.Model.Tuning("Mandolin Standard Tuning",[64,57,50,43],!1));Bridge.get(AlphaTab.Model.Tuning)._fourStrings.push(new AlphaTab.Model.Tuning("Mandolin or Violin Tuning",[76,69,62,55],!1));Bridge.get(AlphaTab.Model.Tuning)._fourStrings.push(new AlphaTab.Model.Tuning("Viola Tuning",[69,62,55,48],!1));Bridge.get(AlphaTab.Model.Tuning)._fourStrings.push(new AlphaTab.Model.Tuning("Cello Tuning",[57,50,43,36],!1))},findTuning:function(strings){for(var tuning,equals,i,j,tunings=Bridge.get(AlphaTab.Model.Tuning).getPresetsFor(strings.length),t=0,tc=tunings.length;t<tc;t++){for(tuning=tunings[t],equals=!0,i=0,j=strings.length;i<j;i++)if(strings[i]!==tuning.tunings[i]){equals=!1;break}if(equals)return tuning}return null}},config:{properties:{isStandard:!1,name:null,tunings:null}},constructor:function(name,tuning,isStandard){this.isStandard=isStandard;this.name=name;this.tunings=tuning}});Bridge.define("AlphaTab.Model.VibratoType",{statics:{none:0,slight:1,wide:2},$enum:!0});Bridge.define("AlphaTab.Platform.ICanvas");Bridge.define("AlphaTab.Platform.JavaScript.Html5Canvas",{inherits:[AlphaTab.Platform.ICanvas],_canvas:null,_context:null,_color:null,_font:null,config:{properties:{Resources:null}},getColor:function(){return this._color},setColor:function(value){this._color=value;this._context.strokeStyle=value.toRgbaString();this._context.fillStyle=value.toRgbaString()},getLineWidth:function(){return this._context.lineWidth},setLineWidth:function(value){this._context.lineWidth=value},getFont:function(){return this._font},setFont:function(value){this._font=value;this._context.font=value.toCssString()},getTextAlign:function(){switch(this._context.textAlign){case"left":return Bridge.get(AlphaTab.Platform.Model.TextAlign).left;case"center":return Bridge.get(AlphaTab.Platform.Model.TextAlign).center;case"right":return Bridge.get(AlphaTab.Platform.Model.TextAlign).right;default:return Bridge.get(AlphaTab.Platform.Model.TextAlign).left}},setTextAlign:function(value){switch(value){case Bridge.get(AlphaTab.Platform.Model.TextAlign).left:this._context.textAlign="left";break;case Bridge.get(AlphaTab.Platform.Model.TextAlign).center:this._context.textAlign="center";break;case Bridge.get(AlphaTab.Platform.Model.TextAlign).right:this._context.textAlign="right"}},getTextBaseline:function(){switch(this._context.textBaseline){case"top":return Bridge.get(AlphaTab.Platform.Model.TextBaseline).top;case"middle":return Bridge.get(AlphaTab.Platform.Model.TextBaseline).middle;case"bottom":return Bridge.get(AlphaTab.Platform.Model.TextBaseline).bottom;default:return Bridge.get(AlphaTab.Platform.Model.TextBaseline).top}},setTextBaseline:function(value){switch(value){case Bridge.get(AlphaTab.Platform.Model.TextBaseline).top:this._context.textBaseline="top";break;case Bridge.get(AlphaTab.Platform.Model.TextBaseline).middle:this._context.textBaseline="middle";break;case Bridge.get(AlphaTab.Platform.Model.TextBaseline).bottom:this._context.textBaseline="bottom"}},beginRender:function(width,height){this._canvas=document.createElement("canvas");this._canvas.width=width;this._canvas.height=height;this._canvas.style.width=width+"px";this._canvas.style.height=height+"px";this._context=this._canvas.getContext("2d");this._context.textBaseline="top"},endRender:function(){var result=this._canvas;return this._canvas=null,result},fillRect:function(x,y,w,h){this._context.fillRect(x-.5,y-.5,w,h)},strokeRect:function(x,y,w,h){this._context.strokeRect(x-.5,y-.5,w,h)},beginPath:function(){this._context.beginPath()},closePath:function(){this._context.closePath()},moveTo:function(x,y){this._context.moveTo(x-.5,y-.5)},lineTo:function(x,y){this._context.lineTo(x-.5,y-.5)},quadraticCurveTo:function(cpx,cpy,x,y){this._context.quadraticCurveTo(cpx,cpy,x,y)},bezierCurveTo:function(cp1x,cp1y,cp2x,cp2y,x,y){this._context.bezierCurveTo(cp1x,cp1y,cp2x,cp2y,x,y)},fillCircle:function(x,y,radius){this._context.arc(x,y,radius,0,Math.PI*2,!0);this.fill()},fill:function(){this._context.fill()},stroke:function(){this._context.stroke()},fillText:function(text,x,y){this._context.fillText(text,x,y)},measureText:function(text){return this._context.measureText(text).width},fillMusicFontSymbol:function(x,y,scale,symbol){if(symbol!==Bridge.get(AlphaTab.Rendering.Glyphs.MusicFontSymbol).none){var glyph=new AlphaTab.Rendering.Utils.SvgRenderer(Bridge.get(AlphaTab.Rendering.Glyphs.MusicFont).symbolLookup[symbol],scale,scale);glyph.paint(x,y,this)}}});Bridge.define("AlphaTab.Platform.Svg.SvgCanvas",{inherits:[AlphaTab.Platform.ICanvas],statics:{BlurCorrection:.5},_buffer:null,_currentPath:null,_currentPathIsEmpty:!1,config:{properties:{Color:null,LineWidth:0,Font:null,TextAlign:0,TextBaseline:0,Resources:null}},constructor:function(){this._currentPath=[];this._currentPathIsEmpty=!0;this.setColor(new AlphaTab.Platform.Model.Color(255,255,255));this.setLineWidth(1);this.setFont(new AlphaTab.Platform.Model.Font("Arial",10));this.setTextAlign(Bridge.get(AlphaTab.Platform.Model.TextAlign).left);this.setTextBaseline(Bridge.get(AlphaTab.Platform.Model.TextBaseline).$default)},beginRender:function(width,height){this._buffer=[];this._buffer.push('<svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="');this._buffer.push(width);this._buffer.push('px" height="');this._buffer.push(height);this._buffer.push('px" class="alphaTabSurfaceSvg">\n');this.getResources().scale!==1&&(this._buffer.push('style="font-size:'),this._buffer.push(this.getResources().scale*100),this._buffer.push('%"'));this._currentPath=[];this._currentPathIsEmpty=!0},endRender:function(){return this._buffer.push("<\/svg>"),this._buffer.join("")},fillRect:function(x,y,w,h){this._buffer.push('<rect x="');this._buffer.push(x-Bridge.get(AlphaTab.Platform.Svg.SvgCanvas).BlurCorrection);this._buffer.push('" y="');this._buffer.push(y-Bridge.get(AlphaTab.Platform.Svg.SvgCanvas).BlurCorrection);this._buffer.push('" width="');this._buffer.push(w);this._buffer.push('" height="');this._buffer.push(h);this._buffer.push('" style="fill:');this._buffer.push(this.getColor().toRgbaString());this._buffer.push(';" />\n')},strokeRect:function(x,y,w,h){this._buffer.push('<rect x="');this._buffer.push(x-Bridge.get(AlphaTab.Platform.Svg.SvgCanvas).BlurCorrection);this._buffer.push('" y="');this._buffer.push(y-Bridge.get(AlphaTab.Platform.Svg.SvgCanvas).BlurCorrection);this._buffer.push('" width="');this._buffer.push(w);this._buffer.push('" height="');this._buffer.push(h);this._buffer.push('" style="stroke:');this._buffer.push(this.getColor().toRgbaString());this._buffer.push("; stroke-width:");this._buffer.push(this.getLineWidth());this._buffer.push(';" />\n')},beginPath:function(){},closePath:function(){this._currentPath.push(" z")},moveTo:function(x,y){this._currentPath.push(" M");this._currentPath.push(x-.5);this._currentPath.push(",");this._currentPath.push(y-.5)},lineTo:function(x,y){this._currentPathIsEmpty=!1;this._currentPath.push(" L");this._currentPath.push(x-.5);this._currentPath.push(",");this._currentPath.push(y-.5)},quadraticCurveTo:function(cpx,cpy,x,y){this._currentPathIsEmpty=!1;this._currentPath.push(" Q");this._currentPath.push(cpx);this._currentPath.push(",");this._currentPath.push(cpy);this._currentPath.push(",");this._currentPath.push(x);this._currentPath.push(",");this._currentPath.push(y)},bezierCurveTo:function(cp1x,cp1y,cp2x,cp2y,x,y){this._currentPathIsEmpty=!1;this._currentPath.push(" C");this._currentPath.push(cp1x);this._currentPath.push(",");this._currentPath.push(cp1y);this._currentPath.push(",");this._currentPath.push(cp2x);this._currentPath.push(",");this._currentPath.push(cp2y);this._currentPath.push(",");this._currentPath.push(x);this._currentPath.push(",");this._currentPath.push(y)},fillCircle:function(x,y,radius){this._currentPathIsEmpty=!1;this._currentPath.push(" M");this._currentPath.push(x-radius);this._currentPath.push(",");this._currentPath.push(y);this._currentPath.push(" A1,1 0 0,0 ");this._currentPath.push(x+radius);this._currentPath.push(",");this._currentPath.push(y);this._currentPath.push(" A1,1 0 0,0 ");this._currentPath.push(x-radius);this._currentPath.push(",");this._currentPath.push(y);this._currentPath.push(" z");this.fill()},fill:function(){this._currentPathIsEmpty||(this._buffer.push('<path d="'),this._buffer.push(this._currentPath.join("")),this._buffer.push('" style="fill:'),this._buffer.push(this.getColor().toRgbaString()),this._buffer.push('" stroke="none"/>\n'));this._currentPath=[];this._currentPathIsEmpty=!0},stroke:function(){this._currentPathIsEmpty||(this._buffer.push('<path d="'),this._buffer.push(this._currentPath.join("")),this._buffer.push('" style="stroke:'),this._buffer.push(this.getColor().toRgbaString()),this._buffer.push("; stroke-width:"),this._buffer.push(this.getLineWidth()),this._buffer.push(';" fill="none" />\n'));this._currentPath=[];this._currentPathIsEmpty=!0},fillText:function(text,x,y){this._buffer.push('<text x="');this._buffer.push(x);this._buffer.push('" y="');this._buffer.push(y+this.getSvgBaseLineOffset());this._buffer.push('" style="font:');this._buffer.push(this.getFont().toCssString());this._buffer.push("; fill:");this._buffer.push(this.getColor().toRgbaString());this._buffer.push(';" ');this._buffer.push(' dominant-baseline="');this._buffer.push(this.getSvgBaseLine());this._buffer.push('" text-anchor="');this._buffer.push(this.getSvgTextAlignment());this._buffer.push('">\n');this._buffer.push(text);this._buffer.push("<\/text>\n")},getSvgTextAlignment:function(){switch(this.getTextAlign()){case Bridge.get(AlphaTab.Platform.Model.TextAlign).left:return"start";case Bridge.get(AlphaTab.Platform.Model.TextAlign).center:return"middle";case Bridge.get(AlphaTab.Platform.Model.TextAlign).right:return"end"}return""},getSvgBaseLineOffset:function(){switch(this.getTextBaseline()){case Bridge.get(AlphaTab.Platform.Model.TextBaseline).top:return 0;case Bridge.get(AlphaTab.Platform.Model.TextBaseline).middle:return 0;case Bridge.get(AlphaTab.Platform.Model.TextBaseline).bottom:return 0;default:return this.getFont().size}},getSvgBaseLine:function(){switch(this.getTextBaseline()){case Bridge.get(AlphaTab.Platform.Model.TextBaseline).top:return"top";case Bridge.get(AlphaTab.Platform.Model.TextBaseline).middle:return"middle";case Bridge.get(AlphaTab.Platform.Model.TextBaseline).bottom:return"bottom";default:return"top"}},measureText:function(text){if(Bridge.String.isNullOrEmpty(text))return 0;var font=Bridge.get(AlphaTab.Platform.Svg.SupportedFonts).arial;return Bridge.String.contains(this.getFont().family,"Times")&&(font=Bridge.get(AlphaTab.Platform.Svg.SupportedFonts).timesNewRoman),Bridge.get(AlphaTab.Platform.Svg.FontSizes).measureString(text,font,this.getFont().size,this.getFont().style)},fillMusicFontSymbol:function(x,y,scale,symbol){symbol!==Bridge.get(AlphaTab.Rendering.Glyphs.MusicFontSymbol).none&&(this._buffer.push('<text x="'),this._buffer.push(x-Bridge.get(AlphaTab.Platform.Svg.SvgCanvas).BlurCorrection),this._buffer.push('" y="'),this._buffer.push(y-Bridge.get(AlphaTab.Platform.Svg.SvgCanvas).BlurCorrection),this._buffer.push('" style="'),scale!==1&&(this._buffer.push("font-size:"),this._buffer.push(scale*100),this._buffer.push("%;")),this._buffer.push("fill:"),this._buffer.push(this.getColor().toRgbaString()),this._buffer.push(';" text-anchor="start"'),this._buffer.push(">&#x"),this._buffer.push(Bridge.get(AlphaTab.Platform.Std).toHexString(symbol)),this._buffer.push(";<\/text>\n"))}});Bridge.define("AlphaTab.Platform.JavaScript.JsApiBase",{element:null,canvasElement:null,trackIndexes:null,config:{properties:{renderer:null,score:null}},constructor:function(element,options){var $t,dataset,settings,tracksData,contents,file;this.element=element;dataset=this.element.dataset;settings=Bridge.get(AlphaTab.Settings).fromJson(options);options&&options.tracks?tracksData=options.tracks:dataset&&dataset.tracks?tracksData=dataset.tracks:(tracksData=element.getAttribute("data-tracks"),tracksData||(tracksData=0));this.setTracks(tracksData,!1);contents="";element!==null&&((options&&options.tex||dataset&&dataset.tex||element.getAttribute("data-tex"))&&element.textContent&&(contents=element.textContent.trim(),element.innerHTML=""),this.canvasElement=document.createElement("div"),this.canvasElement.className="alphaTabSurface",element.appendChild(this.canvasElement));this.renderer=this.createScoreRenderer(settings,options,this.canvasElement);this.renderer.addRenderFinished(Bridge.fn.bind(this,function(){this.triggerEvent("rendered")}));this.renderer.addPostRenderFinished(Bridge.fn.bind(this,function(){this.triggerEvent("post-rendered")}));this.renderer.addPreRender(Bridge.fn.bind(this,function(){this.canvasElement.innerHTML=""}));this.renderer.addPartialRenderFinished(Bridge.fn.bind(this,function(result){var itemToAppend,partialResult;typeof result.renderResult=="string"?(partialResult=document.createElement("div"),partialResult.innerHTML=result.renderResult,itemToAppend=partialResult.firstChild):itemToAppend=result.renderResult;this.canvasElement.style.width=result.totalWidth+"px";this.canvasElement.style.height=result.totalHeight+"px";this.canvasElement.appendChild(itemToAppend)}));this.renderer.addRenderFinished(Bridge.fn.bind(this,function(result){this.canvasElement.style.width=result.totalWidth+"px";this.canvasElement.style.height=result.totalHeight+"px"}));Bridge.String.isNullOrEmpty(contents)?options&&options.file?this.load(options.file):dataset&&dataset.file?this.load(dataset.file):($t=this.element.getAttribute("data-file"),file=$t,$t)!==null&&this.load(file):this.tex(contents)},setTracks:function(tracksData,render){var tracks,i,value;if(render===void 0&&(render=!0),tracks=[],typeof tracksData=="string")try{tracksData=JSON.parse(tracksData)}catch($e){$e=Bridge.Exception.create($e);tracksData=[0]}if(typeof tracksData=="number")tracks.push(tracksData);else if(tracksData.length)for(i=0;i<tracksData.length;i++)value=typeof tracksData[i]=="number"?tracksData[i]:parseInt(tracksData[i].ToString()),value>=0&&tracks.push(value);this.trackIndexes=tracks.slice(0);render&&this.render()},setScore:function(score){this.score=score},scoreLoaded:function(score){this.score=score;this.triggerEvent("loaded",score);this.render()},triggerEvent:function(name,details){if(details===void 0&&(details=null),this.element!==null){var e=document.createEvent("CustomEvent");e.initCustomEvent(name,!1,!1,details);this.element.dispatchEvent(e)}}});Bridge.define("AlphaTab.Platform.JavaScript.JsWorkerApi",{inherits:[AlphaTab.Platform.JavaScript.JsApiBase],constructor:function(element,options){AlphaTab.Platform.JavaScript.JsApiBase.prototype.$constructor.call(this,element,options)},createScoreRenderer:function(settings,rawSettings){var renderer=new AlphaTab.Platform.JavaScript.WorkerScoreRenderer(this,rawSettings);return renderer.addPostRenderFinished(Bridge.fn.bind(this,function(){this.element.className=Bridge.String.replaceAll(Bridge.String.replaceAll(this.element.className," loading","")," rendering","")})),renderer},load:function(data){this.element.className+=" loading";this.renderer.load(data,this.trackIndexes)},setScore:function(score){AlphaTab.Platform.JavaScript.JsApiBase.prototype.setScore.call(this,score);this.renderer.setScore(this.score)},render:function(){this.renderer!==null&&(this.element.className+=" rendering",this.renderer.renderMultiple(this.trackIndexes))},tex:function(contents){this.element.className+=" loading";this.renderer.tex(contents)}});Bridge.define("AlphaTab.Platform.JavaScript.JsApi",{inherits:[AlphaTab.Platform.JavaScript.JsApiBase],constructor:function(element,options){AlphaTab.Platform.JavaScript.JsApiBase.prototype.$constructor.call(this,element,options)},getTracks:function(){for(var tracks=[],track,$t=Bridge.getEnumerator(this.trackIndexes);$t.moveNext();)track=$t.getCurrent(),track>=0&&track<this.score.tracks.length&&tracks.push(this.score.tracks[track]);return tracks.length===0&&this.score.tracks.length>0&&tracks.push(this.score.tracks[0]),tracks.slice(0)},createScoreRenderer:function(settings,rawSettings,canvasElement){return new AlphaTab.Rendering.ScoreRenderer(settings,canvasElement)},load:function(data){try{Bridge.is(data,ArrayBuffer)?this.scoreLoaded(Bridge.get(AlphaTab.Importer.ScoreLoader).loadScoreFromBytes(new Uint8Array(data))):Bridge.is(data,Uint8Array)?this.scoreLoaded(Bridge.get(AlphaTab.Importer.ScoreLoader).loadScoreFromBytes(data)):typeof data=="string"&&Bridge.get(AlphaTab.Importer.ScoreLoader).loadScoreAsync(data,Bridge.fn.bind(this,this.scoreLoaded),function(e){console.error(e)})}catch(e){e=Bridge.Exception.create(e);console.error(e)}},tex:function(contents){try{var parser=new AlphaTab.Importer.AlphaTexImporter,data=Bridge.get(AlphaTab.IO.ByteBuffer).fromBuffer(Bridge.get(AlphaTab.Platform.Std).stringToByteArray(contents));parser.init(data);this.scoreLoaded(parser.readScore())}catch(e){e=Bridge.Exception.create(e);console.error(e)}},render:function(){this.renderer!==null&&this.renderer.renderMultiple(this.getTracks())}});Bridge.define("AlphaTab.Platform.JavaScript.JsWorker",{_renderer:null,_main:null,_trackIndexes:null,_includeScoreInLoadedEvent:!1,config:{properties:{score:null}},constructor:function(main,options){this._main=main;this._includeScoreInLoadedEvent=options.scoreInLoadedEvent===!0;this._main.addEventListener("message",Bridge.fn.bind(this,this.handleMessage),!1);var settings=Bridge.get(AlphaTab.Settings).fromJson(options);this._renderer=new AlphaTab.Rendering.ScoreRenderer(settings,null);this._renderer.addPartialRenderFinished(Bridge.fn.bind(this,function(result){this._main.postMessage({cmd:"partialRenderFinished",result:result})}));this._renderer.addRenderFinished(Bridge.fn.bind(this,function(result){this._main.postMessage({cmd:"renderFinished",result:result})}));this._renderer.addPostRenderFinished(Bridge.fn.bind(this,function(){this._main.postMessage({cmd:"postRenderFinished"})}));this._renderer.addPreRender(Bridge.fn.bind(this,function(){this._main.postMessage({cmd:"preRender"})}))},getTracks:function(){for(var tracks=[],track,$t=Bridge.getEnumerator(this._trackIndexes);$t.moveNext();)track=$t.getCurrent(),track>=0&&track<this.score.tracks.length&&tracks.push(this.score.tracks[track]);return tracks.length===0&&this.score.tracks.length>0&&tracks.push(this.score.tracks[0]),tracks.slice(0)},handleMessage:function(e){var data=e.data,cmd=data.cmd,score,jsonConverter;try{switch(cmd){case"load":this.load(data.data,data.indexes);break;case"score":score=data.score;score&&(jsonConverter=new AlphaTab.Model.JsonConverter,score=jsonConverter.jsObjectToScore(score));this.score=score;this._renderer.score=score;break;case"tex":this.tex(data.data);break;case"renderMultiple":this.renderMultiple(data.data)}}catch(ex){ex=Bridge.Exception.create(ex);console.error("Error Handling message",cmd,ex)}},renderMultiple:function(trackIndexes){this._trackIndexes=trackIndexes;this.render()},tex:function(contents){try{var parser=new AlphaTab.Importer.AlphaTexImporter,data=Bridge.get(AlphaTab.IO.ByteBuffer).fromBuffer(Bridge.get(AlphaTab.Platform.Std).stringToByteArray(contents));parser.init(data);this.scoreLoaded(parser.readScore())}catch(e){e=Bridge.Exception.create(e);this.error(e)}},load:function(data,trackIndexes){try{this._trackIndexes=trackIndexes;Bridge.is(data,ArrayBuffer)?this.scoreLoaded(Bridge.get(AlphaTab.Importer.ScoreLoader).loadScoreFromBytes(new Uint8Array(data))):Bridge.is(data,Uint8Array)?this.scoreLoaded(Bridge.get(AlphaTab.Importer.ScoreLoader).loadScoreFromBytes(data)):typeof data=="string"&&Bridge.get(AlphaTab.Importer.ScoreLoader).loadScoreAsync(data,Bridge.fn.bind(this,this.scoreLoaded),Bridge.fn.bind(this,this.error))}catch(e){e=Bridge.Exception.create(e);this.error(e)}},error:function(e){this._main.postMessage({cmd:"error",exception:e})},scoreLoaded:function(score){if(this.score=score,this._includeScoreInLoadedEvent){var json=new AlphaTab.Model.JsonConverter;this._main.postMessage({cmd:"loaded",score:json.scoreToJsObject(score)})}else this._main.postMessage({cmd:"loaded"});this.render()},render:function(){this._renderer.renderMultiple(this.getTracks())}});Bridge.define("AlphaTab.Platform.Model.Font",{_cssCache:null,config:{properties:{family:null,size:0,style:0}},constructor:function(family,size,style){style===void 0&&(style=0);this.family=family;this.size=size;this.style=style;this._cssCache=null},getIsBold:function(){return(this.style&Bridge.get(AlphaTab.Platform.Model.FontStyle).bold)!=0},getIsItalic:function(){return(this.style&Bridge.get(AlphaTab.Platform.Model.FontStyle).italic)!=0},clone:function(){return new AlphaTab.Platform.Model.Font(this.family,this.size,this.style)},toCssString:function(){if(this._cssCache===null){var buf=[];this.getIsBold()&&buf.push("bold ");this.getIsItalic()&&buf.push("italic ");buf.push(this.size);buf.push("px ");buf.push("'");buf.push(this.family);buf.push("'");this._cssCache=buf.join("")}return this._cssCache}});Bridge.define("AlphaTab.Platform.Model.FontStyle",{statics:{plain:0,bold:1,italic:2},$enum:!0,$flags:!0});Bridge.define("AlphaTab.Platform.Model.TextAlign",{statics:{left:0,center:1,right:2},$enum:!0});Bridge.define("AlphaTab.Platform.Model.TextBaseline",{statics:{$default:0,top:1,middle:2,bottom:3},$enum:!0});Bridge.define("AlphaTab.Xml.IXmlDocument");Bridge.define("AlphaTab.Xml.XmlDocumentWrapper",{inherits:[AlphaTab.Xml.IXmlDocument],_document:null,constructor:function(document){this._document=document},getDocumentElement:function(){return new AlphaTab.Xml.XmlNodeWrapper(this._document.documentElement)}});Bridge.define("AlphaTab.Platform.Svg.SupportedFonts",{statics:{timesNewRoman:0,arial:1},$enum:!0});Bridge.define("AlphaTab.Rendering.BarRendererBase",{config:{properties:{stave:null,x:0,y:0,width:0,height:0,index:0,isEmpty:!1,topOverflow:0,bottomOverflow:0,bar:null,isLinkedToPrevious:!1}},constructor:function(bar){this.bar=bar;this.isEmpty=!0},getResources:function(){return this.getLayout().renderer.renderingResources},getLayout:function(){return this.stave.staveGroup.layout},getSettings:function(){return this.getLayout().renderer.settings},getScale:function(){return this.getSettings().scale},getIsFirstOfLine:function(){return this.index===0},getIsLastOfLine:function(){return this.index===this.stave.barRenderers.length-1},getIsLast:function(){return this.bar.index===this.stave.barRenderers.length-1},getTopPadding:function(){return 0},getBottomPadding:function(){return 0},registerOverflowTop:function(topOverflow){topOverflow>this.topOverflow&&(this.topOverflow=topOverflow)},registerOverflowBottom:function(bottomOverflow){bottomOverflow>this.bottomOverflow&&(this.bottomOverflow=bottomOverflow)},applyBarSpacing:function(){},registerMaxSizes:function(){},applySizes:function(){},finalizeRenderer:function(){},doLayout:function(){},paint:function(){},buildBoundingsLookup:function(lookup,visualTop,visualHeight,realTop,realHeight,x){var barLookup=new AlphaTab.Rendering.Utils.BarBoundings;barLookup.bar=this.bar;barLookup.isFirstOfLine=this.getIsFirstOfLine();barLookup.isLastOfLine=this.getIsLastOfLine();barLookup.visualBounds=new AlphaTab.Rendering.Utils.Bounds(x+this.stave.x+this.x,visualTop,this.width,visualHeight);barLookup.bounds=new AlphaTab.Rendering.Utils.Bounds(x+this.stave.x+this.x,realTop,this.width,realHeight);lookup.bars.push(barLookup)}});Bridge.define("AlphaTab.Rendering.GroupedBarRenderer",{inherits:[AlphaTab.Rendering.BarRendererBase],statics:{KeySizePre:"Pre",KeySizePost:"Post"},_preBeatGlyphs:null,_voiceContainers:null,_postBeatGlyphs:null,_biggestVoiceContainer:null,constructor:function(bar){AlphaTab.Rendering.BarRendererBase.prototype.$constructor.call(this,bar);this._preBeatGlyphs=[];this._voiceContainers={};this._postBeatGlyphs=[]},getPreBeatGlyphStart:function(){return 0},getBeatGlyphsStart:function(){var start=this.getPreBeatGlyphStart();return this._preBeatGlyphs.length>0&&(start+=this._preBeatGlyphs[this._preBeatGlyphs.length-1].x+this._preBeatGlyphs[this._preBeatGlyphs.length-1].width),start},getPostBeatGlyphsStart:function(){var start=this.getBeatGlyphsStart(),offset=0,$c=function(c){c.width>offset&&(offset=c.width)},$e=this._voiceContainers;for(var t in $e)$c($e[t]);return start+offset},getPostBeatGlyphsWidth:function(){for(var c,x,width=0,i=0,j=this._postBeatGlyphs.length;i<j;i++)c=this._postBeatGlyphs[i],x=c.x+c.width,x>width&&(width=x);return width},doLayout:function(){var $c,$e,t;this.createPreBeatGlyphs();this.createBeatGlyphs();this.createPostBeatGlyphs();$c=function(c){c.doLayout()};$e=this._voiceContainers;for(t in $e)$c($e[t]);this.updateWidth()},updateWidth:function(){var $c,$e,t;this.width=this.getPostBeatGlyphsStart();this._postBeatGlyphs.length>0&&(this.width+=this._postBeatGlyphs[this._postBeatGlyphs.length-1].x+this._postBeatGlyphs[this._postBeatGlyphs.length-1].width);$c=Bridge.fn.bind(this,function(c){(this._biggestVoiceContainer===null||c.width>this._biggestVoiceContainer.width)&&(this._biggestVoiceContainer=c)});$e=this._voiceContainers;for(t in $e)$c($e[t])},getNoteX:function(note,onEnd){return onEnd===void 0&&(onEnd=!0),0},getNoteY:function(){return 0},registerMaxSizes:function(sizes){var preSize=this.getBeatGlyphsStart(),$c,$e,t,postSize;sizes.getSize(Bridge.get(AlphaTab.Rendering.GroupedBarRenderer).KeySizePre)<preSize&&sizes.setSize(Bridge.get(AlphaTab.Rendering.GroupedBarRenderer).KeySizePre,preSize);$c=function(c){c.registerMaxSizes(sizes)};$e=this._voiceContainers;for(t in $e)$c($e[t]);postSize=this._postBeatGlyphs.length===0?0:this._postBeatGlyphs[this._postBeatGlyphs.length-1].x+this._postBeatGlyphs[this._postBeatGlyphs.length-1].width;sizes.getSize(Bridge.get(AlphaTab.Rendering.GroupedBarRenderer).KeySizePost)<postSize&&sizes.setSize(Bridge.get(AlphaTab.Rendering.GroupedBarRenderer).KeySizePost,postSize);sizes.fullWidth<this.width&&(sizes.fullWidth=this.width)},applySizes:function(sizes){var preSize=sizes.getSize(Bridge.get(AlphaTab.Rendering.GroupedBarRenderer).KeySizePre),preSizeDiff=preSize-this.getBeatGlyphsStart(),$c,$e,t,postSize,postSizeDiff,i,g;preSizeDiff>0&&this.addPreBeatGlyph(new AlphaTab.Rendering.Glyphs.SpacingGlyph(0,0,preSizeDiff));$c=function(c){c.applySizes(sizes)};$e=this._voiceContainers;for(t in $e)$c($e[t]);if(postSize=sizes.getSize(Bridge.get(AlphaTab.Rendering.GroupedBarRenderer).KeySizePost),postSizeDiff=this._postBeatGlyphs.length===0?0:postSize-(this._postBeatGlyphs[this._postBeatGlyphs.length-1].x+this._postBeatGlyphs[this._postBeatGlyphs.length-1].width),postSizeDiff>0)for(this._postBeatGlyphs.splice(0,0,new AlphaTab.Rendering.Glyphs.SpacingGlyph(0,0,postSizeDiff)),i=0;i<this._postBeatGlyphs.length;i++)g=this._postBeatGlyphs[i],g.x=i===0?0:this._postBeatGlyphs[this._postBeatGlyphs.length-1].x+this._postBeatGlyphs[this._postBeatGlyphs.length-1].width,g.index=i,g.renderer=this;this.updateWidth()},addGlyph:function(c,g){this.isEmpty=!1;g.x=c.length===0?0:c[c.length-1].x+c[c.length-1].width;g.index=c.length;g.renderer=this;g.doLayout();c.push(g)},addPreBeatGlyph:function(g){this.addGlyph(this._preBeatGlyphs,g)},addBeatGlyph:function(g){this.getOrCreateVoiceContainer(g.beat.voice.index).addGlyph(g)},getOrCreateVoiceContainer:function(voiceIndex){var c;return voiceIndex>=Object.keys(this._voiceContainers).length?(c=new AlphaTab.Rendering.Glyphs.VoiceContainerGlyph(0,0,voiceIndex),c.renderer=this,this._voiceContainers[voiceIndex]=c):c=this._voiceContainers[voiceIndex],c},getBeatContainer:function(voice,beat){return this.getOrCreateVoiceContainer(voice).beatGlyphs[beat]},getPreNotesPosition:function(voice,beat){return this.getBeatContainer(voice,beat).preNotes},getOnNotesPosition:function(voice,beat){return this.getBeatContainer(voice,beat).onNotes},getPostNotesPosition:function(voice,beat){return this.getBeatContainer(voice,beat).postNotes},addPostBeatGlyph:function(g){this.addGlyph(this._postBeatGlyphs,g)},createPreBeatGlyphs:function(){},createBeatGlyphs:function(){},createPostBeatGlyphs:function(){},applyBarSpacing:function(spacing){var $c,$e,t;this.width+=spacing;$c=Bridge.fn.bind(this,function(c){var toApply=spacing;this._biggestVoiceContainer!==null&&(toApply+=this._biggestVoiceContainer.width-c.width);c.applyGlyphSpacing(toApply)});$e=this._voiceContainers;for(t in $e)$c($e[t])},finalizeRenderer:function(layout){var $c=function(c){c.finalizeGlyph(layout)},$e=this._voiceContainers;for(var t in $e)$c($e[t])},paint:function(cx,cy,canvas){var glyphStartX,i,j,g,$c,$e,t,i1,j1,g1;for(this.paintBackground(cx,cy,canvas),glyphStartX=this.getPreBeatGlyphStart(),i=0,j=this._preBeatGlyphs.length;i<j;i++)g=this._preBeatGlyphs[i],g.paint(cx+this.x+glyphStartX,cy+this.y,canvas);glyphStartX=this.getBeatGlyphsStart();$c=Bridge.fn.bind(this,function(c){c.paint(cx+this.x+glyphStartX,cy+this.y,canvas)});$e=this._voiceContainers;for(t in $e)$c($e[t]);for(glyphStartX=this.width-this.getPostBeatGlyphsWidth(),i1=0,j1=this._postBeatGlyphs.length;i1<j1;i1++)g1=this._postBeatGlyphs[i1],g1.paint(cx+this.x+glyphStartX,cy+this.y,canvas)},paintBackground:function(){},buildBoundingsLookup:function(lookup,visualTop,visualHeight,realTop,realHeight,x){var t;AlphaTab.Rendering.BarRendererBase.prototype.buildBoundingsLookup.call(this,lookup,visualTop,visualHeight,realTop,realHeight,x);var barLookup=lookup.bars[lookup.bars.length-1],beatStart=this.getBeatGlyphsStart(),$c=Bridge.fn.bind(this,function(c){for(var bc,beatLookup,i=0,j=c.beatGlyphs.length;i<j;i++)bc=c.beatGlyphs[i],beatLookup=new AlphaTab.Rendering.Utils.BeatBoundings,beatLookup.beat=bc.beat,beatLookup.visualBounds=new AlphaTab.Rendering.Utils.Bounds(x+this.stave.x+this.x+beatStart+c.x+bc.x+bc.onNotes.x,visualTop,bc.onNotes.width,visualHeight),beatLookup.bounds=new AlphaTab.Rendering.Utils.Bounds(x+this.stave.x+this.x+beatStart+c.x+bc.x,realTop,bc.width,realHeight),barLookup.beats.push(beatLookup)}),$e=this._voiceContainers;for(t in $e)$c($e[t])}});Bridge.define("AlphaTab.Rendering.ScoreBarRenderer",{inherits:[AlphaTab.Rendering.GroupedBarRenderer],statics:{LineSpacing:8,config:{init:function(){this.sharpKsSteps=[0,3,-1,2,5,1,4];this.flatKsSteps=[4,1,5,2,6,3,7]}},paintSingleBar:function(canvas,x1,y1,x2,y2,size){canvas.beginPath();canvas.moveTo(x1,y1);canvas.lineTo(x2,y2);canvas.lineTo(x2,y2+size);canvas.lineTo(x1,y1+size);canvas.closePath();canvas.fill()}},_helpers:null,_startSpacing:!1,config:{properties:{accidentalHelper:null}},constructor:function(bar){AlphaTab.Rendering.GroupedBarRenderer.prototype.$constructor.call(this,bar);this.accidentalHelper=new AlphaTab.Rendering.Utils.AccidentalHelper},getTopPadding:function(){return this.getGlyphOverflow()},getBottomPadding:function(){return this.getGlyphOverflow()},getLineOffset:function(){return 9*this.getScale()},getGlyphOverflow:function(){var res=this.getResources();return res.tablatureFont.size/2+res.tablatureFont.size*.2},getBeatDirection:function(beat){var g=this.getOnNotesPosition(beat.voice.index,beat.index);return g!==null?g.noteHeads.getDirection():Bridge.get(AlphaTab.Rendering.Utils.BeamDirection).up},getNoteX:function(note,onEnd){onEnd===void 0&&(onEnd=!0);var g=this.getOnNotesPosition(note.beat.voice.index,note.beat.index);return g!==null?g.container.x+g.x+g.noteHeads.getNoteX(note,onEnd):0},getNoteY:function(note){var beat=this.getOnNotesPosition(note.beat.voice.index,note.beat.index);return beat!==null?beat.noteHeads.getNoteY(note):0},doLayout:function(){var top,bottom,i,j,v,k,l,h,maxNoteY,minNoteY;for(this._helpers=this.stave.staveGroup.helpers.helpers[this.bar.track.index][this.bar.index],AlphaTab.Rendering.GroupedBarRenderer.prototype.doLayout.call(this),this.height=this.getLineOffset()*4+this.getTopPadding()+this.getBottomPadding(),this.index===0&&(this.stave.registerStaveTop(this.getGlyphOverflow()),this.stave.registerStaveBottom(this.height-this.getGlyphOverflow())),top=this.getScoreY(0),bottom=this.getScoreY(8),i=0,j=this._helpers.beamHelpers.length;i<j;i++)for(v=this._helpers.beamHelpers[i],k=0,l=v.length;k<l;k++)h=v[k],maxNoteY=this.getScoreY(this.getNoteLine(h.maxNote)),h.getDirection()===Bridge.get(AlphaTab.Rendering.Utils.BeamDirection).up&&(maxNoteY-=this.getStemSize(h.maxDuration)),maxNoteY<top&&this.registerOverflowTop(Math.abs(maxNoteY)),minNoteY=this.getScoreY(this.getNoteLine(h.minNote)),h.getDirection()===Bridge.get(AlphaTab.Rendering.Utils.BeamDirection).down&&(minNoteY+=this.getStemSize(h.maxDuration)),minNoteY>bottom&&this.registerOverflowBottom(Math.abs(minNoteY)-bottom)},paint:function(cx,cy,canvas){AlphaTab.Rendering.GroupedBarRenderer.prototype.paint.call(this,cx,cy,canvas);this.paintBeams(cx,cy,canvas);this.paintTuplets(cx,cy,canvas)},paintTuplets:function(cx,cy,canvas){for(var v,k,l,h,i=0,j=this._helpers.tupletHelpers.length;i<j;i++)for(v=this._helpers.tupletHelpers[i],k=0,l=v.length;k<l;k++)h=v[k],this.paintTupletHelper(cx+this.getBeatGlyphsStart(),cy,canvas,h)},paintBeams:function(cx,cy,canvas){for(var v,k,l,h,i=0,j=this._helpers.beamHelpers.length;i<j;i++)for(v=this._helpers.beamHelpers[i],k=0,l=v.length;k<l;k++)h=v[k],this.paintBeamHelper(cx+this.getBeatGlyphsStart(),cy,canvas,h)},paintBeamHelper:function(cx,cy,canvas,h){h.beats.length===1?this.paintFooter(cx,cy,canvas,h):this.paintBar(cx,cy,canvas,h)},paintTupletHelper:function(cx,cy,canvas,h){var res=this.getResources(),oldAlign=canvas.getTextAlign(),i,j,beat,beamingHelper;if(canvas.setTextAlign(Bridge.get(AlphaTab.Platform.Model.TextAlign).center),h.beats.length!==1&&h.getIsFull()){var firstBeat=h.beats[0],lastBeat=h.beats[h.beats.length-1],beamingHelper1=this._helpers.beamHelperLookup[h.voiceIndex][firstBeat.index];if(beamingHelper1!==null){var direction1=beamingHelper1.getDirection(),startX=beamingHelper1.getBeatLineX(firstBeat)+this.getScale(),endX=beamingHelper1.getBeatLineX(lastBeat)+this.getScale();canvas.setFont(res.effectFont);var s=h.tuplet.toString(),sw=canvas.measureText(s),sp=3*this.getScale(),middleX=(startX+endX)/2,offset1X=middleX-sw/2-sp,offset2X=middleX+sw/2+sp,startY=this.calculateBeamY(beamingHelper1,startX),offset1Y=this.calculateBeamY(beamingHelper1,offset1X),middleY=this.calculateBeamY(beamingHelper1,middleX),offset2Y=this.calculateBeamY(beamingHelper1,offset2X),endY=this.calculateBeamY(beamingHelper1,endX),offset1=10*this.getScale(),size=5*this.getScale();direction1===Bridge.get(AlphaTab.Rendering.Utils.BeamDirection).down&&(offset1*=-1,size*=-1);canvas.beginPath();canvas.moveTo(cx+this.x+startX,cy+this.y+startY-offset1);canvas.lineTo(cx+this.x+startX,cy+this.y+startY-offset1-size);canvas.lineTo(cx+this.x+offset1X,cy+this.y+offset1Y-offset1-size);canvas.stroke();canvas.beginPath();canvas.moveTo(cx+this.x+offset2X,cy+this.y+offset2Y-offset1-size);canvas.lineTo(cx+this.x+endX,cy+this.y+endY-offset1-size);canvas.lineTo(cx+this.x+endX,cy+this.y+endY-offset1);canvas.stroke();canvas.fillText(s,cx+this.x+middleX,cy+this.y+middleY-offset1-size-res.effectFont.size)}}else for(i=0,j=h.beats.length;i<j;i++)if(beat=h.beats[i],beamingHelper=this._helpers.beamHelperLookup[h.voiceIndex][beat.index],beamingHelper!==null){var direction=beamingHelper.getDirection(),tupletX=beamingHelper.getBeatLineX(beat)+this.getScale(),tupletY=cy+this.y+this.calculateBeamY(beamingHelper,tupletX),offset=direction===Bridge.get(AlphaTab.Rendering.Utils.BeamDirection).up?res.effectFont.size*1.8:-3*this.getScale();canvas.setFont(res.effectFont);canvas.fillText(h.tuplet.toString(),cx+this.x+tupletX,tupletY-offset)}canvas.setTextAlign(oldAlign)},getStemSize:function(){return this.getScoreY(5)},calculateBeamY:function(h,x){var correction=4.5,stemSize=this.getStemSize(h.maxDuration);return h.calculateBeamY(stemSize,this.getScale(),x,this.getScale(),Bridge.fn.bind(this,function(n){return this.getScoreY(this.getNoteLine(n),correction-1)}))},paintBar:function(cx,cy,canvas,h){for(var barIndex,barStartX,barEndX,barStartY,barEndY,barY,i=0,j=h.beats.length;i<j;i++){var beat=h.beats[i],beatLineX=h.getBeatLineX(beat)+this.getScale(),direction=h.getDirection(),beatContainer=this.getBeatContainer(beat.voice.index,beat.index),beatGlyph=beatContainer.onNotes,minNote=beatGlyph.noteHeads.minNote,maxNote=beatGlyph.noteHeads.maxNote,y1=cy+this.y+(direction===Bridge.get(AlphaTab.Rendering.Utils.BeamDirection).up?this.getScoreY(maxNote.line):this.getScoreY(minNote.line)),y2=cy+this.y+this.calculateBeamY(h,beatLineX);canvas.beginPath();canvas.moveTo(cx+this.x+beatLineX,y1);canvas.lineTo(cx+this.x+beatLineX,y2);canvas.stroke();var brokenBarOffset=6*this.getScale(),barSpacing=6*this.getScale(),barSize=3*this.getScale(),barCount=AlphaTab.Model.ModelUtils.getIndex(beat.duration)-2,barStart=cy+this.y;for(direction===Bridge.get(AlphaTab.Rendering.Utils.BeamDirection).down&&(barSpacing=-barSpacing,barSize=-barSize),barIndex=0;barIndex<barCount;barIndex++)if(barY=barStart+barIndex*barSpacing,i<h.beats.length-1){if(this.isFullBarJoin(beat,h.beats[i+1],barIndex))barStartX=beatLineX,barEndX=h.getBeatLineX(h.beats[i+1])+this.getScale();else if(i!==0&&this.isFullBarJoin(h.beats[i-1],beat,barIndex))continue;else barStartX=beatLineX,barEndX=barStartX+brokenBarOffset;barStartY=barY+this.calculateBeamY(h,barStartX);barEndY=barY+this.calculateBeamY(h,barEndX);Bridge.get(AlphaTab.Rendering.ScoreBarRenderer).paintSingleBar(canvas,cx+this.x+barStartX,barStartY,cx+this.x+barEndX,barEndY,barSize)}else i>0&&!this.isFullBarJoin(beat,h.beats[i-1],barIndex)&&(barStartX=beatLineX-brokenBarOffset,barEndX=beatLineX,barStartY=barY+this.calculateBeamY(h,barStartX),barEndY=barY+this.calculateBeamY(h,barEndX),Bridge.get(AlphaTab.Rendering.ScoreBarRenderer).paintSingleBar(canvas,cx+this.x+barStartX,barStartY,cx+this.x+barEndX,barEndY,barSize))}},isFullBarJoin:function(a,b,barIndex){return AlphaTab.Model.ModelUtils.getIndex(a.duration)-2-barIndex>0&&AlphaTab.Model.ModelUtils.getIndex(b.duration)-2-barIndex>0},paintFooter:function(cx,cy,canvas,h){var beat=h.beats[0],graceSizeY,graceSizeX,oldBaseLine,glyph;if(beat.duration!==Bridge.get(AlphaTab.Model.Duration).whole){var isGrace=beat.graceType!==Bridge.get(AlphaTab.Model.GraceType).none,scaleMod=isGrace?Bridge.get(AlphaTab.Rendering.Glyphs.NoteHeadGlyph).GraceScale:1,stemSize=this.getStemSize(h.maxDuration),beatLineX=h.getBeatLineX(beat)+this.getScale(),direction=h.getDirection(),beatContainer=this.getBeatContainer(beat.voice.index,beat.index),beatGlyph=beatContainer.onNotes,minNote=beatGlyph.noteHeads.minNote,maxNote=beatGlyph.noteHeads.maxNote,topY=this.getScoreY(minNote.line),bottomY=this.getScoreY(maxNote.line),beamY;direction===Bridge.get(AlphaTab.Rendering.Utils.BeamDirection).down?(bottomY+=stemSize*scaleMod,beamY=bottomY):(topY-=stemSize*scaleMod,beamY=topY);canvas.beginPath();canvas.moveTo(cx+this.x+beatLineX,cy+this.y+topY);canvas.lineTo(cx+this.x+beatLineX,cy+this.y+bottomY);canvas.stroke();isGrace&&(graceSizeY=15*this.getScale(),graceSizeX=12*this.getScale(),canvas.beginPath(),direction===Bridge.get(AlphaTab.Rendering.Utils.BeamDirection).down?(canvas.moveTo(cx+this.x+beatLineX-graceSizeX/2,cy+this.y+bottomY-graceSizeY),canvas.lineTo(cx+this.x+beatLineX+graceSizeX/2,cy+this.y+bottomY)):(canvas.moveTo(cx+this.x+beatLineX-graceSizeX/2,cy+this.y+topY+graceSizeY),canvas.lineTo(cx+this.x+beatLineX+graceSizeX/2,cy+this.y+topY)),canvas.stroke());beat.duration>Bridge.get(AlphaTab.Model.Duration).quarter&&(oldBaseLine=canvas.getTextBaseline(),canvas.setTextBaseline(Bridge.get(AlphaTab.Platform.Model.TextBaseline).top),glyph=new AlphaTab.Rendering.Glyphs.FooterGlyph(beatLineX,beamY,beat.duration,direction,isGrace),glyph.renderer=this,glyph.doLayout(),glyph.paint(cx+this.x-this.getScale()/2,cy+this.y,canvas),canvas.setTextBaseline(oldBaseLine))}},createPreBeatGlyphs:function(){if(this.bar.getMasterBar().isRepeatStart&&this.addPreBeatGlyph(new AlphaTab.Rendering.Glyphs.RepeatOpenGlyph(0,0,1.5,3)),this.getIsFirstOfLine()||this.bar.clef!==this.bar.previousBar.clef){var offset=0,correction=0;switch(this.bar.clef){case Bridge.get(AlphaTab.Model.Clef).neutral:offset=4;break;case Bridge.get(AlphaTab.Model.Clef).f4:offset=2;correction=-1;break;case Bridge.get(AlphaTab.Model.Clef).c3:offset=4;break;case Bridge.get(AlphaTab.Model.Clef).c4:offset=2;break;case Bridge.get(AlphaTab.Model.Clef).g2:offset=6}this.createStartSpacing();this.addPreBeatGlyph(new AlphaTab.Rendering.Glyphs.ClefGlyph(0,this.getScoreY(offset,correction),this.bar.clef))}(this.bar.previousBar===null&&this.bar.getMasterBar().keySignature!==0||this.bar.previousBar!==null&&this.bar.getMasterBar().keySignature!==this.bar.previousBar.getMasterBar().keySignature)&&(this.createStartSpacing(),this.createKeySignatureGlyphs());(this.bar.previousBar===null||this.bar.previousBar!==null&&this.bar.getMasterBar().timeSignatureNumerator!==this.bar.previousBar.getMasterBar().timeSignatureNumerator||this.bar.previousBar!==null&&this.bar.getMasterBar().timeSignatureDenominator!==this.bar.previousBar.getMasterBar().timeSignatureDenominator)&&(this.createStartSpacing(),this.createTimeSignatureGlyphs());this.addPreBeatGlyph(new AlphaTab.Rendering.Glyphs.BarNumberGlyph(0,this.getScoreY(-4),this.bar.index+1,!this.stave.isFirstInAccolade));this.bar.getIsEmpty()&&this.addPreBeatGlyph(new AlphaTab.Rendering.Glyphs.SpacingGlyph(0,0,30*this.getScale(),!1))},createBeatGlyphs:function(){this.createVoiceGlyphs(this.bar.voices[0])},createPostBeatGlyphs:function(){if(this.bar.getMasterBar().getIsRepeatEnd()){if(this.addPostBeatGlyph(new AlphaTab.Rendering.Glyphs.RepeatCloseGlyph(this.x,0)),this.bar.getMasterBar().repeatCount>2){var line=this.getIsLast()||this.getIsLastOfLine()?-1:-4;this.addPostBeatGlyph(new AlphaTab.Rendering.Glyphs.RepeatCountGlyph(0,this.getScoreY(line,-3),this.bar.getMasterBar().repeatCount))}}else this.bar.getMasterBar().isDoubleBar?(this.addPostBeatGlyph(new AlphaTab.Rendering.Glyphs.BarSeperatorGlyph(0,0)),this.addPostBeatGlyph(new AlphaTab.Rendering.Glyphs.SpacingGlyph(0,0,3*this.getScale(),!1)),this.addPostBeatGlyph(new AlphaTab.Rendering.Glyphs.BarSeperatorGlyph(0,0))):this.bar.nextBar!==null&&this.bar.nextBar.getMasterBar().isRepeatStart||this.addPostBeatGlyph(new AlphaTab.Rendering.Glyphs.BarSeperatorGlyph(0,0,this.getIsLast()))},createStartSpacing:function(){this._startSpacing||(this.addPreBeatGlyph(new AlphaTab.Rendering.Glyphs.SpacingGlyph(0,0,2*this.getScale())),this._startSpacing=!0)},createKeySignatureGlyphs:function(){var offsetClef=0,currentKey=this.bar.getMasterBar().keySignature,previousKey=this.bar.previousBar===null?0:this.bar.previousBar.getMasterBar().keySignature,naturalizeSymbols,previousKeyPositions,i,i1,i2;switch(this.bar.clef){case Bridge.get(AlphaTab.Model.Clef).neutral:offsetClef=0;break;case Bridge.get(AlphaTab.Model.Clef).g2:offsetClef=0;break;case Bridge.get(AlphaTab.Model.Clef).f4:offsetClef=2;break;case Bridge.get(AlphaTab.Model.Clef).c3:offsetClef=-1;break;case Bridge.get(AlphaTab.Model.Clef).c4:offsetClef=1}for(naturalizeSymbols=Math.abs(previousKey),previousKeyPositions=Bridge.get(AlphaTab.Model.ModelUtils).keySignatureIsSharp(previousKey)?Bridge.get(AlphaTab.Rendering.ScoreBarRenderer).sharpKsSteps:Bridge.get(AlphaTab.Rendering.ScoreBarRenderer).flatKsSteps,i=0;i<naturalizeSymbols;i++)this.addPreBeatGlyph(new AlphaTab.Rendering.Glyphs.NaturalizeGlyph(0,this.getScoreY(previousKeyPositions[i]+offsetClef)));if(Bridge.get(AlphaTab.Model.ModelUtils).keySignatureIsSharp(currentKey))for(i1=0;i1<Math.abs(currentKey);i1++)this.addPreBeatGlyph(new AlphaTab.Rendering.Glyphs.SharpGlyph(0,this.getScoreY(Bridge.get(AlphaTab.Rendering.ScoreBarRenderer).sharpKsSteps[i1]+offsetClef)));else for(i2=0;i2<Math.abs(currentKey);i2++)this.addPreBeatGlyph(new AlphaTab.Rendering.Glyphs.FlatGlyph(0,this.getScoreY(Bridge.get(AlphaTab.Rendering.ScoreBarRenderer).flatKsSteps[i2]+offsetClef)))},createTimeSignatureGlyphs:function(){this.addPreBeatGlyph(new AlphaTab.Rendering.Glyphs.SpacingGlyph(0,0,5*this.getScale()));this.addPreBeatGlyph(new AlphaTab.Rendering.Glyphs.TimeSignatureGlyph(0,this.getScoreY(0),this.bar.getMasterBar().timeSignatureNumerator,this.bar.getMasterBar().timeSignatureDenominator))},createVoiceGlyphs:function(v){for(var b,container,i=0,j=v.beats.length;i<j;i++)b=v.beats[i],container=new AlphaTab.Rendering.ScoreBeatContainerGlyph(b),container.preNotes=new AlphaTab.Rendering.Glyphs.ScoreBeatPreNotesGlyph,container.onNotes=new AlphaTab.Rendering.Glyphs.ScoreBeatGlyph,container.onNotes.beamingHelper=this._helpers.beamHelperLookup[v.index][b.index],container.postNotes=new AlphaTab.Rendering.Glyphs.ScoreBeatPostNotesGlyph,this.addBeatGlyph(container)},getNoteLine:function(n){return this.accidentalHelper.getNoteLine(n)},getScoreY:function(steps,correction){return correction===void 0&&(correction=0),this.getLineOffset()/2*(steps+2)+correction*this.getScale()},paintBackground:function(cx,cy,canvas){var res,lineY,i;for(AlphaTab.Rendering.GroupedBarRenderer.prototype.paintBackground.call(this,cx,cy,canvas),res=this.getResources(),canvas.setColor(res.staveLineColor),lineY=cy+this.y+this.getGlyphOverflow(),i=0;i<5;i++)i>0&&(lineY+=this.getLineOffset()),canvas.beginPath(),canvas.moveTo(cx+this.x,lineY),canvas.lineTo(cx+this.x+this.width,lineY),canvas.stroke();canvas.setColor(res.mainGlyphColor)}});Bridge.define("AlphaTab.Rendering.RhythmBarRenderer",{inherits:[AlphaTab.Rendering.GroupedBarRenderer],statics:{paintSingleBar:function(canvas,x1,y1,x2,y2,size){canvas.beginPath();canvas.moveTo(x1,y1);canvas.lineTo(x2,y2);canvas.lineTo(x2,y2-size);canvas.lineTo(x1,y1-size);canvas.closePath();canvas.fill()}},_direction:0,_helpers:null,constructor:function(bar,direction){AlphaTab.Rendering.GroupedBarRenderer.prototype.$constructor.call(this,bar);this._direction=direction},doLayout:function(){this._helpers=this.stave.staveGroup.helpers.helpers[this.bar.track.index][this.bar.index];AlphaTab.Rendering.GroupedBarRenderer.prototype.doLayout.call(this);this.height=this.stave.getSetting(Bridge.Int)("rhythm-height",24)*this.getScale();this.isEmpty=!1},createBeatGlyphs:function(){this.createVoiceGlyphs(this.bar.voices[0])},createVoiceGlyphs:function(voice){for(var b,container,i=0,j=voice.beats.length;i<j;i++)b=voice.beats[i],container=new AlphaTab.Rendering.Glyphs.BeatContainerGlyph(b),container.preNotes=new AlphaTab.Rendering.Glyphs.BeatGlyphBase,container.onNotes=new AlphaTab.Rendering.Glyphs.BeatGlyphBase,container.postNotes=new AlphaTab.Rendering.Glyphs.BeatGlyphBase,this.addBeatGlyph(container)},paint:function(cx,cy,canvas){var i,j,v,k,l;for(AlphaTab.Rendering.GroupedBarRenderer.prototype.paint.call(this,cx,cy,canvas),i=0,j=this._helpers.beamHelpers.length;i<j;i++)for(v=this._helpers.beamHelpers[i],k=0,l=v.length;k<l;k++)this.paintBeamHelper(cx+this.getBeatGlyphsStart(),cy,canvas,v[k])},paintBeamHelper:function(cx,cy,canvas,h){if(h.beats[0].graceType===Bridge.get(AlphaTab.Model.GraceType).none){var useBeams=this.stave.getSetting(Boolean)("use-beams",!1);useBeams&&h.beats.length===1?this.paintFooter(cx,cy,canvas,h):this.paintBar(cx,cy,canvas,h)}},paintBar:function(cx,cy,canvas,h){for(var beat,barIndex,barStartX,barEndX,barStartY,barEndY,barY,i=0,j=h.beats.length;i<j;i++)if(beat=h.beats[i],h.hasBeatLineX(beat)){var beatLineX=h.getBeatLineX(beat)+this.getScale(),y1=cy+this.y,y2=cy+this.y+this.height;canvas.beginPath();canvas.moveTo(cx+this.x+beatLineX,y1);canvas.lineTo(cx+this.x+beatLineX,y2);canvas.stroke();var brokenBarOffset=6*this.getScale(),barSpacing=6*this.getScale(),barSize=3*this.getScale(),barCount=AlphaTab.Model.ModelUtils.getIndex(beat.duration)-2,barStart=cy+this.y;for(this._direction===Bridge.get(AlphaTab.Rendering.Utils.BeamDirection).down&&(barSpacing=-barSpacing,barStart+=this.height),barIndex=0;barIndex<barCount;barIndex++)if(barY=barStart+barIndex*barSpacing,h.beats.length===1)barStartX=beatLineX,barEndX=beatLineX+brokenBarOffset,barStartY=barY,barEndY=barY,Bridge.get(AlphaTab.Rendering.RhythmBarRenderer).paintSingleBar(canvas,cx+this.x+barStartX,barStartY,cx+this.x+barEndX,barEndY,barSize);else if(i<h.beats.length-1){if(this.isFullBarJoin(beat,h.beats[i+1],barIndex))barStartX=beatLineX,barEndX=h.getBeatLineX(h.beats[i+1])+this.getScale();else if(i!==0&&this.isFullBarJoin(h.beats[i-1],beat,barIndex))continue;else barStartX=beatLineX,barEndX=barStartX+brokenBarOffset;barStartY=barY;barEndY=barY;Bridge.get(AlphaTab.Rendering.RhythmBarRenderer).paintSingleBar(canvas,cx+this.x+barStartX,barStartY,cx+this.x+barEndX,barEndY,barSize)}else i>0&&!this.isFullBarJoin(beat,h.beats[i-1],barIndex)&&(barStartX=beatLineX-brokenBarOffset,barEndX=beatLineX,barStartY=barY,barEndY=barY,Bridge.get(AlphaTab.Rendering.RhythmBarRenderer).paintSingleBar(canvas,cx+this.x+barStartX,barStartY,cx+this.x+barEndX,barEndY,barSize))}},paintFooter:function(cx,cy,canvas,h){var beat=h.beats[0],glyph;if(beat.duration!==Bridge.get(AlphaTab.Model.Duration).whole){var beatLineX=h.getBeatLineX(beat)+this.getScale(),topY=0,bottomY=this.height,beamY=this._direction===Bridge.get(AlphaTab.Rendering.Utils.BeamDirection).down?bottomY:topY;canvas.beginPath();canvas.moveTo(cx+this.x+beatLineX,cy+this.y+topY);canvas.lineTo(cx+this.x+beatLineX,cy+this.y+bottomY);canvas.stroke();glyph=new AlphaTab.Rendering.Glyphs.FooterGlyph(beatLineX,beamY,beat.duration,this._direction,!1);glyph.renderer=this;glyph.doLayout();glyph.paint(cx+this.x,cy+this.y,canvas)}},isFullBarJoin:function(a,b,barIndex){return AlphaTab.Model.ModelUtils.getIndex(a.duration)-2-barIndex>0&&AlphaTab.Model.ModelUtils.getIndex(b.duration)-2-barIndex>0}});Bridge.define("AlphaTab.Rendering.TabBarRenderer",{inherits:[AlphaTab.Rendering.GroupedBarRenderer],statics:{LineSpacing:10},_helpers:null,constructor:function(bar){AlphaTab.Rendering.GroupedBarRenderer.prototype.$constructor.call(this,bar)},getLineOffset:function(){return 11*this.getScale()},getTopPadding:function(){return this.getNumberOverflow()},getBottomPadding:function(){return this.getNumberOverflow()},getNumberOverflow:function(){var res=this.getResources();return res.tablatureFont.size/2+res.tablatureFont.size*.2},getNoteX:function(note,onEnd){onEnd===void 0&&(onEnd=!0);var beat=this.getOnNotesPosition(note.beat.voice.index,note.beat.index);return beat!==null?beat.container.x+beat.x+beat.noteNumbers.getNoteX(note,onEnd):this.getPostBeatGlyphsStart()},getBeatX:function(beat){var bg=this.getPreNotesPosition(beat.voice.index,beat.index);return bg!==null?bg.container.x+bg.x:0},getNoteY:function(note){var beat=this.getOnNotesPosition(note.beat.voice.index,note.beat.index);return beat!==null?beat.noteNumbers.getNoteY(note):0},doLayout:function(){this._helpers=this.stave.staveGroup.helpers.helpers[this.bar.track.index][this.bar.index];AlphaTab.Rendering.GroupedBarRenderer.prototype.doLayout.call(this);this.height=this.getLineOffset()*(this.bar.track.tuning.length-1)+this.getNumberOverflow()*2;this.index===0&&(this.stave.registerStaveTop(this.getNumberOverflow()),this.stave.registerStaveBottom(this.height-this.getNumberOverflow()))},createPreBeatGlyphs:function(){this.bar.getMasterBar().isRepeatStart&&this.addPreBeatGlyph(new AlphaTab.Rendering.Glyphs.RepeatOpenGlyph(0,0,1.5,3));this.getIsFirstOfLine()&&this.addPreBeatGlyph(new AlphaTab.Rendering.Glyphs.TabClefGlyph(0,0));this.addPreBeatGlyph(new AlphaTab.Rendering.Glyphs.BarNumberGlyph(0,this.getTabY(-3),this.bar.index+1,!this.stave.isFirstInAccolade));this.bar.getIsEmpty()&&this.addPreBeatGlyph(new AlphaTab.Rendering.Glyphs.SpacingGlyph(0,0,30*this.getScale(),!1))},createBeatGlyphs:function(){this.createVoiceGlyphs(this.bar.voices[0])},createVoiceGlyphs:function(v){for(var b,container,i=0,j=v.beats.length;i<j;i++)b=v.beats[i],container=new AlphaTab.Rendering.Glyphs.TabBeatContainerGlyph(b),container.preNotes=new AlphaTab.Rendering.Glyphs.TabBeatPreNotesGlyph,container.onNotes=new AlphaTab.Rendering.Glyphs.TabBeatGlyph,container.onNotes.beamingHelper=this._helpers.beamHelperLookup[v.index][b.index],container.postNotes=new AlphaTab.Rendering.Glyphs.TabBeatPostNotesGlyph,this.addBeatGlyph(container)},createPostBeatGlyphs:function(){if(this.bar.getMasterBar().getIsRepeatEnd()){if(this.addPostBeatGlyph(new AlphaTab.Rendering.Glyphs.RepeatCloseGlyph(this.x,0)),this.bar.getMasterBar().repeatCount>2){var line=this.getIsLast()||this.getIsLastOfLine()?-1:-4;this.addPostBeatGlyph(new AlphaTab.Rendering.Glyphs.RepeatCountGlyph(0,this.getTabY(line,-3),this.bar.getMasterBar().repeatCount))}}else this.bar.getMasterBar().isDoubleBar?(this.addPostBeatGlyph(new AlphaTab.Rendering.Glyphs.BarSeperatorGlyph(0,0)),this.addPostBeatGlyph(new AlphaTab.Rendering.Glyphs.SpacingGlyph(0,0,3*this.getScale(),!1)),this.addPostBeatGlyph(new AlphaTab.Rendering.Glyphs.BarSeperatorGlyph(0,0))):this.bar.nextBar!==null&&this.bar.nextBar.getMasterBar().isRepeatStart||this.addPostBeatGlyph(new AlphaTab.Rendering.Glyphs.BarSeperatorGlyph(0,0,this.getIsLast()))},getTabY:function(line,correction){return correction===void 0&&(correction=0),this.getLineOffset()*line+correction*this.getScale()},paintBackground:function(cx,cy,canvas){var res,lineY,i,j;for(AlphaTab.Rendering.GroupedBarRenderer.prototype.paintBackground.call(this,cx,cy,canvas),res=this.getResources(),canvas.setColor(res.staveLineColor),lineY=cy+this.y+this.getNumberOverflow(),i=0,j=this.bar.track.tuning.length;i<j;i++)i>0&&(lineY+=this.getLineOffset()),canvas.beginPath(),canvas.moveTo(cx+this.x,lineY),canvas.lineTo(cx+this.x+this.width,lineY),canvas.stroke();canvas.setColor(res.mainGlyphColor)}});Bridge.define("AlphaTab.Rendering.BarRendererFactory",{config:{properties:{isInAccolade:!1,hideOnMultiTrack:!1}},constructor:function(){this.isInAccolade=!0;this.hideOnMultiTrack=!1},canCreate:function(){return!0}});Bridge.define("AlphaTab.Rendering.TabBarRendererFactory",{inherits:[AlphaTab.Rendering.BarRendererFactory],canCreate:function(track){return track.tuning.length>0},create:function(bar){return new AlphaTab.Rendering.TabBarRenderer(bar)}});Bridge.define("AlphaTab.Rendering.ScoreBarRendererFactory",{inherits:[AlphaTab.Rendering.BarRendererFactory],create:function(bar){return new AlphaTab.Rendering.ScoreBarRenderer(bar)}});Bridge.define("AlphaTab.Rendering.RhythmBarRendererFactory",{inherits:[AlphaTab.Rendering.BarRendererFactory],_direction:0,constructor:function(direction){AlphaTab.Rendering.BarRendererFactory.prototype.$constructor.call(this);this._direction=direction;this.isInAccolade=!1;this.hideOnMultiTrack=!1},create:function(bar){return new AlphaTab.Rendering.RhythmBarRenderer(bar,this._direction)}});Bridge.define("AlphaTab.Rendering.EffectBarRendererFactory",{inherits:[AlphaTab.Rendering.BarRendererFactory],_info:null,constructor:function(info){AlphaTab.Rendering.BarRendererFactory.prototype.$constructor.call(this);this._info=info;this.isInAccolade=!1;this.hideOnMultiTrack=info.getHideOnMultiTrack()},create:function(bar){return new AlphaTab.Rendering.EffectBarRenderer(bar,this._info)}});Bridge.define("AlphaTab.Rendering.AlternateEndingsBarRendererFactory",{inherits:[AlphaTab.Rendering.BarRendererFactory],constructor:function(){AlphaTab.Rendering.BarRendererFactory.prototype.$constructor.call(this);this.isInAccolade=!1},create:function(bar){return new AlphaTab.Rendering.AlternateEndingsBarRenderer(bar)}});Bridge.define("AlphaTab.Rendering.EffectBarGlyphSizing",{statics:{singlePreBeatOnly:0,singlePreBeatToOnBeat:1,singlePreBeatToPostBeat:2,singleOnBeatOnly:3,singleOnBeatToPostBeat:4,singlePostBeatOnly:5,groupedPreBeatOnly:6,groupedPreBeatToOnBeat:7,groupedPreBeatToPostBeat:8,groupedOnBeatOnly:9,groupedOnBeatToPostBeat:10,groupedPostBeatOnly:11},$enum:!0});Bridge.define("AlphaTab.Rendering.Glyphs.MusicFontSymbol",{statics:{none:-1,clefG:57424,clefC:57436,clefF:57442,clefNeutral:57449,restWhole:58595,restHalf:58596,restQuarter:58597,restEighth:58598,restSixteenth:58599,restThirtySecond:58600,restSixtyFourth:58601,graceUp:57815,graceDown:57816,trill:58726,num0:57472,num1:57473,num2:57474,num3:57475,num4:57476,num5:57477,num6:57478,num7:57479,num8:57480,num9:57481,noteWhole:57506,noteHalf:57507,noteQuarter:57508,noteDead:57514,noteHarmonic:57564,noteRideCymbal:57566,noteHiHat:57523,noteSideStick:57513,noteHiHatHalf:57591,noteChineseCymbal:57593,footerUpEighth:57920,footerDownEighth:57921,footerUpSixteenth:57922,footerDownSixteenth:57923,footerUpThirtySecond:57924,footerDownThirtySecond:57925,footerUpSixtyFourth:57926,footerDownSixtyFourth:57927,dynamicPPP:58666,dynamicPP:58667,dynamicP:58656,dynamicMP:58668,dynamicMF:58669,dynamicF:58658,dynamicFF:58671,dynamicFFF:58672,accentuation:58528,heavyAccentuation:58540,waveHorizontal:60068,pickStrokeDown:58896,pickStrokeUp:58898,tremoloPickingThirtySecond:57890,tremoloPickingSixteenth:57889,tremoloPickingEighth:57888,tempo:57813,accidentalFlat:57952,accidentalNatural:57953,accidentalSharp:57954},$enum:!0});Bridge.define("AlphaTab.Rendering.Utils.BeamDirection",{statics:{up:0,down:1},$enum:!0});Bridge.define("AlphaTab.Rendering.Glyphs.Glyph",{config:{properties:{index:0,x:0,y:0,width:0,renderer:null}},constructor:function(x,y){this.x=x;this.y=y},getCanScale:function(){return!0},getScale:function(){return this.renderer.getScale()},applyGlyphSpacing:function(spacing){this.getCanScale()&&(this.width+=spacing)},doLayout:function(){},paint:function(){}});Bridge.define("AlphaTab.Rendering.Glyphs.TieGlyph",{inherits:[AlphaTab.Rendering.Glyphs.Glyph],statics:{paintTie:function(canvas,scale,x1,y1,x2,y2,down){var t;down===void 0&&(down=!1);x2>x1&&(t=x1,x1=x2,x2=t,t=y1,y1=y2,y2=t);var offset=12*scale,size=4*scale,normalVectorX=y2-y1,normalVectorY=x2-x1,length=Math.sqrt(normalVectorX*normalVectorX+normalVectorY*normalVectorY);down?normalVectorX*=-1:normalVectorY*=-1;normalVectorX/=length;normalVectorY/=length;var centerX=(x2+x1)/2,centerY=(y2+y1)/2,cp1X=centerX+offset*normalVectorX,cp1Y=centerY+offset*normalVectorY,cp2X=centerX+(offset-size)*normalVectorX,cp2Y=centerY+(offset-size)*normalVectorY;canvas.beginPath();canvas.moveTo(x1,y1);canvas.quadraticCurveTo(cp1X,cp1Y,x2,y2);canvas.quadraticCurveTo(cp2X,cp2Y,x1,y1);canvas.closePath()}},startNote:null,endNote:null,parent:null,yOffset:0,_forEnd:!1,constructor:function(startNote,endNote,parent,forEnd){AlphaTab.Rendering.Glyphs.Glyph.prototype.$constructor.call(this,0,0);this.startNote=startNote;this.endNote=endNote;this.parent=parent;this._forEnd=forEnd},getCanScale:function(){return!1},doLayout:function(){this.width=0},paint:function(cx,cy,canvas){if(this.endNote!==null){var startNoteRenderer=this.renderer.getLayout().getRendererForBar(this.renderer.stave.staveId,this.startNote.beat.voice.bar.index),endNoteRenderer=this.renderer.getLayout().getRendererForBar(this.renderer.stave.staveId,this.endNote.beat.voice.bar.index),startX=0,endX=0,startY=0,endY=0,shouldDraw=!1,parent=this.parent,direction=this.getBeamDirection(this.startNote,startNoteRenderer),yOffset=direction===Bridge.get(AlphaTab.Rendering.Utils.BeamDirection).down?-this.yOffset:this.yOffset;this._forEnd?startNoteRenderer.stave!==endNoteRenderer.stave&&(startX=cx,endX=cx+endNoteRenderer.getNoteX(this.endNote),startY=cy+endNoteRenderer.getNoteY(this.endNote)+yOffset,endY=startY,shouldDraw=!0):(startNoteRenderer!==endNoteRenderer?(startX=cx+startNoteRenderer.getNoteX(this.startNote),endX=cx+parent.x+parent.postNotes.x+parent.postNotes.width,startY=cy+startNoteRenderer.getNoteY(this.startNote)+yOffset,endY=startY):(startX=cx+startNoteRenderer.getNoteX(this.startNote),endX=cx+endNoteRenderer.getNoteX(this.endNote,!1),startY=cy+startNoteRenderer.getNoteY(this.startNote)+yOffset,endY=cy+endNoteRenderer.getNoteY(this.endNote)+yOffset),shouldDraw=!0);shouldDraw&&(Bridge.get(AlphaTab.Rendering.Glyphs.TieGlyph).paintTie(canvas,this.getScale(),startX,startY,endX,endY,this.getBeamDirection(this.startNote,startNoteRenderer)===Bridge.get(AlphaTab.Rendering.Utils.BeamDirection).down),canvas.fill())}},getBeamDirection:function(){return Bridge.get(AlphaTab.Rendering.Utils.BeamDirection).down}});Bridge.define("AlphaTab.Rendering.Glyphs.WhammyBarGlyph",{inherits:[AlphaTab.Rendering.Glyphs.Glyph],statics:{WhammyMaxOffset:60},_beat:null,_parent:null,constructor:function(beat,parent){AlphaTab.Rendering.Glyphs.Glyph.prototype.$constructor.call(this,0,0);this._beat=beat;this._parent=parent},doLayout:function(){var dy,i,j,pt,ptY;AlphaTab.Rendering.Glyphs.Glyph.prototype.doLayout.call(this);var minY=0,maxY=0,sizeY=Bridge.get(AlphaTab.Rendering.Glyphs.WhammyBarGlyph).WhammyMaxOffset*this.getScale();if(this._beat.whammyBarPoints.length>=2)for(dy=sizeY/Bridge.get(AlphaTab.Model.Beat).WhammyBarMaxValue,i=0,j=this._beat.whammyBarPoints.length;i<j;i++)pt=this._beat.whammyBarPoints[i],ptY=0-dy*pt.value,ptY>maxY&&(maxY=ptY),ptY<minY&&(minY=ptY);var tabBarRenderer=this.renderer,track=this.renderer.bar.track,tabTop=tabBarRenderer.getTabY(0,-2),tabBottom=tabBarRenderer.getTabY(track.tuning.length,-2),absMinY=this.y+minY+tabTop,absMaxY=this.y+maxY-tabBottom;absMinY<0&&tabBarRenderer.registerOverflowTop(Math.abs(absMinY));absMaxY>0&&tabBarRenderer.registerOverflowBottom(Math.abs(absMaxY))},paint:function(cx,cy,canvas){var tabBarRenderer=this.renderer,res=this.renderer.getResources(),startX=cx+this.x+this._parent.onNotes.width/2,endX=this._beat.nextBeat===null||this._beat.voice!==this._beat.nextBeat.voice?cx+this.x+this._parent.onNotes.width/2+this._parent.postNotes.width:cx+tabBarRenderer.getBeatX(this._beat.nextBeat),startY=cy+this.x,textOffset=3*this.getScale(),sizeY=Bridge.get(AlphaTab.Rendering.Glyphs.WhammyBarGlyph).WhammyMaxOffset*this.getScale(),old=canvas.getTextAlign(),dx,dy,i,j,pt1,pt2,sy,sx;if(canvas.setTextAlign(Bridge.get(AlphaTab.Platform.Model.TextAlign).center),this._beat.whammyBarPoints.length>=2){for(dx=(endX-startX)/Bridge.get(AlphaTab.Model.Beat).WhammyBarMaxPosition,dy=sizeY/Bridge.get(AlphaTab.Model.Beat).WhammyBarMaxValue,canvas.beginPath(),i=0,j=this._beat.whammyBarPoints.length-1;i<j;i++)if(pt1=this._beat.whammyBarPoints[i],pt2=this._beat.whammyBarPoints[i+1],pt1.value!==pt2.value||i!==this._beat.whammyBarPoints.length-2){var pt1X=startX+dx*pt1.offset,pt1Y=startY-dy*pt1.value,pt2X=startX+dx*pt2.offset,pt2Y=startY-dy*pt2.value;if(canvas.moveTo(pt1X,pt1Y),canvas.lineTo(pt2X,pt2Y),pt2.value!==0){var dv=pt2.value/4,up=pt2.value-pt1.value>=0,s="";dv<0&&(s+="-");(dv>=1||dv<=-1)&&(s+=Math.abs(dv)+" ");dv-=dv;dv===.25?s+="1/4":dv===.5?s+="1/2":dv===.75&&(s+="3/4");canvas.setFont(res.graceFont);sy=up?pt2Y-res.graceFont.size-textOffset:pt2Y+textOffset;sx=pt2X;canvas.fillText(s,sx,sy)}}canvas.stroke()}canvas.setTextAlign(old)}});Bridge.define("AlphaTab.Rendering.Glyphs.TabSlideLineGlyph",{inherits:[AlphaTab.Rendering.Glyphs.Glyph],_startNote:null,_type:0,_parent:null,constructor:function(type,startNote,parent){AlphaTab.Rendering.Glyphs.Glyph.prototype.$constructor.call(this,0,0);this._type=type;this._startNote=startNote;this._parent=parent},getCanScale:function(){return!1},doLayout:function(){this.width=0},paint:function(cx,cy,canvas){var r=this.renderer,sizeX=12*this.getScale(),sizeY=3*this.getScale(),startX,startY,endX,endY,startOffsetY,endOffsetY;switch(this._type){case Bridge.get(AlphaTab.Model.SlideType).shift:case Bridge.get(AlphaTab.Model.SlideType).legato:this._startNote.slideTarget===null?(startOffsetY=0,endOffsetY=0):this._startNote.slideTarget.fret>this._startNote.fret?(startOffsetY=sizeY,endOffsetY=sizeY*-1):(startOffsetY=sizeY*-1,endOffsetY=sizeY);startX=cx+r.getNoteX(this._startNote);startY=cy+r.getNoteY(this._startNote)+startOffsetY;this._startNote.slideTarget!==null?(endX=cx+r.getNoteX(this._startNote.slideTarget,!1),endY=cy+r.getNoteY(this._startNote.slideTarget)+endOffsetY):(endX=cx+this._parent.x+this._parent.postNotes.x+this._parent.postNotes.width,endY=startY);break;case Bridge.get(AlphaTab.Model.SlideType).intoFromBelow:endX=cx+r.getNoteX(this._startNote,!1);endY=cy+r.getNoteY(this._startNote);startX=endX-sizeX;startY=cy+r.getNoteY(this._startNote)+sizeY;break;case Bridge.get(AlphaTab.Model.SlideType).intoFromAbove:endX=cx+r.getNoteX(this._startNote,!1);endY=cy+r.getNoteY(this._startNote);startX=endX-sizeX;startY=cy+r.getNoteY(this._startNote)-sizeY;break;case Bridge.get(AlphaTab.Model.SlideType).outUp:startX=cx+r.getNoteX(this._startNote);startY=cy+r.getNoteY(this._startNote);endX=startX+sizeX;endY=cy+r.getNoteY(this._startNote)-sizeY;break;case Bridge.get(AlphaTab.Model.SlideType).outDown:startX=cx+r.getNoteX(this._startNote);startY=cy+r.getNoteY(this._startNote);endX=startX+sizeX;endY=cy+r.getNoteY(this._startNote)+sizeY;break;default:return}canvas.beginPath();canvas.moveTo(startX,startY);canvas.lineTo(endX,endY);canvas.stroke()}});Bridge.define("AlphaTab.Rendering.Glyphs.TabNoteChordGlyph",{inherits:[AlphaTab.Rendering.Glyphs.Glyph],_notes:null,_noteLookup:null,_minNote:null,_isGrace:!1,_centerX:0,config:{properties:{beat:null,beamingHelper:null,beatEffects:null}},constructor:function(x,y,isGrace){AlphaTab.Rendering.Glyphs.Glyph.prototype.$constructor.call(this,x,y);this._isGrace=isGrace;this._notes=[];this.beatEffects={};this._noteLookup={}},getNoteX:function(note,onEnd){if(onEnd===void 0&&(onEnd=!0),this._noteLookup.hasOwnProperty(note.string)){var n=this._noteLookup[note.string],pos=this.x+n.x;return onEnd&&(n.calculateWidth(),pos+=n.width),pos}return 0},getNoteY:function(note){return this._noteLookup.hasOwnProperty(note.string)?this.y+this._noteLookup[note.string].y:0},doLayout:function(){for(var g,t,w=0,i=0,j=this._notes.length;i<j;i++)g=this._notes[i],g.renderer=this.renderer,g.doLayout(),g.width>w&&(w=g.width);var tabHeight=this.renderer.getResources().tablatureFont.size,effectY=this.getNoteY(this._minNote)+tabHeight/2,effectSpacing=7*this.getScale(),$c=Bridge.fn.bind(this,function(g1){g1.y+=effectY;g1.x+=this.width/2;g1.renderer=this.renderer;effectY+=effectSpacing;g1.doLayout()}),$e=this.beatEffects;for(t in $e)$c($e[t]);this._centerX=0;this.width=w},addNoteGlyph:function(noteGlyph,note){this._notes.push(noteGlyph);this._noteLookup[note.string]=noteGlyph;(this._minNote===null||note.string<this._minNote.string)&&(this._minNote=note)},paint:function(cx,cy,canvas){var res=this.renderer.getResources(),old=canvas.getTextBaseline(),i,j,g,$c,$e,t;for(canvas.setTextBaseline(Bridge.get(AlphaTab.Platform.Model.TextBaseline).middle),canvas.setFont(this._isGrace?res.graceFont:res.tablatureFont),i=0,j=this._notes.length;i<j;i++)g=this._notes[i],g.renderer=this.renderer,g.paint(cx+this.x,cy+this.y,canvas);canvas.setTextBaseline(old);$c=Bridge.fn.bind(this,function(g1){g1.paint(cx+this.x,cy+this.y,canvas)});$e=this.beatEffects;for(t in $e)$c($e[t])},updateBeamingHelper:function(cx){this.beamingHelper.hasBeatLineX(this.beat)||this.beamingHelper.registerBeatLineX(this.beat,cx+this.x+this._centerX,cx+this.x+this._centerX)}});Bridge.define("AlphaTab.Rendering.Glyphs.TabClefGlyph",{inherits:[AlphaTab.Rendering.Glyphs.Glyph],constructor:function(x,y){AlphaTab.Rendering.Glyphs.Glyph.prototype.$constructor.call(this,x,y)},getCanScale:function(){return!1},doLayout:function(){this.width=28*this.getScale()},paint:function(cx,cy,canvas){var track=this.renderer.bar.track,res=this.renderer.getResources(),startY=cy+this.y+Bridge.get(AlphaTab.Rendering.TabBarRenderer).LineSpacing*this.getScale()*.6,fontScale=1,correction=0,font,old;switch(track.tuning.length){case 4:fontScale=.6;break;case 5:fontScale=.8;break;case 6:fontScale=1.1;correction=1;break;case 7:fontScale=1.15;break;case 8:fontScale=1.35}font=res.tabClefFont.clone();font.size=font.size*fontScale;canvas.setFont(font);old=canvas.getTextAlign();canvas.setTextAlign(Bridge.get(AlphaTab.Platform.Model.TextAlign).center);canvas.fillText("T",cx+this.x+this.width/2,startY);canvas.fillText("A",cx+this.x+this.width/2,startY+font.size-correction*this.getScale());canvas.fillText("B",cx+this.x+this.width/2,startY+(font.size-correction*this.getScale())*2);canvas.setTextAlign(old)}});Bridge.define("AlphaTab.Rendering.Glyphs.TabBrushGlyph",{inherits:[AlphaTab.Rendering.Glyphs.Glyph],_beat:null,constructor:function(beat){AlphaTab.Rendering.Glyphs.Glyph.prototype.$constructor.call(this,0,0);this._beat=beat},doLayout:function(){this.width=10*this.getScale()},paint:function(){}});Bridge.define("AlphaTab.Rendering.Glyphs.SpacingGlyph",{inherits:[AlphaTab.Rendering.Glyphs.Glyph],_scaling:!1,constructor:function(x,y,width,scaling){AlphaTab.Rendering.Glyphs.Glyph.prototype.$constructor.call(this,x,y);scaling===void 0&&(scaling=!0);this._scaling=scaling;this.width=width;this._scaling=scaling},getCanScale:function(){return this._scaling}});Bridge.define("AlphaTab.Rendering.Glyphs.ScoreSlideLineGlyph",{inherits:[AlphaTab.Rendering.Glyphs.Glyph],_startNote:null,_type:0,_parent:null,constructor:function(type,startNote,parent){AlphaTab.Rendering.Glyphs.Glyph.prototype.$constructor.call(this,0,0);this._type=type;this._startNote=startNote;this._parent=parent},getCanScale:function(){return!1},doLayout:function(){this.width=0},paint:function(cx,cy,canvas){var r=this.renderer,sizeX=12*this.getScale(),offsetX=1*this.getScale(),startX,startY,endX,endY;switch(this._type){case Bridge.get(AlphaTab.Model.SlideType).shift:case Bridge.get(AlphaTab.Model.SlideType).legato:startX=cx+r.getNoteX(this._startNote)+offsetX;startY=cy+r.getNoteY(this._startNote)+Bridge.get(AlphaTab.Rendering.Glyphs.NoteHeadGlyph).NoteHeadHeight;this._startNote.slideTarget!==null?(endX=cx+r.getNoteX(this._startNote.slideTarget,!1)-offsetX,endY=cy+r.getNoteY(this._startNote.slideTarget)+Bridge.get(AlphaTab.Rendering.Glyphs.NoteHeadGlyph).NoteHeadHeight):(endX=cx+this._parent.x+this._parent.postNotes.x+this._parent.postNotes.width,endY=startY);break;case Bridge.get(AlphaTab.Model.SlideType).intoFromBelow:endX=cx+r.getNoteX(this._startNote,!1)-offsetX;endY=cy+r.getNoteY(this._startNote)+Bridge.get(AlphaTab.Rendering.Glyphs.NoteHeadGlyph).NoteHeadHeight;startX=endX-sizeX;startY=cy+r.getNoteY(this._startNote)+Bridge.get(AlphaTab.Rendering.Glyphs.NoteHeadGlyph).NoteHeadHeight;break;case Bridge.get(AlphaTab.Model.SlideType).intoFromAbove:endX=cx+r.getNoteX(this._startNote,!1)-offsetX;endY=cy+r.getNoteY(this._startNote)+Bridge.get(AlphaTab.Rendering.Glyphs.NoteHeadGlyph).NoteHeadHeight;startX=endX-sizeX;startY=cy+r.getNoteY(this._startNote);break;case Bridge.get(AlphaTab.Model.SlideType).outUp:startX=cx+r.getNoteX(this._startNote)+offsetX;startY=cy+r.getNoteY(this._startNote)+Bridge.get(AlphaTab.Rendering.Glyphs.NoteHeadGlyph).NoteHeadHeight;endX=startX+sizeX;endY=cy+r.getNoteY(this._startNote);break;case Bridge.get(AlphaTab.Model.SlideType).outDown:startX=cx+r.getNoteX(this._startNote)+offsetX;startY=cy+r.getNoteY(this._startNote)+Bridge.get(AlphaTab.Rendering.Glyphs.NoteHeadGlyph).NoteHeadHeight;endX=startX+sizeX;endY=cy+r.getNoteY(this._startNote)+Bridge.get(AlphaTab.Rendering.Glyphs.NoteHeadGlyph).NoteHeadHeight;break;default:return}canvas.beginPath();canvas.moveTo(startX,startY);canvas.lineTo(endX,endY);canvas.stroke()}});Bridge.define("AlphaTab.Rendering.Glyphs.ScoreNoteChordGlyph",{inherits:[AlphaTab.Rendering.Glyphs.Glyph],_infos:null,_noteLookup:null,_tremoloPicking:null,config:{properties:{minNote:null,maxNote:null,spacingChanged:null,upLineX:0,downLineX:0,beatEffects:null,beat:null,beamingHelper:null}},constructor:function(){AlphaTab.Rendering.Glyphs.Glyph.prototype.$constructor.call(this,0,0);this._infos=[];this.beatEffects={};this._noteLookup={}},getDirection:function(){return this.beamingHelper.getDirection()},getCanScale:function(){return!1},getHasTopOverflow:function(){return this.minNote!==null&&this.minNote.line<0},getHasBottomOverflow:function(){return this.maxNote!==null&&this.maxNote.line>8},getNoteX:function(note,onEnd){if(onEnd===void 0&&(onEnd=!0),this._noteLookup.hasOwnProperty(note.string)){var n=this._noteLookup[note.string],pos=this.x+n.x;return onEnd&&(pos+=n.width),pos}return 0},getNoteY:function(note){return this._noteLookup.hasOwnProperty(note.string)?this.y+this._noteLookup[note.string].y:0},addNoteGlyph:function(noteGlyph,note,noteLine){var info=new AlphaTab.Rendering.Glyphs.ScoreNoteGlyphInfo(noteGlyph,noteLine);this._infos.push(info);this._noteLookup[note.string]=noteGlyph;(this.minNote===null||this.minNote.line>info.line)&&(this.minNote=info);(this.maxNote===null||this.maxNote.line<info.line)&&(this.maxNote=info)},updateBeamingHelper:function(cx){this.beamingHelper.registerBeatLineX(this.beat,cx+this.x+this.upLineX,cx+this.x+this.downLineX)},doLayout:function(){var i,j,g,i1,i2,$c,$e,t,offset,baseNote,tremoloX,speed;this._infos.sort(function(a,b){return Bridge.compare(a.line,b.line)});var previousDisplaced=!1,previousLine=0,direction=this.beamingHelper.getDirection(),normalNotes=[],normalNoteColumnWidth=0,displacedNotes=[],displacedNoteColumnWidth=0;for(i=0,j=this._infos.length;i<j;i++)g=this._infos[i].glyph,g.renderer=this.renderer,g.doLayout(),i>0?Math.abs(previousLine-this._infos[i].line)<=1?previousDisplaced?(normalNotes.push(this._infos[i]),normalNoteColumnWidth=Math.max(normalNoteColumnWidth,g.width),previousDisplaced=!1):(displacedNotes.push(this._infos[i]),displacedNoteColumnWidth=Math.max(displacedNoteColumnWidth,g.width),previousDisplaced=!0):(normalNotes.push(this._infos[i]),normalNoteColumnWidth=Math.max(normalNoteColumnWidth,g.width),previousDisplaced=!1):(normalNotes.push(this._infos[i]),normalNoteColumnWidth=Math.max(normalNoteColumnWidth,g.width),previousDisplaced=!1),previousLine=this._infos[i].line;if(direction===Bridge.get(AlphaTab.Rendering.Utils.BeamDirection).up)for(i1=0;i1<normalNotes.length;i1++)normalNotes[i1].glyph.x=normalNoteColumnWidth-normalNotes[i1].glyph.width;if(displacedNotes.length>0){for(i2=0;i2<displacedNotes.length;i2++)displacedNotes[i2].glyph.x=normalNoteColumnWidth;this.upLineX=normalNoteColumnWidth;this.downLineX=normalNoteColumnWidth}else this.upLineX=normalNoteColumnWidth,this.downLineX=0;$c=Bridge.fn.bind(this,function(e){e.renderer=this.renderer;e.doLayout()});$e=this.beatEffects;for(t in $e)$c($e[t]);if(this.beat.getIsTremolo()){if(baseNote=direction===Bridge.get(AlphaTab.Rendering.Utils.BeamDirection).up?this.minNote:this.maxNote,tremoloX=direction===Bridge.get(AlphaTab.Rendering.Utils.BeamDirection).up?this.upLineX:this.downLineX,Bridge.Nullable.neq(this.beat.tremoloSpeed,null)){speed=Bridge.Nullable.getValue(this.beat.tremoloSpeed);switch(speed){case Bridge.get(AlphaTab.Model.Duration).thirtySecond:offset=direction===Bridge.get(AlphaTab.Rendering.Utils.BeamDirection).up?-15:18;break;case Bridge.get(AlphaTab.Model.Duration).sixteenth:offset=direction===Bridge.get(AlphaTab.Rendering.Utils.BeamDirection).up?-13:15;break;case Bridge.get(AlphaTab.Model.Duration).eighth:offset=direction===Bridge.get(AlphaTab.Rendering.Utils.BeamDirection).up?-10:12;break;default:offset=direction===Bridge.get(AlphaTab.Rendering.Utils.BeamDirection).up?-18:18}}else offset=direction===Bridge.get(AlphaTab.Rendering.Utils.BeamDirection).up?-15:15;this._tremoloPicking=new AlphaTab.Rendering.Glyphs.TremoloPickingGlyph(tremoloX,baseNote.glyph.y+offset*this.getScale(),Bridge.Nullable.getValue(this.beat.tremoloSpeed));this._tremoloPicking.renderer=this.renderer;this._tremoloPicking.doLayout()}this.width=normalNoteColumnWidth+displacedNoteColumnWidth},paint:function(cx,cy,canvas){var scoreRenderer=this.renderer,effectY=this.beamingHelper.getDirection()===Bridge.get(AlphaTab.Rendering.Utils.BeamDirection).up?scoreRenderer.getScoreY(this.maxNote.line,13.5):scoreRenderer.getScoreY(this.minNote.line,-9),effectSpacing=this.beamingHelper.getDirection()===Bridge.get(AlphaTab.Rendering.Utils.BeamDirection).up?7*this.getScale():-7*this.getScale(),$c=Bridge.fn.bind(this,function(g){g.y=effectY;g.x+=this.width/2;g.paint(cx+this.x,cy+this.y,canvas);effectY+=effectSpacing}),$e=this.beatEffects,t,linePadding,l,lY,l1,lY1,i,j,g;for(t in $e)$c($e[t]);if(canvas.setColor(this.renderer.getLayout().renderer.renderingResources.staveLineColor),linePadding=3*this.getScale(),this.getHasTopOverflow())for(l=0;l>=this.minNote.line;)lY=cy+this.y+scoreRenderer.getScoreY(l),canvas.beginPath(),canvas.moveTo(cx+this.x-linePadding,lY),canvas.lineTo(cx+this.x+this.width+linePadding,lY),canvas.stroke(),l-=2;if(this.getHasBottomOverflow())for(l1=9;l1<=this.maxNote.line;)lY1=cy+this.y+scoreRenderer.getScoreY(l1+1),canvas.beginPath(),canvas.moveTo(cx+this.x-linePadding,lY1),canvas.lineTo(cx+this.x+this.width+linePadding,lY1),canvas.stroke(),l1+=2;for(canvas.setColor(this.renderer.getLayout().renderer.renderingResources.mainGlyphColor),this._tremoloPicking!==null&&this._tremoloPicking.paint(cx+this.x,cy+this.y,canvas),i=0,j=this._infos.length;i<j;i++)g=this._infos[i],g.glyph.renderer=this.renderer,g.glyph.paint(cx+this.x,cy+this.y,canvas)}});Bridge.define("AlphaTab.Rendering.Glyphs.ScoreBrushGlyph",{inherits:[AlphaTab.Rendering.Glyphs.Glyph],_beat:null,constructor:function(beat){AlphaTab.Rendering.Glyphs.Glyph.prototype.$constructor.call(this,0,0);this._beat=beat},doLayout:function(){this.width=10*this.getScale()},paint:function(){}});Bridge.define("AlphaTab.Rendering.Glyphs.RepeatOpenGlyph",{inherits:[AlphaTab.Rendering.Glyphs.Glyph],_dotOffset:0,_circleSize:0,constructor:function(x,y,circleSize,dotOffset){AlphaTab.Rendering.Glyphs.Glyph.prototype.$constructor.call(this,x,y);this._dotOffset=dotOffset;this._circleSize=circleSize},getCanScale:function(){return!1},doLayout:function(){this.width=13*this.getScale()},paint:function(cx,cy,canvas){var blockWidth=4*this.getScale(),top=cy+this.y+this.renderer.getTopPadding(),bottom=cy+this.y+this.renderer.height-this.renderer.getBottomPadding(),left=cx+this.x+.5,h=bottom-top,circleSize,middle;canvas.fillRect(left,top,blockWidth,h);left+=blockWidth*2-.5;canvas.beginPath();canvas.moveTo(left,top);canvas.lineTo(left,bottom);canvas.stroke();left+=3*this.getScale();circleSize=this._circleSize*this.getScale();middle=(top+bottom)/2;canvas.fillCircle(left,middle-circleSize*this._dotOffset,circleSize);canvas.fillCircle(left,middle+circleSize*this._dotOffset,circleSize)}});Bridge.define("AlphaTab.Rendering.Glyphs.RepeatCountGlyph",{inherits:[AlphaTab.Rendering.Glyphs.Glyph],_count:0,constructor:function(x,y,count){AlphaTab.Rendering.Glyphs.Glyph.prototype.$constructor.call(this,x,y);this._count=count},getCanScale:function(){return!1},doLayout:function(){this.width=0},paint:function(cx,cy,canvas){var res=this.renderer.getResources(),s,w;canvas.setFont(res.barNumberFont);s="x"+this._count;w=canvas.measureText(s)/1.5;canvas.fillText(s,cx+this.x-w,cy+this.y)}});Bridge.define("AlphaTab.Rendering.Glyphs.RepeatCloseGlyph",{inherits:[AlphaTab.Rendering.Glyphs.Glyph],constructor:function(x,y){AlphaTab.Rendering.Glyphs.Glyph.prototype.$constructor.call(this,x,y)},getCanScale:function(){return!1},doLayout:function(){this.width=(this.renderer.getIsLast()?11:13)*this.getScale()},paint:function(cx,cy,canvas){var blockWidth=4*this.getScale(),top=cy+this.y+this.renderer.getTopPadding(),bottom=cy+this.y+this.renderer.height-this.renderer.getBottomPadding(),left=cx+this.x,h=bottom-top,circleSize=1.5*this.getScale(),middle=(top+bottom)/2,dotOffset=3;canvas.fillCircle(left,middle-circleSize*dotOffset,circleSize);canvas.fillCircle(left,middle+circleSize*dotOffset,circleSize);left+=4*this.getScale();canvas.beginPath();canvas.moveTo(left,top);canvas.lineTo(left,bottom);canvas.stroke();left+=3*this.getScale()+.5;canvas.fillRect(left,top,blockWidth,h)}});Bridge.define("AlphaTab.Rendering.Glyphs.NoteNumberGlyph",{inherits:[AlphaTab.Rendering.Glyphs.Glyph],_noteString:null,_isGrace:!1,constructor:function(x,y,n,isGrace){AlphaTab.Rendering.Glyphs.Glyph.prototype.$constructor.call(this,x,y);this._isGrace=isGrace;n.isTieDestination?this._noteString=n.beat.index===0?"("+n.tieOrigin.fret+")":"":(this._noteString=n.isDead?"X":n.fret.toString(),n.isGhost&&(this._noteString="("+this._noteString+")"))},doLayout:function(){this.width=10*this.getScale()},calculateWidth:function(){this.width=this.renderer.getLayout().renderer.canvas.measureText(this._noteString)},paint:function(cx,cy,canvas){this._noteString!==null&&canvas.fillText(this._noteString.toLowerCase(),cx+this.x,cy+this.y)}});Bridge.define("AlphaTab.Rendering.Glyphs.GlyphGroup",{inherits:[AlphaTab.Rendering.Glyphs.Glyph],glyphs:null,constructor:function(x,y){AlphaTab.Rendering.Glyphs.Glyph.prototype.$constructor.call(this,x,y)},doLayout:function(){var w,i,j,g;if(this.glyphs===null||this.glyphs.length===0){this.width=0;return}for(w=0,i=0,j=this.glyphs.length;i<j;i++)g=this.glyphs[i],g.renderer=this.renderer,g.doLayout(),w=Math.max(w,g.width);this.width=w},addGlyph:function(g){this.glyphs===null&&(this.glyphs=[]);this.glyphs.push(g)},paint:function(cx,cy,canvas){var i,j,g;if(this.glyphs!==null&&this.glyphs.length!==0)for(i=0,j=this.glyphs.length;i<j;i++)g=this.glyphs[i],g.renderer=this.renderer,g.paint(cx+this.x,cy+this.y,canvas)}});Bridge.define("AlphaTab.Rendering.Glyphs.TimeSignatureGlyph",{inherits:[AlphaTab.Rendering.Glyphs.GlyphGroup],_numerator:0,_denominator:0,constructor:function(x,y,numerator,denominator){AlphaTab.Rendering.Glyphs.GlyphGroup.prototype.$constructor.call(this,x,y);this._numerator=numerator;this._denominator=denominator},getCanScale:function(){return!1},doLayout:function(){var numerator=new AlphaTab.Rendering.Glyphs.NumberGlyph(0,1*this.getScale(),this._numerator),denominator=new AlphaTab.Rendering.Glyphs.NumberGlyph(0,19*this.getScale(),this._denominator),i,j,g;for(this.addGlyph(numerator),this.addGlyph(denominator),AlphaTab.Rendering.Glyphs.GlyphGroup.prototype.doLayout.call(this),i=0,j=this.glyphs.length;i<j;i++)g=this.glyphs[i],g.x=(this.width-g.width)/2}});Bridge.define("AlphaTab.Rendering.Glyphs.NumberGlyph",{inherits:[AlphaTab.Rendering.Glyphs.GlyphGroup],_number:0,constructor:function(x,y,number){AlphaTab.Rendering.Glyphs.GlyphGroup.prototype.$constructor.call(this,x,y);this._number=number},getCanScale:function(){return!1},doLayout:function(){for(var i=this._number,num,gl,cx,j,k,g;i>0;)num=i%10,gl=new AlphaTab.Rendering.Glyphs.DigitGlyph(0,0,num),this.addGlyph(gl),i=Bridge.Int.div(i,10);for(this.glyphs.reverse(),cx=0,j=0,k=this.glyphs.length;j<k;j++)g=this.glyphs[j],g.x=cx,g.y=0,g.renderer=this.renderer,g.doLayout(),cx+=g.width;this.width=cx}});Bridge.define("AlphaTab.Rendering.Glyphs.EffectGlyph",{inherits:[AlphaTab.Rendering.Glyphs.Glyph],constructor:function(x,y){AlphaTab.Rendering.Glyphs.Glyph.prototype.$constructor.call(this,x,y)},expandTo:function(){}});Bridge.define("AlphaTab.Rendering.Glyphs.VibratoGlyph",{inherits:[AlphaTab.Rendering.Glyphs.EffectGlyph],_scale:0,constructor:function(x,y,scale){AlphaTab.Rendering.Glyphs.EffectGlyph.prototype.$constructor.call(this,x,y);scale===void 0&&(scale=1);this._scale=scale},paint:function(cx,cy,canvas){for(var step=9*this.getScale()*this._scale,loops=Math.max(1,this.width/step),loopX=0,y=cy+this.y+this.renderer.height*.75,i=0;i<loops;i++)canvas.fillMusicFontSymbol(cx+this.x+loopX,y,this._scale,Bridge.get(AlphaTab.Rendering.Glyphs.MusicFontSymbol).waveHorizontal),loopX+=step}});Bridge.define("AlphaTab.Rendering.Glyphs.TrillGlyph",{inherits:[AlphaTab.Rendering.Glyphs.EffectGlyph],constructor:function(x,y){AlphaTab.Rendering.Glyphs.EffectGlyph.prototype.$constructor.call(this,x,y)},paint:function(cx,cy,canvas){var res=this.renderer.getResources(),textw,i;canvas.setFont(res.markerFont);textw=canvas.measureText("tr");canvas.fillText("tr",cx+this.x,cy+this.y);var step=9*this.getScale(),startX=textw+step/2,endX=this.width-startX,loops=Math.max(1,(endX-startX)/step),loopX=startX,y=cy+this.y+this.renderer.height*.9;for(i=0;i<loops;i++)canvas.fillMusicFontSymbol(cx+this.x+loopX,y,1,Bridge.get(AlphaTab.Rendering.Glyphs.MusicFontSymbol).waveHorizontal),loopX+=step}});Bridge.define("AlphaTab.Rendering.Glyphs.TextGlyph",{inherits:[AlphaTab.Rendering.Glyphs.EffectGlyph],_text:null,_font:null,_textAlign:0,constructor:function(x,y,text,font,textAlign){AlphaTab.Rendering.Glyphs.EffectGlyph.prototype.$constructor.call(this,x,y);textAlign===void 0&&(textAlign=0);this._text=text;this._font=font;this._textAlign=textAlign},paint:function(cx,cy,canvas){canvas.setFont(this._font);var old=canvas.getTextAlign();canvas.setTextAlign(this._textAlign);canvas.fillText(this._text,cx+this.x,cy+this.y);canvas.setTextAlign(old)}});Bridge.define("AlphaTab.Rendering.Glyphs.TempoGlyph",{inherits:[AlphaTab.Rendering.Glyphs.EffectGlyph],_tempo:0,constructor:function(x,y,tempo){AlphaTab.Rendering.Glyphs.EffectGlyph.prototype.$constructor.call(this,x,y);this._tempo=tempo},paint:function(cx,cy,canvas){var res=this.renderer.getResources();canvas.setFont(res.markerFont);canvas.fillMusicFontSymbol(cx+this.x,cy+this.y+this.renderer.height*.75,.75,Bridge.get(AlphaTab.Rendering.Glyphs.MusicFontSymbol).tempo);canvas.fillText("= "+this._tempo,cx+this.x+15*this.getScale(),cy+this.y)}});Bridge.define("AlphaTab.Rendering.Glyphs.MusicFontGlyph",{inherits:[AlphaTab.Rendering.Glyphs.EffectGlyph],fontScale:0,symbol:0,constructor:function(x,y,fontScale,symbol){AlphaTab.Rendering.Glyphs.EffectGlyph.prototype.$constructor.call(this,x,y);this.fontScale=fontScale;this.symbol=symbol},paint:function(cx,cy,canvas){canvas.fillMusicFontSymbol(cx+this.x,cy+this.y,this.fontScale*this.getScale(),this.symbol)}});Bridge.define("AlphaTab.Rendering.Glyphs.TremoloPickingGlyph",{inherits:[AlphaTab.Rendering.Glyphs.MusicFontGlyph],statics:{getSymbol:function(duration){switch(duration){case Bridge.get(AlphaTab.Model.Duration).thirtySecond:return Bridge.get(AlphaTab.Rendering.Glyphs.MusicFontSymbol).tremoloPickingThirtySecond;case Bridge.get(AlphaTab.Model.Duration).sixteenth:return Bridge.get(AlphaTab.Rendering.Glyphs.MusicFontSymbol).tremoloPickingSixteenth;case Bridge.get(AlphaTab.Model.Duration).eighth:return Bridge.get(AlphaTab.Rendering.Glyphs.MusicFontSymbol).tremoloPickingEighth;default:return Bridge.get(AlphaTab.Rendering.Glyphs.MusicFontSymbol).none}}},constructor:function(x,y,duration){AlphaTab.Rendering.Glyphs.MusicFontGlyph.prototype.$constructor.call(this,x,y,1,Bridge.get(AlphaTab.Rendering.Glyphs.TremoloPickingGlyph).getSymbol(duration))},getCanScale:function(){return!1},doLayout:function(){this.width=12*this.getScale()}});Bridge.define("AlphaTab.Rendering.Glyphs.RestGlyph",{inherits:[AlphaTab.Rendering.Glyphs.MusicFontGlyph],statics:{getSymbol:function(duration){switch(duration){case Bridge.get(AlphaTab.Model.Duration).whole:return Bridge.get(AlphaTab.Rendering.Glyphs.MusicFontSymbol).restWhole;case Bridge.get(AlphaTab.Model.Duration).half:return Bridge.get(AlphaTab.Rendering.Glyphs.MusicFontSymbol).restHalf;case Bridge.get(AlphaTab.Model.Duration).quarter:return Bridge.get(AlphaTab.Rendering.Glyphs.MusicFontSymbol).restQuarter;case Bridge.get(AlphaTab.Model.Duration).eighth:return Bridge.get(AlphaTab.Rendering.Glyphs.MusicFontSymbol).restEighth;case Bridge.get(AlphaTab.Model.Duration).sixteenth:return Bridge.get(AlphaTab.Rendering.Glyphs.MusicFontSymbol).restSixteenth;case Bridge.get(AlphaTab.Model.Duration).thirtySecond:return Bridge.get(AlphaTab.Rendering.Glyphs.MusicFontSymbol).restThirtySecond;case Bridge.get(AlphaTab.Model.Duration).sixtyFourth:return Bridge.get(AlphaTab.Rendering.Glyphs.MusicFontSymbol).restSixtyFourth;default:return Bridge.get(AlphaTab.Rendering.Glyphs.MusicFontSymbol).none}}},_duration:0,constructor:function(x,y,duration){AlphaTab.Rendering.Glyphs.MusicFontGlyph.prototype.$constructor.call(this,x,y,1,Bridge.get(AlphaTab.Rendering.Glyphs.RestGlyph).getSymbol(duration));this._duration=duration},getCanScale:function(){return!1},doLayout:function(){switch(this._duration){case Bridge.get(AlphaTab.Model.Duration).whole:case Bridge.get(AlphaTab.Model.Duration).half:case Bridge.get(AlphaTab.Model.Duration).quarter:case Bridge.get(AlphaTab.Model.Duration).eighth:case Bridge.get(AlphaTab.Model.Duration).sixteenth:this.width=9*this.getScale();break;case Bridge.get(AlphaTab.Model.Duration).thirtySecond:this.width=12*this.getScale();break;case Bridge.get(AlphaTab.Model.Duration).sixtyFourth:this.width=14*this.getScale()}}});Bridge.define("AlphaTab.Rendering.Glyphs.PickStrokeGlyph",{inherits:[AlphaTab.Rendering.Glyphs.MusicFontGlyph],statics:{getSymbol:function(pickStroke){switch(pickStroke){case Bridge.get(AlphaTab.Model.PickStrokeType).up:return Bridge.get(AlphaTab.Rendering.Glyphs.MusicFontSymbol).pickStrokeUp;case Bridge.get(AlphaTab.Model.PickStrokeType).down:return Bridge.get(AlphaTab.Rendering.Glyphs.MusicFontSymbol).pickStrokeDown;default:return Bridge.get(AlphaTab.Rendering.Glyphs.MusicFontSymbol).none}}},constructor:function(x,y,pickStroke){AlphaTab.Rendering.Glyphs.MusicFontGlyph.prototype.$constructor.call(this,x,y,1,Bridge.get(AlphaTab.Rendering.Glyphs.PickStrokeGlyph).getSymbol(pickStroke))},getCanScale:function(){return!1},doLayout:function(){this.width=9*this.getScale()}});Bridge.define("AlphaTab.Rendering.Glyphs.FooterGlyph",{inherits:[AlphaTab.Rendering.Glyphs.MusicFontGlyph],statics:{getSymbol:function(duration,direction,isGrace){if(direction===Bridge.get(AlphaTab.Rendering.Utils.BeamDirection).up){if(isGrace)return Bridge.get(AlphaTab.Rendering.Glyphs.MusicFontSymbol).footerUpEighth;switch(duration){case Bridge.get(AlphaTab.Model.Duration).eighth:return Bridge.get(AlphaTab.Rendering.Glyphs.MusicFontSymbol).footerUpEighth;case Bridge.get(AlphaTab.Model.Duration).sixteenth:return Bridge.get(AlphaTab.Rendering.Glyphs.MusicFontSymbol).footerUpSixteenth;case Bridge.get(AlphaTab.Model.Duration).thirtySecond:return Bridge.get(AlphaTab.Rendering.Glyphs.MusicFontSymbol).footerUpThirtySecond;case Bridge.get(AlphaTab.Model.Duration).sixtyFourth:return Bridge.get(AlphaTab.Rendering.Glyphs.MusicFontSymbol).footerUpSixtyFourth;default:return Bridge.get(AlphaTab.Rendering.Glyphs.MusicFontSymbol).footerUpEighth}}else{if(isGrace)return Bridge.get(AlphaTab.Rendering.Glyphs.MusicFontSymbol).footerDownEighth;switch(duration){case Bridge.get(AlphaTab.Model.Duration).eighth:return Bridge.get(AlphaTab.Rendering.Glyphs.MusicFontSymbol).footerDownEighth;case Bridge.get(AlphaTab.Model.Duration).sixteenth:return Bridge.get(AlphaTab.Rendering.Glyphs.MusicFontSymbol).footerDownSixteenth;case Bridge.get(AlphaTab.Model.Duration).thirtySecond:return Bridge.get(AlphaTab.Rendering.Glyphs.MusicFontSymbol).footerDownThirtySecond;case Bridge.get(AlphaTab.Model.Duration).sixtyFourth:return Bridge.get(AlphaTab.Rendering.Glyphs.MusicFontSymbol).footerDownSixtyFourth;default:return Bridge.get(AlphaTab.Rendering.Glyphs.MusicFontSymbol).footerDownEighth}}}},constructor:function(x,y,duration,direction,isGrace){AlphaTab.Rendering.Glyphs.MusicFontGlyph.prototype.$constructor.call(this,x,y,isGrace?Bridge.get(AlphaTab.Rendering.Glyphs.NoteHeadGlyph).GraceScale:1,Bridge.get(AlphaTab.Rendering.Glyphs.FooterGlyph).getSymbol(duration,direction,isGrace))},doLayout:function(){this.width=0}});Bridge.define("AlphaTab.Rendering.Glyphs.DynamicsGlyph",{inherits:[AlphaTab.Rendering.Glyphs.MusicFontGlyph],statics:{getSymbol:function(dynamics){switch(dynamics){case Bridge.get(AlphaTab.Model.DynamicValue).pPP:return Bridge.get(AlphaTab.Rendering.Glyphs.MusicFontSymbol).dynamicPPP;case Bridge.get(AlphaTab.Model.DynamicValue).pP:return Bridge.get(AlphaTab.Rendering.Glyphs.MusicFontSymbol).dynamicPP;case Bridge.get(AlphaTab.Model.DynamicValue).p:return Bridge.get(AlphaTab.Rendering.Glyphs.MusicFontSymbol).dynamicP;case Bridge.get(AlphaTab.Model.DynamicValue).mP:return Bridge.get(AlphaTab.Rendering.Glyphs.MusicFontSymbol).dynamicMP;case Bridge.get(AlphaTab.Model.DynamicValue).mF:return Bridge.get(AlphaTab.Rendering.Glyphs.MusicFontSymbol).dynamicMF;case Bridge.get(AlphaTab.Model.DynamicValue).f:return Bridge.get(AlphaTab.Rendering.Glyphs.MusicFontSymbol).dynamicF;case Bridge.get(AlphaTab.Model.DynamicValue).fF:return Bridge.get(AlphaTab.Rendering.Glyphs.MusicFontSymbol).dynamicFFF;case Bridge.get(AlphaTab.Model.DynamicValue).fFF:return Bridge.get(AlphaTab.Rendering.Glyphs.MusicFontSymbol).dynamicFFF;default:return Bridge.get(AlphaTab.Rendering.Glyphs.MusicFontSymbol).none}}},constructor:function(x,y,dynamics){AlphaTab.Rendering.Glyphs.MusicFontGlyph.prototype.$constructor.call(this,x,y,.6,Bridge.get(AlphaTab.Rendering.Glyphs.DynamicsGlyph).getSymbol(dynamics))},doLayout:function(){AlphaTab.Rendering.Glyphs.MusicFontGlyph.prototype.doLayout.call(this);this.y+=this.renderer.height*.75}});Bridge.define("AlphaTab.Rendering.Glyphs.DigitGlyph",{inherits:[AlphaTab.Rendering.Glyphs.MusicFontGlyph],statics:{getSymbol:function(digit){switch(digit){case 0:return Bridge.get(AlphaTab.Rendering.Glyphs.MusicFontSymbol).num0;case 1:return Bridge.get(AlphaTab.Rendering.Glyphs.MusicFontSymbol).num1;case 2:return Bridge.get(AlphaTab.Rendering.Glyphs.MusicFontSymbol).num2;case 3:return Bridge.get(AlphaTab.Rendering.Glyphs.MusicFontSymbol).num3;case 4:return Bridge.get(AlphaTab.Rendering.Glyphs.MusicFontSymbol).num4;case 5:return Bridge.get(AlphaTab.Rendering.Glyphs.MusicFontSymbol).num5;case 6:return Bridge.get(AlphaTab.Rendering.Glyphs.MusicFontSymbol).num6;case 7:return Bridge.get(AlphaTab.Rendering.Glyphs.MusicFontSymbol).num7;case 8:return Bridge.get(AlphaTab.Rendering.Glyphs.MusicFontSymbol).num8;case 9:return Bridge.get(AlphaTab.Rendering.Glyphs.MusicFontSymbol).num9;default:return Bridge.get(AlphaTab.Rendering.Glyphs.MusicFontSymbol).none}}},_digit:0,constructor:function(x,y,digit){AlphaTab.Rendering.Glyphs.MusicFontGlyph.prototype.$constructor.call(this,x,y,1,Bridge.get(AlphaTab.Rendering.Glyphs.DigitGlyph).getSymbol(digit));this._digit=digit},getCanScale:function(){return!1},doLayout:function(){this.y+=7*this.getScale();this.width=this.getDigitWidth(this._digit)*this.getScale()},getDigitWidth:function(digit){switch(digit){case 0:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:return 14;case 1:return 10;default:return 0}}});Bridge.define("AlphaTab.Rendering.Glyphs.ClefGlyph",{inherits:[AlphaTab.Rendering.Glyphs.MusicFontGlyph],statics:{getSymbol:function(clef){switch(clef){case Bridge.get(AlphaTab.Model.Clef).neutral:return Bridge.get(AlphaTab.Rendering.Glyphs.MusicFontSymbol).clefNeutral;case Bridge.get(AlphaTab.Model.Clef).c3:return Bridge.get(AlphaTab.Rendering.Glyphs.MusicFontSymbol).clefC;case Bridge.get(AlphaTab.Model.Clef).c4:return Bridge.get(AlphaTab.Rendering.Glyphs.MusicFontSymbol).clefC;case Bridge.get(AlphaTab.Model.Clef).f4:return Bridge.get(AlphaTab.Rendering.Glyphs.MusicFontSymbol).clefF;case Bridge.get(AlphaTab.Model.Clef).g2:return Bridge.get(AlphaTab.Rendering.Glyphs.MusicFontSymbol).clefG;default:return Bridge.get(AlphaTab.Rendering.Glyphs.MusicFontSymbol).none}}},constructor:function(x,y,clef){AlphaTab.Rendering.Glyphs.MusicFontGlyph.prototype.$constructor.call(this,x,y,1,Bridge.get(AlphaTab.Rendering.Glyphs.ClefGlyph).getSymbol(clef))},getCanScale:function(){return!1},doLayout:function(){this.width=28*this.getScale()}});Bridge.define("AlphaTab.Rendering.Glyphs.AccentuationGlyph",{inherits:[AlphaTab.Rendering.Glyphs.MusicFontGlyph],statics:{getSymbol:function(accentuation){switch(accentuation){case Bridge.get(AlphaTab.Model.AccentuationType).none:return Bridge.get(AlphaTab.Rendering.Glyphs.MusicFontSymbol).none;case Bridge.get(AlphaTab.Model.AccentuationType).normal:return Bridge.get(AlphaTab.Rendering.Glyphs.MusicFontSymbol).accentuation;case Bridge.get(AlphaTab.Model.AccentuationType).heavy:return Bridge.get(AlphaTab.Rendering.Glyphs.MusicFontSymbol).heavyAccentuation;default:return Bridge.get(AlphaTab.Rendering.Glyphs.MusicFontSymbol).none}}},constructor:function(x,y,accentuation){AlphaTab.Rendering.Glyphs.MusicFontGlyph.prototype.$constructor.call(this,x,y,1,Bridge.get(AlphaTab.Rendering.Glyphs.AccentuationGlyph).getSymbol(accentuation))},getCanScale:function(){return!1},doLayout:function(){this.width=9*this.getScale()}});Bridge.define("AlphaTab.Rendering.Glyphs.SharpGlyph",{inherits:[AlphaTab.Rendering.Glyphs.MusicFontGlyph],_isGrace:!1,constructor:function(x,y,isGrace){AlphaTab.Rendering.Glyphs.MusicFontGlyph.prototype.$constructor.call(this,x,y,isGrace?Bridge.get(AlphaTab.Rendering.Glyphs.NoteHeadGlyph).GraceScale:1,Bridge.get(AlphaTab.Rendering.Glyphs.MusicFontSymbol).accidentalSharp);isGrace===void 0&&(isGrace=!1);this._isGrace=isGrace},getCanScale:function(){return!1},doLayout:function(){this.width=8*(this._isGrace?Bridge.get(AlphaTab.Rendering.Glyphs.NoteHeadGlyph).GraceScale:1)*this.getScale()}});Bridge.define("AlphaTab.Rendering.Glyphs.NoteHeadGlyphBase",{inherits:[AlphaTab.Rendering.Glyphs.MusicFontGlyph],isGrace:!1,constructor:function(isGrace,symbol){AlphaTab.Rendering.Glyphs.MusicFontGlyph.prototype.$constructor.call(this,0,0,isGrace?Bridge.get(AlphaTab.Rendering.Glyphs.NoteHeadGlyph).GraceScale:1,symbol);this.isGrace=isGrace},getCanScale:function(){return!1},doLayout:function(){AlphaTab.Rendering.Glyphs.MusicFontGlyph.prototype.doLayout.call(this);this.width*=(this.isGrace?Bridge.get(AlphaTab.Rendering.Glyphs.NoteHeadGlyph).GraceScale:1)*this.getScale()}});Bridge.define("AlphaTab.Rendering.Glyphs.NoteHeadGlyph",{inherits:[AlphaTab.Rendering.Glyphs.NoteHeadGlyphBase],statics:{GraceScale:.6,NoteHeadHeight:9,getSymbol:function(duration){switch(duration){case Bridge.get(AlphaTab.Model.Duration).whole:return Bridge.get(AlphaTab.Rendering.Glyphs.MusicFontSymbol).noteWhole;case Bridge.get(AlphaTab.Model.Duration).half:return Bridge.get(AlphaTab.Rendering.Glyphs.MusicFontSymbol).noteHalf;default:return Bridge.get(AlphaTab.Rendering.Glyphs.MusicFontSymbol).noteQuarter}}},_duration:0,constructor:function(duration,isGrace){AlphaTab.Rendering.Glyphs.NoteHeadGlyphBase.prototype.$constructor.call(this,isGrace,Bridge.get(AlphaTab.Rendering.Glyphs.NoteHeadGlyph).getSymbol(duration));this._duration=duration},doLayout:function(){switch(this._duration){case Bridge.get(AlphaTab.Model.Duration).whole:this.width=14;break;default:this.width=10}AlphaTab.Rendering.Glyphs.NoteHeadGlyphBase.prototype.doLayout.call(this)}});Bridge.define("AlphaTab.Rendering.Glyphs.RideCymbalGlyph",{inherits:[AlphaTab.Rendering.Glyphs.NoteHeadGlyphBase],_isGrace:!1,constructor:function(isGrace){AlphaTab.Rendering.Glyphs.NoteHeadGlyphBase.prototype.$constructor.call(this,isGrace,Bridge.get(AlphaTab.Rendering.Glyphs.MusicFontSymbol).noteRideCymbal)},doLayout:function(){this.width=9}});Bridge.define("AlphaTab.Rendering.Glyphs.NaturalizeGlyph",{inherits:[AlphaTab.Rendering.Glyphs.MusicFontGlyph],_isGrace:!1,constructor:function(x,y,isGrace){AlphaTab.Rendering.Glyphs.MusicFontGlyph.prototype.$constructor.call(this,x,y,isGrace?Bridge.get(AlphaTab.Rendering.Glyphs.NoteHeadGlyph).GraceScale:1,Bridge.get(AlphaTab.Rendering.Glyphs.MusicFontSymbol).accidentalNatural);isGrace===void 0&&(isGrace=!1);this._isGrace=isGrace},getCanScale:function(){return!1},doLayout:function(){this.width=8*(this._isGrace?Bridge.get(AlphaTab.Rendering.Glyphs.NoteHeadGlyph).GraceScale:1)*this.getScale()}});Bridge.define("AlphaTab.Rendering.Glyphs.LineRangedGlyph",{inherits:[AlphaTab.Rendering.Glyphs.EffectGlyph],statics:{LineSpacing:3,LineTopPadding:8,LineTopOffset:6,LineSize:8},_isExpanded:!1,_label:null,constructor:function(x,y,label){AlphaTab.Rendering.Glyphs.EffectGlyph.prototype.$constructor.call(this,x,y);this._label=label},expandTo:function(){this._isExpanded=!0},paint:function(cx,cy,canvas){var res=this.renderer.getResources(),textWidth,lineX;if(canvas.setFont(res.effectFont),canvas.setTextAlign(Bridge.get(AlphaTab.Platform.Model.TextAlign).left),textWidth=canvas.measureText(this._label),canvas.fillText(this._label,cx+this.x,cy+this.y),this._isExpanded){var lineSpacing=Bridge.get(AlphaTab.Rendering.Glyphs.LineRangedGlyph).LineSpacing*this.getScale(),startX=cx+this.x+textWidth+lineSpacing,endX=cx+this.x+this.width-lineSpacing-lineSpacing,lineY=cy+this.y+Bridge.get(AlphaTab.Rendering.Glyphs.LineRangedGlyph).LineTopPadding*this.getScale(),lineSize=Bridge.get(AlphaTab.Rendering.Glyphs.LineRangedGlyph).LineSize*this.getScale();if(endX>startX){for(lineX=startX;lineX<endX;)canvas.beginPath(),canvas.moveTo(lineX,lineY),canvas.lineTo(Math.min(lineX+lineSize,endX),lineY),lineX+=lineSize+lineSpacing,canvas.stroke();canvas.beginPath();canvas.moveTo(endX,lineY-Bridge.get(AlphaTab.Rendering.Glyphs.LineRangedGlyph).LineTopOffset*this.getScale());canvas.lineTo(endX,lineY+Bridge.get(AlphaTab.Rendering.Glyphs.LineRangedGlyph).LineTopOffset*this.getScale());canvas.stroke()}}}});Bridge.define("AlphaTab.Rendering.Glyphs.FadeInGlyph",{inherits:[AlphaTab.Rendering.Glyphs.EffectGlyph],constructor:function(x,y){AlphaTab.Rendering.Glyphs.EffectGlyph.prototype.$constructor.call(this,x,y)},paint:function(cx,cy,canvas){var size=6*this.getScale();canvas.beginPath();canvas.moveTo(cx+this.x,cy+this.y);canvas.quadraticCurveTo(cx+this.x+this.width/2,cy+this.y,cx+this.x+this.width,cy+this.y-size);canvas.moveTo(cx+this.x,cy+this.y);canvas.quadraticCurveTo(cx+this.x+this.width/2,cy+this.y,cx+this.x+this.width,cy+this.y+size);canvas.stroke()}});Bridge.define("AlphaTab.Rendering.Glyphs.CrescendoGlyph",{inherits:[AlphaTab.Rendering.Glyphs.EffectGlyph],statics:{Height:17},_crescendo:0,constructor:function(x,y,crescendo){AlphaTab.Rendering.Glyphs.EffectGlyph.prototype.$constructor.call(this,x,y);this._crescendo=crescendo},paint:function(cx,cy,canvas){var height=Bridge.get(AlphaTab.Rendering.Glyphs.CrescendoGlyph).Height*this.getScale();canvas.beginPath();this._crescendo===Bridge.get(AlphaTab.Model.CrescendoType).crescendo?(canvas.moveTo(cx+this.x+this.width,cy+this.y),canvas.lineTo(cx+this.x,cy+this.y+height/2),canvas.lineTo(cx+this.x+this.width,cy+this.y+height)):(canvas.moveTo(cx+this.x,cy+this.y),canvas.lineTo(cx+this.x+this.width,cy+this.y+height/2),canvas.lineTo(cx+this.x,cy+this.y+height));canvas.stroke()}});Bridge.define("AlphaTab.Rendering.Glyphs.CircleGlyph",{inherits:[AlphaTab.Rendering.Glyphs.Glyph],_size:0,constructor:function(x,y,size){AlphaTab.Rendering.Glyphs.Glyph.prototype.$constructor.call(this,x,y);this._size=size},getCanScale:function(){return!1},doLayout:function(){this.width=this._size+3*this.getScale()},paint:function(cx,cy,canvas){canvas.fillCircle(cx+this.x,cy+this.y,this._size)}});Bridge.define("AlphaTab.Rendering.Glyphs.BendGlyph",{inherits:[AlphaTab.Rendering.Glyphs.Glyph],_note:null,_height:0,constructor:function(n,width,height){AlphaTab.Rendering.Glyphs.Glyph.prototype.$constructor.call(this,0,0);this._note=n;this.width=width;this._height=height},paint:function(cx,cy,canvas){for(var i1,j1,firstPt,secondPt,hx,hy,arrowSize,dV,up,s,r=this.renderer,res=this.renderer.getResources(),dX=this.width/Bridge.get(AlphaTab.Model.BendPoint).MaxPosition,maxValue=0,i=0,j=this._note.bendPoints.length;i<j;i++)this._note.bendPoints[i].value>maxValue&&(maxValue=this._note.bendPoints[i].value);var dY=maxValue===0?0:this._height/maxValue,xx=cx+this.x,yy=cy+this.y+r.getNoteY(this._note);for(canvas.beginPath(),i1=0,j1=this._note.bendPoints.length-1;i1<j1;i1++)if(firstPt=this._note.bendPoints[i1],secondPt=this._note.bendPoints[i1+1],firstPt.value!==secondPt.value||i1!==this._note.bendPoints.length-2){var x1=xx+dX*firstPt.offset,y1=yy-dY*firstPt.value,x2=xx+dX*secondPt.offset,y2=yy-dY*secondPt.value;if(firstPt.value===secondPt.value?(canvas.moveTo(x1,y1),canvas.lineTo(x2,y2),canvas.stroke()):(hx=x1+(x2-x1),hy=yy-dY*firstPt.value,canvas.moveTo(x1,y1),canvas.bezierCurveTo(hx,hy,x2,y2,x2,y2),canvas.stroke()),arrowSize=6*this.getScale(),secondPt.value>firstPt.value?(canvas.beginPath(),canvas.moveTo(x2,y2),canvas.lineTo(x2-arrowSize*.5,y2+arrowSize),canvas.lineTo(x2+arrowSize*.5,y2+arrowSize),canvas.closePath(),canvas.fill()):secondPt.value!==firstPt.value&&(canvas.beginPath(),canvas.moveTo(x2,y2),canvas.lineTo(x2-arrowSize*.5,y2-arrowSize),canvas.lineTo(x2+arrowSize*.5,y2-arrowSize),canvas.closePath(),canvas.fill()),canvas.stroke(),secondPt.value!==0&&(dV=secondPt.value-firstPt.value,up=dV>0,dV=Math.abs(dV),s="",dV===4?(s="full",dV-=4):dV>4&&(s+=Bridge.Int.div(dV,4)+" ",dV-=Bridge.Int.div(dV,4)),dV>0&&(s+=dV+"/4"),s!=="")){up||(s="-"+s);canvas.setFont(res.tablatureFont);var size=canvas.measureText(s),y=up?y2-res.tablatureFont.size-2*this.getScale():y2+2*this.getScale(),x=x2-size/2;canvas.fillText(s,x,y)}}}});Bridge.define("AlphaTab.Rendering.Glyphs.BarSeperatorGlyph",{inherits:[AlphaTab.Rendering.Glyphs.Glyph],_isLast:!1,constructor:function(x,y,isLast){AlphaTab.Rendering.Glyphs.Glyph.prototype.$constructor.call(this,x,y);isLast===void 0&&(isLast=!1);this._isLast=isLast},getCanScale:function(){return!1},doLayout:function(){this.width=(this._isLast?8:1)*this.getScale()},paint:function(cx,cy,canvas){var blockWidth=4*this.getScale(),top=cy+this.y+this.renderer.getTopPadding(),bottom=cy+this.y+this.renderer.height-this.renderer.getBottomPadding(),left=cx+this.x,h=bottom-top;canvas.beginPath();canvas.moveTo(left,top);canvas.lineTo(left,bottom);canvas.stroke();this._isLast&&(left+=3*this.getScale()+.5,canvas.fillRect(left,top,blockWidth,h))}});Bridge.define("AlphaTab.Rendering.Glyphs.BarNumberGlyph",{inherits:[AlphaTab.Rendering.Glyphs.Glyph],_number:0,_hidden:!1,constructor:function(x,y,number,hidden){AlphaTab.Rendering.Glyphs.Glyph.prototype.$constructor.call(this,x,y);this._number=number;this._hidden=hidden},getCanScale:function(){return!1},doLayout:function(){this.width=10*this.getScale()},paint:function(cx,cy,canvas){if(!this._hidden){var res=this.renderer.getResources();canvas.setColor(res.barNumberColor);canvas.setFont(res.barNumberFont);canvas.fillText(this._number.toString(),cx+this.x,cy+this.y);canvas.setColor(res.mainGlyphColor)}}});Bridge.define("AlphaTab.Rendering.Effects.DummyEffectGlyph",{inherits:[AlphaTab.Rendering.Glyphs.EffectGlyph],_s:null,constructor:function(x,y,s){AlphaTab.Rendering.Glyphs.EffectGlyph.prototype.$constructor.call(this,x,y);this._s=s},getCanScale:function(){return!1},doLayout:function(){this.width=20*this.getScale()},paint:function(cx,cy,canvas){var res=this.renderer.getResources();canvas.setColor(res.mainGlyphColor);canvas.strokeRect(cx+this.x,cy+this.y,this.width,20*this.getScale());canvas.setFont(res.tablatureFont);canvas.fillText(this._s,cx+this.x,cy+this.y)}});Bridge.define("AlphaTab.Rendering.Glyphs.AccidentalGroupGlyph",{inherits:[AlphaTab.Rendering.Glyphs.GlyphGroup],statics:{NonReserved:-3e3},constructor:function(){AlphaTab.Rendering.Glyphs.GlyphGroup.prototype.$constructor.call(this,0,0)},doLayout:function(){var columns,accidentalSize,i,j,g,gColumn,columnWidth,i1,j1,g1;if(this.glyphs===null){this.width=0;return}for(this.glyphs.sort(function(a,b){return Bridge.compare(a.y,b.y)}),columns=[],columns.push(Bridge.get(AlphaTab.Rendering.Glyphs.AccidentalGroupGlyph).NonReserved),accidentalSize=21*this.getScale(),i=0,j=this.glyphs.length;i<j;i++){for(g=this.glyphs[i],g.renderer=this.renderer,g.doLayout(),gColumn=0;columns[gColumn]>g.y;)gColumn++,gColumn===columns.length&&columns.push(Bridge.get(AlphaTab.Rendering.Glyphs.AccidentalGroupGlyph).NonReserved);g.x=gColumn;columns[gColumn]=g.y+accidentalSize}for(columnWidth=8*this.getScale(),this.width=this.glyphs.length===0?0:columnWidth*columns.length,i1=0,j1=this.glyphs.length;i1<j1;i1++)g1=this.glyphs[i1],g1.x=this.width-(g1.x+1)*columnWidth}});Bridge.define("AlphaTab.Rendering.Glyphs.ISupportsFinalize");Bridge.define("AlphaTab.Rendering.Glyphs.VoiceContainerGlyph",{inherits:[AlphaTab.Rendering.Glyphs.GlyphGroup,AlphaTab.Rendering.Glyphs.ISupportsFinalize],statics:{KeySizeBeat:"Beat"},config:{properties:{beatGlyphs:null,voiceIndex:0}},constructor:function(x,y,voiceIndex){AlphaTab.Rendering.Glyphs.GlyphGroup.prototype.$constructor.call(this,x,y);this.beatGlyphs=[];this.voiceIndex=voiceIndex},applyGlyphSpacing:function(spacing){for(var g,glyphSpacing=spacing/this.beatGlyphs.length,gx=0,i=0,j=this.beatGlyphs.length;i<j;i++)g=this.beatGlyphs[i],g.x=gx,gx+=g.width+glyphSpacing,g.applyGlyphSpacing(glyphSpacing);this.width=gx},registerMaxSizes:function(sizes){for(var b,i=0,j=this.beatGlyphs.length;i<j;i++)b=this.beatGlyphs[i],b.registerMaxSizes(sizes)},applySizes:function(sizes){this.width=0;for(var i=0,j=this.beatGlyphs.length;i<j;i++)this.beatGlyphs[i].x=i===0?0:this.beatGlyphs[i-1].x+this.beatGlyphs[i-1].width,this.beatGlyphs[i].applySizes(sizes);this.beatGlyphs.length>0&&(this.width=this.beatGlyphs[this.beatGlyphs.length-1].x+this.beatGlyphs[this.beatGlyphs.length-1].width)},addGlyph:function(g){g.x=this.beatGlyphs.length===0?0:this.beatGlyphs[this.beatGlyphs.length-1].x+this.beatGlyphs[this.beatGlyphs.length-1].width;g.index=this.beatGlyphs.length;g.renderer=this.renderer;g.doLayout();this.beatGlyphs.push(g);this.width=g.x+g.width},doLayout:function(){},finalizeGlyph:function(layout){for(var i=0,j=this.beatGlyphs.length;i<j;i++)this.beatGlyphs[i].finalizeGlyph(layout)},paint:function(cx,cy,canvas){for(var i=0,j=this.beatGlyphs.length;i<j;i++)this.beatGlyphs[i].paint(cx+this.x,cy+this.y,canvas)}});Bridge.define("AlphaTab.Rendering.Glyphs.BeatGlyphBase",{inherits:[AlphaTab.Rendering.Glyphs.GlyphGroup,AlphaTab.Rendering.Glyphs.ISupportsFinalize],config:{properties:{container:null}},constructor:function(){AlphaTab.Rendering.Glyphs.GlyphGroup.prototype.$constructor.call(this,0,0)},getBeatDurationWidth:function(){switch(this.container.beat.duration){case Bridge.get(AlphaTab.Model.Duration).whole:return 103;case Bridge.get(AlphaTab.Model.Duration).half:return 45;case Bridge.get(AlphaTab.Model.Duration).quarter:return 29;case Bridge.get(AlphaTab.Model.Duration).eighth:return 19;case Bridge.get(AlphaTab.Model.Duration).sixteenth:return 11;case Bridge.get(AlphaTab.Model.Duration).thirtySecond:return 11;case Bridge.get(AlphaTab.Model.Duration).sixtyFourth:return 11;default:return 11}},doLayout:function(){var w=0,i,j,g;if(this.glyphs!==null)for(i=0,j=this.glyphs.length;i<j;i++)g=this.glyphs[i],g.x=w,g.renderer=this.renderer,g.doLayout(),w+=g.width;this.width=w},finalizeGlyph:function(){}});Bridge.define("AlphaTab.Rendering.Glyphs.TabBeatPreNotesGlyph",{inherits:[AlphaTab.Rendering.Glyphs.BeatGlyphBase],doLayout:function(){this.container.beat.brushType!==Bridge.get(AlphaTab.Model.BrushType).none&&(this.addGlyph(new AlphaTab.Rendering.Glyphs.TabBrushGlyph(this.container.beat)),this.addGlyph(new AlphaTab.Rendering.Glyphs.SpacingGlyph(0,0,4*this.getScale(),!0)));AlphaTab.Rendering.Glyphs.BeatGlyphBase.prototype.doLayout.call(this)}});Bridge.define("AlphaTab.Rendering.Glyphs.TabBeatPostNotesGlyph",{inherits:[AlphaTab.Rendering.Glyphs.BeatGlyphBase],doLayout:function(){for(var i=this.container.beat.notes.length-1;i>=0;i--)this.createNoteGlyphs(this.container.beat.notes[i]);this.addGlyph(new AlphaTab.Rendering.Glyphs.SpacingGlyph(0,0,this.getBeatDurationWidth()*this.getScale()));AlphaTab.Rendering.Glyphs.BeatGlyphBase.prototype.doLayout.call(this)},createNoteGlyphs:function(n){var trillNote,bendHeight;if(n.getIsTrill()){this.addGlyph(new AlphaTab.Rendering.Glyphs.SpacingGlyph(0,0,4*this.getScale()));trillNote=new AlphaTab.Model.Note;trillNote.isGhost=!0;trillNote.fret=n.getTrillFret();trillNote.string=n.string;var tr=this.renderer,trillNumberGlyph=new AlphaTab.Rendering.Glyphs.NoteNumberGlyph(0,0,trillNote,!0),l=n.beat.voice.bar.track.tuning.length-n.string;trillNumberGlyph.y=tr.getTabY(l);this.addGlyph(trillNumberGlyph)}n.getHasBend()&&(bendHeight=60*this.getScale(),this.renderer.registerOverflowTop(bendHeight),this.addGlyph(new AlphaTab.Rendering.Glyphs.BendGlyph(n,this.getBeatDurationWidth()*this.getScale(),bendHeight)))}});Bridge.define("AlphaTab.Rendering.Glyphs.TabBeatGlyph",{inherits:[AlphaTab.Rendering.Glyphs.BeatGlyphBase,AlphaTab.Rendering.Glyphs.ISupportsFinalize],config:{properties:{noteNumbers:null,beamingHelper:null}},doLayout:function(){var i,offset,speed,w,i1,j,g;if(!this.container.beat.getIsRest()){for(this.noteNumbers=new AlphaTab.Rendering.Glyphs.TabNoteChordGlyph(0,0,this.container.beat.graceType!==Bridge.get(AlphaTab.Model.GraceType).none),this.noteNumbers.beat=this.container.beat,this.noteNumbers.beamingHelper=this.beamingHelper,i=this.container.beat.notes.length-1;i>=0;i--)this.createNoteGlyph(this.container.beat.notes[i]);if(this.addGlyph(this.noteNumbers),this.container.beat.getHasWhammyBar()&&!this.noteNumbers.beatEffects.hasOwnProperty("Whammy")&&(this.noteNumbers.beatEffects.Whammy=new AlphaTab.Rendering.Glyphs.WhammyBarGlyph(this.container.beat,this.container)),this.container.beat.getIsTremolo()&&!this.noteNumbers.beatEffects.hasOwnProperty("Tremolo")){speed=Bridge.Nullable.getValue(this.container.beat.tremoloSpeed);switch(speed){case Bridge.get(AlphaTab.Model.Duration).thirtySecond:offset=10;break;case Bridge.get(AlphaTab.Model.Duration).sixteenth:offset=7;break;case Bridge.get(AlphaTab.Model.Duration).eighth:offset=3;break;default:offset=5}this.noteNumbers.beatEffects.Tremolo=new AlphaTab.Rendering.Glyphs.TremoloPickingGlyph(3*this.getScale(),offset*this.getScale(),Bridge.Nullable.getValue(this.container.beat.tremoloSpeed))}}if(this.glyphs!==null){for(w=0,i1=0,j=this.glyphs.length;i1<j;i1++)g=this.glyphs[i1],g.x=w,g.renderer=this.renderer,g.doLayout(),w+=g.width;this.width=w}},finalizeGlyph:function(){this.container.beat.getIsRest()||this.noteNumbers.updateBeamingHelper(this.container.x+this.x)},applyGlyphSpacing:function(spacing){AlphaTab.Rendering.Glyphs.BeatGlyphBase.prototype.applyGlyphSpacing.call(this,spacing);this.container.beat.getIsRest()||this.noteNumbers.updateBeamingHelper(this.container.x+this.x)},createNoteGlyph:function(n){var isGrace=this.container.beat.graceType!==Bridge.get(AlphaTab.Model.GraceType).none,tr=this.renderer,noteNumberGlyph=new AlphaTab.Rendering.Glyphs.NoteNumberGlyph(0,0,n,isGrace),l=n.beat.voice.bar.track.tuning.length-n.string+1;noteNumberGlyph.y=tr.getTabY(l,-2);this.noteNumbers.addNoteGlyph(noteNumberGlyph,n)}});Bridge.define("AlphaTab.Rendering.Glyphs.ScoreBeatPreNotesGlyph",{inherits:[AlphaTab.Rendering.Glyphs.BeatGlyphBase],applyGlyphSpacing:function(spacing){var $t,i,j;if(AlphaTab.Rendering.Glyphs.BeatGlyphBase.prototype.applyGlyphSpacing.call(this,spacing),this.glyphs!==null)for(i=0,j=this.glyphs.length;i<j;i++)$t=this.glyphs[i],$t.x+=spacing},doLayout:function(){var accidentals,i;if(this.container.beat.brushType!==Bridge.get(AlphaTab.Model.BrushType).none&&(this.addGlyph(new AlphaTab.Rendering.Glyphs.ScoreBrushGlyph(this.container.beat)),this.addGlyph(new AlphaTab.Rendering.Glyphs.SpacingGlyph(0,0,4*this.getScale()))),!this.container.beat.getIsRest()&&!this.container.beat.voice.bar.track.isPercussion){for(accidentals=new AlphaTab.Rendering.Glyphs.AccidentalGroupGlyph,i=this.container.beat.notes.length-1;i>=0;i--)this.createAccidentalGlyph(this.container.beat.notes[i],accidentals);this.addGlyph(accidentals)}this.addGlyph(new AlphaTab.Rendering.Glyphs.SpacingGlyph(0,0,4*(this.container.beat.graceType!==Bridge.get(AlphaTab.Model.GraceType).none?Bridge.get(AlphaTab.Rendering.Glyphs.NoteHeadGlyph).GraceScale:1)*this.getScale()));AlphaTab.Rendering.Glyphs.BeatGlyphBase.prototype.doLayout.call(this)},createAccidentalGlyph:function(n,accidentals){var sr=this.renderer,accidental=sr.accidentalHelper.applyAccidental(n),noteLine=sr.getNoteLine(n),isGrace=this.container.beat.graceType!==Bridge.get(AlphaTab.Model.GraceType).none;switch(accidental){case Bridge.get(AlphaTab.Model.AccidentalType).sharp:accidentals.addGlyph(new AlphaTab.Rendering.Glyphs.SharpGlyph(0,sr.getScoreY(noteLine),isGrace));break;case Bridge.get(AlphaTab.Model.AccidentalType).flat:accidentals.addGlyph(new AlphaTab.Rendering.Glyphs.FlatGlyph(0,sr.getScoreY(noteLine),isGrace));break;case Bridge.get(AlphaTab.Model.AccidentalType).natural:accidentals.addGlyph(new AlphaTab.Rendering.Glyphs.NaturalizeGlyph(0,sr.getScoreY(noteLine),isGrace))}}});Bridge.define("AlphaTab.Rendering.Glyphs.ScoreBeatPostNotesGlyph",{inherits:[AlphaTab.Rendering.Glyphs.BeatGlyphBase],doLayout:function(){this.addGlyph(new AlphaTab.Rendering.Glyphs.SpacingGlyph(0,0,this.getBeatDurationWidth()*this.getScale()));AlphaTab.Rendering.Glyphs.BeatGlyphBase.prototype.doLayout.call(this)}});Bridge.define("AlphaTab.Rendering.Glyphs.ScoreBeatGlyph",{inherits:[AlphaTab.Rendering.Glyphs.BeatGlyphBase],statics:{constructor:function(){var normalKeyNotes,i,xKeyNotes,i1;for(Bridge.get(AlphaTab.Rendering.Glyphs.ScoreBeatGlyph).normalKeys={},normalKeyNotes=[32,34,35,36,38,39,40,41,43,45,47,48,50,55,56,58,60,61],i=0;i<normalKeyNotes.length;i++)Bridge.get(AlphaTab.Rendering.Glyphs.ScoreBeatGlyph).normalKeys[normalKeyNotes[i]]=!0;for(Bridge.get(AlphaTab.Rendering.Glyphs.ScoreBeatGlyph).xKeys={},xKeyNotes=[31,33,37,42,44,54,62,63,64,65,66],i1=0;i1<xKeyNotes.length;i1++)Bridge.get(AlphaTab.Rendering.Glyphs.ScoreBeatGlyph).xKeys[xKeyNotes[i1]]=!0},normalKeys:null,xKeys:null},config:{properties:{noteHeads:null,restGlyph:null,beamingHelper:null}},finalizeGlyph:function(){this.container.beat.getIsRest()||this.noteHeads.updateBeamingHelper(this.container.x+this.x)},applyGlyphSpacing:function(spacing){AlphaTab.Rendering.Glyphs.BeatGlyphBase.prototype.applyGlyphSpacing.call(this,spacing);this.container.beat.getIsRest()||this.noteHeads.updateBeamingHelper(this.container.x+this.x)},doLayout:function(){var sr=this.renderer,i,i1,group,j,y,i2,group1;if(!this.container.beat.isEmpty)if(this.container.beat.getIsRest()){var dotLine=0,line=0,dotOffset=0;switch(this.container.beat.duration){case Bridge.get(AlphaTab.Model.Duration).whole:line=2;dotLine=4;break;case Bridge.get(AlphaTab.Model.Duration).half:line=4;dotLine=4;break;case Bridge.get(AlphaTab.Model.Duration).quarter:line=4;dotLine=3;dotOffset=3;break;case Bridge.get(AlphaTab.Model.Duration).eighth:line=3;dotLine=5;dotOffset=3;break;case Bridge.get(AlphaTab.Model.Duration).sixteenth:line=3;dotLine=5;dotOffset=3;break;case Bridge.get(AlphaTab.Model.Duration).thirtySecond:line=4;dotLine=3;dotOffset=2;break;case Bridge.get(AlphaTab.Model.Duration).sixtyFourth:line=4;dotLine=2;dotOffset=2}if(y=sr.getScoreY(line),this.addGlyph(new AlphaTab.Rendering.Glyphs.RestGlyph(0,y,this.container.beat.duration)),this.container.beat.dots>0)for(this.addGlyph(new AlphaTab.Rendering.Glyphs.SpacingGlyph(0,0,5*this.getScale(),!1)),i2=0;i2<this.container.beat.dots;i2++)group1=new AlphaTab.Rendering.Glyphs.GlyphGroup(0,0),this.createBeatDot(dotLine,dotOffset,group1),this.addGlyph(group1)}else{for(this.noteHeads=new AlphaTab.Rendering.Glyphs.ScoreNoteChordGlyph,this.noteHeads.beat=this.container.beat,this.noteHeads.beamingHelper=this.beamingHelper,i=this.container.beat.notes.length-1;i>=0;i--)this.createNoteGlyph(this.container.beat.notes[i]);if(this.addGlyph(this.noteHeads),this.container.beat.dots>0)for(this.addGlyph(new AlphaTab.Rendering.Glyphs.SpacingGlyph(0,0,5*this.getScale(),!1)),i1=0;i1<this.container.beat.dots;i1++){for(group=new AlphaTab.Rendering.Glyphs.GlyphGroup(0,0),j=this.container.beat.notes.length-1;j>=0;j--)this.createBeatDot(sr.getNoteLine(this.container.beat.notes[j]),2,group);this.addGlyph(group)}}AlphaTab.Rendering.Glyphs.BeatGlyphBase.prototype.doLayout.call(this);this.noteHeads!==null&&this.noteHeads.updateBeamingHelper(this.x)},createBeatDot:function(line,offset,group){var sr=this.renderer;group.addGlyph(new AlphaTab.Rendering.Glyphs.CircleGlyph(0,sr.getScoreY(line,offset+2),1.5*this.getScale()))},createNoteHeadGlyph:function(n){var isGrace=this.container.beat.graceType!==Bridge.get(AlphaTab.Model.GraceType).none,value;return n.beat.voice.bar.track.isPercussion?(value=n.getRealValue(),value<=30||value>=67||Bridge.get(AlphaTab.Rendering.Glyphs.ScoreBeatGlyph).normalKeys.hasOwnProperty(value))?new AlphaTab.Rendering.Glyphs.NoteHeadGlyph(Bridge.get(AlphaTab.Model.Duration).quarter,isGrace):Bridge.get(AlphaTab.Rendering.Glyphs.ScoreBeatGlyph).xKeys.hasOwnProperty(value)?new AlphaTab.Rendering.Glyphs.DrumSticksGlyph(isGrace):value===46?new AlphaTab.Rendering.Glyphs.HiHatGlyph(isGrace):value===49||value===57?new AlphaTab.Rendering.Glyphs.DiamondNoteHeadGlyph(isGrace):value===52?new AlphaTab.Rendering.Glyphs.ChineseCymbalGlyph(isGrace):value===51||value===53||value===59?new AlphaTab.Rendering.Glyphs.RideCymbalGlyph(isGrace):new AlphaTab.Rendering.Glyphs.NoteHeadGlyph(Bridge.get(AlphaTab.Model.Duration).quarter,isGrace):n.isDead?new AlphaTab.Rendering.Glyphs.DeadNoteHeadGlyph(isGrace):n.harmonicType===Bridge.get(AlphaTab.Model.HarmonicType).none?new AlphaTab.Rendering.Glyphs.NoteHeadGlyph(n.beat.duration,isGrace):new AlphaTab.Rendering.Glyphs.DiamondNoteHeadGlyph(isGrace)},createNoteGlyph:function(n){var sr=this.renderer,noteHeadGlyph=this.createNoteHeadGlyph(n),line=sr.getNoteLine(n);noteHeadGlyph.y=sr.getScoreY(line);this.noteHeads.addNoteGlyph(noteHeadGlyph,n,line);n.isStaccato&&!this.noteHeads.beatEffects.hasOwnProperty("Staccato")&&(this.noteHeads.beatEffects.Staccato=new AlphaTab.Rendering.Glyphs.CircleGlyph(0,0,1.5));n.accentuated!==Bridge.get(AlphaTab.Model.AccentuationType).normal||this.noteHeads.beatEffects.hasOwnProperty("Accent")||(this.noteHeads.beatEffects.Accent=new AlphaTab.Rendering.Glyphs.AccentuationGlyph(-5,0,Bridge.get(AlphaTab.Model.AccentuationType).normal));n.accentuated!==Bridge.get(AlphaTab.Model.AccentuationType).heavy||this.noteHeads.beatEffects.hasOwnProperty("HAccent")||(this.noteHeads.beatEffects.HAccent=new AlphaTab.Rendering.Glyphs.AccentuationGlyph(-4,0,Bridge.get(AlphaTab.Model.AccentuationType).heavy))}});Bridge.define("AlphaTab.Rendering.Glyphs.BeatContainerGlyph",{inherits:[AlphaTab.Rendering.Glyphs.Glyph,AlphaTab.Rendering.Glyphs.ISupportsFinalize],config:{properties:{beat:null,preNotes:null,onNotes:null,postNotes:null,ties:null}},constructor:function(beat){AlphaTab.Rendering.Glyphs.Glyph.prototype.$constructor.call(this,0,0);this.beat=beat;this.ties=[]},finalizeGlyph:function(layout){this.preNotes.finalizeGlyph(layout);this.onNotes.finalizeGlyph(layout);this.postNotes.finalizeGlyph(layout)},registerMaxSizes:function(sizes){sizes.getPreNoteSize(this.beat.start)<this.preNotes.width&&sizes.setPreNoteSize(this.beat.start,this.preNotes.width);sizes.getOnNoteSize(this.beat.start)<this.onNotes.width&&sizes.setOnNoteSize(this.beat.start,this.onNotes.width);sizes.getPostNoteSize(this.beat.start)<this.postNotes.width&&sizes.setPostNoteSize(this.beat.start,this.postNotes.width)},applySizes:function(sizes){var size,diff;size=sizes.getPreNoteSize(this.beat.start);diff=size-this.preNotes.width;this.preNotes.x=0;diff>0&&this.preNotes.applyGlyphSpacing(diff);size=sizes.getOnNoteSize(this.beat.start);diff=size-this.onNotes.width;this.onNotes.x=this.preNotes.x+this.preNotes.width;diff>0&&this.onNotes.applyGlyphSpacing(diff);size=sizes.getPostNoteSize(this.beat.start);diff=size-this.postNotes.width;this.postNotes.x=this.onNotes.x+this.onNotes.width;diff>0&&this.postNotes.applyGlyphSpacing(diff);this.width=this.calculateWidth()},calculateWidth:function(){return this.postNotes.x+this.postNotes.width},doLayout:function(){this.preNotes.x=0;this.preNotes.index=0;this.preNotes.renderer=this.renderer;this.preNotes.container=this;this.preNotes.doLayout();this.onNotes.x=this.preNotes.x+this.preNotes.width;this.onNotes.index=1;this.onNotes.renderer=this.renderer;this.onNotes.container=this;this.onNotes.doLayout();this.postNotes.x=this.onNotes.x+this.onNotes.width;this.postNotes.index=2;this.postNotes.renderer=this.renderer;this.postNotes.container=this;this.postNotes.doLayout();for(var i=this.beat.notes.length-1;i>=0;)this.createTies(this.beat.notes[i--]);this.width=this.calculateWidth()},createTies:function(){},paint:function(cx,cy,canvas){var i,j,t;for(this.preNotes.paint(cx+this.x,cy+this.y,canvas),this.onNotes.paint(cx+this.x,cy+this.y,canvas),this.postNotes.paint(cx+this.x,cy+this.y,canvas),i=0,j=this.ties.length;i<j;i++)t=this.ties[i],t.renderer=this.renderer,t.doLayout(),t.paint(cx,cy+this.y,canvas)}});Bridge.define("AlphaTab.Rendering.ScoreBeatContainerGlyph",{inherits:[AlphaTab.Rendering.Glyphs.BeatContainerGlyph],constructor:function(beat){AlphaTab.Rendering.Glyphs.BeatContainerGlyph.prototype.$constructor.call(this,beat)},createTies:function(n){var tie,tie1,tie2,tie3,l;n.isTieOrigin&&(tie=new AlphaTab.Rendering.Glyphs.ScoreTieGlyph(n,n.tieDestination,this),this.ties.push(tie));n.isTieDestination?(tie1=new AlphaTab.Rendering.Glyphs.ScoreTieGlyph(n.tieOrigin,n,this,!0),this.ties.push(tie1)):n.isHammerPullOrigin?(tie2=new AlphaTab.Rendering.Glyphs.ScoreTieGlyph(n,n.hammerPullDestination,this),this.ties.push(tie2)):n.slideType===Bridge.get(AlphaTab.Model.SlideType).legato&&(tie3=new AlphaTab.Rendering.Glyphs.ScoreTieGlyph(n,n.slideTarget,this),this.ties.push(tie3));n.slideType!==Bridge.get(AlphaTab.Model.SlideType).none&&(l=new AlphaTab.Rendering.Glyphs.ScoreSlideLineGlyph(n.slideType,n,this),this.ties.push(l))}});Bridge.define("AlphaTab.Rendering.Glyphs.TabBeatContainerGlyph",{inherits:[AlphaTab.Rendering.Glyphs.BeatContainerGlyph],constructor:function(beat){AlphaTab.Rendering.Glyphs.BeatContainerGlyph.prototype.$constructor.call(this,beat)},createTies:function(n){var tie,tie1,l;n.isHammerPullOrigin?(tie=new AlphaTab.Rendering.Glyphs.TabTieGlyph(n,n.hammerPullDestination,this),this.ties.push(tie)):n.slideType===Bridge.get(AlphaTab.Model.SlideType).legato&&(tie1=new AlphaTab.Rendering.Glyphs.TabTieGlyph(n,n.slideTarget,this),this.ties.push(tie1));n.slideType!==Bridge.get(AlphaTab.Model.SlideType).none&&(l=new AlphaTab.Rendering.Glyphs.TabSlideLineGlyph(n.slideType,n,this),this.ties.push(l))}});Bridge.define("AlphaTab.Rendering.Glyphs.LazySvg",{_raw:null,_parsed:null,constructor:function(raw){this._raw=raw},getCommands:function(){return this._parsed===null&&this.parse(),this._parsed},parse:function(){var parser=new AlphaTab.Rendering.Utils.SvgPathParser(this._raw),command;for(parser.reset(),this._parsed=[];!parser.getEof();){command=new AlphaTab.Rendering.Glyphs.SvgCommand;this._parsed.push(command);command.cmd=parser.getString();switch(command.cmd){case"M":command.numbers=[];command.numbers.push(parser.getNumber());command.numbers.push(parser.getNumber());break;case"m":command.numbers=[];command.numbers.push(parser.getNumber());command.numbers.push(parser.getNumber());break;case"L":command.numbers=[];do command.numbers.push(parser.getNumber()),command.numbers.push(parser.getNumber());while(parser.getCurrentTokenIsNumber());break;case"l":command.numbers=[];do command.numbers.push(parser.getNumber()),command.numbers.push(parser.getNumber());while(parser.getCurrentTokenIsNumber());break;case"V":command.numbers=[];do command.numbers.push(parser.getNumber());while(parser.getCurrentTokenIsNumber());break;case"v":command.numbers=[];do command.numbers.push(parser.getNumber());while(parser.getCurrentTokenIsNumber());break;case"H":command.numbers=[];do command.numbers.push(parser.getNumber());while(parser.getCurrentTokenIsNumber());break;case"h":command.numbers=[];do command.numbers.push(parser.getNumber());while(parser.getCurrentTokenIsNumber());break;case"C":command.numbers=[];do command.numbers.push(parser.getNumber()),command.numbers.push(parser.getNumber()),command.numbers.push(parser.getNumber()),command.numbers.push(parser.getNumber()),command.numbers.push(parser.getNumber()),command.numbers.push(parser.getNumber());while(parser.getCurrentTokenIsNumber());break;case"c":command.numbers=[];do command.numbers.push(parser.getNumber()),command.numbers.push(parser.getNumber()),command.numbers.push(parser.getNumber()),command.numbers.push(parser.getNumber()),command.numbers.push(parser.getNumber()),command.numbers.push(parser.getNumber());while(parser.getCurrentTokenIsNumber());break;case"S":command.numbers=[];do command.numbers.push(parser.getNumber()),command.numbers.push(parser.getNumber()),command.numbers.push(parser.getNumber()),command.numbers.push(parser.getNumber());while(parser.getCurrentTokenIsNumber());break;case"s":command.numbers=[];do command.numbers.push(parser.getNumber()),command.numbers.push(parser.getNumber()),command.numbers.push(parser.getNumber()),command.numbers.push(parser.getNumber());while(parser.getCurrentTokenIsNumber());break;case"Q":command.numbers=[];do command.numbers.push(parser.getNumber()),command.numbers.push(parser.getNumber()),command.numbers.push(parser.getNumber()),command.numbers.push(parser.getNumber());while(parser.getCurrentTokenIsNumber());break;case"q":command.numbers=[];do command.numbers.push(parser.getNumber()),command.numbers.push(parser.getNumber()),command.numbers.push(parser.getNumber()),command.numbers.push(parser.getNumber());while(parser.getCurrentTokenIsNumber());break;case"T":command.numbers=[];do command.numbers.push(parser.getNumber()),command.numbers.push(parser.getNumber());while(parser.getCurrentTokenIsNumber());break;case"t":command.numbers=[];do command.numbers.push(parser.getNumber()),command.numbers.push(parser.getNumber());while(parser.getCurrentTokenIsNumber())}}this._raw=null}});Bridge.define("AlphaTab.Rendering.Glyphs.FlatGlyph",{inherits:[AlphaTab.Rendering.Glyphs.MusicFontGlyph],_isGrace:!1,constructor:function(x,y,isGrace){AlphaTab.Rendering.Glyphs.MusicFontGlyph.prototype.$constructor.call(this,x,y,isGrace?Bridge.get(AlphaTab.Rendering.Glyphs.NoteHeadGlyph).GraceScale:1,Bridge.get(AlphaTab.Rendering.Glyphs.MusicFontSymbol).accidentalFlat);isGrace===void 0&&(isGrace=!1);this._isGrace=isGrace},getCanScale:function(){return!1},doLayout:function(){this.width=8*(this._isGrace?Bridge.get(AlphaTab.Rendering.Glyphs.NoteHeadGlyph).GraceScale:1)*this.getScale()}});Bridge.define("AlphaTab.Rendering.Glyphs.HiHatGlyph",{inherits:[AlphaTab.Rendering.Glyphs.NoteHeadGlyphBase],constructor:function(isGrace){AlphaTab.Rendering.Glyphs.NoteHeadGlyphBase.prototype.$constructor.call(this,isGrace,Bridge.get(AlphaTab.Rendering.Glyphs.MusicFontSymbol).noteHiHat)},doLayout:function(){this.width=9}});Bridge.define("AlphaTab.Rendering.Glyphs.DrumSticksGlyph",{inherits:[AlphaTab.Rendering.Glyphs.NoteHeadGlyphBase],constructor:function(isGrace){AlphaTab.Rendering.Glyphs.NoteHeadGlyphBase.prototype.$constructor.call(this,isGrace,Bridge.get(AlphaTab.Rendering.Glyphs.MusicFontSymbol).noteSideStick)},doLayout:function(){this.width=9;AlphaTab.Rendering.Glyphs.NoteHeadGlyphBase.prototype.doLayout.call(this)}});Bridge.define("AlphaTab.Rendering.Glyphs.DiamondNoteHeadGlyph",{inherits:[AlphaTab.Rendering.Glyphs.NoteHeadGlyphBase],constructor:function(isGrace){AlphaTab.Rendering.Glyphs.NoteHeadGlyphBase.prototype.$constructor.call(this,isGrace,Bridge.get(AlphaTab.Rendering.Glyphs.MusicFontSymbol).noteHarmonic)},doLayout:function(){this.width=12}});Bridge.define("AlphaTab.Rendering.Glyphs.DeadNoteHeadGlyph",{inherits:[AlphaTab.Rendering.Glyphs.NoteHeadGlyphBase],constructor:function(isGrace){AlphaTab.Rendering.Glyphs.NoteHeadGlyphBase.prototype.$constructor.call(this,isGrace,Bridge.get(AlphaTab.Rendering.Glyphs.MusicFontSymbol).noteDead)},doLayout:function(){this.width=7}});Bridge.define("AlphaTab.Rendering.Glyphs.ChineseCymbalGlyph",{inherits:[AlphaTab.Rendering.Glyphs.NoteHeadGlyphBase],_isGrace:!1,constructor:function(isGrace){AlphaTab.Rendering.Glyphs.NoteHeadGlyphBase.prototype.$constructor.call(this,isGrace,Bridge.get(AlphaTab.Rendering.Glyphs.MusicFontSymbol).noteHarmonic)},doLayout:function(){this.width=9}});Bridge.define("AlphaTab.Rendering.Glyphs.ScoreNoteGlyphInfo",{config:{properties:{glyph:null,line:0}},constructor:function(glyph,line){this.glyph=glyph;this.line=line}});Bridge.define("AlphaTab.Rendering.Glyphs.SvgCommand",{config:{properties:{cmd:null,numbers:null}}});Bridge.define("AlphaTab.Rendering.EffectBarRenderer",{inherits:[AlphaTab.Rendering.GroupedBarRenderer],_info:null,_uniqueEffectGlyphs:null,_effectGlyphs:null,_lastBeat:null,constructor:function(bar,info){AlphaTab.Rendering.GroupedBarRenderer.prototype.$constructor.call(this,bar);this._info=info;this._uniqueEffectGlyphs=[];this._effectGlyphs=[]},getTopPadding:function(){return 0},getBottomPadding:function(){return 0},doLayout:function(){this.height=this._info.getHeight(this);this.index===0&&(this.stave.topSpacing=5,this.stave.bottomSpacing=5);AlphaTab.Rendering.GroupedBarRenderer.prototype.doLayout.call(this)},finalizeRenderer:function(layout){var $t,prevGlyph,prevRenderer;for(AlphaTab.Rendering.GroupedBarRenderer.prototype.finalizeRenderer.call(this,layout),this.isEmpty=!0,prevGlyph=null,this.index>0&&(prevRenderer=this.stave.barRenderers[this.index-1],prevRenderer._lastBeat!==null&&prevRenderer._effectGlyphs[0].hasOwnProperty(prevRenderer._lastBeat.index)&&(prevGlyph=prevRenderer._effectGlyphs[0][prevRenderer._lastBeat.index])),$t=Bridge.getEnumerator(Object.keys(this._effectGlyphs[0]));$t.moveNext();){var key=$t.getCurrent(),beatIndex=parseInt(key),effect=this._effectGlyphs[0][beatIndex];this.alignGlyph(this._info.getSizingMode(),beatIndex,0,prevGlyph);prevGlyph=effect;this.isEmpty=!1}},alignGlyph:function(sizing,beatIndex,voiceIndex,prevGlyph){var g=this._effectGlyphs[voiceIndex][beatIndex],pos,container=this.getBeatContainer(voiceIndex,beatIndex),posR,gR,posR1,gR1,posR2,gR2,posR3,gR3,posR4,gR4,posR5,gR5;switch(sizing){case Bridge.get(AlphaTab.Rendering.EffectBarGlyphSizing).singlePreBeatOnly:pos=container.preNotes;g.x=pos.x+container.x;g.width=pos.width;break;case Bridge.get(AlphaTab.Rendering.EffectBarGlyphSizing).singlePreBeatToOnBeat:pos=container.preNotes;g.x=pos.x+container.x;pos=container.onNotes;g.width=pos.x+container.x+pos.width-g.x;break;case Bridge.get(AlphaTab.Rendering.EffectBarGlyphSizing).singlePreBeatToPostBeat:pos=container.preNotes;g.x=pos.x+container.x;pos=container.postNotes;g.width=pos.x+container.x+pos.width-g.x;break;case Bridge.get(AlphaTab.Rendering.EffectBarGlyphSizing).singleOnBeatOnly:pos=container.onNotes;g.x=pos.x+container.x;g.width=pos.width;break;case Bridge.get(AlphaTab.Rendering.EffectBarGlyphSizing).singleOnBeatToPostBeat:pos=container.onNotes;g.x=pos.x+container.x;pos=container.postNotes;g.width=pos.x+container.x+pos.width-g.x;break;case Bridge.get(AlphaTab.Rendering.EffectBarGlyphSizing).singlePostBeatOnly:pos=container.postNotes;g.x=pos.x+container.x;g.width=pos.width;break;case Bridge.get(AlphaTab.Rendering.EffectBarGlyphSizing).groupedPreBeatOnly:g!==prevGlyph?this.alignGlyph(Bridge.get(AlphaTab.Rendering.EffectBarGlyphSizing).singlePreBeatOnly,beatIndex,voiceIndex,prevGlyph):(pos=container.preNotes,posR=pos.renderer,gR=g.renderer,g.width=posR.x+posR.getBeatGlyphsStart()+container.x+pos.x+pos.width-(gR.x+gR.getBeatGlyphsStart()+g.x),g.expandTo(container.beat));break;case Bridge.get(AlphaTab.Rendering.EffectBarGlyphSizing).groupedPreBeatToOnBeat:g!==prevGlyph?this.alignGlyph(Bridge.get(AlphaTab.Rendering.EffectBarGlyphSizing).singlePreBeatToOnBeat,beatIndex,voiceIndex,prevGlyph):(pos=container.onNotes,posR1=pos.renderer,gR1=g.renderer,g.width=posR1.x+posR1.getBeatGlyphsStart()+container.x+pos.x+pos.width-(gR1.x+gR1.getBeatGlyphsStart()+g.x),g.expandTo(container.beat));break;case Bridge.get(AlphaTab.Rendering.EffectBarGlyphSizing).groupedPreBeatToPostBeat:g!==prevGlyph?this.alignGlyph(Bridge.get(AlphaTab.Rendering.EffectBarGlyphSizing).singlePreBeatToPostBeat,beatIndex,voiceIndex,prevGlyph):(pos=container.postNotes,posR2=pos.renderer,gR2=g.renderer,g.width=posR2.x+posR2.getBeatGlyphsStart()+container.x+pos.x+pos.width-(gR2.x+gR2.getBeatGlyphsStart()+g.x),g.expandTo(container.beat));break;case Bridge.get(AlphaTab.Rendering.EffectBarGlyphSizing).groupedOnBeatOnly:g!==prevGlyph?this.alignGlyph(Bridge.get(AlphaTab.Rendering.EffectBarGlyphSizing).singleOnBeatOnly,beatIndex,voiceIndex,prevGlyph):(pos=container.onNotes,posR3=pos.renderer,gR3=g.renderer,g.width=posR3.x+posR3.getBeatGlyphsStart()+container.x+pos.x+pos.width-(gR3.x+gR3.getBeatGlyphsStart()+g.x),g.expandTo(container.beat));break;case Bridge.get(AlphaTab.Rendering.EffectBarGlyphSizing).groupedOnBeatToPostBeat:g!==prevGlyph?this.alignGlyph(Bridge.get(AlphaTab.Rendering.EffectBarGlyphSizing).singleOnBeatToPostBeat,beatIndex,voiceIndex,prevGlyph):(pos=container.postNotes,posR4=pos.renderer,gR4=g.renderer,g.width=posR4.x+posR4.getBeatGlyphsStart()+container.x+pos.x+pos.width-(gR4.x+gR4.getBeatGlyphsStart()+g.x),g.expandTo(container.beat));break;case Bridge.get(AlphaTab.Rendering.EffectBarGlyphSizing).groupedPostBeatOnly:g!==prevGlyph?this.alignGlyph(Bridge.get(AlphaTab.Rendering.EffectBarGlyphSizing).groupedPostBeatOnly,beatIndex,voiceIndex,prevGlyph):(pos=container.postNotes,posR5=pos.renderer,gR5=g.renderer,g.width=posR5.x+posR5.getBeatGlyphsStart()+container.x+pos.x+pos.width-(gR5.x+gR5.getBeatGlyphsStart()+g.x),g.expandTo(container.beat))}},createPreBeatGlyphs:function(){},createBeatGlyphs:function(){this._effectGlyphs.push({});this._uniqueEffectGlyphs.push([]);this.createVoiceGlyphs(this.bar.voices[0])},createVoiceGlyphs:function(v){for(var b,container,i=0,j=v.beats.length;i<j;i++)b=v.beats[i],container=new AlphaTab.Rendering.Glyphs.BeatContainerGlyph(b),container.preNotes=new AlphaTab.Rendering.Glyphs.BeatGlyphBase,container.onNotes=new AlphaTab.Rendering.Glyphs.BeatGlyphBase,container.postNotes=new AlphaTab.Rendering.Glyphs.BeatGlyphBase,this.addBeatGlyph(container),this._info.shouldCreateGlyph(this,b)&&this.createOrResizeGlyph(this._info.getSizingMode(),b),this._lastBeat=b},createOrResizeGlyph:function(sizing,b){var g,prevBeat,previousRenderer,prevEffect,voiceGlyphs;switch(sizing){case Bridge.get(AlphaTab.Rendering.EffectBarGlyphSizing).singlePreBeatOnly:case Bridge.get(AlphaTab.Rendering.EffectBarGlyphSizing).singlePreBeatToOnBeat:case Bridge.get(AlphaTab.Rendering.EffectBarGlyphSizing).singlePreBeatToPostBeat:case Bridge.get(AlphaTab.Rendering.EffectBarGlyphSizing).singleOnBeatOnly:case Bridge.get(AlphaTab.Rendering.EffectBarGlyphSizing).singleOnBeatToPostBeat:case Bridge.get(AlphaTab.Rendering.EffectBarGlyphSizing).singlePostBeatOnly:g=this._info.createNewGlyph(this,b);g.renderer=this;g.doLayout();this._effectGlyphs[b.voice.index][b.index]=g;this._uniqueEffectGlyphs[b.voice.index].push(g);break;case Bridge.get(AlphaTab.Rendering.EffectBarGlyphSizing).groupedPreBeatOnly:case Bridge.get(AlphaTab.Rendering.EffectBarGlyphSizing).groupedPreBeatToOnBeat:case Bridge.get(AlphaTab.Rendering.EffectBarGlyphSizing).groupedPreBeatToPostBeat:case Bridge.get(AlphaTab.Rendering.EffectBarGlyphSizing).groupedOnBeatOnly:case Bridge.get(AlphaTab.Rendering.EffectBarGlyphSizing).groupedOnBeatToPostBeat:case Bridge.get(AlphaTab.Rendering.EffectBarGlyphSizing).groupedPostBeatOnly:b.index>0||this.index>0?(prevBeat=b.previousBeat,this._info.shouldCreateGlyph(this,prevBeat)?(previousRenderer=null,prevEffect=null,b.index>0&&this._effectGlyphs[b.voice.index].hasOwnProperty(prevBeat.index)?prevEffect=this._effectGlyphs[b.voice.index][prevBeat.index]:this.index>0&&(previousRenderer=this.stave.barRenderers[this.index-1],voiceGlyphs=previousRenderer._effectGlyphs[b.voice.index],voiceGlyphs.hasOwnProperty(prevBeat.index)&&(prevEffect=voiceGlyphs[prevBeat.index])),prevEffect!==null&&this._info.canExpand(this,prevBeat,b)?(this._effectGlyphs[b.voice.index][b.index]=prevEffect,previousRenderer!==null&&(this.isLinkedToPrevious=!0)):this.createOrResizeGlyph(Bridge.get(AlphaTab.Rendering.EffectBarGlyphSizing).singlePreBeatOnly,b)):this.createOrResizeGlyph(Bridge.get(AlphaTab.Rendering.EffectBarGlyphSizing).singlePreBeatOnly,b)):this.createOrResizeGlyph(Bridge.get(AlphaTab.Rendering.EffectBarGlyphSizing).singlePreBeatOnly,b)}},createPostBeatGlyphs:function(){},paint:function(cx,cy,canvas){var glyphStart,i,j,v,k,l,g;for(AlphaTab.Rendering.GroupedBarRenderer.prototype.paint.call(this,cx,cy,canvas),canvas.setColor(this.getResources().mainGlyphColor),glyphStart=this.getBeatGlyphsStart(),i=0,j=this._uniqueEffectGlyphs.length;i<j;i++)for(v=this._uniqueEffectGlyphs[i],k=0,l=v.length;k<l;k++)g=v[k],g.renderer===this&&g.paint(cx+this.x+glyphStart,cy+this.y,canvas)}});Bridge.define("AlphaTab.Rendering.AlternateEndingsBarRenderer",{inherits:[AlphaTab.Rendering.GroupedBarRenderer],statics:{Padding:3},_endings:null,_endingsString:null,constructor:function(bar){var alternateEndings,i;for(AlphaTab.Rendering.GroupedBarRenderer.prototype.$constructor.call(this,bar),alternateEndings=this.bar.getMasterBar().alternateEndings,this._endings=[],i=0;i<Bridge.get(AlphaTab.Model.MasterBar).MaxAlternateEndings;i++)(alternateEndings&1<<i)!=0&&this._endings.push(i)},getTopPadding:function(){return 0},getBottomPadding:function(){return 0},finalizeRenderer:function(layout){AlphaTab.Rendering.GroupedBarRenderer.prototype.finalizeRenderer.call(this,layout);this.isEmpty=this._endings.length===0},createBeatGlyphs:function(){this.createVoiceGlyphs(this.bar.voices[0])},createVoiceGlyphs:function(voice){for(var b,container,i=0,j=voice.beats.length;i<j;i++)b=voice.beats[i],container=new AlphaTab.Rendering.Glyphs.BeatContainerGlyph(b),container.preNotes=new AlphaTab.Rendering.Glyphs.BeatGlyphBase,container.onNotes=new AlphaTab.Rendering.Glyphs.BeatGlyphBase,container.postNotes=new AlphaTab.Rendering.Glyphs.BeatGlyphBase,this.addBeatGlyph(container)},doLayout:function(){var endingsStrings,i,j;for(AlphaTab.Rendering.GroupedBarRenderer.prototype.doLayout.call(this),this.index===0&&(this.stave.topSpacing=5,this.stave.bottomSpacing=4),this.height=this.getResources().wordsFont.size,endingsStrings=[],i=0,j=this._endings.length;i<j;i++)endingsStrings.push(this._endings[i]+1),endingsStrings.push(". ");this._endingsString=endingsStrings.join("")},applySizes:function(sizes){AlphaTab.Rendering.GroupedBarRenderer.prototype.applySizes.call(this,sizes);this.width=sizes.fullWidth},paint:function(cx,cy,canvas){if(AlphaTab.Rendering.GroupedBarRenderer.prototype.paint.call(this,cx,cy,canvas),this._endings.length>0){var res=this.getResources();canvas.setFont(res.wordsFont);canvas.moveTo(cx+this.x,cy+this.y+this.height);canvas.lineTo(cx+this.x,cy+this.y);canvas.lineTo(cx+this.x+this.width,cy+this.y);canvas.stroke();canvas.fillText(this._endingsString,cx+this.x+Bridge.get(AlphaTab.Rendering.AlternateEndingsBarRenderer).Padding*this.getScale(),cy+this.y*this.getScale())}}});Bridge.define("AlphaTab.Rendering.IEffectBarRendererInfo");Bridge.define("AlphaTab.Rendering.Effects.NoteEffectInfoBase",{inherits:[AlphaTab.Rendering.IEffectBarRendererInfo],lastCreateInfo:null,getHideOnMultiTrack:function(){return!1},shouldCreateGlyph:function(renderer,beat){var i,j,n;for(this.lastCreateInfo=[],i=0,j=beat.notes.length;i<j;i++)n=beat.notes[i],this.shouldCreateGlyphForNote(renderer,n)&&this.lastCreateInfo.push(n);return this.lastCreateInfo.length>0},canExpand:function(){return!0}});Bridge.define("AlphaTab.Rendering.Effects.TrillEffectInfo",{inherits:[AlphaTab.Rendering.Effects.NoteEffectInfoBase],getSizingMode:function(){return Bridge.get(AlphaTab.Rendering.EffectBarGlyphSizing).singleOnBeatToPostBeat},shouldCreateGlyphForNote:function(renderer,note){return note.getIsTrill()},getHeight:function(renderer){return 20*renderer.getScale()},createNewGlyph:function(){return new AlphaTab.Rendering.Glyphs.TrillGlyph(0,0)}});Bridge.define("AlphaTab.Rendering.Effects.PalmMuteEffectInfo",{inherits:[AlphaTab.Rendering.Effects.NoteEffectInfoBase],getSizingMode:function(){return Bridge.get(AlphaTab.Rendering.EffectBarGlyphSizing).groupedOnBeatToPostBeat},shouldCreateGlyphForNote:function(renderer,note){return note.isPalmMute},getHeight:function(renderer){return 20*renderer.getScale()},createNewGlyph:function(){return new AlphaTab.Rendering.Glyphs.LineRangedGlyph(0,0,"PalmMute")}});Bridge.define("AlphaTab.Rendering.Effects.NoteVibratoEffectInfo",{inherits:[AlphaTab.Rendering.Effects.NoteEffectInfoBase],getSizingMode:function(){return Bridge.get(AlphaTab.Rendering.EffectBarGlyphSizing).groupedOnBeatToPostBeat},shouldCreateGlyphForNote:function(renderer,note){return note.vibrato!==Bridge.get(AlphaTab.Model.VibratoType).none||note.isTieDestination&&note.tieOrigin.vibrato!==Bridge.get(AlphaTab.Model.VibratoType).none},getHeight:function(renderer){return 15*renderer.getScale()},createNewGlyph:function(renderer){return new AlphaTab.Rendering.Glyphs.VibratoGlyph(0,5*renderer.getScale())}});Bridge.define("AlphaTab.Rendering.Effects.TripletFeelEffectInfo",{inherits:[AlphaTab.Rendering.IEffectBarRendererInfo],getHideOnMultiTrack:function(){return!0},getSizingMode:function(){return Bridge.get(AlphaTab.Rendering.EffectBarGlyphSizing).singleOnBeatOnly},shouldCreateGlyph:function(renderer,beat){return beat.index===0&&beat.voice.bar.getMasterBar().index===0&&beat.voice.bar.getMasterBar().tripletFeel!==Bridge.get(AlphaTab.Model.TripletFeel).noTripletFeel||beat.voice.bar.getMasterBar().index>0&&beat.voice.bar.getMasterBar().tripletFeel!==beat.voice.bar.getMasterBar().previousMasterBar.tripletFeel},getHeight:function(renderer){return 20*renderer.getScale()},createNewGlyph:function(){return new AlphaTab.Rendering.Effects.DummyEffectGlyph(0,0,"TripletFeel")},canExpand:function(){return!0}});Bridge.define("AlphaTab.Rendering.Effects.TextEffectInfo",{inherits:[AlphaTab.Rendering.IEffectBarRendererInfo],getHideOnMultiTrack:function(){return!1},getSizingMode:function(){return Bridge.get(AlphaTab.Rendering.EffectBarGlyphSizing).singleOnBeatOnly},shouldCreateGlyph:function(renderer,beat){return!(!beat.text||beat.text.trim().length==0)},getHeight:function(renderer){return 20*renderer.getScale()},createNewGlyph:function(renderer,beat){return new AlphaTab.Rendering.Glyphs.TextGlyph(0,0,beat.text,renderer.getResources().effectFont)},canExpand:function(){return!0}});Bridge.define("AlphaTab.Rendering.Effects.TempoEffectInfo",{inherits:[AlphaTab.Rendering.IEffectBarRendererInfo],getHideOnMultiTrack:function(){return!0},getSizingMode:function(){return Bridge.get(AlphaTab.Rendering.EffectBarGlyphSizing).singlePreBeatOnly},shouldCreateGlyph:function(renderer,beat){return beat.index===0&&(beat.voice.bar.getMasterBar().tempoAutomation!==null||beat.voice.bar.index===0)},getHeight:function(renderer){return 25*renderer.getScale()},createNewGlyph:function(renderer,beat){var tempo;return tempo=beat.voice.bar.getMasterBar().tempoAutomation!==null?beat.voice.bar.getMasterBar().tempoAutomation.value:beat.voice.bar.track.score.tempo,new AlphaTab.Rendering.Glyphs.TempoGlyph(0,0,tempo)},canExpand:function(){return!0}});Bridge.define("AlphaTab.Rendering.Effects.TapEffectInfo",{inherits:[AlphaTab.Rendering.IEffectBarRendererInfo],getHideOnMultiTrack:function(){return!1},getSizingMode:function(){return Bridge.get(AlphaTab.Rendering.EffectBarGlyphSizing).singleOnBeatOnly},shouldCreateGlyph:function(renderer,beat){return beat.slap||beat.pop||beat.tap},getHeight:function(renderer){return 20*renderer.getScale()},createNewGlyph:function(renderer,beat){var res=renderer.getResources();return beat.slap?new AlphaTab.Rendering.Glyphs.TextGlyph(0,0,"S",res.effectFont):beat.pop?new AlphaTab.Rendering.Glyphs.TextGlyph(0,0,"P",res.effectFont):new AlphaTab.Rendering.Glyphs.TextGlyph(0,0,"T",res.effectFont)},canExpand:function(){return!0}});Bridge.define("AlphaTab.Rendering.Effects.PickStrokeEffectInfo",{inherits:[AlphaTab.Rendering.IEffectBarRendererInfo],getHideOnMultiTrack:function(){return!1},getSizingMode:function(){return Bridge.get(AlphaTab.Rendering.EffectBarGlyphSizing).singleOnBeatOnly},shouldCreateGlyph:function(renderer,beat){return beat.pickStroke!==Bridge.get(AlphaTab.Model.PickStrokeType).none},getHeight:function(renderer){return 20*renderer.getScale()},createNewGlyph:function(renderer,beat){return new AlphaTab.Rendering.Glyphs.PickStrokeGlyph(0,0,beat.pickStroke)},canExpand:function(){return!0}});Bridge.define("AlphaTab.Rendering.Effects.MarkerEffectInfo",{inherits:[AlphaTab.Rendering.IEffectBarRendererInfo],getHideOnMultiTrack:function(){return!0},getSizingMode:function(){return Bridge.get(AlphaTab.Rendering.EffectBarGlyphSizing).singlePreBeatOnly},shouldCreateGlyph:function(renderer,beat){return beat.index===0&&beat.voice.bar.getMasterBar().getIsSectionStart()},getHeight:function(renderer){return 20*renderer.getScale()},createNewGlyph:function(renderer,beat){return new AlphaTab.Rendering.Glyphs.TextGlyph(0,0,beat.voice.bar.getMasterBar().section.text,renderer.getResources().markerFont)},canExpand:function(){return!0}});Bridge.define("AlphaTab.Rendering.Effects.FadeInEffectInfo",{inherits:[AlphaTab.Rendering.IEffectBarRendererInfo],getHideOnMultiTrack:function(){return!1},getSizingMode:function(){return Bridge.get(AlphaTab.Rendering.EffectBarGlyphSizing).singleOnBeatOnly},shouldCreateGlyph:function(renderer,beat){return beat.fadeIn},getHeight:function(renderer){return 20*renderer.getScale()},createNewGlyph:function(){return new AlphaTab.Rendering.Glyphs.FadeInGlyph(0,0)},canExpand:function(){return!0}});Bridge.define("AlphaTab.Rendering.Effects.DynamicsEffectInfo",{inherits:[AlphaTab.Rendering.IEffectBarRendererInfo],getHideOnMultiTrack:function(){return!1},getSizingMode:function(){return Bridge.get(AlphaTab.Rendering.EffectBarGlyphSizing).singleOnBeatOnly},shouldCreateGlyph:function(renderer,beat){return beat.voice.index===0&&(beat.index===0&&beat.voice.bar.index===0||beat.previousBeat!==null&&beat.dynamic!==beat.previousBeat.dynamic)},getHeight:function(renderer){return 15*renderer.getScale()},createNewGlyph:function(renderer,beat){return new AlphaTab.Rendering.Glyphs.DynamicsGlyph(0,0,beat.dynamic)},canExpand:function(){return!0}});Bridge.define("AlphaTab.Rendering.Effects.CrescendoEffectInfo",{inherits:[AlphaTab.Rendering.IEffectBarRendererInfo],getHideOnMultiTrack:function(){return!1},getSizingMode:function(){return Bridge.get(AlphaTab.Rendering.EffectBarGlyphSizing).groupedPreBeatToPostBeat},shouldCreateGlyph:function(renderer,beat){return beat.crescendo!==Bridge.get(AlphaTab.Model.CrescendoType).none},getHeight:function(renderer){return Bridge.get(AlphaTab.Rendering.Glyphs.CrescendoGlyph).Height*renderer.getScale()},createNewGlyph:function(renderer,beat){return new AlphaTab.Rendering.Glyphs.CrescendoGlyph(0,0,beat.crescendo)},canExpand:function(renderer,from,to){return from.crescendo===to.crescendo}});Bridge.define("AlphaTab.Rendering.Effects.ChordsEffectInfo",{inherits:[AlphaTab.Rendering.IEffectBarRendererInfo],getHideOnMultiTrack:function(){return!1},getSizingMode:function(){return Bridge.get(AlphaTab.Rendering.EffectBarGlyphSizing).singleOnBeatOnly},shouldCreateGlyph:function(renderer,beat){return beat.getHasChord()},getHeight:function(renderer){return 20*renderer.getScale()},createNewGlyph:function(renderer,beat){return new AlphaTab.Rendering.Glyphs.TextGlyph(0,0,beat.getChord().name,renderer.getResources().effectFont)},canExpand:function(){return!0}});Bridge.define("AlphaTab.Rendering.Effects.BeatVibratoEffectInfo",{inherits:[AlphaTab.Rendering.IEffectBarRendererInfo],getHideOnMultiTrack:function(){return!1},getSizingMode:function(){return Bridge.get(AlphaTab.Rendering.EffectBarGlyphSizing).groupedOnBeatToPostBeat},shouldCreateGlyph:function(renderer,beat){return beat.vibrato!==Bridge.get(AlphaTab.Model.VibratoType).none},getHeight:function(renderer){return 17*renderer.getScale()},createNewGlyph:function(renderer){return new AlphaTab.Rendering.Glyphs.VibratoGlyph(0,5*renderer.getScale(),1.15)},canExpand:function(){return!0}});Bridge.define("AlphaTab.Rendering.IScoreRenderer");Bridge.define("AlphaTab.Rendering.ScoreRenderer",{inherits:[AlphaTab.Rendering.IScoreRenderer],_currentLayoutMode:null,config:{events:{PreRender:null,PartialRenderFinished:null,RenderFinished:null,PostRenderFinished:null},properties:{canvas:null,score:null,tracks:null,layout:null,renderingResources:null,settings:null}},constructor:function(settings,param){this.settings=settings;this.renderingResources=new AlphaTab.Rendering.RenderingResources(1);this.canvas=settings.engine!==null&&Bridge.get(AlphaTab.Environment).renderEngines.hasOwnProperty(settings.engine)?Bridge.get(AlphaTab.Environment).renderEngines[settings.engine](param):Bridge.get(AlphaTab.Environment).renderEngines.default(param);this.recreateLayout()},recreateLayout:function(){this._currentLayoutMode!==this.settings.layout.mode&&(this.layout=this.settings.layout!==null&&Bridge.get(AlphaTab.Environment).layoutEngines.hasOwnProperty(this.settings.layout.mode)?Bridge.get(AlphaTab.Environment).layoutEngines[this.settings.layout.mode](this):Bridge.get(AlphaTab.Environment).layoutEngines.default(this),this.layout.addPartialRenderFinished(Bridge.fn.bind(this,this.onPartialRenderFinished)),this._currentLayoutMode=this.settings.layout.mode)},render:function(track){this.score=track.score;this.tracks=[track];this.invalidate()},renderMultiple:function(tracks){this.score=tracks.length===0?null:tracks[0].score;this.tracks=tracks;this.invalidate()},invalidate:function(){this.tracks.length!==0&&(this.renderingResources.scale!==this.settings.scale&&(this.renderingResources.init(this.settings.scale),this.canvas.setLineWidth(this.settings.scale)),this.canvas.setResources(this.renderingResources),this.onPreRender(),this.recreateLayout(),this.layoutAndRender())},layoutAndRender:function(){this.layout.doLayoutAndRender();this.layout.renderAnnotation();this.onRenderFinished(Bridge.merge(new AlphaTab.Rendering.RenderFinishedEventArgs,{totalHeight:this.layout.height,totalWidth:this.layout.width}));this.onPostRenderFinished()},onPreRender:function(){var handler=this.PreRender;handler!==null&&handler()},onPartialRenderFinished:function(e){var handler=this.PartialRenderFinished;handler!==null&&handler(e)},onRenderFinished:function(e){var handler=this.RenderFinished;handler!==null&&handler(e)},onPostRenderFinished:function(){var handler=this.PostRenderFinished;handler!==null&&handler()},buildBoundingsLookup:function(){var lookup=new AlphaTab.Rendering.Utils.BoundingsLookup;return this.layout.buildBoundingsLookup(lookup),lookup}});Bridge.define("AlphaTab.Platform.JavaScript.WorkerScoreRenderer",{inherits:[AlphaTab.Rendering.IScoreRenderer],_workerApi:null,_atRoot:null,_worker:null,config:{events:{PreRender:null,PartialRenderFinished:null,RenderFinished:null,PostRenderFinished:null}},constructor:function(workerApi,rawSettings){this._workerApi=workerApi;var atRoot=rawSettings.atRoot;atRoot===""||Bridge.String.endsWith(atRoot,"/")?Bridge.String.contains(atRoot,"://")||(atRoot=window.location.origin+atRoot):atRoot+="/";this._atRoot=atRoot;this._worker=new Worker(atRoot+"AlphaTab.worker.js");this._worker.postMessage({cmd:"initialize",root:this._atRoot,settings:rawSettings});this._worker.addEventListener("message",Bridge.fn.bind(this,this.handleWorkerMessage),!1)},getIsSvg:function(){return!0},load:function(data,trackIndexes){this._worker.postMessage({cmd:"load",data:data,indexes:trackIndexes})},setScore:function(score){if(score){var jsonConverter=new AlphaTab.Model.JsonConverter;score=jsonConverter.scoreToJsObject(score)}this._worker.postMessage({cmd:"score",score:score})},handleWorkerMessage:function(e){var data=e.data,cmd=data.cmd,exception,score,jsonConverter;switch(cmd){case"preRender":this.onPreRender();break;case"partialRenderFinished":this.onPartialRenderFinished(data.result);break;case"renderFinished":this.onRenderFinished(data.result);break;case"postRenderFinished":this.onPostRenderFinished();break;case"error":exception=data.exception;console.error(exception);break;case"loaded":score=data.score;score&&(jsonConverter=new AlphaTab.Model.JsonConverter,score=jsonConverter.jsObjectToScore(score));this._workerApi.triggerEvent("loaded",score)}},renderMultiple:function(trackIndexes){this._worker.postMessage({cmd:"renderMultiple",data:trackIndexes})},onPreRender:function(){var handler=this.PreRender;handler!==null&&handler()},onPartialRenderFinished:function(obj){var handler=this.PartialRenderFinished;handler!==null&&handler(obj)},onRenderFinished:function(obj){var handler=this.RenderFinished;handler!==null&&handler(obj)},onPostRenderFinished:function(){var handler=this.PostRenderFinished;handler!==null&&handler()},tex:function(contents){this._worker.postMessage({cmd:"tex",data:contents})}});Bridge.define("AlphaTab.Rendering.Layout.HeaderFooterElements",{statics:{none:0,title:1,subTitle:2,artist:4,album:8,words:16,music:32,wordsAndMusic:64,copyright:128,pageNumber:256,all:511},$enum:!0,$flags:!0});Bridge.define("AlphaTab.Rendering.Layout.HorizontalScreenLayoutPartialInfo",{config:{properties:{width:0,masterBars:null}},constructor:function(){this.masterBars=[]}});Bridge.define("AlphaTab.Rendering.Layout.ScoreLayout",{_barRendererLookup:null,config:{events:{PartialRenderFinished:null},properties:{renderer:null,width:0,height:0}},constructor:function(renderer){this.renderer=renderer;this._barRendererLookup={}},getScale:function(){return this.renderer.settings.scale},createEmptyStaveGroup:function(){var group=new AlphaTab.Rendering.Staves.StaveGroup,isFirstTrack,i,track,j,s,factory;for(group.layout=this,isFirstTrack=!0,i=0;i<this.renderer.tracks.length;i++){for(track=this.renderer.tracks[i],j=0;j<this.renderer.settings.staves.length;j++)s=this.renderer.settings.staves[j],Bridge.get(AlphaTab.Environment).staveFactories.hasOwnProperty(s.id)&&(factory=Bridge.get(AlphaTab.Environment).staveFactories[s.id](this),factory.canCreate(track)&&(isFirstTrack||!factory.hideOnMultiTrack)&&group.addStave(track,new AlphaTab.Rendering.Staves.Stave(s.id,factory,s.additionalSettings)));isFirstTrack=!1}return group},registerBarRenderer:function(key,index,renderer){this._barRendererLookup.hasOwnProperty(key)||(this._barRendererLookup[key]={});this._barRendererLookup[key][index]=renderer},getRendererForBar:function(key,index){return this._barRendererLookup.hasOwnProperty(key)&&this._barRendererLookup[key].hasOwnProperty(index)?this._barRendererLookup[key][index]:null},onPartialRenderFinished:function(e){this.PartialRenderFinished!==null&&this.PartialRenderFinished(e)},renderAnnotation:function(){var canvas=this.renderer.canvas,resources=this.renderer.renderingResources,height=resources.copyrightFont.size*2,x,result;this.height+=height;x=this.width/2;canvas.beginRender(this.width,height);canvas.setColor(resources.mainGlyphColor);canvas.setFont(resources.copyrightFont);canvas.setTextAlign(Bridge.get(AlphaTab.Platform.Model.TextAlign).center);canvas.fillText("Rendered using alphaTab (http://www.alphaTab.net)",x,0);result=canvas.endRender();this.onPartialRenderFinished(Bridge.merge(new AlphaTab.Rendering.RenderFinishedEventArgs,{width:this.width,height:height,renderResult:result,totalWidth:this.width,totalHeight:this.height}))}});Bridge.define("AlphaTab.Rendering.Layout.PageViewLayout",{inherits:[AlphaTab.Rendering.Layout.ScoreLayout],statics:{WidthOn100:950,GroupSpacing:20,config:{init:function(){this.pagePadding=[40,40,40,40]}}},_groups:null,constructor:function(renderer){AlphaTab.Rendering.Layout.ScoreLayout.prototype.$constructor.call(this,renderer)},getMaxWidth:function(){var autoSize=this.renderer.settings.layout.get("autoSize",!0),width=autoSize?this.getSheetWidth():this.renderer.settings.width;return width-Bridge.get(AlphaTab.Rendering.Layout.PageViewLayout).pagePadding[0]-Bridge.get(AlphaTab.Rendering.Layout.PageViewLayout).pagePadding[2]},getSheetWidth:function(){return Bridge.get(AlphaTab.Rendering.Layout.PageViewLayout).WidthOn100*this.getScale()},doLayoutAndRender:function(){var x=Bridge.get(AlphaTab.Rendering.Layout.PageViewLayout).pagePadding[0],y=Bridge.get(AlphaTab.Rendering.Layout.PageViewLayout).pagePadding[1],autoSize=this.renderer.settings.layout.get("autoSize",!0);this.width=autoSize||this.renderer.settings.width<=0?Bridge.get(AlphaTab.Rendering.Layout.PageViewLayout).WidthOn100*this.getScale():this.renderer.settings.width;y=this.layoutAndRenderScoreInfo(x,y);y=this.layoutAndRenderScore(x,y);this.height=y+Bridge.get(AlphaTab.Rendering.Layout.PageViewLayout).pagePadding[3]},layoutAndRenderScoreInfo:function(x,y){var flags=this.renderer.settings.layout.get("hideInfo",!1)?Bridge.get(AlphaTab.Rendering.Layout.HeaderFooterElements).none:Bridge.get(AlphaTab.Rendering.Layout.HeaderFooterElements).all,score=this.renderer.score,scale=this.getScale(),canvas=this.renderer.canvas,res=this.renderer.renderingResources,glyphs=[],str,tuning,i,j,i1,result;if(Bridge.String.isNullOrEmpty(score.title)||(flags&Bridge.get(AlphaTab.Rendering.Layout.HeaderFooterElements).title)==0||(glyphs.push(new AlphaTab.Rendering.Glyphs.TextGlyph(this.width/2,y,score.title,res.titleFont,Bridge.get(AlphaTab.Platform.Model.TextAlign).center)),y+=35*scale),Bridge.String.isNullOrEmpty(score.subTitle)||(flags&Bridge.get(AlphaTab.Rendering.Layout.HeaderFooterElements).subTitle)==0||(glyphs.push(new AlphaTab.Rendering.Glyphs.TextGlyph(this.width/2,y,score.subTitle,res.subTitleFont,Bridge.get(AlphaTab.Platform.Model.TextAlign).center)),y+=20*scale),Bridge.String.isNullOrEmpty(score.artist)||(flags&Bridge.get(AlphaTab.Rendering.Layout.HeaderFooterElements).artist)==0||(glyphs.push(new AlphaTab.Rendering.Glyphs.TextGlyph(this.width/2,y,score.artist,res.subTitleFont,Bridge.get(AlphaTab.Platform.Model.TextAlign).center)),y+=20*scale),Bridge.String.isNullOrEmpty(score.album)||(flags&Bridge.get(AlphaTab.Rendering.Layout.HeaderFooterElements).album)==0||(glyphs.push(new AlphaTab.Rendering.Glyphs.TextGlyph(this.width/2,y,score.album,res.subTitleFont,Bridge.get(AlphaTab.Platform.Model.TextAlign).center)),y+=20*scale),Bridge.String.isNullOrEmpty(score.music)||score.music!==score.words||(flags&Bridge.get(AlphaTab.Rendering.Layout.HeaderFooterElements).wordsAndMusic)==0?(Bridge.String.isNullOrEmpty(score.music)||(flags&Bridge.get(AlphaTab.Rendering.Layout.HeaderFooterElements).music)==0||glyphs.push(new AlphaTab.Rendering.Glyphs.TextGlyph(this.width-Bridge.get(AlphaTab.Rendering.Layout.PageViewLayout).pagePadding[2],y,"Music by "+score.music,res.wordsFont,Bridge.get(AlphaTab.Platform.Model.TextAlign).right)),Bridge.String.isNullOrEmpty(score.words)||(flags&Bridge.get(AlphaTab.Rendering.Layout.HeaderFooterElements).words)==0||glyphs.push(new AlphaTab.Rendering.Glyphs.TextGlyph(x,y,"Words by "+score.music,res.wordsFont,Bridge.get(AlphaTab.Platform.Model.TextAlign).left)),y+=20*scale):(glyphs.push(new AlphaTab.Rendering.Glyphs.TextGlyph(this.width/2,y,"Music and Words by "+score.words,res.wordsFont,Bridge.get(AlphaTab.Platform.Model.TextAlign).center)),y+=20*scale),y+=20*scale,this.renderer.tracks.length===1&&!this.renderer.tracks[0].isPercussion&&(tuning=Bridge.get(AlphaTab.Model.Tuning).findTuning(this.renderer.tracks[0].tuning),tuning!==null&&(glyphs.push(new AlphaTab.Rendering.Glyphs.TextGlyph(x,y,tuning.name,res.effectFont,Bridge.get(AlphaTab.Platform.Model.TextAlign).left)),y+=15*scale,!tuning.isStandard))){var stringsPerColumn=Math.ceil(this.renderer.tracks[0].tuning.length/2),currentX=x,currentY=y;for(i=0,j=this.renderer.tracks[0].tuning.length;i<j;i++)str="("+(i+1)+") = "+Bridge.get(AlphaTab.Model.Tuning).getTextForTuning(this.renderer.tracks[0].tuning[i],!1),glyphs.push(new AlphaTab.Rendering.Glyphs.TextGlyph(currentX,currentY,str,res.effectFont,Bridge.get(AlphaTab.Platform.Model.TextAlign).left)),currentY+=15*scale,i===stringsPerColumn-1&&(currentY=y,currentX+=43*scale);y+=stringsPerColumn*15*scale}for(y+=25*scale,canvas.beginRender(this.width,y),canvas.setColor(res.scoreInfoColor),canvas.setTextAlign(Bridge.get(AlphaTab.Platform.Model.TextAlign).center),i1=0;i1<glyphs.length;i1++)glyphs[i1].paint(0,0,canvas);result=canvas.endRender();this.onPartialRenderFinished(Bridge.merge(new AlphaTab.Rendering.RenderFinishedEventArgs,{width:this.width,height:y,renderResult:result,totalWidth:this.width,totalHeight:y}));return y},layoutAndRenderScore:function(x,y){var score=this.renderer.score,canvas=this.renderer.canvas,startIndex=this.renderer.settings.layout.get("start",1),currentBarIndex,endBarIndex,group,height,result;if(startIndex--,startIndex=Math.min(score.masterBars.length-1,Math.max(0,startIndex)),currentBarIndex=startIndex,endBarIndex=this.renderer.settings.layout.get("count",score.masterBars.length),endBarIndex<0&&(endBarIndex=score.masterBars.length),endBarIndex=startIndex+endBarIndex-1,endBarIndex=Math.min(score.masterBars.length-1,Math.max(0,endBarIndex)),this._groups=[],this.renderer.settings.staves.length>0)while(currentBarIndex<=endBarIndex){group=this.createStaveGroup(currentBarIndex,endBarIndex);this._groups.push(group);group.x=x;group.y=y;this.fitGroup(group);group.finalizeGroup(this);height=group.getHeight()+Bridge.get(AlphaTab.Rendering.Layout.PageViewLayout).GroupSpacing*this.getScale();canvas.beginRender(this.width,height);this.renderer.canvas.setColor(this.renderer.renderingResources.mainGlyphColor);this.renderer.canvas.setTextAlign(Bridge.get(AlphaTab.Platform.Model.TextAlign).left);group.paint(0,-group.y,canvas);y+=height;currentBarIndex=group.getLastBarIndex()+1;result=canvas.endRender();this.onPartialRenderFinished(Bridge.merge(new AlphaTab.Rendering.RenderFinishedEventArgs,{totalWidth:this.width,totalHeight:y,width:this.width,height:height,renderResult:result}))}return y},fitGroup:function(group){var barSpace=0,freeSpace=this.getMaxWidth()-group.width;freeSpace!==0&&group.masterBars.length>0&&(barSpace=freeSpace/group.masterBars.length);(group.isFull||barSpace<0)&&group.applyBarSpacing(barSpace);this.width=Math.max(this.width,group.width)},createStaveGroup:function(currentBarIndex,endIndex){var group=this.createEmptyStaveGroup(),i,groupIsFull;group.index=this._groups.length;var barsPerRow=this.renderer.settings.layout.get("barsPerRow",-1),maxWidth=this.getMaxWidth(),end=endIndex+1;for(i=currentBarIndex;i<end;i++){if(group.addBars(this.renderer.tracks,i),groupIsFull=!1,barsPerRow===-1&&group.width>=maxWidth&&group.masterBars.length!==0?groupIsFull=!0:group.masterBars.length===barsPerRow+1&&(groupIsFull=!0),groupIsFull)return group.revertLastBar(),group.isFull=!0,group;group.x=0}return group},buildBoundingsLookup:function(lookup){for(var i=0,j=this._groups.length;i<j;i++)this._groups[i].buildBoundingsLookup(lookup)}});Bridge.define("AlphaTab.Rendering.Layout.HorizontalScreenLayout",{inherits:[AlphaTab.Rendering.Layout.ScoreLayout],statics:{GroupSpacing:20,config:{init:function(){this.pagePadding=[20,20,20,20]}}},_group:null,constructor:function(renderer){AlphaTab.Rendering.Layout.ScoreLayout.prototype.$constructor.call(this,renderer)},doLayoutAndRender:function(){var currentBarIndex,endBarIndex,result,previousPartial,i,partial,renderer,renderX,result1;if(this.renderer.settings.staves.length!==0){var score=this.renderer.score,canvas=this.renderer.canvas,startIndex=this.renderer.settings.layout.get("start",1);startIndex--;startIndex=Math.min(score.masterBars.length-1,Math.max(0,startIndex));currentBarIndex=startIndex;endBarIndex=this.renderer.settings.layout.get("count",score.masterBars.length);endBarIndex<0&&(endBarIndex=score.masterBars.length);endBarIndex=startIndex+endBarIndex-1;endBarIndex=Math.min(score.masterBars.length-1,Math.max(0,endBarIndex));this._group=this.createEmptyStaveGroup();this._group.x=Bridge.get(AlphaTab.Rendering.Layout.HorizontalScreenLayout).pagePadding[0];this._group.y=Bridge.get(AlphaTab.Rendering.Layout.HorizontalScreenLayout).pagePadding[1];for(var countPerPartial=this.renderer.settings.layout.get("countPerPartial",10),partials=[],currentPartial=new AlphaTab.Rendering.Layout.HorizontalScreenLayoutPartialInfo;currentBarIndex<=endBarIndex;)result=this._group.addBars(this.renderer.tracks,currentBarIndex),currentPartial.masterBars.length===0&&result.isLinkedToPrevious&&partials.length>0?(previousPartial=partials[partials.length-1],previousPartial.masterBars.push(score.masterBars[currentBarIndex]),previousPartial.width+=result.width):(currentPartial.masterBars.push(score.masterBars[currentBarIndex]),currentPartial.width+=result.width,currentPartial.masterBars.length>=countPerPartial&&(partials.length===0&&(currentPartial.width+=this._group.x+this._group.accoladeSpacing),partials.push(currentPartial),currentPartial=new AlphaTab.Rendering.Layout.HorizontalScreenLayoutPartialInfo)),currentBarIndex++;for(currentPartial.masterBars.length>0&&(partials.length===0&&(currentPartial.width+=this._group.x+this._group.accoladeSpacing),partials.push(currentPartial)),this._group.finalizeGroup(this),this.height=this._group.y+this._group.getHeight()+Bridge.get(AlphaTab.Rendering.Layout.HorizontalScreenLayout).pagePadding[3],this.width=this._group.x+this._group.width+Bridge.get(AlphaTab.Rendering.Layout.HorizontalScreenLayout).pagePadding[2],currentBarIndex=0,i=0;i<partials.length;i++){partial=partials[i];canvas.beginRender(partial.width,this.height);canvas.setColor(this.renderer.renderingResources.mainGlyphColor);canvas.setTextAlign(Bridge.get(AlphaTab.Platform.Model.TextAlign).left);renderer=this.getRendererForBar(this._group.staves[0].firstStaveInAccolade.staveId,currentBarIndex);renderX=renderer.x+this._group.accoladeSpacing;i===0&&(renderX-=this._group.x+this._group.accoladeSpacing);this._group.paintPartial(-renderX,this._group.y,this.renderer.canvas,currentBarIndex,partial.masterBars.length);result1=canvas.endRender();this.onPartialRenderFinished(Bridge.merge(new AlphaTab.Rendering.RenderFinishedEventArgs,{totalWidth:this.width,totalHeight:this.height,width:partial.width,height:this.height,renderResult:result1}));currentBarIndex+=partial.masterBars.length}}},buildBoundingsLookup:function(lookup){this._group.buildBoundingsLookup(lookup)}});Bridge.define("AlphaTab.Rendering.RenderFinishedEventArgs",{config:{properties:{width:0,height:0,totalWidth:0,totalHeight:0,renderResult:null}}});Bridge.define("AlphaTab.Rendering.RenderingResources",{config:{properties:{copyrightFont:null,titleFont:null,subTitleFont:null,wordsFont:null,effectFont:null,tablatureFont:null,graceFont:null,staveLineColor:null,barSeperatorColor:null,barNumberFont:null,barNumberColor:null,markerFont:null,tabClefFont:null,mainGlyphColor:null,scale:0,scoreInfoColor:null,musicFontSize:0}},constructor:function(scale){this.init(scale)},init:function(scale){this.scale=scale;var sansFont="Arial",serifFont="Georgia";this.musicFontSize=35;this.effectFont=new AlphaTab.Platform.Model.Font(serifFont,12*scale,Bridge.get(AlphaTab.Platform.Model.FontStyle).italic);this.copyrightFont=new AlphaTab.Platform.Model.Font(sansFont,12*scale,Bridge.get(AlphaTab.Platform.Model.FontStyle).bold);this.titleFont=new AlphaTab.Platform.Model.Font(serifFont,32*scale);this.subTitleFont=new AlphaTab.Platform.Model.Font(serifFont,20*scale);this.wordsFont=new AlphaTab.Platform.Model.Font(serifFont,15*scale);this.tablatureFont=new AlphaTab.Platform.Model.Font(sansFont,13*scale);this.graceFont=new AlphaTab.Platform.Model.Font(sansFont,11*scale);this.staveLineColor=new AlphaTab.Platform.Model.Color(165,165,165);this.barSeperatorColor=new AlphaTab.Platform.Model.Color(34,34,17);this.barNumberFont=new AlphaTab.Platform.Model.Font(sansFont,11*scale);this.barNumberColor=new AlphaTab.Platform.Model.Color(200,0,0);this.markerFont=new AlphaTab.Platform.Model.Font(serifFont,14*scale,Bridge.get(AlphaTab.Platform.Model.FontStyle).bold);this.tabClefFont=new AlphaTab.Platform.Model.Font(sansFont,18*scale,Bridge.get(AlphaTab.Platform.Model.FontStyle).bold);this.scoreInfoColor=new AlphaTab.Platform.Model.Color(0,0,0);this.mainGlyphColor=new AlphaTab.Platform.Model.Color(0,0,0)}});Bridge.define("AlphaTab.Rendering.Staves.AddBarsToStaveGroupResult",{config:{properties:{x:0,width:0,isLinkedToPrevious:!1}}});Bridge.define("AlphaTab.Rendering.Staves.BarSizeInfo",{config:{properties:{fullWidth:0,sizes:null,preNoteSizes:null,onNoteSizes:null,postNoteSizes:null}},constructor:function(){this.sizes={};this.preNoteSizes={};this.onNoteSizes={};this.postNoteSizes={};this.fullWidth=0},setSize:function(key,size){this.sizes[key]=size},getSize:function(key){return this.sizes.hasOwnProperty(key)?this.sizes[key]:0},getPreNoteSize:function(beat){return this.preNoteSizes.hasOwnProperty(beat)?this.preNoteSizes[beat]:0},getOnNoteSize:function(beat){return this.onNoteSizes.hasOwnProperty(beat)?this.onNoteSizes[beat]:0},getPostNoteSize:function(beat){return this.postNoteSizes.hasOwnProperty(beat)?this.postNoteSizes[beat]:0},setPreNoteSize:function(beat,size){this.preNoteSizes[beat]=size},setOnNoteSize:function(beat,size){this.onNoteSizes[beat]=size},setPostNoteSize:function(beat,size){this.postNoteSizes[beat]=size}});Bridge.define("AlphaTab.Rendering.Staves.Stave",{_factory:null,_settings:null,config:{properties:{staveTrackGroup:null,staveGroup:null,barRenderers:null,x:0,y:0,height:0,index:0,staveId:null,staveTop:0,topSpacing:0,bottomSpacing:0,staveBottom:0,isFirstInAccolade:!1,isLastInAccolade:!1}},constructor:function(staveId,factory,settings){this.barRenderers=[];this.staveId=staveId;this._factory=factory;this._settings=settings;this.topSpacing=10;this.bottomSpacing=10;this.staveTop=0;this.staveBottom=0},getIsInAccolade:function(){return this._factory.isInAccolade},getTopOverflow:function(){for(var r,m=0,i=0,j=this.barRenderers.length;i<j;i++)r=this.barRenderers[i],r.topOverflow>m&&(m=r.topOverflow);return m},getBottomOverflow:function(){for(var r,m=0,i=0,j=this.barRenderers.length;i<j;i++)r=this.barRenderers[i],r.bottomOverflow>m&&(m=r.bottomOverflow);return m},getSetting:function(){return Bridge.fn.bind(this,function(key,def){return this._settings.hasOwnProperty(key)?this._settings[key]:def})},registerStaveTop:function(offset){this.staveTop=offset},registerStaveBottom:function(offset){this.staveBottom=offset},addBar:function(bar){var renderer=this._factory.create(bar);renderer.stave=this;renderer.index=this.barRenderers.length;renderer.doLayout();this.barRenderers.push(renderer);this.staveGroup.layout.registerBarRenderer(this.staveId,bar.index,renderer)},revertLastBar:function(){this.barRenderers.splice(this.barRenderers.length-1,1)},applyBarSpacing:function(spacing){for(var i=0,j=this.barRenderers.length;i<j;i++)this.barRenderers[i].applyBarSpacing(spacing)},finalizeStave:function(layout){var x=0,i;this.height=0;var topOverflow=this.getTopOverflow(),bottomOverflow=this.getBottomOverflow(),isEmpty=!0;for(i=0;i<this.barRenderers.length;i++)this.barRenderers[i].x=x,this.barRenderers[i].y=this.topSpacing+topOverflow,this.height=Math.max(this.height,this.barRenderers[i].height),this.barRenderers[i].finalizeRenderer(layout),x+=this.barRenderers[i].width,this.barRenderers[i].isEmpty||(isEmpty=!1);isEmpty?this.height=0:this.height+=this.topSpacing+topOverflow+bottomOverflow+this.bottomSpacing},paint:function(cx,cy,canvas,startIndex,count){if(this.height!==0&&count!==0)for(var i=startIndex,j=Math.min(startIndex+count,this.barRenderers.length);i<j;i++)this.barRenderers[i].paint(cx+this.x,cy+this.y,canvas)}});Bridge.define("AlphaTab.Rendering.Staves.StaveGroup",{statics:{AccoladeLabelSpacing:10},_firstStaveInAccolade:null,_lastStaveInAccolade:null,_accoladeSpacingCalculated:!1,_allStaves:null,config:{properties:{x:0,y:0,index:0,accoladeSpacing:0,isFull:!1,width:0,masterBars:null,staves:null,layout:null,helpers:null}},constructor:function(){this.masterBars=[];this.staves=[];this._allStaves=[];this.width=0;this.index=0;this._accoladeSpacingCalculated=!1;this.accoladeSpacing=0;this.helpers=new AlphaTab.Rendering.Utils.BarHelpersGroup},getLastBarIndex:function(){return this.masterBars[this.masterBars.length-1].index},getHeight:function(){return this._allStaves[this._allStaves.length-1].y+this._allStaves[this._allStaves.length-1].height},addBars:function(tracks,barIndex){var canvas,res,i,maxSizes,i1,j,g,k,l,s,realWidth,realX,i2,j1,s1;if(tracks.length===0)return null;var result=new AlphaTab.Rendering.Staves.AddBarsToStaveGroupResult,score=tracks[0].score,masterBar=score.masterBars[barIndex];if(this.masterBars.push(masterBar),this.helpers.buildHelpers(tracks,barIndex),!this._accoladeSpacingCalculated&&this.index===0){for(this._accoladeSpacingCalculated=!0,canvas=this.layout.renderer.canvas,res=this.layout.renderer.renderingResources.effectFont,canvas.setFont(res),i=0;i<tracks.length;i++)this.accoladeSpacing=Math.max(this.accoladeSpacing,canvas.measureText(tracks[i].shortName));this.accoladeSpacing+=20;this.width+=this.accoladeSpacing}for(maxSizes=new AlphaTab.Rendering.Staves.BarSizeInfo,i1=0,j=this.staves.length;i1<j;i1++)for(g=this.staves[i1],k=0,l=g.staves.length;k<l;k++)s=g.staves[k],s.addBar(g.track.bars[barIndex]),s.barRenderers[s.barRenderers.length-1].registerMaxSizes(maxSizes),s.barRenderers[s.barRenderers.length-1].isLinkedToPrevious&&(result.isLinkedToPrevious=!0);for(realWidth=0,realX=0,i2=0,j1=this._allStaves.length;i2<j1;i2++)s1=this._allStaves[i2],s1.barRenderers[s1.barRenderers.length-1].applySizes(maxSizes),s1.barRenderers[s1.barRenderers.length-1].width>realWidth&&(realWidth=s1.barRenderers[s1.barRenderers.length-1].width),s1.barRenderers[s1.barRenderers.length-1].x<realX&&(realX=s1.barRenderers[s1.barRenderers.length-1].x);return this.width+=realWidth,result.width=realWidth,result.x=realX,result},getStaveTrackGroup:function(track){for(var g,i=0,j=this.staves.length;i<j;i++)if(g=this.staves[i],g.track===track)return g;return null},addStave:function(track,stave){var group=this.getStaveTrackGroup(track);group===null&&(group=new AlphaTab.Rendering.Staves.StaveTrackGroup(this,track),this.staves.push(group));stave.staveTrackGroup=group;stave.staveGroup=this;stave.index=this._allStaves.length;this._allStaves.push(stave);group.staves.push(stave);stave.getIsInAccolade()&&(this._firstStaveInAccolade===null&&(this._firstStaveInAccolade=stave,stave.isFirstInAccolade=!0),group.firstStaveInAccolade===null&&(group.firstStaveInAccolade=stave),this._lastStaveInAccolade===null&&(this._lastStaveInAccolade=stave,stave.isLastInAccolade=!0),this._lastStaveInAccolade!==null&&(this._lastStaveInAccolade.isLastInAccolade=!1),this._lastStaveInAccolade=stave,this._lastStaveInAccolade.isLastInAccolade=!0,group.lastStaveInAccolade=stave)},revertLastBar:function(){var w,i,j,s;if(this.masterBars.length>1){for(this.masterBars.splice(this.masterBars.length-1,1),w=0,i=0,j=this._allStaves.length;i<j;i++)s=this._allStaves[i],w=Math.max(w,s.barRenderers[s.barRenderers.length-1].width),s.revertLastBar();this.width-=w}},applyBarSpacing:function(spacing){for(var i=0,j=this._allStaves.length;i<j;i++)this._allStaves[i].applyBarSpacing(spacing);this.width+=this.masterBars.length*spacing},paint:function(cx,cy,canvas){this.paintPartial(cx+this.x,cy+this.y,canvas,0,this.masterBars.length)},paintPartial:function(cx,cy,canvas,startIndex,count){for(var res,i1,j1,spikeStartX,spikeEndX,i=0,j=this._allStaves.length;i<j;i++)this._allStaves[i].paint(cx,cy,canvas,startIndex,count);if(res=this.layout.renderer.renderingResources,this.staves.length>0&&startIndex===0){if(this._firstStaveInAccolade!==null&&this._lastStaveInAccolade!==null){var firstStart=cy+this._firstStaveInAccolade.y+this._firstStaveInAccolade.staveTop+this._firstStaveInAccolade.topSpacing+this._firstStaveInAccolade.getTopOverflow(),lastEnd=cy+this._lastStaveInAccolade.y+this._lastStaveInAccolade.topSpacing+this._lastStaveInAccolade.getTopOverflow()+this._lastStaveInAccolade.staveBottom,acooladeX=cx+this._firstStaveInAccolade.x;canvas.setColor(res.barSeperatorColor);canvas.beginPath();canvas.moveTo(acooladeX,firstStart);canvas.lineTo(acooladeX,lastEnd);canvas.stroke()}for(canvas.setFont(res.effectFont),i1=0,j1=this.staves.length;i1<j1;i1++){var g=this.staves[i1],firstStart1=cy+g.firstStaveInAccolade.y+g.firstStaveInAccolade.staveTop+g.firstStaveInAccolade.topSpacing+g.firstStaveInAccolade.getTopOverflow(),lastEnd1=cy+g.lastStaveInAccolade.y+g.lastStaveInAccolade.topSpacing+g.lastStaveInAccolade.getTopOverflow()+g.lastStaveInAccolade.staveBottom,acooladeX1=cx+g.firstStaveInAccolade.x,barSize=3*this.layout.renderer.settings.scale,barOffset=barSize,accoladeStart=firstStart1-barSize*4,accoladeEnd=lastEnd1+barSize*4;this.index===0&&canvas.fillText(g.track.shortName,cx+Bridge.get(AlphaTab.Rendering.Staves.StaveGroup).AccoladeLabelSpacing*this.layout.getScale(),firstStart1);canvas.fillRect(acooladeX1-barOffset-barSize,accoladeStart,barSize,accoladeEnd-accoladeStart);spikeStartX=acooladeX1-barOffset-barSize;spikeEndX=acooladeX1+barSize*2;canvas.beginPath();canvas.moveTo(spikeStartX,accoladeStart);canvas.bezierCurveTo(spikeStartX,accoladeStart,spikeStartX,accoladeStart,spikeEndX,accoladeStart-barSize);canvas.bezierCurveTo(acooladeX1,accoladeStart+barSize,spikeStartX,accoladeStart+barSize,spikeStartX,accoladeStart+barSize);canvas.closePath();canvas.fill();canvas.beginPath();canvas.moveTo(spikeStartX,accoladeEnd);canvas.bezierCurveTo(spikeStartX,accoladeEnd,acooladeX1,accoladeEnd,spikeEndX,accoladeEnd+barSize);canvas.bezierCurveTo(acooladeX1,accoladeEnd-barSize,spikeStartX,accoladeEnd-barSize,spikeStartX,accoladeEnd-barSize);canvas.closePath();canvas.fill()}}},finalizeGroup:function(scoreLayout){for(var currentY=0,i=0,j=this._allStaves.length;i<j;i++)this._allStaves[i].x=this.accoladeSpacing,this._allStaves[i].y=currentY,this._allStaves[i].finalizeStave(scoreLayout),currentY+=this._allStaves[i].height},buildBoundingsLookup:function(lookup){for(var visualTop=this.y+this._firstStaveInAccolade.y,visualBottom=this.y+this._lastStaveInAccolade.y+this._lastStaveInAccolade.height,realTop=this.y+this._allStaves[0].y,realBottom=this.y+this._allStaves[this._allStaves.length-1].y+this._allStaves[this._allStaves.length-1].height,visualHeight=visualBottom-visualTop,realHeight=realBottom-realTop,i=0,j=this._firstStaveInAccolade.barRenderers.length;i<j;i++)this._firstStaveInAccolade.barRenderers[i].buildBoundingsLookup(lookup,visualTop,visualHeight,realTop,realHeight,this.x)}});Bridge.define("AlphaTab.Rendering.Staves.StaveTrackGroup",{config:{properties:{track:null,staveGroup:null,staves:null,firstStaveInAccolade:null,lastStaveInAccolade:null}},constructor:function(staveGroup,track){this.staveGroup=staveGroup;this.track=track;this.staves=[]}});Bridge.define("AlphaTab.Rendering.Utils.BarBoundings",{config:{properties:{isFirstOfLine:!1,isLastOfLine:!1,bar:null,bounds:null,visualBounds:null,beats:null}},constructor:function(){this.beats=[]},findBeatAtPos:function(x){for(var index=0;index<this.beats.length-1&&x>this.beats[index].bounds.x+this.beats[index].bounds.w;)index++;return this.beats[index].beat}});Bridge.define("AlphaTab.Rendering.Utils.BarHelpers",{config:{properties:{beamHelpers:null,beamHelperLookup:null,tupletHelpers:null}},constructor:function(bar){var currentBeamHelper,currentTupletHelper,i,j,v,k,l,b,newBeamingHelper,previousBeat;for(this.beamHelpers=[],this.beamHelperLookup=[],this.tupletHelpers=[],currentBeamHelper=null,currentTupletHelper=null,i=0,j=bar.voices.length;i<j;i++){for(v=bar.voices[i],this.beamHelpers.push([]),this.beamHelperLookup.push({}),this.tupletHelpers.push([]),k=0,l=v.beats.length;k<l;k++)b=v.beats[k],newBeamingHelper=!1,b.getIsRest()||currentBeamHelper!==null&&currentBeamHelper.checkBeat(b)||(currentBeamHelper=new AlphaTab.Rendering.Utils.BeamingHelper(bar.track),currentBeamHelper.checkBeat(b),this.beamHelpers[v.index].push(currentBeamHelper),newBeamingHelper=!0),b.getHasTuplet()&&(previousBeat=b.previousBeat,previousBeat!==null&&previousBeat.voice!==b.voice&&(previousBeat=null),newBeamingHelper&&currentTupletHelper!==null&&currentTupletHelper.finish(),previousBeat!==null&&currentTupletHelper!==null&&currentTupletHelper.check(b)||(currentTupletHelper=new AlphaTab.Rendering.Utils.TupletHelper(v.index),currentTupletHelper.check(b),this.tupletHelpers[v.index].push(currentTupletHelper))),this.beamHelperLookup[v.index][b.index]=currentBeamHelper;currentBeamHelper=null;currentTupletHelper=null}}});Bridge.define("AlphaTab.Rendering.Utils.BarHelpersGroup",{config:{properties:{helpers:null}},constructor:function(){this.helpers={}},buildHelpers:function(tracks,barIndex){for(var t,h,i=0;i<tracks.length;i++)t=tracks[i],this.helpers.hasOwnProperty(t.index)?h=this.helpers[t.index]:(h={},this.helpers[t.index]=h),h.hasOwnProperty(barIndex)||(h[barIndex]=new AlphaTab.Rendering.Utils.BarHelpers(t.bars[barIndex]))}});Bridge.define("AlphaTab.Rendering.Utils.BeamBarType",{statics:{full:0,partLeft:1,partRight:2},$enum:!0});Bridge.define("AlphaTab.Rendering.Utils.BeatBoundings",{config:{properties:{beat:null,bounds:null,visualBounds:null}}});Bridge.define("AlphaTab.Rendering.Utils.BeatLinePositions",{config:{properties:{up:0,down:0}},constructor:function(up,down){this.up=up;this.down=down}});Bridge.define("AlphaTab.Rendering.Utils.BoundingsLookup",{config:{properties:{bars:null}},constructor:function(){this.bars=[]},getBeatAtPos:function(x,y){for(var bottom=0,top=this.bars.length-1,barIndex=-1,middle,bar,currentBar;bottom<=top;){if(middle=Bridge.Int.div(top+bottom,2),bar=this.bars[middle],y>=bar.bounds.y&&y<=bar.bounds.y+bar.bounds.h){barIndex=middle;break}y<bar.bounds.y?top=middle-1:bottom=middle+1}if(barIndex===-1)return null;if(currentBar=this.bars[barIndex],x<currentBar.bounds.x)while(barIndex>0&&x<this.bars[barIndex].bounds.x&&!this.bars[barIndex].isFirstOfLine)barIndex--;else while(barIndex<this.bars.length-1&&x>this.bars[barIndex].bounds.x+this.bars[barIndex].bounds.w&&!this.bars[barIndex].isLastOfLine)barIndex++;return this.bars[barIndex].findBeatAtPos(x)}});Bridge.define("AlphaTab.Rendering.Utils.Bounds",{config:{properties:{x:0,y:0,w:0,h:0}},constructor:function(x,y,w,h){this.x=x;this.y=y;this.w=w;this.h=h}});Bridge.define("AlphaTab.Rendering.Utils.SvgPathParser",{_currentIndex:0,config:{properties:{svg:null,lastCommand:null,currentToken:null}},constructor:function(svg){this.svg=svg},getEof:function(){return this._currentIndex>=this.svg.length},getCurrentTokenIsNumber:function(){return Bridge.get(AlphaTab.Platform.Std).isStringNumber(this.currentToken)},reset:function(){this._currentIndex=0;this.nextToken()},getString:function(){var t=this.currentToken;return this.nextToken(),t},getNumber:function(){return parseFloat(this.getString())},nextChar:function(){return this.getEof()?0:this.svg.charCodeAt(this._currentIndex++)},peekChar:function(){return this.getEof()?0:this.svg.charCodeAt(this._currentIndex)},nextToken:function(){var token=[],c,skipChar;do c=this.nextChar(),skipChar=Bridge.get(AlphaTab.Platform.Std).isWhiteSpace(c)||c===32;while(!this.getEof()&&skipChar);if(!this.getEof()||!skipChar)if(token.push(String.fromCharCode(c)),Bridge.get(AlphaTab.Platform.Std).isCharNumber(c))for(c=this.peekChar();!this.getEof()&&(Bridge.get(AlphaTab.Platform.Std).isCharNumber(c,!1)||c===46);)token.push(String.fromCharCode(this.nextChar())),c=this.peekChar();else this.lastCommand=token.join("");this.currentToken=token.join("")}});Bridge.define("AlphaTab.Rendering.Utils.SvgRenderer",{_svg:null,_lastCmd:null,_currentX:0,_currentY:0,_xScale:0,_yScale:0,_xGlyphScale:0,_yGlyphScale:0,_lastControlX:0,_lastControlY:0,constructor:function(svg,xScale,yScale){this._svg=svg;this._xGlyphScale=xScale*.0099;this._yGlyphScale=yScale*.0099},paint:function(x,y,canvas){var startX,startY,i,j;if(this._svg!==null){for(this._xScale=this._xGlyphScale,this._yScale=this._yGlyphScale,startX=x,startY=y,this._currentX=startX,this._currentY=startY,canvas.beginPath(),i=0,j=this._svg.getCommands().length;i<j;i++)this.parseCommand(startX,startY,canvas,this._svg.getCommands()[i]);canvas.fill()}},parseCommand:function(cx,cy,canvas,cmd){var canContinue,i,x12,y12,x13,y13,x16,y16,cpx,cpy,x17,y17,cpx1,cpy1;switch(cmd.cmd){case"M":this._currentX=cx+cmd.numbers[0]*this._xScale;this._currentY=cy+cmd.numbers[1]*this._yScale;canvas.moveTo(this._currentX,this._currentY);break;case"m":this._currentX+=cmd.numbers[0]*this._xScale;this._currentY+=cmd.numbers[1]*this._yScale;canvas.moveTo(this._currentX,this._currentY);break;case"Z":case"z":canvas.closePath();break;case"L":for(i=0;i<cmd.numbers.length;)this._currentX=cx+cmd.numbers[i++]*this._xScale,this._currentY=cy+cmd.numbers[i++]*this._yScale,canvas.lineTo(this._currentX,this._currentY);break;case"l":for(i=0;i<cmd.numbers.length;)this._currentX+=cmd.numbers[i++]*this._xScale,this._currentY+=cmd.numbers[i++]*this._yScale,canvas.lineTo(this._currentX,this._currentY);break;case"V":for(i=0;i<cmd.numbers.length;)this._currentY=cy+cmd.numbers[i++]*this._yScale,canvas.lineTo(this._currentX,this._currentY);break;case"v":for(i=0;i<cmd.numbers.length;)this._currentY+=cmd.numbers[i++]*this._yScale,canvas.lineTo(this._currentX,this._currentY);break;case"H":for(i=0;i<cmd.numbers.length;)this._currentX=cx+cmd.numbers[i++]*this._xScale,canvas.lineTo(this._currentX,this._currentY);break;case"h":for(i=0;i<cmd.numbers.length;)this._currentX+=cmd.numbers[i++]*this._xScale,canvas.lineTo(this._currentX,this._currentY);break;case"C":for(i=0;i<cmd.numbers.length;){var x1=cx+cmd.numbers[i++]*this._xScale,y1=cy+cmd.numbers[i++]*this._yScale,x2=cx+cmd.numbers[i++]*this._xScale,y2=cy+cmd.numbers[i++]*this._yScale,x3=cx+cmd.numbers[i++]*this._xScale,y3=cy+cmd.numbers[i++]*this._yScale;this._lastControlX=x2;this._lastControlY=y2;this._currentX=x3;this._currentY=y3;canvas.bezierCurveTo(x1,y1,x2,y2,x3,y3)}break;case"c":for(i=0;i<cmd.numbers.length;){var x11=this._currentX+cmd.numbers[i++]*this._xScale,y11=this._currentY+cmd.numbers[i++]*this._yScale,x21=this._currentX+cmd.numbers[i++]*this._xScale,y21=this._currentY+cmd.numbers[i++]*this._yScale,x31=this._currentX+cmd.numbers[i++]*this._xScale,y31=this._currentY+cmd.numbers[i++]*this._yScale;this._lastControlX=x21;this._lastControlY=y21;this._currentX=x31;this._currentY=y31;canvas.bezierCurveTo(x11,y11,x21,y21,x31,y31)}break;case"S":for(i=0;i<cmd.numbers.length;){x12=cx+cmd.numbers[i++]*this._xScale;y12=cy+cmd.numbers[i++]*this._yScale;canContinue=this._lastCmd==="c"||this._lastCmd==="C"||this._lastCmd==="S"||this._lastCmd==="s";var x22=canContinue?this._currentX+(this._currentX-this._lastControlX):this._currentX,y22=canContinue?this._currentY+(this._currentY-this._lastControlY):this._currentY,x32=cx+cmd.numbers[i++]*this._xScale,y32=cy+cmd.numbers[i++]*this._yScale;this._lastControlX=x22;this._lastControlY=y22;this._currentX=x32;this._currentY=y32;canvas.bezierCurveTo(x12,y12,x22,y22,x32,y32)}break;case"s":for(i=0;i<cmd.numbers.length;){x13=this._currentX+cmd.numbers[i++]*this._xScale;y13=this._currentY+cmd.numbers[i++]*this._yScale;canContinue=this._lastCmd==="c"||this._lastCmd==="C"||this._lastCmd==="S"||this._lastCmd==="s";var x23=canContinue?this._currentX+(this._currentX-this._lastControlX):this._currentX,y23=canContinue?this._currentY+(this._currentY-this._lastControlY):this._currentY,x33=this._currentX+cmd.numbers[i++]*this._xScale,y33=this._currentY+cmd.numbers[i++]*this._yScale;this._lastControlX=x23;this._lastControlY=y23;this._currentX=x33;this._currentY=y33;canvas.bezierCurveTo(x13,y13,x23,y23,x33,y33)}break;case"Q":for(i=0;i<cmd.numbers.length;){var x14=cx+cmd.numbers[i++]*this._xScale,y14=cy+cmd.numbers[i++]*this._yScale,x24=cx+cmd.numbers[i++]*this._xScale,y24=cy+cmd.numbers[i++]*this._yScale;this._lastControlX=x14;this._lastControlY=y14;this._currentX=x24;this._currentY=y24;canvas.quadraticCurveTo(x14,y14,x24,y24)}break;case"q":for(i=0;i<cmd.numbers.length;){var x15=this._currentX+cmd.numbers[i++]*this._xScale,y15=this._currentY+cmd.numbers[i++]*this._yScale,x25=this._currentX+cmd.numbers[i++]*this._xScale,y25=this._currentY+cmd.numbers[i++]*this._yScale;this._lastControlX=x15;this._lastControlY=y15;this._currentX=x25;this._currentY=y25;canvas.quadraticCurveTo(x15,y15,x25,y25)}break;case"T":for(i=0;i<cmd.numbers.length;)x16=cx+cmd.numbers[i++]*this._xScale,y16=cy+cmd.numbers[i++]*this._yScale,canContinue=this._lastCmd==="q"||this._lastCmd==="Q"||this._lastCmd==="t"||this._lastCmd==="T",cpx=canContinue?this._currentX+(this._currentX-this._lastControlX):this._currentX,cpy=canContinue?this._currentY+(this._currentY-this._lastControlY):this._currentY,this._currentX=x16,this._currentY=y16,this._lastControlX=cpx,this._lastControlY=cpy,canvas.quadraticCurveTo(cpx,cpy,x16,y16);break;case"t":for(i=0;i<cmd.numbers.length;)x17=this._currentX+cmd.numbers[i++]*this._xScale,y17=this._currentY+cmd.numbers[i++]*this._yScale,canContinue=this._lastCmd==="q"||this._lastCmd==="Q"||this._lastCmd==="t"||this._lastCmd==="T",cpx1=canContinue?this._currentX+(this._currentX-this._lastControlX):this._currentX,cpy1=canContinue?this._currentY+(this._currentY-this._lastControlY):this._currentY,this._lastControlX=cpx1,this._lastControlY=cpy1,canvas.quadraticCurveTo(cpx1,cpy1,x17,y17)}this._lastCmd=cmd.cmd}});Bridge.define("AlphaTab.Rendering.Utils.TupletHelper",{_isFinished:!1,config:{properties:{beats:null,voiceIndex:0,tuplet:0}},constructor:function(voice){this.voiceIndex=voice;this.beats=[]},getIsFull:function(){return this.beats.length===this.tuplet},finish:function(){this._isFinished=!0},check:function(beat){if(this.beats.length===0)this.tuplet=beat.tupletNumerator;else if(beat.voice.index!==this.voiceIndex||beat.tupletNumerator!==this.tuplet||this.getIsFull()||this._isFinished)return!1;return this.beats.push(beat),!0}});Bridge.define("AlphaTab.StaveSettings",{config:{properties:{id:null,additionalSettings:null}},constructor:function(id){this.id=id;this.additionalSettings={}}});Bridge.define("AlphaTab.Util.Lazy$1",function(){return{_factory:null,_created:!1,_value:null,constructor:function(factory){this._factory=factory},getValue:function(){return this._created||(this._value=this._factory(),this._created=!0),this._value}}});Bridge.define("AlphaTab.Xml.IXmlAttributeCollection");Bridge.define("AlphaTab.Xml.XmlAttributeCollectionWrapper",{inherits:[AlphaTab.Xml.IXmlAttributeCollection],_attributes:null,constructor:function(attributes){this._attributes=attributes},get:function(key){return new AlphaTab.Xml.XmlNodeWrapper(this._attributes.getNamedItem(key))}});Bridge.define("AlphaTab.Xml.IXmlNodeCollection");Bridge.define("AlphaTab.Xml.XmlNodeCollectionWrapper",{inherits:[AlphaTab.Xml.IXmlNodeCollection],_xmlNodeList:null,constructor:function(xmlNodeList){this._xmlNodeList=xmlNodeList},getCount:function(){return this._xmlNodeList.length},get:function(index){return new AlphaTab.Xml.XmlNodeWrapper(this._xmlNodeList[index])}});Bridge.define("AlphaTab.Xml.XmlNodeType",{statics:{none:0,element:1,attribute:2,text:3,cDATA:4,entityReference:5,entity:6,processingInstruction:7,comment:8,document:9,documentType:10,documentFragment:11,notation:12,whitespace:13,significantWhitespace:14,endElement:15,endEntity:16,xmlDeclaration:17},$enum:!0});Bridge.define("AlphaTab.Audio.MidiUtils",{statics:{QuarterTime:960,PercussionChannel:9,MinVelocity:15,VelocityIncrement:16,toTicks:function(duration){return Bridge.get(AlphaTab.Audio.MidiUtils).valueToTicks(duration)},valueToTicks:function(duration){return Bridge.get(AlphaTab.Audio.MidiUtils).QuarterTime*(4/duration)},applyDot:function(ticks,doubleDotted){return doubleDotted?ticks+Bridge.Int.div(ticks,4)*3:ticks+Bridge.Int.div(ticks,2)},applyTuplet:function(ticks,numerator,denominator){return Bridge.Int.div(ticks*denominator,numerator)},dynamicToVelocity:function(dyn){return Bridge.get(AlphaTab.Audio.MidiUtils).MinVelocity+dyn*Bridge.get(AlphaTab.Audio.MidiUtils).VelocityIncrement},buildTickLookup:function(score){for(var lookup=new AlphaTab.Audio.Model.MidiTickLookup,controller=new AlphaTab.Audio.Generator.MidiPlaybackController(score),index,currentTick,bar;!controller.getFinished();)index=controller.index,currentTick=controller.currentTick,controller.processCurrent(),controller.shouldPlay&&(bar=new AlphaTab.Audio.Model.BarTickLookup,bar.bar=score.masterBars[index],bar.start=currentTick,bar.end=bar.start+bar.bar.calculateDuration(),lookup.bars.push(bar)),controller.moveNext();return lookup}}});Bridge.define("AlphaTab.Model.Automation",{statics:{buildTempoAutomation:function(isLinear,ratioPosition,value,reference){(reference<1||reference>5)&&(reference=2);var automation=new AlphaTab.Model.Automation;return automation.type=Bridge.get(AlphaTab.Model.AutomationType).tempo,automation.isLinear=isLinear,automation.ratioPosition=ratioPosition,automation.value=value*[1,.5,1,1.5,2,3][reference],automation},copyTo:function(src,dst){dst.isLinear=src.isLinear;dst.ratioPosition=src.ratioPosition;dst.text=src.text;dst.type=src.type;dst.value=src.value}},config:{properties:{isLinear:!1,type:0,value:0,ratioPosition:0,text:null}},clone:function(){var a=new AlphaTab.Model.Automation;return Bridge.get(AlphaTab.Model.Automation).copyTo(this,a),a}});Bridge.define("AlphaTab.Model.ModelUtils",{statics:{getIndex:function(duration){for(var $t,index=0,value=duration;($t=value>>1,value=$t,$t)>0;)index++;return index},keySignatureIsFlat:function(ks){return ks<0},keySignatureIsNatural:function(ks){return ks===0},keySignatureIsSharp:function(ks){return ks>0}}});Bridge.define("AlphaTab.Platform.Std",{statics:{_parseXml:null,randomColor:function(opacity){opacity===void 0&&(opacity=255);var r=Math.random()*255|0,g=Math.random()*255|0,b=Math.random()*255|0;return new AlphaTab.Platform.Model.Color(r,g,b,opacity)},loadXml:function(xml){if(Bridge.get(AlphaTab.Platform.Std)._parseXml===null){var parseXml=null;if(typeof DOMParser!="undefined")parseXml=function(xmlStr){return(new window.DOMParser).parseFromString(xmlStr,"text/xml")};else if(typeof ActiveXObject!="undefined"&&new window.ActiveXObject("Microsoft.XMLDOM"))parseXml=function(xmlStr){var xmlDoc=new window.ActiveXObject("Microsoft.XMLDOM");return xmlDoc.async="false",xmlDoc.loadXML(xmlStr),xmlDoc};else throw new Error("No XML parser found");Bridge.get(AlphaTab.Platform.Std)._parseXml=parseXml}return new AlphaTab.Xml.XmlDocumentWrapper(Bridge.get(AlphaTab.Platform.Std)._parseXml(xml))},readSignedByte:function(readable){var n=readable.readByte();return n>=128?n-256:n},toString:function(data){for(var s=[],i=0,c,u;i<data.length;)if(c=data[i++],c<128){if(c===0)break;s.push(String.fromCharCode(c))}else c<224?s.push(String.fromCharCode((c&63)<<6|data[i++]&127)):c<240?s.push(String.fromCharCode((c&31)<<12|(data[i++]&127)<<6|data[i++]&127)):(u=(c&15)<<18|(data[i++]&127)<<12|(data[i++]&127)<<6|data[i++]&127,s.push(String.fromCharCode((u>>18)+55232)),s.push(String.fromCharCode(u&1023|56320)));return s.join("")},stringToByteArray:function(contents){for(var byteArray=new Uint8Array(contents.length),i=0;i<contents.length;i++)byteArray[i]=contents.charCodeAt(i);return byteArray},s4:function(){var num=Math.floor((1+Math.random())*65536);return num.toString(16).substr(1)},newGuid:function(){return Bridge.get(AlphaTab.Platform.Std).s4()+Bridge.get(AlphaTab.Platform.Std).s4()+String.fromCharCode(45)+Bridge.get(AlphaTab.Platform.Std).s4()+String.fromCharCode(45)+Bridge.get(AlphaTab.Platform.Std).s4()+String.fromCharCode(45)+Bridge.get(AlphaTab.Platform.Std).s4()+String.fromCharCode(45)+Bridge.get(AlphaTab.Platform.Std).s4()+Bridge.get(AlphaTab.Platform.Std).s4()+Bridge.get(AlphaTab.Platform.Std).s4()},isStringNumber:function(s,allowSign){if(allowSign===void 0&&(allowSign=!0),s.length===0)return!1;var c=s.charCodeAt(0);return Bridge.get(AlphaTab.Platform.Std).isCharNumber(c,allowSign)},isCharNumber:function(c,allowSign){return allowSign===void 0&&(allowSign=!0),allowSign&&c===45||c>=48&&c<=57},isWhiteSpace:function(c){return c===32||c===11||c===13||c===10},toHexString:function(n){var s="";do s=String.fromCharCode("0123456789ABCDEF".charCodeAt(n&15))+s,n>>=4;while(n>0);return s},getNodeValue:function(n){if(n.getNodeType()===Bridge.get(AlphaTab.Xml.XmlNodeType).element||n.getNodeType()===Bridge.get(AlphaTab.Xml.XmlNodeType).document){var txt=[];return AlphaTab.Platform.Std.iterateChildren(n,function(c){txt.push(Bridge.get(AlphaTab.Platform.Std).getNodeValue(c))}),txt.join("").trim()}return n.getValue()},iterateChildren:function(n,action){for(var i=0;i<n.getChildNodes().getCount();i++)action(n.getChildNodes().get(i))}}});Bridge.define("AlphaTab.Platform.Svg.FontSizes",{statics:{ControlChars:32,config:{init:function(){this.timesNewRoman=[3,4,5,6,6,9,9,2,4,4,6,6,3,4,3,3,6,6,6,6,6,6,6,6,6,6,3,3,6,6,6,5,10,8,7,7,8,7,6,7,8,4,4,8,7,10,8,8,7,8,7,5,8,8,7,11,8,8,7,4,3,4,5,6,4,5,5,5,5,5,4,5,6,3,3,6,3,9,6,6,6,5,4,4,4,5,6,7,6,6,5,5,2,5,6,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,4,6,6,6,6,2,5,4,8,4,6,6,0,8,6,4,6,3,3,4,5,5,4,4,3,3,6,8,8,8,5,8,8,8,8,8,8,11,7,7,7,7,7,4,4,4,4,8,8,8,8,8,8,8,6,8,8,8,8,8,8,6,5,5,5,5,5,5,5,8,5,5,5,5,5,3,3,3,3,6,6,6,6,6,6,6,6,6,5,5,5,5,6,6];this.arial11Pt=[3,2,4,6,6,10,7,2,4,4,4,6,3,4,3,3,6,6,6,6,6,6,6,6,6,6,3,3,6,6,6,6,11,8,7,7,7,6,6,8,7,2,5,7,6,8,7,8,6,8,7,7,6,7,8,10,7,8,7,3,3,3,5,6,4,6,6,6,6,6,4,6,6,2,2,5,2,8,6,6,6,6,4,6,3,6,6,10,6,6,6,4,2,4,6,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,2,6,6,7,6,2,6,4,8,4,6,6,0,8,6,4,6,4,4,4,6,6,4,4,4,5,6,9,10,10,6,8,8,8,8,8,8,11,7,6,6,6,6,2,2,2,2,8,7,8,8,8,8,8,6,8,7,7,7,7,8,7,7,6,6,6,6,6,6,10,6,6,6,6,6,2,2,2,2,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6]}},measureString:function(s,f,size,style){var data,dataSize,factor=1,stringSize,i,code;for((style&Bridge.get(AlphaTab.Platform.Model.FontStyle).italic)!=0&&(factor*=1.2),(style&Bridge.get(AlphaTab.Platform.Model.FontStyle).bold)!=0&&(factor*=1.2),f===Bridge.get(AlphaTab.Platform.Svg.SupportedFonts).timesNewRoman?(data=Bridge.get(AlphaTab.Platform.Svg.FontSizes).timesNewRoman,dataSize=11):f===Bridge.get(AlphaTab.Platform.Svg.SupportedFonts).arial?(data=Bridge.get(AlphaTab.Platform.Svg.FontSizes).arial11Pt,dataSize=11):(data=[8],dataSize=11),stringSize=0,i=0;i<s.length;i++)code=Math.min(data.length-1,s.charCodeAt(i)-Bridge.get(AlphaTab.Platform.Svg.FontSizes).ControlChars),code>=0&&(stringSize+=data[code]*size/dataSize);return stringSize*factor}}});Bridge.define("AlphaTab.Rendering.Glyphs.MusicFont",{statics:{constructor:function(){Bridge.get(AlphaTab.Rendering.Glyphs.MusicFont).symbolLookup={};Bridge.get(AlphaTab.Rendering.Glyphs.MusicFont).symbolLookup[Bridge.get(AlphaTab.Rendering.Glyphs.MusicFontSymbol).clefF]=Bridge.get(AlphaTab.Rendering.Glyphs.MusicFont).clefF;Bridge.get(AlphaTab.Rendering.Glyphs.MusicFont).symbolLookup[Bridge.get(AlphaTab.Rendering.Glyphs.MusicFontSymbol).clefC]=Bridge.get(AlphaTab.Rendering.Glyphs.MusicFont).clefC;Bridge.get(AlphaTab.Rendering.Glyphs.MusicFont).symbolLookup[Bridge.get(AlphaTab.Rendering.Glyphs.MusicFontSymbol).restThirtySecond]=Bridge.get(AlphaTab.Rendering.Glyphs.MusicFont).restThirtySecond;Bridge.get(AlphaTab.Rendering.Glyphs.MusicFont).symbolLookup[Bridge.get(AlphaTab.Rendering.Glyphs.MusicFontSymbol).restQuarter]=Bridge.get(AlphaTab.Rendering.Glyphs.MusicFont).restQuarter;Bridge.get(AlphaTab.Rendering.Glyphs.MusicFont).symbolLookup[Bridge.get(AlphaTab.Rendering.Glyphs.MusicFontSymbol).graceUp]=Bridge.get(AlphaTab.Rendering.Glyphs.MusicFont).graceUp;Bridge.get(AlphaTab.Rendering.Glyphs.MusicFont).symbolLookup[Bridge.get(AlphaTab.Rendering.Glyphs.MusicFontSymbol).graceDown]=Bridge.get(AlphaTab.Rendering.Glyphs.MusicFont).graceDown;Bridge.get(AlphaTab.Rendering.Glyphs.MusicFont).symbolLookup[Bridge.get(AlphaTab.Rendering.Glyphs.MusicFontSymbol).trill]=Bridge.get(AlphaTab.Rendering.Glyphs.MusicFont).trill;Bridge.get(AlphaTab.Rendering.Glyphs.MusicFont).symbolLookup[Bridge.get(AlphaTab.Rendering.Glyphs.MusicFontSymbol).clefG]=Bridge.get(AlphaTab.Rendering.Glyphs.MusicFont).clefG;Bridge.get(AlphaTab.Rendering.Glyphs.MusicFont).symbolLookup[Bridge.get(AlphaTab.Rendering.Glyphs.MusicFontSymbol).num0]=Bridge.get(AlphaTab.Rendering.Glyphs.MusicFont).num0;Bridge.get(AlphaTab.Rendering.Glyphs.MusicFont).symbolLookup[Bridge.get(AlphaTab.Rendering.Glyphs.MusicFontSymbol).num1]=Bridge.get(AlphaTab.Rendering.Glyphs.MusicFont).num1;Bridge.get(AlphaTab.Rendering.Glyphs.MusicFont).symbolLookup[Bridge.get(AlphaTab.Rendering.Glyphs.MusicFontSymbol).num2]=Bridge.get(AlphaTab.Rendering.Glyphs.MusicFont).num2;Bridge.get(AlphaTab.Rendering.Glyphs.MusicFont).symbolLookup[Bridge.get(AlphaTab.Rendering.Glyphs.MusicFontSymbol).num3]=Bridge.get(AlphaTab.Rendering.Glyphs.MusicFont).num3;Bridge.get(AlphaTab.Rendering.Glyphs.MusicFont).symbolLookup[Bridge.get(AlphaTab.Rendering.Glyphs.MusicFontSymbol).num4]=Bridge.get(AlphaTab.Rendering.Glyphs.MusicFont).num4;Bridge.get(AlphaTab.Rendering.Glyphs.MusicFont).symbolLookup[Bridge.get(AlphaTab.Rendering.Glyphs.MusicFontSymbol).num5]=Bridge.get(AlphaTab.Rendering.Glyphs.MusicFont).num5;Bridge.get(AlphaTab.Rendering.Glyphs.MusicFont).symbolLookup[Bridge.get(AlphaTab.Rendering.Glyphs.MusicFontSymbol).num6]=Bridge.get(AlphaTab.Rendering.Glyphs.MusicFont).num6;Bridge.get(AlphaTab.Rendering.Glyphs.MusicFont).symbolLookup[Bridge.get(AlphaTab.Rendering.Glyphs.MusicFontSymbol).num7]=Bridge.get(AlphaTab.Rendering.Glyphs.MusicFont).num7;Bridge.get(AlphaTab.Rendering.Glyphs.MusicFont).symbolLookup[Bridge.get(AlphaTab.Rendering.Glyphs.MusicFontSymbol).num8]=Bridge.get(AlphaTab.Rendering.Glyphs.MusicFont).num8;Bridge.get(AlphaTab.Rendering.Glyphs.MusicFont).symbolLookup[Bridge.get(AlphaTab.Rendering.Glyphs.MusicFontSymbol).num9]=Bridge.get(AlphaTab.Rendering.Glyphs.MusicFont).num9;Bridge.get(AlphaTab.Rendering.Glyphs.MusicFont).symbolLookup[Bridge.get(AlphaTab.Rendering.Glyphs.MusicFontSymbol).restSixteenth]=Bridge.get(AlphaTab.Rendering.Glyphs.MusicFont).restSixteenth;Bridge.get(AlphaTab.Rendering.Glyphs.MusicFont).symbolLookup[Bridge.get(AlphaTab.Rendering.Glyphs.MusicFontSymbol).restEighth]=Bridge.get(AlphaTab.Rendering.Glyphs.MusicFont).restEighth;Bridge.get(AlphaTab.Rendering.Glyphs.MusicFont).symbolLookup[Bridge.get(AlphaTab.Rendering.Glyphs.MusicFontSymbol).restWhole]=Bridge.get(AlphaTab.Rendering.Glyphs.MusicFont).restWhole;Bridge.get(AlphaTab.Rendering.Glyphs.MusicFont).symbolLookup[Bridge.get(AlphaTab.Rendering.Glyphs.MusicFontSymbol).noteWhole]=Bridge.get(AlphaTab.Rendering.Glyphs.MusicFont).noteWhole;Bridge.get(AlphaTab.Rendering.Glyphs.MusicFont).symbolLookup[Bridge.get(AlphaTab.Rendering.Glyphs.MusicFontSymbol).noteQuarter]=Bridge.get(AlphaTab.Rendering.Glyphs.MusicFont).noteQuarter;Bridge.get(AlphaTab.Rendering.Glyphs.MusicFont).symbolLookup[Bridge.get(AlphaTab.Rendering.Glyphs.MusicFontSymbol).noteHalf]=Bridge.get(AlphaTab.Rendering.Glyphs.MusicFont).noteHalf;Bridge.get(AlphaTab.Rendering.Glyphs.MusicFont).symbolLookup[Bridge.get(AlphaTab.Rendering.Glyphs.MusicFontSymbol).noteDead]=Bridge.get(AlphaTab.Rendering.Glyphs.MusicFont).noteDead;Bridge.get(AlphaTab.Rendering.Glyphs.MusicFont).symbolLookup[Bridge.get(AlphaTab.Rendering.Glyphs.MusicFontSymbol).noteHarmonic]=Bridge.get(AlphaTab.Rendering.Glyphs.MusicFont).noteHarmonic;Bridge.get(AlphaTab.Rendering.Glyphs.MusicFont).symbolLookup[Bridge.get(AlphaTab.Rendering.Glyphs.MusicFontSymbol).noteRideCymbal]=Bridge.get(AlphaTab.Rendering.Glyphs.MusicFont).noteRideCymbal;Bridge.get(AlphaTab.Rendering.Glyphs.MusicFont).symbolLookup[Bridge.get(AlphaTab.Rendering.Glyphs.MusicFontSymbol).noteHiHat]=Bridge.get(AlphaTab.Rendering.Glyphs.MusicFont).noteHiHat;Bridge.get(AlphaTab.Rendering.Glyphs.MusicFont).symbolLookup[Bridge.get(AlphaTab.Rendering.Glyphs.MusicFontSymbol).noteSideStick]=Bridge.get(AlphaTab.Rendering.Glyphs.MusicFont).noteSideStick;Bridge.get(AlphaTab.Rendering.Glyphs.MusicFont).symbolLookup[Bridge.get(AlphaTab.Rendering.Glyphs.MusicFontSymbol).noteHiHatHalf]=Bridge.get(AlphaTab.Rendering.Glyphs.MusicFont).noteHiHatHalf;Bridge.get(AlphaTab.Rendering.Glyphs.MusicFont).symbolLookup[Bridge.get(AlphaTab.Rendering.Glyphs.MusicFontSymbol).noteChineseCymbal]=Bridge.get(AlphaTab.Rendering.Glyphs.MusicFont).noteChineseCymbal;Bridge.get(AlphaTab.Rendering.Glyphs.MusicFont).symbolLookup[Bridge.get(AlphaTab.Rendering.Glyphs.MusicFontSymbol).footerUpEighth]=Bridge.get(AlphaTab.Rendering.Glyphs.MusicFont).footerUpEighth;Bridge.get(AlphaTab.Rendering.Glyphs.MusicFont).symbolLookup[Bridge.get(AlphaTab.Rendering.Glyphs.MusicFontSymbol).footerUpSixteenth]=Bridge.get(AlphaTab.Rendering.Glyphs.MusicFont).footerUpSixteenth;Bridge.get(AlphaTab.Rendering.Glyphs.MusicFont).symbolLookup[Bridge.get(AlphaTab.Rendering.Glyphs.MusicFontSymbol).footerUpThirtySecond]=Bridge.get(AlphaTab.Rendering.Glyphs.MusicFont).footerUpThirtySecond;Bridge.get(AlphaTab.Rendering.Glyphs.MusicFont).symbolLookup[Bridge.get(AlphaTab.Rendering.Glyphs.MusicFontSymbol).footerUpSixtyFourth]=Bridge.get(AlphaTab.Rendering.Glyphs.MusicFont).footerUpSixtyFourth;Bridge.get(AlphaTab.Rendering.Glyphs.MusicFont).symbolLookup[Bridge.get(AlphaTab.Rendering.Glyphs.MusicFontSymbol).footerDownEighth]=Bridge.get(AlphaTab.Rendering.Glyphs.MusicFont).footerDownEighth;Bridge.get(AlphaTab.Rendering.Glyphs.MusicFont).symbolLookup[Bridge.get(AlphaTab.Rendering.Glyphs.MusicFontSymbol).footerDownSixteenth]=Bridge.get(AlphaTab.Rendering.Glyphs.MusicFont).footerDownSixteenth;Bridge.get(AlphaTab.Rendering.Glyphs.MusicFont).symbolLookup[Bridge.get(AlphaTab.Rendering.Glyphs.MusicFontSymbol).footerDownThirtySecond]=Bridge.get(AlphaTab.Rendering.Glyphs.MusicFont).footerDownThirtySecond;Bridge.get(AlphaTab.Rendering.Glyphs.MusicFont).symbolLookup[Bridge.get(AlphaTab.Rendering.Glyphs.MusicFontSymbol).footerDownSixtyFourth]=Bridge.get(AlphaTab.Rendering.Glyphs.MusicFont).footerDownSixtyFourth;Bridge.get(AlphaTab.Rendering.Glyphs.MusicFont).symbolLookup[Bridge.get(AlphaTab.Rendering.Glyphs.MusicFontSymbol).dynamicP]=Bridge.get(AlphaTab.Rendering.Glyphs.MusicFont).dynamicP;Bridge.get(AlphaTab.Rendering.Glyphs.MusicFont).symbolLookup[Bridge.get(AlphaTab.Rendering.Glyphs.MusicFontSymbol).dynamicF]=Bridge.get(AlphaTab.Rendering.Glyphs.MusicFont).dynamicF;Bridge.get(AlphaTab.Rendering.Glyphs.MusicFont).symbolLookup[Bridge.get(AlphaTab.Rendering.Glyphs.MusicFontSymbol).accentuation]=Bridge.get(AlphaTab.Rendering.Glyphs.MusicFont).accentuation;Bridge.get(AlphaTab.Rendering.Glyphs.MusicFont).symbolLookup[Bridge.get(AlphaTab.Rendering.Glyphs.MusicFontSymbol).heavyAccentuation]=Bridge.get(AlphaTab.Rendering.Glyphs.MusicFont).heavyAccentuation;Bridge.get(AlphaTab.Rendering.Glyphs.MusicFont).symbolLookup[Bridge.get(AlphaTab.Rendering.Glyphs.MusicFontSymbol).waveHorizontal]=Bridge.get(AlphaTab.Rendering.Glyphs.MusicFont).waveHorizontal;Bridge.get(AlphaTab.Rendering.Glyphs.MusicFont).symbolLookup[Bridge.get(AlphaTab.Rendering.Glyphs.MusicFontSymbol).pickStrokeDown]=Bridge.get(AlphaTab.Rendering.Glyphs.MusicFont).pickStrokeDown;Bridge.get(AlphaTab.Rendering.Glyphs.MusicFont).symbolLookup[Bridge.get(AlphaTab.Rendering.Glyphs.MusicFontSymbol).pickStrokeUp]=Bridge.get(AlphaTab.Rendering.Glyphs.MusicFont).pickStrokeUp;Bridge.get(AlphaTab.Rendering.Glyphs.MusicFont).symbolLookup[Bridge.get(AlphaTab.Rendering.Glyphs.MusicFontSymbol).tremoloPickingThirtySecond]=Bridge.get(AlphaTab.Rendering.Glyphs.MusicFont).tremoloPickingThirtySecond;Bridge.get(AlphaTab.Rendering.Glyphs.MusicFont).symbolLookup[Bridge.get(AlphaTab.Rendering.Glyphs.MusicFontSymbol).tremoloPickingSixteenth]=Bridge.get(AlphaTab.Rendering.Glyphs.MusicFont).tremoloPickingSixteenth;Bridge.get(AlphaTab.Rendering.Glyphs.MusicFont).symbolLookup[Bridge.get(AlphaTab.Rendering.Glyphs.MusicFontSymbol).tremoloPickingEighth]=Bridge.get(AlphaTab.Rendering.Glyphs.MusicFont).tremoloPickingEighth;Bridge.get(AlphaTab.Rendering.Glyphs.MusicFont).symbolLookup[Bridge.get(AlphaTab.Rendering.Glyphs.MusicFontSymbol).tempo]=Bridge.get(AlphaTab.Rendering.Glyphs.MusicFont).tempo;Bridge.get(AlphaTab.Rendering.Glyphs.MusicFont).symbolLookup[Bridge.get(AlphaTab.Rendering.Glyphs.MusicFontSymbol).accidentalSharp]=Bridge.get(AlphaTab.Rendering.Glyphs.MusicFont).accidentalSharp;Bridge.get(AlphaTab.Rendering.Glyphs.MusicFont).symbolLookup[Bridge.get(AlphaTab.Rendering.Glyphs.MusicFontSymbol).accidentalFlat]=Bridge.get(AlphaTab.Rendering.Glyphs.MusicFont).accidentalFlat;Bridge.get(AlphaTab.Rendering.Glyphs.MusicFont).symbolLookup[Bridge.get(AlphaTab.Rendering.Glyphs.MusicFontSymbol).accidentalNatural]=Bridge.get(AlphaTab.Rendering.Glyphs.MusicFont).accidentalNatural;Bridge.get(AlphaTab.Rendering.Glyphs.MusicFont).symbolLookup[Bridge.get(AlphaTab.Rendering.Glyphs.MusicFontSymbol).clefNeutral]=Bridge.get(AlphaTab.Rendering.Glyphs.MusicFont).clefNeutral;Bridge.get(AlphaTab.Rendering.Glyphs.MusicFont).symbolLookup[Bridge.get(AlphaTab.Rendering.Glyphs.MusicFontSymbol).restSixtyFourth]=Bridge.get(AlphaTab.Rendering.Glyphs.MusicFont).restSixtyFourth},symbolLookup:null,config:{init:function(){this.clefF=new AlphaTab.Rendering.Glyphs.LazySvg("M 545 -801c -53 49 -80 109 -80 179c 0 33 4 66 12 99c 8 33 38 57 89 74c 51 16 125 31 220 43c 95 12 159 53 192 124c 16 37 24 99 24 186c 0 95 -43 168 -130 220c -86 51 -186 77 -297 77c -128 0 -229 -28 -303 -86c -91 -70 -136 -169 -136 -297c 0 -115 23 -234 71 -356c 47 -121 118 -234 213 -337c 70 -74 163 -129 279 -164c 115 -35 233 -52 353 -52c 45 0 83 1 114 3c 31 2 81 9 151 21c 243 45 444 175 601 390c 144 198 217 409 217 632c 0 41 -2 72 -6 93c -33 281 -219 582 -558 905c -272 260 -591 493 -954 700c -330 190 -527 274 -589 254l -18 -68c 95 -33 197 -78 306 -136c 109 -57 218 -124 325 -198c 276 -198 477 -384 601 -558c 152 -210 252 -471 297 -781c 20 -128 31 -210 31 -248s 0 -68 0 -93c 0 -322 -109 -551 -328 -688c -99 -57 -200 -86 -303 -86c -78 0 -154 15 -226 46C 643 -873 586 -838 545 -801zM 2517 -783c 66 0 121 22 167 68c 45 45 68 101 68 167c 0 66 -22 121 -68 167c -45 45 -101 68 -167 68c -66 0 -122 -22 -167 -68c -45 -45 -68 -101 -68 -167c 0 -66 22 -121 68 -167C 2395 -760 2451 -783 2517 -783zM 2517 54c 66 0 121 22 167 68c 45 45 68 101 68 167c 0 66 -22 121 -68 167c -45 45 -101 68 -167 68c -66 0 -122 -22 -167 -68c -45 -45 -68 -101 -68 -167c 0 -66 22 -121 68 -167C 2395 77 2451 54 2517 54");this.clefC=new AlphaTab.Rendering.Glyphs.LazySvg("M 26 1736V -1924h 458v 3659H 26zM 641 1736V -1924h 150v 3659H 641zM 1099 153c -42 -53 -86 -100 -130 -140c -44 -40 -95 -75 -153 -106c 106 -58 200 -135 279 -233c 110 -135 180 -289 208 -460c 17 127 46 216 87 266c 65 73 170 110 313 110c 150 0 259 -81 324 -244c 50 -124 75 -291 75 -500c 0 -197 -25 -355 -75 -471c -69 -155 -179 -232 -330 -232c -89 0 -167 18 -234 55c -67 36 -101 72 -101 107c 0 19 23 25 69 17c 46 -7 97 6 153 43c 56 36 84 89 84 159c 0 69 -23 125 -69 168c -46 42 -108 63 -185 63c -73 0 -138 -24 -194 -72c -56 -48 -84 -105 -84 -171c 0 -112 56 -212 168 -301c 127 -100 282 -150 463 -150c 228 0 412 74 553 224c 141 149 211 334 211 555c 0 248 -86 458 -258 631c -172 172 -381 259 -629 259c -57 0 -104 -3 -139 -11c -54 -19 -98 -34 -133 -46c -15 49 -48 99 -98 149c -11 15 -48 43 -110 85c 38 19 75 52 110 99c 50 50 88 105 115 164c 65 -31 113 -50 142 -57c 28 -7 70 -11 124 -11c 247 0 457 85 629 257c 172 171 258 380 258 627c 0 211 -73 390 -219 534c -146 144 -332 216 -558 216c -183 0 -334 -47 -453 -142c -118 -94 -178 -198 -178 -310c 0 -69 28 -128 84 -176c 56 -48 120 -72 194 -72c 69 0 129 23 179 69c 50 46 75 104 75 174c 0 65 -28 116 -84 153c -56 36 -107 51 -153 43c -46 -7 -69 0 -69 23c 0 27 35 60 106 101c 70 40 147 60 229 60c 153 0 265 -77 335 -231c 51 -112 76 -268 76 -469c 0 -201 -25 -363 -75 -487c -65 -166 -172 -249 -319 -249c -143 0 -242 30 -298 92c -56 61 -93 156 -113 284C 1279 435 1211 286 1099 153");this.restThirtySecond=new AlphaTab.Rendering.Glyphs.LazySvg("M 717 -2195c 93 -30 174 -104 244 -220c 38 -65 65 -127 81 -185l 140 -604c -69 128 -196 191 -381 191c -50 0 -105 -7 -167 -23c -61 -15 -113 -46 -155 -92c -42 -46 -63 -108 -63 -185c 0 -65 23 -121 69 -168s 104 -69 173 -69c 65 0 123 25 173 75c 50 50 75 104 75 162c 0 31 -7 63 -23 98c -15 34 -44 63 -86 87c 23 11 48 21 75 28c 7 0 27 -3 57 -11c 73 -23 142 -80 208 -170c 57 -90 115 -180 173 -270h 40l -816 3503l -107 0l 318 -1316c -73 128 -196 192 -369 192c -19 0 -38 0 -57 0c -27 -3 -68 -13 -124 -28c -55 -15 -104 -46 -147 -92c -42 -46 -63 -106 -63 -179c 0 -65 23 -121 69 -168c 46 -46 106 -69 179 -69c 65 0 122 24 170 72c 48 48 72 103 72 165c 0 30 -7 63 -23 98c -15 34 -44 63 -86 87c 46 15 71 23 74 23c 7 0 26 -3 57 -11c 92 -27 178 -108 259 -243c 11 -19 26 -50 46 -93l 161 -667c -73 128 -198 192 -375 192c -30 0 -61 0 -92 0c -34 -11 -57 -19 -69 -23c -69 -19 -125 -52 -167 -98c -42 -46 -63 -106 -63 -179c 0 -69 23 -127 69 -174s 106 -69 179 -69c 65 0 122 24 170 72c 48 48 72 103 72 165c 0 31 -7 63 -23 98s -44 65 -86 92c 23 7 46 15 69 23C 665 -2184 686 -2187 717 -2195");this.restQuarter=new AlphaTab.Rendering.Glyphs.LazySvg("M 272 -1668L 979 -850c -54 23 -137 114 -249 272c -127 177 -191 313 -191 405c 0 112 36 226 110 342c 73 115 160 206 260 272l -34 81c -23 -3 -56 -7 -101 -11c -44 -3 -76 -5 -95 -5c -104 0 -182 9 -234 28c -52 19 -88 45 -110 78c -21 32 -31 70 -31 113c 0 81 42 175 127 284c 69 88 115 137 139 145l -28 46c -27 7 -123 -61 -289 -208c -185 -162 -278 -299 -278 -411c 0 -92 35 -168 107 -226c 71 -57 159 -87 263 -87c 54 0 109 7 165 23c 55 15 110 42 165 81l -642 -829c 54 -30 120 -107 199 -229c 79 -121 139 -238 182 -350c 7 -15 11 -42 11 -81c 0 -92 -44 -210 -133 -353c -73 -115 -121 -181 -144 -197H 272");this.graceUp=new AlphaTab.Rendering.Glyphs.LazySvg("M 571 -1659h 53c 12 83 29 154 50 210c 21 56 46 105 74 145c 28 40 71 92 128 156c 56 63 102 118 138 162c 105 135 158 277 158 424c 0 151 -64 336 -193 554h -35c 16 -37 35 -82 57 -132s 40 -95 55 -136s 26 -81 35 -121s 12 -80 12 -119c 0 -62 -12 -125 -38 -188c -25 -63 -60 -121 -106 -175c -45 -53 -97 -97 -155 -130s -118 -51 -181 -55v 1245c 0 70 -21 134 -65 189c -43 55 -99 97 -167 127c -67 29 -135 44 -201 44c -64 0 -118 -16 -160 -48c -42 -32 -63 -79 -63 -140c 0 -65 21 -126 64 -181s 97 -99 163 -131c 65 -32 129 -48 191 -48c 85 0 147 16 184 50V -1082V -1659");this.graceDown=new AlphaTab.Rendering.Glyphs.LazySvg("M -17 335c 0 -69 23 -131 69 -186s 103 -98 173 -128c 69 -30 137 -45 203 -45c 133 0 203 63 211 189c 0 54 -21 110 -65 167c -43 56 -99 103 -168 139s -138 54 -208 54c -63 0 -118 -14 -164 -44v 1104c 90 -15 172 -50 244 -106s 128 -122 168 -200c 40 -78 60 -156 60 -233c -1 -91 -13 -169 -34 -233c -20 -64 -57 -155 -110 -272l 34 -13c 34 60 64 122 91 188c 27 65 48 131 64 199s 23 133 23 198c 0 96 -22 183 -68 259c -45 76 -113 166 -203 269c -89 103 -157 193 -203 271c -45 77 -68 165 -68 264h -50V 335");this.trill=new AlphaTab.Rendering.Glyphs.LazySvg("M 159 862l 148 -431h -291l 33 -97h 288l 61 -196l 190 -136h 56l -114 332c 40 0 100 -7 181 -22c 81 -15 143 -22 187 -22c 26 0 45 5 56 15c 11 10 16 29 16 57c 0 8 -3 37 -11 86c 72 -106 155 -160 246 -160c 72 8 110 50 114 126c 0 42 -9 73 -28 92s -40 28 -64 28c -48 0 -76 -29 -84 -87c 10 -22 16 -43 16 -64c 0 -11 -9 -17 -28 -17c -78 0 -147 86 -207 260l -131 406h -185l 34 -92c -21 9 -53 26 -94 51s -77 44 -108 58s -64 20 -100 20c -50 0 -95 -13 -133 -40c -38 -27 -59 -63 -61 -107c 1 -7 3 -18 5 -32S 157 867 159 862zM 658 837l 140 -412c 0 -4 0 -9 2 -16s 2 -10 2 -11c 0 -9 -7 -13 -22 -13c -34 0 -81 7 -140 21s -104 21 -136 21l -142 423c -6 23 -12 44 -17 64c 0 27 16 44 50 50C 444 958 532 916 658 837");this.clefG=new AlphaTab.Rendering.Glyphs.LazySvg("M 1431 -3070c 95 0 186 114 272 344c 86 229 129 434 129 612c 0 243 -36 471 -108 684c -103 300 -271 545 -504 735l 108 564c 68 -15 132 -22 193 -22c 284 0 504 109 659 329c 132 185 199 410 199 675c 0 204 -65 379 -195 525c -130 145 -299 243 -506 292l 154 816c 0 45 0 77 0 96c 0 152 -54 282 -162 390s -244 181 -407 219c -26 7 -62 11 -108 11c -155 0 -294 -62 -416 -188c -121 -125 -182 -252 -182 -381c 0 -22 1 -39 5 -51c 18 -106 64 -191 136 -253c 72 -62 161 -94 267 -94c 102 0 191 34 267 102c 76 68 113 152 113 250c 0 106 -35 198 -105 276c -70 77 -160 116 -270 116c -26 0 -45 0 -56 0c 42 36 82 63 120 82c 72 36 143 54 212 54c 114 0 235 -62 362 -187c 94 -98 142 -214 142 -347c 0 -19 -1 -55 -3 -108l -138 -776c -49 11 -104 19 -165 23c -61 3 -123 5 -188 5c -339 0 -635 -123 -886 -370c -251 -247 -377 -543 -377 -889c 0 -193 87 -429 262 -706c 117 -189 285 -402 501 -638c 159 -174 254 -271 285 -290c -19 -37 -44 -142 -77 -313c -32 -171 -52 -284 -59 -339c -7 -55 -11 -111 -11 -168c 0 -235 54 -475 163 -718C 1164 -2948 1289 -3070 1431 -3070zM 1247 -129l -96 -507c -41 30 -116 104 -222 222c -106 117 -190 216 -251 296c -110 140 -194 269 -251 387c -76 155 -114 307 -114 455c 0 79 11 159 34 239c 49 167 182 326 400 478c 175 121 360 182 554 182c 53 0 96 -3 127 -11c 30 -7 80 -23 150 -46l -281 -1343c -178 22 -312 106 -403 250c -72 113 -107 237 -107 370c 0 144 80 281 240 410c 137 110 248 165 332 165l -8 39c -106 -15 -227 -70 -364 -164c -186 -132 -298 -291 -336 -477c -11 -56 -17 -111 -17 -164c 0 -185 56 -351 168 -496C 911 12 1060 -83 1247 -129zM 1684 -2306c -19 -125 -34 -201 -46 -227c -34 -76 -92 -113 -172 -113c -76 0 -157 82 -241 247c -84 165 -143 344 -178 538c -7 49 -1 156 17 322c 19 165 36 272 52 322l 132 -113c 91 -45 197 -176 315 -393c 88 -159 132 -313 132 -461C 1695 -2213 1692 -2253 1684 -2306zM 1388 225l 262 1304c 157 -37 282 -114 375 -229c 92 -115 138 -250 138 -405c 0 -30 0 -52 0 -68c -19 -177 -93 -322 -224 -433c -130 -111 -281 -167 -453 -167C 1443 225 1411 225 1388 225");this.num0=new AlphaTab.Rendering.Glyphs.LazySvg("M 0 991c 0 -230 45 -422 135 -577c 104 -183 253 -275 448 -275c 187 0 333 91 437 275c 89 158 135 351 135 577c 0 230 -43 422 -129 577c -104 183 -252 275 -442 275c -187 0 -334 -91 -442 -275C 46 1411 0 1218 0 991zM 583 230c -100 0 -168 72 -202 218c -34 145 -51 326 -51 542c 0 270 23 464 70 583c 46 118 108 178 183 178c 93 0 162 -88 205 -264c 32 -133 48 -298 48 -496c 0 -273 -23 -468 -70 -585C 719 288 658 230 583 230");this.num1=new AlphaTab.Rendering.Glyphs.LazySvg("M 345 1688V 440l -216 410l -37 -32l 253 -685h 351v 1549c 0 32 27 57 81 75c 18 3 46 8 86 16v 75h -685v -70c 35 -7 62 -12 81 -16C 316 1745 345 1720 345 1688");this.num2=new AlphaTab.Rendering.Glyphs.LazySvg("M 427 257c -93 10 -153 37 -178 81c 7 14 14 27 21 37c 68 0 115 7 140 21c 54 28 81 86 81 172c 0 61 -21 113 -64 156s -93 64 -151 64c -61 0 -113 -19 -156 -59c -43 -39 -64 -91 -64 -156c 0 -118 50 -221 151 -307c 100 -86 214 -129 340 -129c 169 0 311 36 426 108c 136 86 205 203 205 351c 0 129 -78 244 -236 345c -132 75 -263 153 -391 232c -78 61 -146 129 -204 205c -25 35 -50 73 -75 113c 110 -64 211 -97 300 -97c 64 0 130 18 198 54c 39 18 87 52 145 102c 46 39 82 59 107 59c 82 0 137 -35 166 -105c 7 -21 12 -57 16 -110h 43c 0 120 -18 216 -54 288c -54 106 -147 160 -280 160c -100 0 -206 -37 -315 -110c -109 -73 -200 -110 -272 -110c -108 0 -178 27 -210 81c -14 64 -23 102 -27 113h -70c 3 -36 8 -70 16 -102c 7 -32 27 -79 59 -140c 46 -93 151 -221 313 -383c 313 -313 469 -505 469 -577C 876 376 726 257 427 257");this.num3=new AlphaTab.Rendering.Glyphs.LazySvg("M 414 1024v -59c 21 0 47 -5 76 -16c 113 -39 193 -77 240 -113c 72 -57 109 -129 109 -216c 0 -111 -35 -204 -106 -278c -70 -73 -149 -110 -237 -110c -112 0 -194 32 -245 97c 3 18 8 34 16 48c 72 0 120 16 145 48c 25 32 37 75 37 129c 0 118 -66 178 -199 178c -57 0 -102 -16 -135 -48c -32 -32 -48 -84 -48 -156c 0 -126 44 -223 132 -291c 88 -68 231 -102 429 -102c 133 0 251 47 353 143c 102 95 153 211 153 348c 0 100 -21 177 -64 229c -43 52 -111 98 -205 137c 86 35 149 77 189 124c 54 64 81 147 81 248c 0 133 -51 247 -153 342c -102 95 -220 143 -353 143c -194 0 -336 -34 -426 -102c -90 -68 -135 -165 -135 -291c 0 -75 15 -128 45 -159c 30 -30 78 -45 143 -45c 129 0 194 59 194 178c 0 57 -12 101 -37 132c -25 30 -75 45 -151 45c 3 21 8 45 16 70c 61 46 135 70 221 70c 82 0 160 -36 232 -108c 72 -72 108 -163 108 -275c 0 -82 -36 -153 -108 -210c -54 -43 -135 -82 -243 -118L 414 1024");this.num4=new AlphaTab.Rendering.Glyphs.LazySvg("M 897 133c -86 147 -174 296 -264 445c -90 149 -162 258 -216 326l -302 469h 448v -556l 378 -318v 874h 162v 75h -162c 0 39 0 81 2 124c 1 43 6 78 13 105c 7 27 39 53 97 78c 7 3 23 8 48 16v 75h -712v -75c 32 -10 55 -18 70 -21c 54 -21 82 -43 86 -64c 3 -18 6 -51 8 -99c 1 -48 4 -94 8 -137h -588v -75c 158 -111 279 -288 361 -529c 43 -237 88 -475 135 -712H 897");this.num5=new AlphaTab.Rendering.Glyphs.LazySvg("M 122 133c 10 7 63 18 159 35c 95 16 177 24 245 24c 89 0 171 -5 245 -16c 73 -10 139 -23 197 -37c 0 61 -8 112 -24 153c -16 41 -47 78 -94 110c -21 14 -62 27 -121 37c -59 10 -112 16 -159 16c -72 0 -145 -5 -221 -16c -75 -10 -117 -21 -124 -32v 475c 93 -104 197 -156 313 -156c 158 0 286 43 383 130c 97 86 145 198 145 336c 0 173 -61 325 -183 455c -122 130 -266 195 -432 195c -39 0 -68 -1 -86 -5c -86 -14 -154 -43 -205 -86c -72 -61 -108 -156 -108 -286c 0 -61 16 -109 48 -145c 32 -36 82 -54 151 -54c 136 0 205 64 205 194c 0 108 -43 169 -129 183c -25 10 -50 23 -75 37c 32 32 68 54 108 67c 39 12 79 18 118 18c 93 0 170 -45 232 -135c 61 -90 91 -219 91 -385c 0 -112 -27 -209 -81 -290c -54 -81 -127 -122 -221 -122c -118 0 -210 54 -275 162h -102V 133");this.num6=new AlphaTab.Rendering.Glyphs.LazySvg("M 871 305c -7 -11 -12 -22 -16 -34c -57 -52 -118 -79 -183 -79c -32 0 -63 7 -91 21c -64 36 -114 110 -148 224c -34 113 -51 227 -51 342c 0 165 19 253 59 264c 75 -108 185 -162 332 -162c 110 0 201 52 273 156c 60 89 91 190 91 302c 0 154 -47 278 -143 369c -95 91 -213 137 -353 137c -190 0 -341 -89 -450 -267c -109 -178 -164 -382 -164 -612c 0 -208 64 -399 194 -572c 129 -172 279 -259 448 -259c 158 0 273 49 345 147c 50 69 75 148 75 239c 0 54 -19 103 -59 147c -39 43 -79 65 -118 65c -68 0 -122 -16 -162 -48c -39 -32 -59 -86 -59 -162c 0 -68 21 -121 64 -159C 795 330 835 309 871 305zM 849 1391c 0 -129 -9 -221 -27 -275c -32 -93 -91 -140 -178 -140c -82 0 -137 38 -164 116c -27 77 -40 177 -40 299c 0 108 14 199 43 275c 28 75 82 113 162 113c 72 0 124 -39 156 -118C 833 1582 849 1492 849 1391");this.num7=new AlphaTab.Rendering.Glyphs.LazySvg("M 313 1850c 10 -86 23 -172 37 -259c 43 -172 118 -313 226 -421c 122 -118 217 -221 286 -307c 90 -111 142 -201 156 -270l 27 -124c -46 30 -96 56 -148 79c -52 22 -103 34 -153 34c -93 0 -206 -40 -340 -122c -64 -40 -120 -61 -167 -61c -57 0 -98 17 -121 51c -23 34 -42 65 -56 94h -64v -356h 54c 7 21 16 44 27 67c 10 23 30 35 59 35c 25 0 62 -16 113 -48c 108 -72 185 -108 232 -108c 75 0 149 26 221 78c 72 52 140 78 205 78c 46 0 82 -22 108 -67c 10 -18 19 -48 27 -89h 70v 340c 0 107 -17 206 -52 295c -10 25 -87 159 -231 403c -35 64 -60 142 -76 234c -15 91 -23 178 -23 260c 0 114 0 175 0 182H 313");this.num8=new AlphaTab.Rendering.Glyphs.LazySvg("M 795 905c 57 18 126 77 205 178c 64 79 97 151 97 216c 0 183 -57 324 -172 421c -97 82 -214 124 -351 124c -151 0 -276 -49 -375 -148c -99 -99 -148 -231 -148 -396c 0 -68 34 -138 102 -210c 50 -54 106 -93 167 -118c -72 -39 -127 -94 -167 -164c -39 -70 -59 -144 -59 -224c 0 -136 48 -244 145 -324c 97 -79 208 -118 334 -118c 133 0 245 40 337 121s 137 195 137 342c 0 57 -32 120 -97 189C 901 845 849 883 795 905zM 389 1040c -57 28 -102 61 -135 97c -46 54 -70 118 -70 194c 0 108 35 204 106 288c 71 84 165 126 282 126c 106 0 185 -24 238 -72s 79 -103 79 -164c 0 -39 -26 -88 -80 -145c -53 -57 -112 -106 -176 -145c -64 -39 -124 -81 -179 -124C 437 1079 415 1061 389 1040zM 708 835c 46 -18 89 -53 126 -105c 37 -52 56 -107 56 -164c 0 -100 -28 -183 -86 -248c -57 -64 -136 -97 -237 -97c -79 0 -145 26 -197 78c -52 52 -78 112 -78 180c 0 36 25 75 75 118c 25 21 72 54 143 97c 70 43 121 77 153 102C 676 808 690 820 708 835");this.num9=new AlphaTab.Rendering.Glyphs.LazySvg("M 333 1682c 3 10 9 21 16 32c 57 50 118 75 183 75c 32 0 62 -7 91 -21c 68 -36 117 -107 148 -213c 30 -106 45 -222 45 -348c 0 -169 -18 -259 -54 -270c -75 111 -185 167 -329 167c -111 0 -200 -48 -267 -146c -66 -97 -99 -202 -99 -315c 0 -155 47 -279 143 -372c 95 -92 215 -138 359 -138c 190 0 343 93 459 280c 100 165 151 365 151 599c 0 208 -64 399 -194 572s -279 259 -448 259c -158 0 -273 -48 -345 -145c -50 -68 -75 -147 -75 -237c 0 -54 19 -102 59 -145c 39 -43 86 -64 140 -64c 61 0 109 16 145 48c 35 32 54 86 54 162c 0 68 -25 124 -75 167C 405 1661 369 1679 333 1682zM 354 594c 0 130 8 222 27 277c 32 94 89 141 172 141c 82 0 138 -40 167 -122c 28 -81 43 -180 43 -296c 0 -112 -12 -199 -37 -261c -36 -86 -93 -130 -172 -130c -75 0 -127 38 -156 114C 369 393 354 486 354 594");this.restSixteenth=new AlphaTab.Rendering.Glyphs.LazySvg("M 494 -1275c 76 -27 149 -91 218 -191c 23 -31 51 -81 86 -151l 161 -667c -73 128 -198 192 -374 192c -30 0 -61 0 -92 0c -34 -11 -57 -19 -69 -23c -69 -19 -125 -52 -167 -98c -42 -46 -63 -106 -63 -179c 0 -69 23 -127 69 -174s 106 -69 179 -69c 65 0 122 24 170 72c 48 48 72 103 72 165c 0 31 -7 63 -23 98s -44 65 -86 92c 19 7 40 15 63 23c 15 0 38 -5 69 -17c 73 -23 140 -79 202 -167c 61 -88 121 -177 179 -267h 40l -602 2586l -106 0l 318 -1316c -73 128 -196 192 -369 192c -19 0 -38 0 -57 0c -27 -3 -68 -13 -124 -28c -55 -15 -104 -46 -147 -92c -42 -46 -63 -106 -63 -179c 0 -65 23 -121 69 -168c 46 -46 106 -69 179 -69c 65 0 122 24 170 72c 48 48 72 103 72 165c 0 30 -7 63 -23 98c -15 34 -44 63 -86 87c 45 15 72 23 80 23C 465 -1269 482 -1271 494 -1275");this.restEighth=new AlphaTab.Rendering.Glyphs.LazySvg("M 247 -1725c 65 0 123 25 173 75c 50 50 75 104 75 162c 0 27 -9 60 -28 98c -19 38 -48 69 -86 92c 23 7 46 15 69 23c 15 0 38 -5 69 -17c 88 -31 175 -113 260 -246c 38 -62 77 -125 115 -188h 40l -382 1670l -112 0l 331 -1316c -73 128 -198 191 -375 191c -19 0 -38 0 -57 0c -27 -3 -69 -13 -127 -28c -57 -15 -106 -46 -147 -92c -40 -46 -60 -106 -60 -179c 0 -69 23 -127 69 -174S 178 -1725 247 -1725");this.restWhole=new AlphaTab.Rendering.Glyphs.LazySvg("M 1046 445H -25v -458h 1071V 445");this.noteWhole=new AlphaTab.Rendering.Glyphs.LazySvg("M 0 437c 0 -109 40 -197 121 -265s 177 -115 290 -143s 216 -41 312 -41c 104 0 213 13 328 41s 214 74 298 141s 128 156 133 266c 0 110 -40 199 -121 268s -177 117 -290 145s -219 43 -319 43c -107 0 -218 -13 -332 -41s -211 -75 -293 -144S 2 550 0 437zM 450 361c 7 133 46 243 118 330s 158 130 259 130c 77 -8 131 -34 161 -77s 44 -117 44 -224c -10 -137 -51 -248 -123 -333s -159 -127 -262 -127c -72 11 -123 37 -152 78S 450 253 450 361");this.noteQuarter=new AlphaTab.Rendering.Glyphs.LazySvg("M 658 800c -108 65 -216 98 -324 98c -119 0 -216 -42 -289 -127c -54 -57 -81 -129 -81 -214c 0 -92 29 -183 89 -272c 59 -88 136 -158 228 -208c 111 -69 223 -104 335 -104c 108 0 200 36 278 110c 57 57 86 131 86 220c 0 92 -31 185 -92 278C 827 673 750 746 658 800");this.noteHalf=new AlphaTab.Rendering.Glyphs.LazySvg("M 669 818c -108 65 -216 98 -324 98c -119 0 -216 -42 -290 -127c -54 -57 -81 -129 -81 -214c 0 -92 29 -183 89 -272c 59 -88 136 -158 229 -208c 112 -69 224 -104 336 -104c 108 0 200 36 278 110c 57 57 87 131 87 220c 0 92 -31 185 -92 278C 839 691 762 764 669 818zM 95 754c 19 23 57 34 115 34c 65 0 132 -13 200 -40c 67 -27 134 -64 200 -113c 65 -48 127 -118 185 -208s 87 -169 87 -234c 0 -23 -5 -44 -17 -63c -11 -15 -34 -23 -69 -23c -46 0 -113 18 -200 55c -87 36 -164 77 -231 121c -67 44 -133 110 -197 197s -95 159 -95 217C 72 720 79 739 95 754");this.noteDead=new AlphaTab.Rendering.Glyphs.LazySvg("M 482 345c 42 -15 70 -38 84 -69c 13 -30 20 -102 20 -214c 0 -30 0 -50 0 -57c 0 -3 0 -7 0 -11h 307v 313c -31 0 -54 0 -69 0c -38 0 -77 1 -115 2c -38 2 -72 8 -101 20c -28 11 -51 38 -66 81v 81c 15 42 38 70 69 84c 30 13 102 20 214 20c 30 0 50 0 57 0c 3 0 7 0 11 0v 313h -307c 0 -31 0 -54 0 -69c 0 -38 -1 -77 -2 -115c -2 -38 -8 -72 -20 -101c -11 -28 -38 -51 -81 -66h -104c -42 15 -70 38 -84 69c -13 30 -20 102 -20 214c 0 30 0 50 0 57c 0 3 0 7 0 11h -307V 595c 30 0 54 0 69 0c 38 0 77 -1 115 -2c 38 -2 72 -8 101 -20c 28 -11 51 -38 66 -81v -81c -15 -42 -38 -70 -69 -84c -31 -13 -102 -20 -214 -20c -31 0 -50 0 -57 0c -3 0 -7 0 -11 0v -313h 307c 0 31 0 54 0 69c 0 38 0 77 2 115c 1 38 8 72 20 101c 11 28 38 51 81 66H 482");this.noteHarmonic=new AlphaTab.Rendering.Glyphs.LazySvg("M 116 453l 452 -452c 108 131 197 220 266 266l 261 202l -446 452c -38 -46 -81 -90 -127 -133c -46 -42 -90 -85 -133 -127c -42 -42 -98 -89 -168 -139C 182 496 147 472 116 453");this.noteRideCymbal=new AlphaTab.Rendering.Glyphs.LazySvg("M 910 417C 763 561 616 695 469 840 384 691 261 576 126 473 79 438 29 407 -23 382 122 239 267 96 412 -46 502 92 628 203 754 310 803 350 853 388 910 417zM 465 696C 561 602 657 508 753 414 655 352 574 268 492 188 464 159 438 128 415 94 320 191 226 288 131 384c 113 55 203 147 285 241 17 22 33 45 48 70z");this.noteHiHat=new AlphaTab.Rendering.Glyphs.LazySvg("M 484 6c -201 -2 -395 126 -471 312 -79 182 -38 409 101 552 134 144 355 197 540 129 191 -65 333 -253 341 -456 12 -199 -104 -398 -283 -485 -70 -35 -148 -53 -227 -53zm 0 101c 90 0 179 32 250 88 -83 80 -168 158 -250 240 -82 -82 -165 -165 -247 -247 70 -52 159 -81 247 -81zm -322 155c 83 83 167 167 250 250 -85 84 -172 166 -257 250 -100 -127 -113 -315 -26 -453 10 -16 21 -33 33 -48zm 647 6c 97 124 112 306 33 444 -14 23 -30 67 -52 24 -75 -75 -152 -149 -228 -225 81 -82 165 -162 247 -244zm -325 322c 83 83 170 164 254 247 -121 101 -303 121 -442 44 -22 -16 -86 -35 -42 -61 76 -76 153 -153 230 -230z");this.noteSideStick=new AlphaTab.Rendering.Glyphs.LazySvg("M 0 0c -25 24 -51 48 -77 72 151 151 302 302 454 454 -144 142 -288 285 -433 427 25 25 51 51 77 77 142 -142 285 -285 427 -427 144 142 288 285 433 427 25 -25 51 -51 77 -77 -144 -142 -288 -285 -433 -427 151 -151 302 -302 454 -454 -25 -24 -51 -48 -77 -72 -151 149 -302 299 -454 449 -149 -149 -299 -299 -449 -449");this.noteHiHatHalf=new AlphaTab.Rendering.Glyphs.LazySvg("M 449 22c 185 -2 364 116 434 288 73 168 35 377 -93 508 -123 133 -327 182 -498 119 -176 -60 -307 -233 -314 -420 -11 -183 96 -366 261 -447 64 -32 137 -49 209 -49zm 0 93c -82 0 -163 30 -228 81 177 176 354 352 531 528 99 -127 104 -319 7 -450 -70 -98 -189 -159 -310 -158zm -296 153c -75 93 -102 223 -64 338 46 160 209 278 377 267 77 -2 153 -30 215 -77 -176 -176 -352 -352 -528 -528z");this.noteChineseCymbal=new AlphaTab.Rendering.Glyphs.LazySvg("M 503 -450l 577 579l -64 66l -516 -514l -512 512l -68 -64L 503 -450zM 499 601l 316 314l 145 -143l -314 -316l 316 -312l -141 -141l -317 319l -317 -323l -136 136l 319 319l -326 326l 140 140L 499 601");this.footerUpEighth=new AlphaTab.Rendering.Glyphs.LazySvg("M 9 1032V -9h 87c 20 137 48 252 83 345s 75 172 122 238s 116 151 209 255s 168 193 225 265c 172 221 259 453 259 695c 0 248 -105 550 -317 907h -57c 27 -62 58 -134 94 -216s 65 -156 90 -223s 43 -133 57 -199s 21 -131 21 -196c 0 -102 -20 -204 -62 -308s -99 -199 -174 -287s -159 -159 -254 -213s -194 -84 -296 -90v 68H 9");this.footerUpSixteenth=new AlphaTab.Rendering.Glyphs.LazySvg("M 943 1912c 62 135 94 280 94 435c 0 202 -61 404 -183 605h -57c 108 -233 162 -430 162 -590c 0 -117 -26 -220 -78 -309c -52 -89 -118 -166 -198 -230c -80 -64 -187 -137 -322 -220s -220 -136 -257 -161v 72h -86V 8h 86c 6 108 28 200 65 276s 74 133 111 170s 109 106 218 206s 190 184 245 252c 87 109 151 216 191 319s 60 212 60 328C 994 1648 977 1764 943 1912zM 897 1815c 0 -17 0 -41 1 -72s 1 -53 1 -68c 0 -369 -266 -701 -798 -996c 3 120 31 229 83 327s 130 199 233 303s 195 195 276 273C 776 1659 843 1737 897 1815");this.footerUpThirtySecond=new AlphaTab.Rendering.Glyphs.LazySvg("M 14 1990V 10h 87c 11 121 35 216 70 283c 35 66 89 134 161 202c 72 68 174 164 307 288c 235 226 353 494 353 802c 0 106 -14 211 -43 317c 29 90 43 186 43 287c 0 79 -12 171 -36 274c 57 73 86 191 86 352c 0 112 -15 226 -46 342s -76 218 -137 308h -57c 108 -223 162 -418 162 -582c 0 -104 -20 -199 -62 -284s -99 -163 -172 -232c -73 -69 -153 -133 -239 -192s -215 -142 -389 -251v 64H 14zM 108 1292c 7 113 39 215 96 305c 56 89 129 176 218 259s 179 168 273 257c 93 88 160 168 199 240c 2 -19 3 -48 3 -87C 900 1904 636 1579 108 1292zM 115 666c 0 106 23 197 71 272s 129 166 247 274s 209 197 276 268s 129 168 187 288c 7 -42 10 -83 10 -122c 0 -146 -40 -280 -120 -401c -80 -121 -171 -221 -273 -300C 411 867 278 774 115 666");this.footerUpSixtyFourth=new AlphaTab.Rendering.Glyphs.LazySvg("M 21 2851V 564v -554h 86c 0 140 32 254 98 342c 65 87 173 200 322 339s 261 271 336 400s 113 292 113 490c 0 96 -12 208 -36 338c 43 83 65 188 65 316c 0 122 -21 237 -65 345c 48 109 72 223 72 342c 0 117 -24 222 -72 316c 57 85 86 205 86 360c 0 218 -53 443 -161 673h -65c 98 -280 147 -498 147 -652c 0 -115 -22 -210 -65 -284s -93 -130 -149 -170c -56 -39 -153 -100 -291 -183s -247 -156 -327 -221l 0 87L 21 2851zM 107 2001c 0 121 29 233 89 336s 138 203 236 301s 192 190 280 278c 88 87 149 166 181 235c 11 -60 17 -112 17 -155c 0 -212 -81 -405 -244 -578C 505 2246 318 2106 107 2001zM 114 668c 0 119 22 219 68 300s 127 176 245 286c 118 109 208 198 272 265c 63 66 128 163 195 290c 7 -46 10 -90 10 -133c 0 -166 -41 -313 -124 -439s -177 -229 -281 -308C 395 848 267 762 114 668zM 114 1338c 0 123 24 226 73 309s 133 176 252 282s 211 193 278 263s 128 164 183 283c 9 -45 14 -94 14 -147c 0 -138 -39 -270 -116 -395s -177 -236 -297 -334S 252 1413 114 1338");this.footerDownEighth=new AlphaTab.Rendering.Glyphs.LazySvg("M 9 -1032V 9h 87c 20 -137 48 -252 83 -345s 75 -172 122 -238s 116 -151 209 -255s 168 -193 225 -265c 172 -221 259 -453 259 -695c 0 -248 -105 -550 -317 -907h -57c 27 62 58 134 94 216s 65 156 90 223s 43 133 57 199s 21 131 21 196c 0 102 -20 204 -62 308s -99 199 -174 287s -159 159 -254 213s -194 84 -296 90v 68H 9");this.footerDownSixteenth=new AlphaTab.Rendering.Glyphs.LazySvg("M 943 -1912c 62 -135 94 -280 94 -435c 0 -202 -61 -404 -183 -605h -57c 108 233 162 430 162 590c 0 117 -26 220 -78 309c -52 89 -118 166 -198 230c -80 64 -187 137 -322 220s -220 136 -257 161v 72h -86V -8h 86c 6 -108 28 -200 65 -276s 74 -133 111 -170s 109 -106 218 -206s 190 -184 245 -252c 87 -109 151 -216 191 -319s 60 -212 60 -328C 994 -1648 977 -1764 943 -1912zM 897 -1815c 0 17 0 41 1 72s 1 53 1 68c 0 369 -266 701 -798 996c 3 -120 31 -229 83 -327s 130 -199 233 -303s 195 -195 276 -273C 776 -1659 843 -1737 897 -1815");this.footerDownThirtySecond=new AlphaTab.Rendering.Glyphs.LazySvg("M 14 -1990V -10h 87c 11 -121 35 -216 70 -283c 35 -66 89 -134 161 -202c 72 -68 174 -164 307 -288c 235 -226 353 -494 353 -802c 0 -106 -14 -211 -43 -317c 29 -90 43 -186 43 -287c 0 -79 -12 -171 -36 -274c 57 -73 86 -191 86 -352c 0 -112 -15 -226 -46 -342s -76 -218 -137 -308h -57c 108 223 162 418 162 582c 0 104 -20 199 -62 284s -99 163 -172 232c -73 69 -153 133 -239 192s -215 142 -389 251v 64H 14zM 108 -1292c 7 -113 39 -215 96 -305c 56 -89 129 -176 218 -259s 179 -168 273 -257c 93 -88 160 -168 199 -240c 2 19 3 48 3 87C 900 -1904 636 -1579 108 -1292zM 115 -666c 0 -106 23 -197 71 -272s 129 -166 247 -274s 209 -197 276 -268s 129 -168 187 -288c 7 42 10 83 10 122c 0 146 -40 280 -120 401c -80 121 -171 221 -273 300C 411 -867 278 -774 115 -666");this.footerDownSixtyFourth=new AlphaTab.Rendering.Glyphs.LazySvg("M 21 -2851V -564v -554h 86c 0 -140 32 -254 98 -342c 65 -87 173 -200 322 -339s 261 -271 336 -400s 113 -292 113 -490c 0 -96 -12 -208 -36 -338c 43 -83 65 -188 65 -316c 0 -122 -21 -237 -65 -345c 48 -109 72 -223 72 -342c 0 -117 -24 -222 -72 -316c 57 -85 86 -205 86 -360c 0 -218 -53 -443 -161 -673h -65c 98 280 147 498 147 652c 0 115 -22 210 -65 284s -93 130 -149 170c -56 39 -153 100 -291 183s -247 156 -327 221l 0 -87L 21 -2851zM 107 -2001c 0 -121 29 -233 89 -336s 138 -203 236 -301s 192 -190 280 -278c 88 -87 149 -166 181 -235c 11 60 17 112 17 155c 0 212 -81 405 -244 578C 505 -2246 318 -2106 107 -2001zM 114 -668c 0 -119 22 -219 68 -300s 127 -176 245 -286c 118 -109 208 -198 272 -265c 63 -66 128 -163 195 -290c 7 46 10 90 10 133c 0 166 -41 313 -124 439s -177 229 -281 308C 395 -848 267 -762 114 -668zM 114 -1338c 0 -123 24 -226 73 -309s 133 -176 252 -282s 211 -193 278 -263s 128 -164 183 -283c 9 45 14 94 14 147c 0 138 -39 270 -116 395s -177 236 -297 334S 252 -1413 114 -1338");this.dynamicP=new AlphaTab.Rendering.Glyphs.LazySvg("M 447 894l -146 415l 92 0v 50h -364v -50h 93l 310 -797c 7 -9 10 -16 10 -21c 7 -19 7 -33 0 -43c -14 -14 -27 -21 -39 -21c -38 0 -83 48 -133 144c -14 31 -34 79 -61 144h -25c 26 -72 48 -125 64 -158c 57 -108 116 -162 176 -162c 19 0 33 2 43 7c 12 4 21 18 28 39c 2 7 4 19 7 36c 16 -26 47 -52 90 -79c 43 -26 89 -39 137 -39c 19 0 45 5 77 16c 32 10 59 37 81 78c 21 41 32 89 32 141c 0 35 -2 64 -7 86c -4 21 -13 50 -25 86c -26 64 -71 123 -133 177s -119 80 -169 80C 528 1024 481 981 447 894zM 754 425c -33 -14 -73 5 -119 58c -36 43 -67 92 -93 145c -26 53 -39 113 -39 181c 0 48 9 78 28 90c 26 14 62 0 108 -41c 45 -42 81 -92 108 -150c 9 -24 19 -56 28 -96c 9 -40 14 -74 14 -103C 790 462 778 435 754 425");this.dynamicF=new AlphaTab.Rendering.Glyphs.LazySvg("M 951 406v 39h -194l -18 90c -48 194 -97 344 -147 447c -67 141 -154 245 -259 310c -33 21 -77 32 -129 32c -77 0 -127 -21 -151 -64c -14 -26 -21 -51 -21 -75c 0 -38 13 -71 41 -97c 27 -26 57 -37 88 -32c 55 9 83 36 83 79c 0 16 -3 32 -10 46c -9 33 -32 55 -68 64c -12 2 -16 7 -14 14c 4 19 22 28 54 28c 16 -2 36 -14 57 -36c 7 -7 22 -26 47 -57c 52 -79 102 -205 147 -378c 19 -77 38 -154 57 -231l 32 -140h -137v -39h 144c -14 -55 21 -139 108 -252c 65 -84 144 -139 238 -166c 28 -7 57 -10 86 -10c 60 0 109 15 148 46c 38 31 57 72 57 122c 0 48 -14 81 -43 99c -28 18 -56 21 -83 9c -31 -14 -46 -38 -46 -72c 0 -28 10 -52 32 -72c 7 -7 22 -12 46 -14c 24 -2 37 -8 39 -18c 7 -28 -16 -43 -72 -43c -33 0 -64 6 -93 18c -77 33 -132 102 -166 205c -9 33 -20 83 -32 148H 951");this.dynamicM=new AlphaTab.Rendering.Glyphs.LazySvg("M 553 1076l -165 1l 201 -502c 7 -12 11 -21 14 -28c 12 -26 18 -45 18 -57c 0 -21 -8 -33 -25 -36c -31 -7 -62 9 -93 50c -9 12 -22 33 -39 65l -199 508l -164 0l 212 -501c 4 -10 7 -17 7 -22c 4 -19 7 -37 7 -52c 0 -17 -3 -28 -10 -33c -9 -10 -22 -14 -39 -14c -50 0 -116 61 -198 183c -12 19 -30 47 -54 84h -18c 43 -73 78 -126 104 -160c 86 -106 165 -154 238 -142c 16 2 37 21 61 56c 7 10 18 28 32 56c 14 -26 28 -45 43 -57c 45 -40 101 -61 166 -61c 31 0 54 19 68 57c 2 12 6 32 10 61c 21 -30 39 -51 54 -62c 48 -39 101 -56 158 -49c 55 7 89 30 104 69c 2 11 3 30 3 55l -163 437c -12 19 -20 32 -22 39c -7 14 -4 22 7 25c 21 2 54 -20 97 -68c 14 -14 34 -39 61 -75h 21c -31 44 -56 78 -75 101c -62 67 -125 101 -188 101c -24 0 -43 -10 -57 -32c -14 -21 -16 -43 -7 -65l 169 -429c 4 -7 6 -11 6 -14c 10 -26 16 -47 16 -64c 0 -26 -10 -40 -32 -43c -28 -7 -58 9 -89 50c -9 12 -22 33 -39 64L 553 1076");this.accentuation=new AlphaTab.Rendering.Glyphs.LazySvg("M 748 286C 382 365 16 445 -350 525c 0 -23 0 -46 0 -69C -58 400 234 344 526 288 233 233 -58 178 -351 124c 0 -24 0 -49 0 -74 366 78 732 157 1099 236z");this.heavyAccentuation=new AlphaTab.Rendering.Glyphs.LazySvg("M -223 900L -275 900l 349 -1004l 353 1004l -128 0l -264 -750L -223 900");this.waveHorizontal=new AlphaTab.Rendering.Glyphs.LazySvg("M 1382 230c -43 32 -92 69 -146 111s -104 76 -149 105c -45 28 -89 51 -134 68s -86 26 -127 28c -47 -6 -87 -19 -119 -38s -79 -51 -143 -98c -64 -46 -117 -81 -160 -102c -42 -21 -90 -32 -141 -32c -79 0 -174 55 -285 166v -112c 132 -110 241 -193 327 -249s 166 -83 244 -83c 48 0 93 11 134 34c 40 22 88 56 144 101c 55 44 103 79 143 103c 40 24 85 37 135 40c 89 -7 182 -55 278 -146V 230");this.waveVertical=new AlphaTab.Rendering.Glyphs.LazySvg("M 165 4h 50c 47 44 86 85 115 122s 43 75 43 114c 0 31 -9 60 -28 85c -19 25 -47 55 -85 89s -66 64 -86 90c -19 26 -30 55 -31 88h 5c 0 31 9 60 27 86c 18 25 46 56 84 93s 66 68 86 95c 19 27 28 57 28 92c 0 33 -9 62 -28 89c -19 26 -47 57 -85 92c -37 35 -65 64 -84 89c -18 24 -27 51 -27 82c 0 17 22 59 67 127h -50c -59 -57 -100 -100 -124 -130c -23 -29 -35 -67 -35 -113c 0 -33 9 -62 27 -86c 18 -24 46 -53 85 -87c 38 -33 66 -63 85 -88c 18 -25 28 -55 28 -91c 0 -17 -8 -37 -26 -61s -42 -54 -73 -89c -31 -35 -53 -60 -64 -75c -41 -64 -61 -109 -61 -135c 1 -40 20 -80 56 -119c 35 -38 72 -77 110 -117c 38 -39 58 -76 60 -112c 0 -18 -4 -35 -13 -50C 210 72 192 44 165 4");this.pickStrokeDown=new AlphaTab.Rendering.Glyphs.LazySvg("M 0 -20h 816v 844h -74v -477h -672v 477H 0V -20");this.pickStrokeUp=new AlphaTab.Rendering.Glyphs.LazySvg("M 551 -7L 289 950l -264 -956h 66l 202 759l 193 -759H 551");this.tremoloPickingThirtySecond=new AlphaTab.Rendering.Glyphs.LazySvg("M -488 787v -250l 986 -505v 253L -488 787zM -488 1200v -250l 986 -505v 253L -488 1200zM -488 1612v -250l 986 -505v 261L -488 1612");this.tremoloPickingSixteenth=new AlphaTab.Rendering.Glyphs.LazySvg("M -488 787v -250l 986 -505v 253L -488 787zM -488 1200v -250l 986 -505v 253L -488 1200");this.tremoloPickingEighth=new AlphaTab.Rendering.Glyphs.LazySvg("M -488 787v -250l 986 -505v 253L -488 787");this.upperMordent=new AlphaTab.Rendering.Glyphs.LazySvg("M 16 714v -195l 425 -494c 34 -22 53 -33 56 -33c 19 0 33 6 39 20l 349 306c 17 17 36 28 56 33c 19 -6 33 -12 39 -19l 264 -307c 33 -22 53 -33 59 -33c 17 0 29 6 36 20l 349 306c 20 21 39 34 55 40c 20 -7 34 -16 40 -26l 224 -264v 194l -422 494c -32 22 -54 33 -66 33c -15 0 -26 -6 -33 -19l -346 -310c -15 -15 -37 -23 -66 -23c -16 0 -26 3 -29 9l -267 310c -25 22 -46 33 -62 33c -14 0 -25 -6 -33 -19l -346 -310c -18 -19 -40 -29 -66 -29c -14 0 -25 5 -32 16L 16 714");this.lowerMordent=new AlphaTab.Rendering.Glyphs.LazySvg("M -34 664v -195l 399 -458c 34 -37 58 -56 72 -56s 41 18 82 56l 352 310v -607h 99v 525l 191 -227c 38 -41 62 -62 72 -62c 10 0 38 16 82 50l 277 247c 64 53 99 80 102 82c 10 -2 24 -15 43 -38c 18 -23 33 -39 42 -50l 115 -142v 178l -349 412c -26 34 -51 52 -75 52c -12 0 -40 -19 -83 -59l -257 -230c -46 -46 -83 -69 -111 -69c -7 0 -12 1 -17 5c -4 3 -9 9 -16 17c -6 8 -11 14 -16 19v 607h -99v -492l -121 149c -31 34 -56 52 -75 52c -7 0 -15 -2 -22 -6c -7 -4 -18 -12 -32 -25c -14 -12 -25 -21 -33 -27l -290 -263c -35 -28 -57 -42 -66 -42c -15 0 -33 14 -56 42L -34 664");this.turn=new AlphaTab.Rendering.Glyphs.LazySvg("M 1141 739c -20 -17 -65 -56 -136 -115c -70 -60 -143 -117 -218 -172c -75 -54 -150 -100 -224 -136c -73 -36 -140 -54 -199 -54c -74 6 -138 45 -191 115s -82 143 -85 218c 8 119 77 179 208 179c 18 0 33 -3 45 -9c 11 -6 31 -20 59 -40c 28 -20 53 -35 75 -45c 22 -9 48 -14 79 -14c 89 0 146 39 170 117c 0 76 -31 132 -93 169c -62 36 -129 55 -202 55c -165 -8 -290 -53 -373 -135c -83 -82 -124 -182 -124 -301c 0 -85 22 -171 67 -255c 44 -84 107 -155 189 -213c 81 -57 174 -92 279 -105c 137 0 267 29 388 89c 121 59 240 137 356 232c 116 95 229 188 337 278c 42 35 97 69 165 101c 67 31 131 47 191 47c 92 -5 162 -35 210 -91c 47 -56 71 -121 71 -196c 0 -64 -18 -119 -55 -162c -36 -43 -85 -65 -146 -65c -21 0 -50 12 -89 38c -38 25 -68 43 -90 55c -22 11 -53 17 -93 17c -42 0 -79 -14 -113 -44c -33 -29 -50 -66 -50 -111c 0 -60 31 -104 95 -134c 63 -29 130 -44 200 -44c 102 0 192 24 269 72c 76 48 135 112 175 191c 40 78 60 161 60 249c 0 87 -20 168 -60 243c -40 74 -101 134 -184 179c -82 45 -185 68 -306 68c -116 0 -224 -22 -323 -66C 1375 894 1264 827 1141 739");this.openNote=new AlphaTab.Rendering.Glyphs.LazySvg("M 443 922c -124 0 -229 -45 -315 -135s -128 -197 -128 -322c 0 -130 42 -239 126 -326c 84 -87 189 -130 316 -130c 122 0 225 39 310 118c 84 78 130 177 138 295c 0 145 -41 263 -125 354S 575 915 443 922zM 426 96c -101 0 -182 35 -244 107c -61 71 -92 158 -92 260c 0 101 32 185 98 252s 150 100 254 100c 113 0 201 -36 264 -109s 94 -168 94 -288C 780 204 655 96 426 96");this.stoppedNote=new AlphaTab.Rendering.Glyphs.LazySvg("M 462 1009v -449h -445v -122h 445V -3h 118v 441h 452v 122h -452v 449H 462");this.tempo=new AlphaTab.Rendering.Glyphs.LazySvg("M 550 1578V 30l 43 8v 1679c 0 86 -41 160 -124 220s -173 90 -272 90c -114 0 -182 -46 -203 -139c 0 -84 41 -164 125 -239s 173 -112 270 -112C 457 1539 510 1552 550 1578zM 914 1686v -76h 540v 76H 914zM 914 1850h 540v 80h -540V 1850");this.accidentalSharp=new AlphaTab.Rendering.Glyphs.LazySvg("M 482 -275v -577h 93v 540l 135 -57v 343l -135 57v 551l 135 -62v 343l -135 57v 561h -93v -525l -223 93v 566h -93v -530l -135 52v -343l 135 -52v -551l -135 57v -348l 135 -52v -561h 93v 525L 482 -275zM 258 156v 551l 223 -93v -546L 258 156");this.accidentalFlat=new AlphaTab.Rendering.Glyphs.LazySvg("M -23 -1273h 93v 1300c 48 -27 86 -48 114 -62c 93 -41 176 -62 249 -62c 52 0 97 13 137 39c 39 26 70 70 91 132c 10 31 15 62 15 93c 0 100 -50 204 -150 311c -72 76 -157 143 -254 202c -41 24 -97 69 -166 135c -45 41 -88 84 -130 129V -1273zM 367 17c -7 -3 -13 -6 -20 -10c -17 -6 -33 -10 -46 -10c -27 0 -59 7 -93 23c -34 15 -79 46 -135 91v 644c 65 -65 131 -131 197 -197c 128 -156 192 -284 192 -384C 460 103 429 51 367 17");this.accidentalNatural=new AlphaTab.Rendering.Glyphs.LazySvg("M 38 472V -1283h 99v 792l 478 -132v 1738h -93v -775L 38 472zM 137 180l 385 -104v -429l -385 104V 180");this.clefNeutral=new AlphaTab.Rendering.Glyphs.LazySvg("M 915 1887v -1875h 337v 1875H 915zM 1477 1887v -1875h 337v 1875H 1477");this.restSixtyFourth=new AlphaTab.Rendering.Glyphs.LazySvg("M 705 -2202c 77 -26 144 -77 200 -150c 56 -73 101 -174 136 -305l 127 -547c -69 127 -197 191 -382 191c -46 0 -100 -7 -162 -23c -61 -15 -114 -46 -156 -92c -42 -46 -63 -108 -63 -185c 0 -65 23 -121 69 -168c 46 -46 104 -69 174 -69c 65 0 123 25 174 75c 50 50 75 104 75 162c 0 31 -7 63 -23 98c -15 34 -44 63 -87 87c 46 15 71 23 75 23c 7 0 27 -3 57 -11c 77 -23 148 -81 213 -174c 53 -73 86 -137 98 -191l 154 -638c -73 128 -198 192 -375 192c -30 0 -61 0 -92 0c -34 -11 -57 -19 -69 -23c -69 -19 -125 -52 -167 -98c -42 -46 -63 -106 -63 -179c 0 -69 23 -127 69 -174c 46 -46 104 -69 174 -69s 128 24 176 72c 48 48 72 103 72 165c 0 31 -7 63 -23 98c -15 34 -42 65 -81 92c 19 7 40 15 63 23c 11 0 32 -3 63 -11c 73 -23 140 -80 202 -169c 61 -89 121 -179 179 -271l 41 0l -1032 4425l -107 0l 319 -1316c -73 128 -196 192 -370 192c -19 0 -38 0 -57 0c -27 -3 -68 -13 -124 -28c -55 -15 -105 -46 -147 -92c -42 -46 -63 -106 -63 -179c 0 -65 23 -121 69 -168c 46 -46 106 -69 179 -69c 65 0 122 24 171 72c 48 48 72 103 72 165c 0 30 -7 63 -23 98c -15 34 -44 63 -87 87c 46 15 71 23 75 23c 7 0 26 -3 57 -11c 76 -23 150 -83 219 -180c 57 -77 86 -129 86 -156l 161 -667c -73 124 -198 186 -375 186c -30 0 -61 0 -92 0c -34 -11 -57 -19 -69 -22c -69 -19 -125 -51 -167 -97c -42 -45 -63 -105 -63 -177c 0 -68 23 -126 69 -172c 46 -45 106 -68 179 -68c 65 0 122 23 171 71c 48 47 72 102 72 163c 0 30 -7 63 -23 97c -15 34 -44 65 -87 91c 23 7 46 14 69 21C 653 -2190 674 -2194 705 -2202");this.accidentalDoubleFlat=new AlphaTab.Rendering.Glyphs.LazySvg("M 67 25c 52 -27 93 -48 124 -62c 100 -45 176 -67 228 -67c 45 0 95 12 150 36V -1275h 88v 1300c 48 -27 88 -48 119 -62c 100 -45 183 -67 249 -67c 55 0 104 13 145 39c 41 26 72 71 93 137c 10 31 15 62 15 93c 0 107 -48 212 -145 316c -72 79 -163 143 -270 192c -34 17 -78 52 -132 104c -53 51 -108 107 -163 166v -529c -38 45 -72 83 -104 115c -55 55 -121 103 -197 141c -45 20 -102 68 -171 141c -41 41 -81 85 -119 131V -1275h 88V 25zM 369 15c -7 -3 -13 -6 -20 -10c -17 -6 -33 -10 -46 -10c -31 0 -64 7 -98 23c -34 15 -79 46 -135 91v 644c 65 -65 131 -131 197 -197c 131 -159 197 -287 197 -384C 462 101 431 49 369 15zM 962 15c -3 -3 -12 -6 -26 -10c -20 -6 -36 -10 -46 -10c -31 0 -63 7 -96 23c -33 15 -77 46 -132 91v 644c 65 -65 131 -131 197 -197c 131 -159 197 -287 197 -384C 1055 101 1024 49 962 15");this.accidentalDoubleSharp=new AlphaTab.Rendering.Glyphs.LazySvg("M 22 243c -32 -31 -48 -68 -48 -110c 0 -38 15 -71 45 -98c 30 -27 63 -40 98 -40c 38 0 70 14 96 43c 64 57 116 124 158 199c 41 75 62 146 62 213c -83 0 -172 -30 -268 -91C 99 317 51 278 22 243zM 18 872c 25 25 59 38 100 38c 38 0 70 -14 96 -43c 44 -38 86 -86 124 -144c 64 -96 96 -187 96 -273c -70 0 -140 18 -211 55c -70 36 -137 87 -201 151c -32 31 -48 70 -48 115C -26 810 -11 843 18 872zM 848 32c -25 -25 -60 -38 -105 -38c -41 0 -76 16 -105 48c -57 67 -94 113 -110 139c -60 96 -91 185 -91 268c 92 0 182 -28 268 -86c 79 -67 124 -105 134 -115c 31 -31 48 -72 48 -120C 886 96 874 64 848 32zM 838 656c 31 31 48 70 48 115c 0 38 -14 72 -43 100s -62 43 -100 43c -38 0 -73 -16 -105 -48c -51 -57 -88 -105 -110 -144c -60 -96 -91 -187 -91 -273c 105 0 211 41 316 124C 803 622 832 650 838 656")}}}});Bridge.define("AlphaTab.Rendering.Glyphs.TabTieGlyph",{inherits:[AlphaTab.Rendering.Glyphs.TieGlyph],constructor:function(startNote,endNote,parent,forEnd){AlphaTab.Rendering.Glyphs.TieGlyph.prototype.$constructor.call(this,startNote,endNote,parent,forEnd);forEnd===void 0&&(forEnd=!1)},doLayout:function(){AlphaTab.Rendering.Glyphs.TieGlyph.prototype.doLayout.call(this);this.yOffset=this.renderer.getResources().tablatureFont.size/2},getBeamDirection:function(){return this.startNote.string>3?Bridge.get(AlphaTab.Rendering.Utils.BeamDirection).down:Bridge.get(AlphaTab.Rendering.Utils.BeamDirection).up}});Bridge.define("AlphaTab.Rendering.Glyphs.ScoreTieGlyph",{inherits:[AlphaTab.Rendering.Glyphs.TieGlyph],constructor:function(startNote,endNote,parent,forEnd){AlphaTab.Rendering.Glyphs.TieGlyph.prototype.$constructor.call(this,startNote,endNote,parent,forEnd);forEnd===void 0&&(forEnd=!1)},doLayout:function(){AlphaTab.Rendering.Glyphs.TieGlyph.prototype.doLayout.call(this);this.yOffset=Bridge.get(AlphaTab.Rendering.Glyphs.NoteHeadGlyph).NoteHeadHeight},getBeamDirection:function(note,noteRenderer){return noteRenderer.getBeatDirection(note.beat)}});Bridge.define("AlphaTab.Rendering.Utils.AccidentalHelper",{statics:{StepsPerOctave:7,config:{init:function(){this.accidentalNotes=[[Bridge.get(AlphaTab.Model.AccidentalType).natural,Bridge.get(AlphaTab.Model.AccidentalType).none,Bridge.get(AlphaTab.Model.AccidentalType).natural,Bridge.get(AlphaTab.Model.AccidentalType).none,Bridge.get(AlphaTab.Model.AccidentalType).natural,Bridge.get(AlphaTab.Model.AccidentalType).natural,Bridge.get(AlphaTab.Model.AccidentalType).none,Bridge.get(AlphaTab.Model.AccidentalType).natural,Bridge.get(AlphaTab.Model.AccidentalType).none,Bridge.get(AlphaTab.Model.AccidentalType).natural,Bridge.get(AlphaTab.Model.AccidentalType).none,Bridge.get(AlphaTab.Model.AccidentalType).natural],[Bridge.get(AlphaTab.Model.AccidentalType).natural,Bridge.get(AlphaTab.Model.AccidentalType).none,Bridge.get(AlphaTab.Model.AccidentalType).natural,Bridge.get(AlphaTab.Model.AccidentalType).none,Bridge.get(AlphaTab.Model.AccidentalType).natural,Bridge.get(AlphaTab.Model.AccidentalType).none,Bridge.get(AlphaTab.Model.AccidentalType).none,Bridge.get(AlphaTab.Model.AccidentalType).natural,Bridge.get(AlphaTab.Model.AccidentalType).none,Bridge.get(AlphaTab.Model.AccidentalType).natural,Bridge.get(AlphaTab.Model.AccidentalType).none,Bridge.get(AlphaTab.Model.AccidentalType).natural],[Bridge.get(AlphaTab.Model.AccidentalType).none,Bridge.get(AlphaTab.Model.AccidentalType).none,Bridge.get(AlphaTab.Model.AccidentalType).natural,Bridge.get(AlphaTab.Model.AccidentalType).none,Bridge.get(AlphaTab.Model.AccidentalType).natural,Bridge.get(AlphaTab.Model.AccidentalType).none,Bridge.get(AlphaTab.Model.AccidentalType).none,Bridge.get(AlphaTab.Model.AccidentalType).natural,Bridge.get(AlphaTab.Model.AccidentalType).none,Bridge.get(AlphaTab.Model.AccidentalType).natural,Bridge.get(AlphaTab.Model.AccidentalType).none,Bridge.get(AlphaTab.Model.AccidentalType).natural],[Bridge.get(AlphaTab.Model.AccidentalType).none,Bridge.get(AlphaTab.Model.AccidentalType).none,Bridge.get(AlphaTab.Model.AccidentalType).natural,Bridge.get(AlphaTab.Model.AccidentalType).none,Bridge.get(AlphaTab.Model.AccidentalType).natural,Bridge.get(AlphaTab.Model.AccidentalType).none,Bridge.get(AlphaTab.Model.AccidentalType).flat,Bridge.get(AlphaTab.Model.AccidentalType).natural,Bridge.get(AlphaTab.Model.AccidentalType).none,Bridge.get(AlphaTab.Model.AccidentalType).natural,Bridge.get(AlphaTab.Model.AccidentalType).none,Bridge.get(AlphaTab.Model.AccidentalType).natural],[Bridge.get(AlphaTab.Model.AccidentalType).none,Bridge.get(AlphaTab.Model.AccidentalType).flat,Bridge.get(AlphaTab.Model.AccidentalType).natural,Bridge.get(AlphaTab.Model.AccidentalType).none,Bridge.get(AlphaTab.Model.AccidentalType).natural,Bridge.get(AlphaTab.Model.AccidentalType).none,Bridge.get(AlphaTab.Model.AccidentalType).flat,Bridge.get(AlphaTab.Model.AccidentalType).natural,Bridge.get(AlphaTab.Model.AccidentalType).none,Bridge.get(AlphaTab.Model.AccidentalType).natural,Bridge.get(AlphaTab.Model.AccidentalType).none,Bridge.get(AlphaTab.Model.AccidentalType).natural],[Bridge.get(AlphaTab.Model.AccidentalType).none,Bridge.get(AlphaTab.Model.AccidentalType).flat,Bridge.get(AlphaTab.Model.AccidentalType).natural,Bridge.get(AlphaTab.Model.AccidentalType).none,Bridge.get(AlphaTab.Model.AccidentalType).natural,Bridge.get(AlphaTab.Model.AccidentalType).none,Bridge.get(AlphaTab.Model.AccidentalType).flat,Bridge.get(AlphaTab.Model.AccidentalType).natural,Bridge.get(AlphaTab.Model.AccidentalType).flat,Bridge.get(AlphaTab.Model.AccidentalType).natural,Bridge.get(AlphaTab.Model.AccidentalType).none,Bridge.get(AlphaTab.Model.AccidentalType).natural],[Bridge.get(AlphaTab.Model.AccidentalType).none,Bridge.get(AlphaTab.Model.AccidentalType).flat,Bridge.get(AlphaTab.Model.AccidentalType).natural,Bridge.get(AlphaTab.Model.AccidentalType).flat,Bridge.get(AlphaTab.Model.AccidentalType).natural,Bridge.get(AlphaTab.Model.AccidentalType).none,Bridge.get(AlphaTab.Model.AccidentalType).flat,Bridge.get(AlphaTab.Model.AccidentalType).natural,Bridge.get(AlphaTab.Model.AccidentalType).flat,Bridge.get(AlphaTab.Model.AccidentalType).natural,Bridge.get(AlphaTab.Model.AccidentalType).none,Bridge.get(AlphaTab.Model.AccidentalType).natural],[Bridge.get(AlphaTab.Model.AccidentalType).none,Bridge.get(AlphaTab.Model.AccidentalType).sharp,Bridge.get(AlphaTab.Model.AccidentalType).none,Bridge.get(AlphaTab.Model.AccidentalType).sharp,Bridge.get(AlphaTab.Model.AccidentalType).none,Bridge.get(AlphaTab.Model.AccidentalType).none,Bridge.get(AlphaTab.Model.AccidentalType).sharp,Bridge.get(AlphaTab.Model.AccidentalType).none,Bridge.get(AlphaTab.Model.AccidentalType).sharp,Bridge.get(AlphaTab.Model.AccidentalType).none,Bridge.get(AlphaTab.Model.AccidentalType).sharp,Bridge.get(AlphaTab.Model.AccidentalType).none],[Bridge.get(AlphaTab.Model.AccidentalType).none,Bridge.get(AlphaTab.Model.AccidentalType).sharp,Bridge.get(AlphaTab.Model.AccidentalType).none,Bridge.get(AlphaTab.Model.AccidentalType).sharp,Bridge.get(AlphaTab.Model.AccidentalType).none,Bridge.get(AlphaTab.Model.AccidentalType).natural,Bridge.get(AlphaTab.Model.AccidentalType).sharp,Bridge.get(AlphaTab.Model.AccidentalType).none,Bridge.get(AlphaTab.Model.AccidentalType).sharp,Bridge.get(AlphaTab.Model.AccidentalType).none,Bridge.get(AlphaTab.Model.AccidentalType).sharp,Bridge.get(AlphaTab.Model.AccidentalType).none],[Bridge.get(AlphaTab.Model.AccidentalType).natural,Bridge.get(AlphaTab.Model.AccidentalType).sharp,Bridge.get(AlphaTab.Model.AccidentalType).none,Bridge.get(AlphaTab.Model.AccidentalType).sharp,Bridge.get(AlphaTab.Model.AccidentalType).none,Bridge.get(AlphaTab.Model.AccidentalType).natural,Bridge.get(AlphaTab.Model.AccidentalType).sharp,Bridge.get(AlphaTab.Model.AccidentalType).none,Bridge.get(AlphaTab.Model.AccidentalType).sharp,Bridge.get(AlphaTab.Model.AccidentalType).none,Bridge.get(AlphaTab.Model.AccidentalType).sharp,Bridge.get(AlphaTab.Model.AccidentalType).none],[Bridge.get(AlphaTab.Model.AccidentalType).natural,Bridge.get(AlphaTab.Model.AccidentalType).sharp,Bridge.get(AlphaTab.Model.AccidentalType).none,Bridge.get(AlphaTab.Model.AccidentalType).sharp,Bridge.get(AlphaTab.Model.AccidentalType).none,Bridge.get(AlphaTab.Model.AccidentalType).natural,Bridge.get(AlphaTab.Model.AccidentalType).sharp,Bridge.get(AlphaTab.Model.AccidentalType).natural,Bridge.get(AlphaTab.Model.AccidentalType).sharp,Bridge.get(AlphaTab.Model.AccidentalType).none,Bridge.get(AlphaTab.Model.AccidentalType).sharp,Bridge.get(AlphaTab.Model.AccidentalType).none],[Bridge.get(AlphaTab.Model.AccidentalType).natural,Bridge.get(AlphaTab.Model.AccidentalType).sharp,Bridge.get(AlphaTab.Model.AccidentalType).natural,Bridge.get(AlphaTab.Model.AccidentalType).sharp,Bridge.get(AlphaTab.Model.AccidentalType).none,Bridge.get(AlphaTab.Model.AccidentalType).natural,Bridge.get(AlphaTab.Model.AccidentalType).sharp,Bridge.get(AlphaTab.Model.AccidentalType).natural,Bridge.get(AlphaTab.Model.AccidentalType).sharp,Bridge.get(AlphaTab.Model.AccidentalType).none,Bridge.get(AlphaTab.Model.AccidentalType).sharp,Bridge.get(AlphaTab.Model.AccidentalType).none],[Bridge.get(AlphaTab.Model.AccidentalType).natural,Bridge.get(AlphaTab.Model.AccidentalType).sharp,Bridge.get(AlphaTab.Model.AccidentalType).natural,Bridge.get(AlphaTab.Model.AccidentalType).sharp,Bridge.get(AlphaTab.Model.AccidentalType).none,Bridge.get(AlphaTab.Model.AccidentalType).natural,Bridge.get(AlphaTab.Model.AccidentalType).sharp,Bridge.get(AlphaTab.Model.AccidentalType).natural,Bridge.get(AlphaTab.Model.AccidentalType).sharp,Bridge.get(AlphaTab.Model.AccidentalType).natural,Bridge.get(AlphaTab.Model.AccidentalType).sharp,Bridge.get(AlphaTab.Model.AccidentalType).none],[Bridge.get(AlphaTab.Model.AccidentalType).natural,Bridge.get(AlphaTab.Model.AccidentalType).sharp,Bridge.get(AlphaTab.Model.AccidentalType).natural,Bridge.get(AlphaTab.Model.AccidentalType).sharp,Bridge.get(AlphaTab.Model.AccidentalType).natural,Bridge.get(AlphaTab.Model.AccidentalType).natural,Bridge.get(AlphaTab.Model.AccidentalType).sharp,Bridge.get(AlphaTab.Model.AccidentalType).natural,Bridge.get(AlphaTab.Model.AccidentalType).sharp,Bridge.get(AlphaTab.Model.AccidentalType).natural,Bridge.get(AlphaTab.Model.AccidentalType).sharp,Bridge.get(AlphaTab.Model.AccidentalType).none],[Bridge.get(AlphaTab.Model.AccidentalType).natural,Bridge.get(AlphaTab.Model.AccidentalType).sharp,Bridge.get(AlphaTab.Model.AccidentalType).natural,Bridge.get(AlphaTab.Model.AccidentalType).sharp,Bridge.get(AlphaTab.Model.AccidentalType).natural,Bridge.get(AlphaTab.Model.AccidentalType).natural,Bridge.get(AlphaTab.Model.AccidentalType).sharp,Bridge.get(AlphaTab.Model.AccidentalType).natural,Bridge.get(AlphaTab.Model.AccidentalType).sharp,Bridge.get(AlphaTab.Model.AccidentalType).natural,Bridge.get(AlphaTab.Model.AccidentalType).sharp,Bridge.get(AlphaTab.Model.AccidentalType).natural]];this.octaveSteps=[38,32,30,26,38];this.sharpNoteSteps=[0,0,1,1,2,3,3,4,4,5,5,6];this.flatNoteSteps=[0,1,1,2,2,3,4,4,5,5,6,6]}}},_registeredAccidentals:null,_appliedScoreLines:null,constructor:function(){this._registeredAccidentals={};this._appliedScoreLines={}},getNoteId:function(n){return n.beat.index+"-"+n.string},applyAccidental:function(note){var noteValue=note.getRealValue(),ks=note.beat.voice.bar.getMasterBar().keySignature,ksi=ks+7,index=noteValue%12,accidentalToSet=Bridge.get(AlphaTab.Rendering.Utils.AccidentalHelper).accidentalNotes[ksi][index],noteLine=this.getNoteLineWithAccidental(note,accidentalToSet),updateAccidental=!0,registeredAccidental;return this._registeredAccidentals.hasOwnProperty(noteLine)&&(registeredAccidental=this._registeredAccidentals[noteLine],registeredAccidental===accidentalToSet?(accidentalToSet=Bridge.get(AlphaTab.Model.AccidentalType).none,updateAccidental=!1):accidentalToSet===Bridge.get(AlphaTab.Model.AccidentalType).none&&(accidentalToSet=Bridge.get(AlphaTab.Model.AccidentalType).natural)),updateAccidental&&(accidentalToSet===Bridge.get(AlphaTab.Model.AccidentalType).none||accidentalToSet===Bridge.get(AlphaTab.Model.AccidentalType).natural?delete this._registeredAccidentals[noteLine]:this._registeredAccidentals[noteLine]=accidentalToSet),accidentalToSet},getNoteLineWithAccidental:function(n){var value=n.beat.voice.bar.track.isPercussion?Bridge.get(AlphaTab.Rendering.Utils.PercussionMapper).mapValue(n):n.getRealValue(),ks=n.beat.voice.bar.getMasterBar().keySignature,clef=n.beat.voice.bar.clef,index=value%12,octave=Bridge.Int.div(value,12),steps=Bridge.get(AlphaTab.Rendering.Utils.AccidentalHelper).octaveSteps[clef],stepList,offset,line;steps-=octave*Bridge.get(AlphaTab.Rendering.Utils.AccidentalHelper).StepsPerOctave;stepList=Bridge.get(AlphaTab.Model.ModelUtils).keySignatureIsSharp(ks)||Bridge.get(AlphaTab.Model.ModelUtils).keySignatureIsNatural(ks)?Bridge.get(AlphaTab.Rendering.Utils.AccidentalHelper).sharpNoteSteps:Bridge.get(AlphaTab.Rendering.Utils.AccidentalHelper).flatNoteSteps;offset=0;switch(n.accidentalMode){case Bridge.get(AlphaTab.Model.NoteAccidentalMode).$default:case Bridge.get(AlphaTab.Model.NoteAccidentalMode).swapAccidentals:case Bridge.get(AlphaTab.Model.NoteAccidentalMode).forceNatural:case Bridge.get(AlphaTab.Model.NoteAccidentalMode).forceFlat:case Bridge.get(AlphaTab.Model.NoteAccidentalMode).forceSharp:default:offset=stepList[index]}return steps-=stepList[index],line=steps,this._appliedScoreLines[this.getNoteId(n)]=line,line},getNoteLine:function(n){return this._appliedScoreLines[this.getNoteId(n)]}});Bridge.define("AlphaTab.Settings",{statics:{getDefaults:function(){var settings=new AlphaTab.Settings;return settings.scale=1,settings.width=600,settings.height=200,settings.engine="default",settings.layout=Bridge.get(AlphaTab.LayoutSettings).getDefaults(),settings.staves=[],settings.staves.push(new AlphaTab.StaveSettings("marker")),settings.staves.push(new AlphaTab.StaveSettings("tempo")),settings.staves.push(new AlphaTab.StaveSettings("text")),settings.staves.push(new AlphaTab.StaveSettings("chords")),settings.staves.push(new AlphaTab.StaveSettings("trill")),settings.staves.push(new AlphaTab.StaveSettings("beat-vibrato")),settings.staves.push(new AlphaTab.StaveSettings("note-vibrato")),settings.staves.push(new AlphaTab.StaveSettings("alternate-endings")),settings.staves.push(new AlphaTab.StaveSettings("score")),settings.staves.push(new AlphaTab.StaveSettings("crescendo")),settings.staves.push(new AlphaTab.StaveSettings("dynamics")),settings.staves.push(new AlphaTab.StaveSettings("trill")),settings.staves.push(new AlphaTab.StaveSettings("beat-vibrato")),settings.staves.push(new AlphaTab.StaveSettings("note-vibrato")),settings.staves.push(new AlphaTab.StaveSettings("tap")),settings.staves.push(new AlphaTab.StaveSettings("fade-in")),settings.staves.push(new AlphaTab.StaveSettings("let-ring")),settings.staves.push(new AlphaTab.StaveSettings("palm-mute")),settings.staves.push(new AlphaTab.StaveSettings("tab")),settings.staves.push(new AlphaTab.StaveSettings("pick-stroke")),settings},fromJson:function(json){var $t,$t1,$t2,settings,keys,key,keys1,key1,val,staveSettings,keys2,key2;if(Bridge.is(json,AlphaTab.Settings))return json;if(settings=Bridge.get(AlphaTab.Settings).getDefaults(),!json)return settings;if("scale"in json&&(settings.scale=json.scale),"width"in json&&(settings.width=json.width),"height"in json&&(settings.height=json.height),"engine"in json&&(settings.engine=json.engine),"layout"in json)if(typeof json.layout=="string")settings.layout.mode=json.layout;else if(json.layout.mode&&(settings.layout.mode=json.layout.mode),json.layout.additionalSettings)for(keys=Object.keys(json.layout.additionalSettings),$t=Bridge.getEnumerator(keys);$t.moveNext();)key=$t.getCurrent(),settings.layout.additionalSettings[key]=json.layout.additionalSettings[key];if("staves"in json)for(settings.staves=[],keys1=Object.keys(json.staves),$t1=Bridge.getEnumerator(keys1);$t1.moveNext();)if(key1=$t1.getCurrent(),val=json.staves[key1],typeof val=="string")settings.staves.push(new AlphaTab.StaveSettings(val));else if(val.id){if(staveSettings=new AlphaTab.StaveSettings(val.id),val.additionalSettings)for(keys2=Object.keys(val.additionalSettings),$t2=Bridge.getEnumerator(keys2);$t2.moveNext();)key2=$t2.getCurrent(),staveSettings.additionalSettings[key2]=val.additionalSettings[key2];settings.staves.push(staveSettings)}return settings}},config:{properties:{scale:0,width:0,height:0,engine:null,layout:null,staves:null}}});Bridge.define("AlphaTab.Audio.Generator.MidiFileGenerator",{statics:{generateMidiFile:function(score,generateMetronome){var midiFile,i,j,handler,generator;for(generateMetronome===void 0&&(generateMetronome=!1),midiFile=new AlphaTab.Audio.Model.MidiFile,i=0,j=score.tracks.length;i<j;i++)midiFile.createTrack();return midiFile.infoTrack=0,handler=new AlphaTab.Audio.Generator.MidiFileHandler(midiFile),generator=new AlphaTab.Audio.Generator.MidiFileGenerator(score,handler,generateMetronome),generator.generate(),midiFile},toChannelShort:function(data){var value=Math.max(-32768,Math.min(32767,data*8-1));return Math.max(value,-1)+1}},_score:null,_handler:null,_currentTempo:0,config:{properties:{generateMetronome:!1}},constructor:function(score,handler,generateMetronome){generateMetronome===void 0&&(generateMetronome=!1);this._score=score;this._currentTempo=this._score.tempo;this._handler=handler;this.generateMetronome=generateMetronome},generate:function(){for(var controller,previousMasterBar,i1,j1,i=0,j=this._score.tracks.length;i<j;i++)this.generateTrack(this._score.tracks[i]);for(controller=new AlphaTab.Audio.Generator.MidiPlaybackController(this._score),previousMasterBar=null;!controller.getFinished();){var index=controller.index,bar=this._score.masterBars[index],currentTick=controller.currentTick;if(controller.processCurrent(),controller.shouldPlay)for(this.generateMasterBar(bar,previousMasterBar,currentTick),i1=0,j1=this._score.tracks.length;i1<j1;i1++)this.generateBar(this._score.tracks[i1].bars[index],currentTick);controller.moveNext();previousMasterBar=bar}},generateTrack:function(track){this.generateChannel(track,track.playbackInfo.primaryChannel,track.playbackInfo);track.playbackInfo.primaryChannel!==track.playbackInfo.secondaryChannel&&this.generateChannel(track,track.playbackInfo.secondaryChannel,track.playbackInfo)},generateChannel:function(track,channel,playbackInfo){var volume=Bridge.get(AlphaTab.Audio.Generator.MidiFileGenerator).toChannelShort(playbackInfo.volume),balance=Bridge.get(AlphaTab.Audio.Generator.MidiFileGenerator).toChannelShort(playbackInfo.balance);this._handler.addControlChange(track.index,0,channel,Bridge.get(AlphaTab.Audio.Model.MidiController).volume,volume);this._handler.addControlChange(track.index,0,channel,Bridge.get(AlphaTab.Audio.Model.MidiController).balance,balance);this._handler.addControlChange(track.index,0,channel,Bridge.get(AlphaTab.Audio.Model.MidiController).expression,127);this._handler.addProgramChange(track.index,0,channel,playbackInfo.program)},generateMasterBar:function(masterBar,previousMasterBar,currentTick){var start,length,i;if((previousMasterBar===null||previousMasterBar.timeSignatureDenominator!==masterBar.timeSignatureDenominator||previousMasterBar.timeSignatureNumerator!==masterBar.timeSignatureNumerator)&&this._handler.addTimeSignature(currentTick,masterBar.timeSignatureNumerator,masterBar.timeSignatureDenominator),previousMasterBar===null?(this._handler.addTempo(currentTick,masterBar.score.tempo),this._currentTempo=masterBar.score.tempo):masterBar.tempoAutomation!==null&&(this._handler.addTempo(currentTick,masterBar.tempoAutomation.value),this._currentTempo=masterBar.tempoAutomation.value),this.generateMetronome)for(start=currentTick,length=Bridge.get(AlphaTab.Audio.MidiUtils).valueToTicks(masterBar.timeSignatureDenominator),i=0;i<masterBar.timeSignatureNumerator;i++)this._handler.addMetronome(start,length),start+=length},generateBar:function(bar,barStartTick){for(var i=0,j=bar.voices.length;i<j;i++)this.generateVoice(bar.voices[i],barStartTick)},generateVoice:function(voice,barStartTick){for(var i=0,j=voice.beats.length;i<j;i++)this.generateBeat(voice.beats[i],barStartTick)},generateBeat:function(beat,barStartTick){for(var brushInfo,i1,j1,n,beatStart=beat.start,duration=beat.calculateDuration(),track=beat.voice.bar.track,i=0,j=beat.automations.length;i<j;i++)this.generateAutomation(beat,beat.automations[i],barStartTick);if(beat.getIsRest())this._handler.addRest(track.index,barStartTick+beatStart,track.playbackInfo.primaryChannel);else for(brushInfo=this.getBrushInfo(beat),i1=0,j1=beat.notes.length;i1<j1;i1++)(n=beat.notes[i1],n.isTieDestination)||this.generateNote(n,barStartTick+beatStart,duration,brushInfo)},generateNote:function(note,beatStart,beatDuration,brushInfo){var track=note.beat.voice.bar.track,noteKey=track.capo+note.getRealValue(),noteStart=beatStart+brushInfo[note.string-1],noteDuration=this.getNoteDuration(note,beatDuration)-brushInfo[note.string-1],dynamicValue=this.getDynamicValue(note);if(note.beat.fadeIn&&this.generateFadeIn(note,noteStart,noteDuration,noteKey,dynamicValue),note.getIsTrill()&&!track.isPercussion){this.generateTrill(note,noteStart,noteDuration,noteKey,dynamicValue);return}if(note.beat.getIsTremolo()){this.generateTremoloPicking(note,noteStart,noteDuration,noteKey,dynamicValue);return}note.getHasBend()?this.generateBend(note,noteStart,noteDuration,noteKey,dynamicValue):note.beat.getHasWhammyBar()?this.generateWhammyBar(note,noteStart,noteDuration,noteKey,dynamicValue):note.slideType!==Bridge.get(AlphaTab.Model.SlideType).none?this.generateSlide(note,noteStart,noteDuration,noteKey,dynamicValue):note.vibrato!==Bridge.get(AlphaTab.Model.VibratoType).none&&this.generateVibrato(note,noteStart,noteDuration,noteKey,dynamicValue);note.harmonicType!==Bridge.get(AlphaTab.Model.HarmonicType).none&&this.generateHarmonic(note,noteStart,noteDuration,noteKey,dynamicValue);this._handler.addNote(track.index,noteStart,noteDuration,noteKey,dynamicValue,track.playbackInfo.primaryChannel)},getNoteDuration:function(note,beatDuration){return this.applyDurationEffects(note,beatDuration)},applyDurationEffects:function(note,duration){return note.isDead?this.applyStaticDuration(Bridge.get(AlphaTab.Audio.Generator.MidiFileHandler).DefaultDurationDead,duration):note.isPalmMute?this.applyStaticDuration(Bridge.get(AlphaTab.Audio.Generator.MidiFileHandler).DefaultDurationPalmMute,duration):note.isStaccato?Bridge.Int.div(duration,2):duration},applyStaticDuration:function(duration,maximum){var value=Bridge.Int.div(this._currentTempo*duration,60);return Math.min(value,maximum)},getDynamicValue:function(note){var dynamicValue=note.dynamic;note.beat.voice.bar.track.isPercussion||note.hammerPullOrigin===null||dynamicValue--;note.isGhost&&dynamicValue--;switch(note.accentuated){case Bridge.get(AlphaTab.Model.AccentuationType).normal:dynamicValue++;break;case Bridge.get(AlphaTab.Model.AccentuationType).heavy:dynamicValue+=2}return dynamicValue},generateFadeIn:function(){},generateHarmonic:function(){},generateVibrato:function(){},generateSlide:function(){},generateWhammyBar:function(){},generateBend:function(){},generateTrill:function(note,noteStart,noteDuration,noteKey,dynamicValue){for(var track=note.beat.voice.bar.track,trillKey=track.capo+note.getStringTuning()+note.getTrillFret(),trillLength=AlphaTab.Audio.MidiUtils.toTicks(note.trillSpeed),realKey=!0,tick=noteStart;tick+10<noteStart+noteDuration;)tick+trillLength>=noteStart+noteDuration&&(trillLength=noteStart+noteDuration-tick),this._handler.addNote(track.index,tick,trillLength,realKey?trillKey:noteKey,dynamicValue,track.playbackInfo.primaryChannel),realKey=!realKey,tick+=trillLength},generateTremoloPicking:function(note,noteStart,noteDuration,noteKey,dynamicValue){for(var track=note.beat.voice.bar.track,tpLength=AlphaTab.Audio.MidiUtils.toTicks(Bridge.Nullable.getValue(note.beat.tremoloSpeed)),tick=noteStart;tick+10<noteStart+noteDuration;)tick+tpLength>=noteStart+noteDuration&&(tpLength=noteStart+noteDuration-tick),this._handler.addNote(track.index,tick,tpLength,noteKey,dynamicValue,track.playbackInfo.primaryChannel),tick+=tpLength},getBrushInfo:function(beat){var brushInfo=new Int32Array(beat.voice.bar.track.tuning.length),stringUsed,i,j,n,brushMove,brushIncrement,i1,j1,index;if(beat.brushType!==Bridge.get(AlphaTab.Model.BrushType).none){for(stringUsed=0,i=0,j=beat.notes.length;i<j;i++)(n=beat.notes[i],n.isTieDestination)||(stringUsed|=1<<n.string-1);if(beat.notes.length>0)for(brushMove=0,brushIncrement=this.getBrushIncrement(beat),i1=0,j1=beat.voice.bar.track.tuning.length;i1<j1;i1++)index=beat.brushType===Bridge.get(AlphaTab.Model.BrushType).arpeggioDown||beat.brushType===Bridge.get(AlphaTab.Model.BrushType).brushDown?i1:brushInfo.length-1-i1,(stringUsed&1<<index)!=0&&(brushInfo[index]=brushMove,brushMove=brushIncrement)}return brushInfo},getBrushIncrement:function(beat){if(beat.brushDuration===0)return 0;var duration=beat.calculateDuration();return duration===0?0:duration/8*(4/beat.brushDuration)},generateAutomation:function(beat,automation,startMove){switch(automation.type){case Bridge.get(AlphaTab.Model.AutomationType).instrument:this._handler.addProgramChange(beat.voice.bar.track.index,beat.start+startMove,beat.voice.bar.track.playbackInfo.primaryChannel,automation.value);this._handler.addProgramChange(beat.voice.bar.track.index,beat.start+startMove,beat.voice.bar.track.playbackInfo.secondaryChannel,automation.value);break;case Bridge.get(AlphaTab.Model.AutomationType).balance:this._handler.addControlChange(beat.voice.bar.track.index,beat.start+startMove,beat.voice.bar.track.playbackInfo.primaryChannel,Bridge.get(AlphaTab.Audio.Model.MidiController).balance,automation.value);this._handler.addControlChange(beat.voice.bar.track.index,beat.start+startMove,beat.voice.bar.track.playbackInfo.secondaryChannel,Bridge.get(AlphaTab.Audio.Model.MidiController).balance,automation.value);break;case Bridge.get(AlphaTab.Model.AutomationType).volume:this._handler.addControlChange(beat.voice.bar.track.index,beat.start+startMove,beat.voice.bar.track.playbackInfo.primaryChannel,Bridge.get(AlphaTab.Audio.Model.MidiController).volume,automation.value);this._handler.addControlChange(beat.voice.bar.track.index,beat.start+startMove,beat.voice.bar.track.playbackInfo.secondaryChannel,Bridge.get(AlphaTab.Audio.Model.MidiController).volume,automation.value)}}});Bridge.define("AlphaTab.Model.Track",{statics:{ShortNameMaxLength:10,copyTo:function(src,dst){dst.capo=src.capo;dst.index=src.index;dst.shortName=src.shortName;dst.tuning=new Int32Array(src.tuning);dst.color.raw=src.color.raw;dst.isPercussion=src.isPercussion}},config:{properties:{capo:0,index:0,name:null,shortName:null,tuning:null,tuningName:null,color:null,playbackInfo:null,isPercussion:!1,score:null,bars:null,chords:null}},constructor:function(){this.name="";this.shortName="";this.tuning=new Int32Array(0);this.bars=[];this.chords={};this.playbackInfo=new AlphaTab.Model.PlaybackInformation;this.color=new AlphaTab.Platform.Model.Color(200,0,0)},addBar:function(bar){var bars=this.bars;bar.track=this;bar.index=this.bars.length;bars.length>0&&(bar.previousBar=bars[bars.length-1],bar.previousBar.nextBar=bar);bars.push(bar)},finish:function(){Bridge.String.isNullOrEmpty(this.shortName)&&(this.shortName=this.name,this.shortName.length>Bridge.get(AlphaTab.Model.Track).ShortNameMaxLength&&(this.shortName=this.shortName.substr(0,Bridge.get(AlphaTab.Model.Track).ShortNameMaxLength)));for(var i=0,j=this.bars.length;i<j;i++)this.bars[i].finish()}});Bridge.define("AlphaTab.Model.TuningParser",{statics:{config:{init:function(){this.tuningRegex=new RegExp("([a-g]b?)([0-9])","i")}},isTuning:function(name){return Bridge.get(AlphaTab.Model.TuningParser).tuningRegex.exec(name)!==null},getTuningForText:function(str){var b=0,note=null,octave=0,m=Bridge.get(AlphaTab.Model.TuningParser).tuningRegex.exec(str.toLowerCase());if(m!==null&&(note=m[1],octave=parseInt(m[2])),!note||note.trim().length==0)return-1;switch(note){case"c":b=0;break;case"db":b=1;break;case"d":b=2;break;case"eb":b=3;break;case"e":b=4;break;case"f":b=5;break;case"gb":b=6;break;case"g":b=7;break;case"ab":b=8;break;case"a":b=9;break;case"bb":b=10;break;case"b":b=11;break;default:return-1}return b+octave*12}}});Bridge.define("AlphaTab.Rendering.Utils.BeamingHelper",{statics:{config:{init:function(){this.scoreMiddleKeys=[48,48,45,38,59]}},canJoin:function(b1,b2){var m1,m2,start1,start2,divisionLength,division1,division2;if(b1===null||b2===null||b1.getIsRest()||b2.getIsRest()||b1.graceType!==Bridge.get(AlphaTab.Model.GraceType).none||b2.graceType!==Bridge.get(AlphaTab.Model.GraceType).none||Bridge.get(AlphaTab.Rendering.Utils.BeamingHelper).isDifferentTuplet(b1,b2)||(m1=b1.voice.bar,m2=b1.voice.bar,m1!==m2))return!1;if(start1=b1.start,start2=b2.start,!Bridge.get(AlphaTab.Rendering.Utils.BeamingHelper).canJoinDuration(b1.duration)||!Bridge.get(AlphaTab.Rendering.Utils.BeamingHelper).canJoinDuration(b2.duration))return start1===start2;divisionLength=Bridge.get(AlphaTab.Audio.MidiUtils).QuarterTime;switch(m1.getMasterBar().timeSignatureDenominator){case 8:m1.getMasterBar().timeSignatureNumerator%3==0&&(divisionLength+=480)}return division1=Bridge.Int.div(divisionLength+start1,divisionLength)|0,division2=Bridge.Int.div(divisionLength+start2,divisionLength)|0,division1===division2},isDifferentTuplet:function(b1,b2){return b1.getHasTuplet()!==b2.getHasTuplet()||b1.tupletNumerator!==b2.tupletNumerator||b1.tupletDenominator!==b2.tupletDenominator},canJoinDuration:function(d){switch(d){case Bridge.get(AlphaTab.Model.Duration).whole:case Bridge.get(AlphaTab.Model.Duration).half:case Bridge.get(AlphaTab.Model.Duration).quarter:return!1;default:return!0}}},_lastBeat:null,_track:null,_beatLineXPositions:null,config:{properties:{voice:null,beats:null,maxDuration:0,firstMinNote:null,firstMaxNote:null,lastMinNote:null,lastMaxNote:null,minNote:null,maxNote:null}},constructor:function(track){this._track=track;this.beats=[];this._beatLineXPositions={};this.maxDuration=Bridge.get(AlphaTab.Model.Duration).whole},getDirection:function(){if(this._track.isPercussion)return Bridge.get(AlphaTab.Rendering.Utils.BeamDirection).up;var avg=Bridge.Int.div(this.getValue(this.maxNote)+this.getValue(this.minNote),2);return avg<=Bridge.get(AlphaTab.Rendering.Utils.BeamingHelper).scoreMiddleKeys[this._lastBeat.voice.bar.clef]?Bridge.get(AlphaTab.Rendering.Utils.BeamDirection).up:Bridge.get(AlphaTab.Rendering.Utils.BeamDirection).down},getValue:function(n){return this._track.isPercussion?Bridge.get(AlphaTab.Rendering.Utils.PercussionMapper).mapValue(n):n.getRealValue()},getBeatLineX:function(beat){return this.hasBeatLineX(beat)?this.getDirection()===Bridge.get(AlphaTab.Rendering.Utils.BeamDirection).up?this._beatLineXPositions[beat.index].up:this._beatLineXPositions[beat.index].down:0},hasBeatLineX:function(beat){return this._beatLineXPositions.hasOwnProperty(beat.index)},registerBeatLineX:function(beat,up,down){this._beatLineXPositions[beat.index]=new AlphaTab.Rendering.Utils.BeatLinePositions(up,down)},checkBeat:function(beat){this.voice===null&&(this.voice=beat.voice);var add=!1;return this.beats.length===0?add=!0:Bridge.get(AlphaTab.Rendering.Utils.BeamingHelper).canJoin(this._lastBeat,beat)&&(add=!0),add&&(this._lastBeat=beat,this.beats.push(beat),this.checkNote(beat.getMinNote()),this.checkNote(beat.getMaxNote()),this.maxDuration<beat.duration&&(this.maxDuration=beat.duration)),add},checkNote:function(note){var value=this.getValue(note);this.firstMinNote===null||note.beat.start<this.firstMinNote.beat.start?this.firstMinNote=note:note.beat.start===this.firstMinNote.beat.start&&value<this.getValue(this.firstMinNote)&&(this.firstMinNote=note);this.firstMaxNote===null||note.beat.start<this.firstMaxNote.beat.start?this.firstMaxNote=note:note.beat.start===this.firstMaxNote.beat.start&&value>this.getValue(this.firstMaxNote)&&(this.firstMaxNote=note);this.lastMinNote===null||note.beat.start>this.lastMinNote.beat.start?this.lastMinNote=note:note.beat.start===this.lastMinNote.beat.start&&value<this.getValue(this.lastMinNote)&&(this.lastMinNote=note);this.lastMaxNote===null||note.beat.start>this.lastMaxNote.beat.start?this.lastMaxNote=note:note.beat.start===this.lastMaxNote.beat.start&&value>this.getValue(this.lastMaxNote)&&(this.lastMaxNote=note);(this.maxNote===null||value>this.getValue(this.maxNote))&&(this.maxNote=note);(this.minNote===null||value<this.getValue(this.minNote))&&(this.minNote=note)},calculateBeamY:function(stemSize,xCorrection,xPosition,scale,yPosition){var direction=this.getDirection(),maxDistance;if(this.beats.length===1)return direction===Bridge.get(AlphaTab.Rendering.Utils.BeamDirection).up?yPosition(this.maxNote)-stemSize:yPosition(this.minNote)+stemSize;if(maxDistance=10*scale,direction===Bridge.get(AlphaTab.Rendering.Utils.BeamDirection).down&&this.minNote!==this.firstMinNote&&this.minNote!==this.lastMinNote)return yPosition(this.minNote)+stemSize;if(direction===Bridge.get(AlphaTab.Rendering.Utils.BeamDirection).up&&this.maxNote!==this.firstMaxNote&&this.maxNote!==this.lastMaxNote)return yPosition(this.maxNote)-stemSize;var startX=this.getBeatLineX(this.firstMinNote.beat)+xCorrection,startY=direction===Bridge.get(AlphaTab.Rendering.Utils.BeamDirection).up?yPosition(this.firstMaxNote)-stemSize:yPosition(this.firstMinNote)+stemSize,endX=this.getBeatLineX(this.lastMaxNote.beat)+xCorrection,endY=direction===Bridge.get(AlphaTab.Rendering.Utils.BeamDirection).up?yPosition(this.lastMaxNote)-stemSize:yPosition(this.lastMinNote)+stemSize;return(direction===Bridge.get(AlphaTab.Rendering.Utils.BeamDirection).down&&startY>endY&&startY-endY>maxDistance&&(endY=startY-maxDistance),direction===Bridge.get(AlphaTab.Rendering.Utils.BeamDirection).down&&endY>startY&&endY-startY>maxDistance&&(startY=endY-maxDistance),direction===Bridge.get(AlphaTab.Rendering.Utils.BeamDirection).up&&startY<endY&&endY-startY>maxDistance&&(endY=startY+maxDistance),direction===Bridge.get(AlphaTab.Rendering.Utils.BeamDirection).up&&endY<startY&&startY-endY>maxDistance&&(startY=endY+maxDistance),startX===endX)?startY:(endY-startY)/(endX-startX)*(xPosition-startX)+startY}});Bridge.define("AlphaTab.Environment",{statics:{constructor:function(){Bridge.get(AlphaTab.Environment).renderEngines={};Bridge.get(AlphaTab.Environment).fileLoaders={};Bridge.get(AlphaTab.Environment).layoutEngines={};Bridge.get(AlphaTab.Environment).staveFactories={};Bridge.get(AlphaTab.Environment).platformInit();Bridge.get(AlphaTab.Environment).renderEngines.svg=function(){return new AlphaTab.Platform.Svg.SvgCanvas};Bridge.get(AlphaTab.Environment).layoutEngines.default=function(r){return new AlphaTab.Rendering.Layout.PageViewLayout(r)};Bridge.get(AlphaTab.Environment).layoutEngines.page=function(r){return new AlphaTab.Rendering.Layout.PageViewLayout(r)};Bridge.get(AlphaTab.Environment).layoutEngines.horizontal=function(r){return new AlphaTab.Rendering.Layout.HorizontalScreenLayout(r)};Bridge.get(AlphaTab.Environment).staveFactories.marker=function(){return new AlphaTab.Rendering.EffectBarRendererFactory(new AlphaTab.Rendering.Effects.MarkerEffectInfo)};Bridge.get(AlphaTab.Environment).staveFactories.tempo=function(){return new AlphaTab.Rendering.EffectBarRendererFactory(new AlphaTab.Rendering.Effects.TempoEffectInfo)};Bridge.get(AlphaTab.Environment).staveFactories.text=function(){return new AlphaTab.Rendering.EffectBarRendererFactory(new AlphaTab.Rendering.Effects.TextEffectInfo)};Bridge.get(AlphaTab.Environment).staveFactories.chords=function(){return new AlphaTab.Rendering.EffectBarRendererFactory(new AlphaTab.Rendering.Effects.ChordsEffectInfo)};Bridge.get(AlphaTab.Environment).staveFactories.trill=function(){return new AlphaTab.Rendering.EffectBarRendererFactory(new AlphaTab.Rendering.Effects.TrillEffectInfo)};Bridge.get(AlphaTab.Environment).staveFactories["beat-vibrato"]=function(){return new AlphaTab.Rendering.EffectBarRendererFactory(new AlphaTab.Rendering.Effects.BeatVibratoEffectInfo)};Bridge.get(AlphaTab.Environment).staveFactories["note-vibrato"]=function(){return new AlphaTab.Rendering.EffectBarRendererFactory(new AlphaTab.Rendering.Effects.NoteVibratoEffectInfo)};Bridge.get(AlphaTab.Environment).staveFactories["alternate-endings"]=function(){return new AlphaTab.Rendering.AlternateEndingsBarRendererFactory};Bridge.get(AlphaTab.Environment).staveFactories.score=function(){return new AlphaTab.Rendering.ScoreBarRendererFactory};Bridge.get(AlphaTab.Environment).staveFactories.crescendo=function(){return new AlphaTab.Rendering.EffectBarRendererFactory(new AlphaTab.Rendering.Effects.CrescendoEffectInfo)};Bridge.get(AlphaTab.Environment).staveFactories.dynamics=function(){return new AlphaTab.Rendering.EffectBarRendererFactory(new AlphaTab.Rendering.Effects.DynamicsEffectInfo)};Bridge.get(AlphaTab.Environment).staveFactories.tap=function(){return new AlphaTab.Rendering.EffectBarRendererFactory(new AlphaTab.Rendering.Effects.TapEffectInfo)};Bridge.get(AlphaTab.Environment).staveFactories["fade-in"]=function(){return new AlphaTab.Rendering.EffectBarRendererFactory(new AlphaTab.Rendering.Effects.FadeInEffectInfo)};Bridge.get(AlphaTab.Environment).staveFactories["let-ring"]=function(){return new AlphaTab.Rendering.EffectBarRendererFactory(new AlphaTab.Rendering.Effects.LetRingEffectInfo)};Bridge.get(AlphaTab.Environment).staveFactories["palm-mute"]=function(){return new AlphaTab.Rendering.EffectBarRendererFactory(new AlphaTab.Rendering.Effects.PalmMuteEffectInfo)};Bridge.get(AlphaTab.Environment).staveFactories.tab=function(){return new AlphaTab.Rendering.TabBarRendererFactory};Bridge.get(AlphaTab.Environment).staveFactories["pick-stroke"]=function(){return new AlphaTab.Rendering.EffectBarRendererFactory(new AlphaTab.Rendering.Effects.PickStrokeEffectInfo)};Bridge.get(AlphaTab.Environment).staveFactories["rhythm-up"]=function(){return new AlphaTab.Rendering.RhythmBarRendererFactory(Bridge.get(AlphaTab.Rendering.Utils.BeamDirection).down)};Bridge.get(AlphaTab.Environment).staveFactories["rhythm-down"]=function(){return new AlphaTab.Rendering.RhythmBarRendererFactory(Bridge.get(AlphaTab.Rendering.Utils.BeamDirection).up)}},renderEngines:null,fileLoaders:null,layoutEngines:null,staveFactories:null,platformInit:function(){Bridge.get(AlphaTab.Environment).renderEngines.default=function(){return new AlphaTab.Platform.Svg.SvgCanvas};Bridge.get(AlphaTab.Environment).renderEngines.html5=function(){return new AlphaTab.Platform.JavaScript.Html5Canvas};Bridge.get(AlphaTab.Environment).fileLoaders.default=function(){return new AlphaTab.Platform.JavaScript.JsFileLoader};"ArrayBuffer"in Bridge.global||(Bridge.global.Array.prototype.subarray=Bridge.global.Array.prototype.slice,Bridge.global.Array.prototype.set=function(array,offset){for(var i=offset,j=offset+array.length;i<j;i++)this[i]=array[i]},Bridge.global.ArrayBuffer=Bridge.global.ArrayBuffer||Array,Bridge.global.Uint8Array=Bridge.global.Uint8Array||Array,Bridge.global.Int8Array=Bridge.global.Int8Array||Array,Bridge.global.Uint16Array=Bridge.global.Uint16Array||Array,Bridge.global.Int16Array=Bridge.global.Int16Array||Array,Bridge.global.Uint32Array=Bridge.global.Uint32Array||Array,Bridge.global.Int32Array=Bridge.global.Int32Array||Array,Bridge.global.Float32Array=Bridge.global.Float32Array||Array,Bridge.global.Float64Array=Bridge.global.Float64Array||Array)}}});Bridge.define("AlphaTab.Model.Note",{statics:{MaxOffsetForSameLineSearch:3,getStringTuning:function(track,noteString){return track.tuning.length>0?track.tuning[track.tuning.length-(noteString-1)-1]:0},copyTo:function(src,dst){dst.accentuated=src.accentuated;dst.fret=src.fret;dst.string=src.string;dst.isHammerPullOrigin=src.isHammerPullOrigin;dst.harmonicValue=src.harmonicValue;dst.harmonicType=src.harmonicType;dst.isGhost=src.isGhost;dst.isLetRing=src.isLetRing;dst.isPalmMute=src.isPalmMute;dst.isDead=src.isDead;dst.isStaccato=src.isStaccato;dst.slideType=src.slideType;dst.vibrato=src.vibrato;dst.isTieDestination=src.isTieDestination;dst.leftHandFinger=src.leftHandFinger;dst.rightHandFinger=src.rightHandFinger;dst.isFingering=src.isFingering;dst.trillValue=src.trillValue;dst.trillSpeed=src.trillSpeed;dst.durationPercent=src.durationPercent;dst.accidentalMode=src.accidentalMode;dst.dynamic=src.dynamic;dst.octave=src.octave;dst.tone=src.tone},nextNoteOnSameLine:function(note){for(var nextBeat=note.beat.nextBeat,noteOnString;nextBeat!==null&&nextBeat.voice.bar.index<=note.beat.voice.bar.index+Bridge.get(AlphaTab.Model.Note).MaxOffsetForSameLineSearch;){if(noteOnString=nextBeat.getNoteOnString(note.string),noteOnString!==null)return noteOnString;nextBeat=nextBeat.nextBeat}return null},previousNoteOnSameLine:function(note){for(var previousBeat=note.beat.previousBeat,noteOnString;previousBeat!==null&&previousBeat.voice.bar.index>=note.beat.voice.bar.index-Bridge.get(AlphaTab.Model.Note).MaxOffsetForSameLineSearch;){if(noteOnString=previousBeat.getNoteOnString(note.string),noteOnString!==null)return noteOnString;previousBeat=previousBeat.previousBeat}return null}},config:{properties:{accentuated:0,bendPoints:null,fret:0,string:0,isHammerPullOrigin:!1,hammerPullOrigin:null,hammerPullDestination:null,harmonicValue:0,harmonicType:0,isGhost:!1,isLetRing:!1,isPalmMute:!1,isDead:!1,isStaccato:!1,slideType:0,slideTarget:null,vibrato:0,tieOrigin:null,tieDestination:null,isTieDestination:!1,isTieOrigin:!1,leftHandFinger:0,rightHandFinger:0,isFingering:!1,trillValue:0,trillSpeed:0,durationPercent:0,accidentalMode:0,beat:null,dynamic:0,octave:0,tone:0}},constructor:function(){this.bendPoints=[];this.dynamic=Bridge.get(AlphaTab.Model.DynamicValue).f;this.accentuated=Bridge.get(AlphaTab.Model.AccentuationType).none;this.fret=-2147483648;this.harmonicType=Bridge.get(AlphaTab.Model.HarmonicType).none;this.slideType=Bridge.get(AlphaTab.Model.SlideType).none;this.vibrato=Bridge.get(AlphaTab.Model.VibratoType).none;this.leftHandFinger=Bridge.get(AlphaTab.Model.Fingers).noOrDead;this.rightHandFinger=Bridge.get(AlphaTab.Model.Fingers).noOrDead;this.trillValue=-1;this.trillSpeed=Bridge.get(AlphaTab.Model.Duration).thirtySecond;this.durationPercent=1;this.octave=-1},getHasBend:function(){return this.bendPoints.length>0},getTrillFret:function(){return this.trillValue-this.getStringTuning()},getIsTrill:function(){return this.trillValue>=0},getStringTuning:function(){return Bridge.get(AlphaTab.Model.Note).getStringTuning(this.beat.voice.bar.track,this.string)},getRealValue:function(){return this.fret===-2147483648?this.octave*12+this.tone:this.fret+this.getStringTuning()},clone:function(){var n=new AlphaTab.Model.Note,i,j;for(Bridge.get(AlphaTab.Model.Note).copyTo(this,n),i=0,j=this.bendPoints.length;i<j;i++)n.bendPoints.push(this.bendPoints[i].clone());return n},finish:function(){var prevNoteOnLine,nextNoteOnLineLoaded,nextNoteOnLine;this.isTieDestination&&(prevNoteOnLine=Bridge.get(AlphaTab.Model.Note).previousNoteOnSameLine(this),prevNoteOnLine===null?this.isTieDestination=!1:(this.tieOrigin=prevNoteOnLine,this.tieOrigin.isTieOrigin=!0,this.tieOrigin.tieDestination=this,this.fret=this.tieOrigin.fret));nextNoteOnLineLoaded=!1;nextNoteOnLine=null;this.isHammerPullOrigin&&(nextNoteOnLine=Bridge.get(AlphaTab.Model.Note).nextNoteOnSameLine(this),nextNoteOnLineLoaded=!0,nextNoteOnLine===null?this.isHammerPullOrigin=!1:(this.hammerPullDestination=nextNoteOnLine,this.hammerPullDestination.hammerPullOrigin=this));this.slideType!==Bridge.get(AlphaTab.Model.SlideType).none&&(nextNoteOnLineLoaded||(nextNoteOnLine=Bridge.get(AlphaTab.Model.Note).nextNoteOnSameLine(this)),this.slideTarget=nextNoteOnLine)}});Bridge.define("AlphaTab.Rendering.Utils.PercussionMapper",{statics:{mapValue:function(note){var value=note.getRealValue();return value===61||value===66?50:value===60||value===65?52:value>=35&&value<=36||value===44?53:value===41||value===64?55:value===43||value===62?57:value===45||value===63?59:value===47||value===54?62:value===48||value===56?64:value===50?65:value===42||value===46||value>=49&&value<=53||value===57||value===59?67:60}}});Bridge.define("AlphaTab.Importer.ScoreImporter",{statics:{buildImporters:function(){return[new AlphaTab.Importer.Gp3To5Importer,new AlphaTab.Importer.GpxImporter,new AlphaTab.Importer.AlphaTexImporter,new AlphaTab.Importer.MusicXml2Importer]}},_data:null,init:function(data){this._data=data}});Bridge.define("AlphaTab.Importer.MusicXml2Importer",{inherits:[AlphaTab.Importer.ScoreImporter],statics:{parseTied:function(element,note){element.getAttribute("type")==="start"?note.isTieOrigin=!0:note.isTieDestination=!0}},_score:null,_trackById:null,_trackFirstMeasureNumber:0,_maxVoices:0,readScore:function(){this._trackById={};var xml=Bridge.get(AlphaTab.Platform.Std).toString(this._data.readAll()),dom;try{dom=Bridge.get(AlphaTab.Platform.Std).loadXml(xml)}catch($e){$e=Bridge.Exception.create($e);throw new AlphaTab.Importer.UnsupportedFormatException;}return this._score=new AlphaTab.Model.Score,this._score.tempo=120,this.parseDom(dom),this._score.finish(),this._score},parseDom:function(dom){var root=dom.getDocumentElement();if(root!==null)switch(root.getLocalName()){case"score-partwise":this.parsePartwise(root);break;case"score-timewise":break;default:throw new AlphaTab.Importer.UnsupportedFormatException;}},parsePartwise:function(element){var version=element.getAttribute("version");if(!Bridge.String.isNullOrEmpty(version)&&version!=="2.0")throw new AlphaTab.Importer.UnsupportedFormatException;AlphaTab.Platform.Std.iterateChildren(element,Bridge.fn.bind(this,function(c){if(c.getNodeType()===Bridge.get(AlphaTab.Xml.XmlNodeType).element)switch(c.getLocalName()){case"movement-title":this._score.title=Bridge.get(AlphaTab.Platform.Std).getNodeValue(c.getFirstChild());break;case"identification":this.parseIdentification(c);break;case"part-list":this.parsePartList(c);break;case"part":this.parsePart(c)}}))},parsePart:function(element){var id=element.getAttribute("id"),track=this._trackById[id],isFirstMeasure=!0;AlphaTab.Platform.Std.iterateChildren(element,Bridge.fn.bind(this,function(c){if(c.getNodeType()===Bridge.get(AlphaTab.Xml.XmlNodeType).element)switch(c.getLocalName()){case"measure":this.parseMeasure(c,track,isFirstMeasure);isFirstMeasure=!1}}))},parseMeasure:function(element,track,isFirstMeasure){var barIndex=0,bar,masterBar,i,j,emptyVoice,emptyBeat,chord,isFirstBeat;for(isFirstMeasure?(this._trackFirstMeasureNumber=parseInt(element.getAttribute("number")),barIndex=0):barIndex=parseInt(element.getAttribute("number"))-this._trackFirstMeasureNumber,bar=null,masterBar=null,i=track.bars.length;i<=barIndex;i++)for(bar=new AlphaTab.Model.Bar,masterBar=this.getOrCreateMasterBar(barIndex),track.addBar(bar),j=0;j<this._maxVoices;j++)emptyVoice=new AlphaTab.Model.Voice,bar.addVoice(emptyVoice),emptyBeat=Bridge.merge(new AlphaTab.Model.Beat,{isEmpty:!0}),emptyVoice.addBeat(emptyBeat);chord=!1;isFirstBeat=!0;AlphaTab.Platform.Std.iterateChildren(element,Bridge.fn.bind(this,function(c){if(c.getNodeType()===Bridge.get(AlphaTab.Xml.XmlNodeType).element)switch(c.getLocalName()){case"note":chord=this.parseNoteBeat(c,track,bar,chord,isFirstBeat);isFirstBeat=!1;break;case"direction":this.parseDirection(c,masterBar);break;case"attributes":this.parseAttributes(c,bar,masterBar)}}))},parseNoteBeat:function(element,track,bar,chord,isFirstBeat){var voiceIndex=0,voiceNodes=element.getElementsByTagName("voice"),beat,voice,note;return voiceNodes.getCount()>0&&(voiceIndex=parseInt(Bridge.get(AlphaTab.Platform.Std).getNodeValue(voiceNodes.get(0)))-1),voice=this.getOrCreateVoice(bar,voiceIndex),chord||isFirstBeat&&voice.beats.length===1?beat=voice.beats[voice.beats.length-1]:(beat=new AlphaTab.Model.Beat,voice.addBeat(beat)),note=new AlphaTab.Model.Note,beat.addNote(note),beat.isEmpty=!1,AlphaTab.Platform.Std.iterateChildren(element,Bridge.fn.bind(this,function(c){if(c.getNodeType()===Bridge.get(AlphaTab.Xml.XmlNodeType).element)switch(c.getLocalName()){case"grace":beat.graceType=Bridge.get(AlphaTab.Model.GraceType).beforeBeat;beat.duration=Bridge.get(AlphaTab.Model.Duration).thirtySecond;break;case"duration":beat.duration=parseInt(Bridge.get(AlphaTab.Platform.Std).getNodeValue(c));break;case"tie":Bridge.get(AlphaTab.Importer.MusicXml2Importer).parseTied(c,note);break;case"type":switch(Bridge.get(AlphaTab.Platform.Std).getNodeValue(c)){case"64th":beat.duration=Bridge.get(AlphaTab.Model.Duration).sixtyFourth;break;case"32nd":beat.duration=Bridge.get(AlphaTab.Model.Duration).thirtySecond;break;case"16th":beat.duration=Bridge.get(AlphaTab.Model.Duration).sixteenth;break;case"eighth":beat.duration=Bridge.get(AlphaTab.Model.Duration).eighth;break;case"quarter":beat.duration=Bridge.get(AlphaTab.Model.Duration).quarter;break;case"half":beat.duration=Bridge.get(AlphaTab.Model.Duration).half;break;case"whole":beat.duration=Bridge.get(AlphaTab.Model.Duration).whole}break;case"dot":note.isStaccato=!0;break;case"accidental":this.parseAccidental(c,note);break;case"time-modification":this.parseTimeModification(c,beat);break;case"notehead":c.getAttribute("parentheses")==="yes"&&(note.isGhost=!0);break;case"notations":this.parseNotations(c,beat,note);break;case"chord":chord=!0;break;case"pitch":this.parsePitch(c,track,beat,note);break;case"unpitched":note.string=0;note.fret=0;break;case"rest":beat.isEmpty=!1}})),chord},parseAccidental:function(element,note){switch(Bridge.get(AlphaTab.Platform.Std).getNodeValue(element)){case"sharp":note.accidentalMode=Bridge.get(AlphaTab.Model.NoteAccidentalMode).forceSharp;break;case"natural":note.accidentalMode=Bridge.get(AlphaTab.Model.NoteAccidentalMode).forceNatural;break;case"flat":note.accidentalMode=Bridge.get(AlphaTab.Model.NoteAccidentalMode).forceFlat}},parseNotations:function(element,beat,note){AlphaTab.Platform.Std.iterateChildren(element,Bridge.fn.bind(this,function(c){if(c.getNodeType()===Bridge.get(AlphaTab.Xml.XmlNodeType).element)switch(c.getLocalName()){case"tied":Bridge.get(AlphaTab.Importer.MusicXml2Importer).parseTied(c,note);break;case"slide":c.getAttribute("type")==="start"&&(note.slideType=Bridge.get(AlphaTab.Model.SlideType).legato);break;case"dynamics":this.parseDynamics(c,beat)}}))},parseDynamics:function(element,beat){AlphaTab.Platform.Std.iterateChildren(element,function(c){if(c.getNodeType()===Bridge.get(AlphaTab.Xml.XmlNodeType).element)switch(c.getLocalName()){case"p":beat.dynamic=Bridge.get(AlphaTab.Model.DynamicValue).p;break;case"pp":beat.dynamic=Bridge.get(AlphaTab.Model.DynamicValue).pP;break;case"ppp":beat.dynamic=Bridge.get(AlphaTab.Model.DynamicValue).pPP;break;case"f":beat.dynamic=Bridge.get(AlphaTab.Model.DynamicValue).f;break;case"ff":beat.dynamic=Bridge.get(AlphaTab.Model.DynamicValue).fF;break;case"fff":beat.dynamic=Bridge.get(AlphaTab.Model.DynamicValue).fFF;break;case"mp":beat.dynamic=Bridge.get(AlphaTab.Model.DynamicValue).mP;break;case"mf":beat.dynamic=Bridge.get(AlphaTab.Model.DynamicValue).mF}})},parseTimeModification:function(element,beat){AlphaTab.Platform.Std.iterateChildren(element,function(c){if(c.getNodeType()===Bridge.get(AlphaTab.Xml.XmlNodeType).element)switch(c.getLocalName()){case"actual-notes":beat.tupletNumerator=parseInt(Bridge.get(AlphaTab.Platform.Std).getNodeValue(c));break;case"normal-notes":beat.tupletDenominator=parseInt(Bridge.get(AlphaTab.Platform.Std).getNodeValue(c))}})},parsePitch:function(element,track,beat,note){var step=null,semitones=0,octave=0,fullNoteName,fullNoteValue;AlphaTab.Platform.Std.iterateChildren(element,function(c){if(c.getNodeType()===Bridge.get(AlphaTab.Xml.XmlNodeType).element)switch(c.getLocalName()){case"step":step=Bridge.get(AlphaTab.Platform.Std).getNodeValue(c);break;case"alter":semitones=parseInt(Bridge.get(AlphaTab.Platform.Std).getNodeValue(c));break;case"octave":octave=parseInt(Bridge.get(AlphaTab.Platform.Std).getNodeValue(c))}});fullNoteName=step+octave;fullNoteValue=Bridge.get(AlphaTab.Model.TuningParser).getTuningForText(fullNoteName)+semitones;this.applyNoteStringFrets(track,beat,note,fullNoteValue)},applyNoteStringFrets:function(track,beat,note,fullNoteValue){note.string=this.findStringForValue(track,beat,fullNoteValue);note.fret=fullNoteValue-Bridge.get(AlphaTab.Model.Note).getStringTuning(track,note.string)},findStringForValue:function(track,beat,value){for(var note,steps,i1,j,min,max,takenStrings={},i=0;i<beat.notes.length;i++)note=beat.notes[i],takenStrings[note.string]=!0;for(steps=[14,20,2147483647],i1=0;i1<steps.length;i1++)for(j=0;j<track.tuning.length;j++)if(!takenStrings.hasOwnProperty(j)&&(min=track.tuning[j],max=track.tuning[j]+steps[i1],value>=min&&value<=max))return track.tuning.length-j;return 1},getOrCreateVoice:function(bar,index){if(index<bar.voices.length)return bar.voices[index];for(var i=bar.voices.length;i<=index;i++)bar.addVoice(new AlphaTab.Model.Voice);return this._maxVoices=Math.max(this._maxVoices,bar.voices.length),bar.voices[index]},parseDirection:function(element,masterBar){AlphaTab.Platform.Std.iterateChildren(element,function(c){if(c.getNodeType()===Bridge.get(AlphaTab.Xml.XmlNodeType).element)switch(c.getLocalName()){case"sound":var tempoAutomation=new AlphaTab.Model.Automation;tempoAutomation.isLinear=!0;tempoAutomation.type=Bridge.get(AlphaTab.Model.AutomationType).tempo;tempoAutomation.value=parseInt(c.getAttribute("tempo"));masterBar.tempoAutomation=tempoAutomation}})},parseAttributes:function(element,bar,masterBar){AlphaTab.Platform.Std.iterateChildren(element,Bridge.fn.bind(this,function(c){if(c.getNodeType()===Bridge.get(AlphaTab.Xml.XmlNodeType).element)switch(c.getLocalName()){case"key":this.parseKey(c,masterBar);break;case"time":this.parseTime(c,masterBar);break;case"clef":this.parseClef(c,bar)}}))},parseClef:function(element,bar){var sign=null,line=null,clef;AlphaTab.Platform.Std.iterateChildren(element,function(c){if(c.getNodeType()===Bridge.get(AlphaTab.Xml.XmlNodeType).element)switch(c.getLocalName()){case"sign":sign=Bridge.get(AlphaTab.Platform.Std).getNodeValue(c);break;case"line":line=Bridge.get(AlphaTab.Platform.Std).getNodeValue(c)}});clef=sign+line;switch(clef){case"G2":bar.clef=Bridge.get(AlphaTab.Model.Clef).g2;break;case"F4":bar.clef=Bridge.get(AlphaTab.Model.Clef).f4;break;case"C3":bar.clef=Bridge.get(AlphaTab.Model.Clef).c3;break;case"C4":bar.clef=Bridge.get(AlphaTab.Model.Clef).c4}},parseTime:function(element,masterBar){AlphaTab.Platform.Std.iterateChildren(element,function(c){if(c.getNodeType()===Bridge.get(AlphaTab.Xml.XmlNodeType).element)switch(c.getLocalName()){case"beats":masterBar.timeSignatureNumerator=parseInt(Bridge.get(AlphaTab.Platform.Std).getNodeValue(c));break;case"beats-type":masterBar.timeSignatureDenominator=parseInt(Bridge.get(AlphaTab.Platform.Std).getNodeValue(c))}})},parseKey:function(element,masterBar){var fifths=-2147483648,keyStep=-2147483648,keyAlter=-2147483648;AlphaTab.Platform.Std.iterateChildren(element,function(c){if(c.getNodeType()===Bridge.get(AlphaTab.Xml.XmlNodeType).element)switch(c.getLocalName()){case"fifths":fifths=parseInt(Bridge.get(AlphaTab.Platform.Std).getNodeValue(c));break;case"key-step":keyStep=parseInt(Bridge.get(AlphaTab.Platform.Std).getNodeValue(c));break;case"key-alter":keyAlter=parseInt(Bridge.get(AlphaTab.Platform.Std).getNodeValue(c))}});fifths!==-2147483648&&(masterBar.keySignature=fifths)},getOrCreateMasterBar:function(index){var i,mb;if(index<this._score.masterBars.length)return this._score.masterBars[index];for(i=this._score.masterBars.length;i<=index;i++)mb=new AlphaTab.Model.MasterBar,this._score.addMasterBar(mb);return this._score.masterBars[index]},parseIdentification:function(element){AlphaTab.Platform.Std.iterateChildren(element,Bridge.fn.bind(this,function(c){if(c.getNodeType()===Bridge.get(AlphaTab.Xml.XmlNodeType).element)switch(c.getLocalName()){case"creator":c.getAttribute("type")==="composer"&&(this._score.music=Bridge.get(AlphaTab.Platform.Std).getNodeValue(c.getFirstChild()));break;case"rights":this._score.artist=Bridge.get(AlphaTab.Platform.Std).getNodeValue(c.getFirstChild())}}))},parsePartList:function(element){AlphaTab.Platform.Std.iterateChildren(element,Bridge.fn.bind(this,function(c){if(c.getNodeType()===Bridge.get(AlphaTab.Xml.XmlNodeType).element)switch(c.getLocalName()){case"score-part":this.parseScorePart(c)}}))},parseScorePart:function(element){var id=element.getAttribute("id"),track=new AlphaTab.Model.Track;this._trackById[id]=track;this._score.addTrack(track);AlphaTab.Platform.Std.iterateChildren(element,Bridge.fn.bind(this,function(c){if(c.getNodeType()===Bridge.get(AlphaTab.Xml.XmlNodeType).element)switch(c.getLocalName()){case"part-name":track.name=Bridge.get(AlphaTab.Platform.Std).getNodeValue(c.getFirstChild());break;case"part-abbreviation":track.shortName=Bridge.get(AlphaTab.Platform.Std).getNodeValue(c.getFirstChild());break;case"midi-instrument":this.parseMidiInstrument(c,track)}}));(track.tuning===null||track.tuning.length===0)&&(track.tuning=Bridge.get(AlphaTab.Model.Tuning).getDefaultTuningFor(6).tunings)},parseMidiInstrument:function(element,track){AlphaTab.Platform.Std.iterateChildren(element,function(c){if(c.getNodeType()===Bridge.get(AlphaTab.Xml.XmlNodeType).element)switch(c.getLocalName()){case"midi-channel":track.playbackInfo.primaryChannel=parseInt(Bridge.get(AlphaTab.Platform.Std).getNodeValue(c.getFirstChild()));break;case"midi-program":track.playbackInfo.program=parseInt(Bridge.get(AlphaTab.Platform.Std).getNodeValue(c.getFirstChild()));break;case"midi-volume":track.playbackInfo.volume=parseInt(Bridge.get(AlphaTab.Platform.Std).getNodeValue(c.getFirstChild()))}})}});Bridge.define("AlphaTab.Importer.GpxImporter",{inherits:[AlphaTab.Importer.ScoreImporter],readScore:function(){var fileSystem=new AlphaTab.Importer.GpxFileSystem,data,xml,parser;return fileSystem.fileFilter=function(s){return s===Bridge.get(AlphaTab.Importer.GpxFileSystem).ScoreGpif},fileSystem.load(this._data),data=fileSystem.files[0].data,xml=Bridge.get(AlphaTab.Platform.Std).toString(data),fileSystem.files=null,fileSystem=null,parser=new AlphaTab.Importer.GpxParser,parser.parseXml(xml),parser.score.finish(),parser.score}});Bridge.define("AlphaTab.Importer.Gp3To5Importer",{inherits:[AlphaTab.Importer.ScoreImporter],statics:{VersionString:"FICHIER GUITAR PRO ",BendStep:25,toStrokeValue:function(value){switch(value){case 1:return 30;case 2:return 30;case 3:return 60;case 4:return 120;case 5:return 240;case 6:return 480;default:return 0}}},_versionNumber:0,_score:null,_globalTripletFeel:0,_lyricsIndex:null,_lyrics:null,_barCount:0,_trackCount:0,_playbackInfos:null,readScore:function(){return this.readVersion(),this._score=new AlphaTab.Model.Score,this.readScoreInformation(),this._versionNumber<500&&(this._globalTripletFeel=this.readBool()?Bridge.get(AlphaTab.Model.TripletFeel).triplet8th:Bridge.get(AlphaTab.Model.TripletFeel).noTripletFeel),this._versionNumber>=400&&this.readLyrics(),this._versionNumber>=510&&this._data.skip(19),this._versionNumber>=500&&(this.readPageSetup(),this._score.tempoLabel=this.readStringIntByte()),this._score.tempo=this.readInt32(),this._versionNumber>=510&&this.readBool(),this.readInt32(),this._versionNumber>=400&&this._data.readByte(),this.readPlaybackInfos(),this._versionNumber>=500&&(this._data.skip(38),this._data.skip(4)),this._barCount=this.readInt32(),this._trackCount=this.readInt32(),this.readMasterBars(),this.readTracks(),this.readBars(),this._score.finish(),this._score},readVersion:function(){var version=this.readStringByteLength(30),dot;if(!Bridge.String.startsWith(version,"FICHIER GUITAR PRO "))throw new AlphaTab.Importer.UnsupportedFormatException;version=version.substr(Bridge.get(AlphaTab.Importer.Gp3To5Importer).VersionString.length+1);dot=Bridge.String.indexOf(version,String.fromCharCode(46));this._versionNumber=100*parseInt(version.substr(0,dot))+parseInt(version.substr(dot+1))},readScoreInformation:function(){var noticeLines,notice,i;for(this._score.title=this.readStringIntUnused(),this._score.subTitle=this.readStringIntUnused(),this._score.artist=this.readStringIntUnused(),this._score.album=this.readStringIntUnused(),this._score.words=this.readStringIntUnused(),this._score.music=this._versionNumber>=500?this.readStringIntUnused():this._score.words,this._score.copyright=this.readStringIntUnused(),this._score.tab=this.readStringIntUnused(),this._score.instructions=this.readStringIntUnused(),noticeLines=this.readInt32(),notice=[],i=0;i<noticeLines;i++)i>0&&notice.push("\r\n"),notice.push(this.readStringIntUnused());this._score.notices=notice.join("")},readLyrics:function(){this._lyrics=[];this._lyricsIndex=[];this.readInt32();for(var i=0;i<5;i++)this._lyricsIndex.push(this.readInt32()-1),this._lyrics.push(this.readStringInt())},readPageSetup:function(){this._data.skip(30);for(var i=0;i<10;i++)this.readStringIntByte()},readPlaybackInfos:function(){var i,info;for(this._playbackInfos=[],i=0;i<64;i++)info=new AlphaTab.Model.PlaybackInformation,info.primaryChannel=i,info.secondaryChannel=i,info.program=this.readInt32(),info.volume=this._data.readByte(),info.balance=this._data.readByte(),this._data.skip(6),this._playbackInfos.push(info)},readMasterBars:function(){for(var i=0;i<this._barCount;i++)this.readMasterBar()},readMasterBar:function(){var previousMasterBar=null,newMasterBar,flags,currentMasterBar,existentAlternatives,repeatAlternative,repeatMask,i,repeating,section,tripletFeel;if(this._score.masterBars.length>0&&(previousMasterBar=this._score.masterBars[this._score.masterBars.length-1]),newMasterBar=new AlphaTab.Model.MasterBar,flags=this._data.readByte(),(flags&1)!=0?newMasterBar.timeSignatureNumerator=this._data.readByte():previousMasterBar!==null&&(newMasterBar.timeSignatureNumerator=previousMasterBar.timeSignatureNumerator),(flags&2)!=0?newMasterBar.timeSignatureDenominator=this._data.readByte():previousMasterBar!==null&&(newMasterBar.timeSignatureDenominator=previousMasterBar.timeSignatureDenominator),newMasterBar.isRepeatStart=(flags&4)!=0,(flags&8)!=0&&(newMasterBar.repeatCount=this._data.readByte()+(this._versionNumber>=500?0:1)),(flags&16)!=0)if(this._versionNumber<500){for(currentMasterBar=previousMasterBar,existentAlternatives=0;currentMasterBar!==null;){if(currentMasterBar.getIsRepeatEnd()&&currentMasterBar!==previousMasterBar)break;if(currentMasterBar.isRepeatStart)break;existentAlternatives|=currentMasterBar.alternateEndings;currentMasterBar=currentMasterBar.previousMasterBar}for(repeatAlternative=0,repeatMask=this._data.readByte(),i=0;i<8;i++)repeating=1<<i,repeatMask>i&&(existentAlternatives&repeating)==0&&(repeatAlternative|=repeating);newMasterBar.alternateEndings=repeatAlternative}else newMasterBar.alternateEndings=this._data.readByte();if((flags&32)!=0&&(section=new AlphaTab.Model.Section,section.text=this.readStringIntByte(),section.marker="",this.readColor(),newMasterBar.section=section),(flags&64)!=0?(newMasterBar.keySignature=AlphaTab.Platform.Std.readSignedByte(this._data),this._data.readByte()):previousMasterBar!==null&&(newMasterBar.keySignature=previousMasterBar.keySignature),this._versionNumber>=500&&(flags&3)!=0&&this._data.skip(4),this._versionNumber>=500&&(flags&16)==0&&(newMasterBar.alternateEndings=this._data.readByte()),this._versionNumber>=500){tripletFeel=this._data.readByte();switch(tripletFeel){case 1:newMasterBar.tripletFeel=Bridge.get(AlphaTab.Model.TripletFeel).triplet8th;break;case 2:newMasterBar.tripletFeel=Bridge.get(AlphaTab.Model.TripletFeel).triplet16th}this._data.readByte()}else newMasterBar.tripletFeel=this._globalTripletFeel;newMasterBar.isDoubleBar=(flags&128)!=0;this._score.addMasterBar(newMasterBar)},readTracks:function(){for(var i=0;i<this._trackCount;i++)this.readTrack()},readTrack:function(){var newTrack=new AlphaTab.Model.Track,flags,stringCount,tuning,i,stringTuning,info;for(this._score.addTrack(newTrack),flags=this._data.readByte(),newTrack.name=this.readStringByteLength(40),newTrack.isPercussion=(flags&1)!=0,stringCount=this.readInt32(),tuning=[],i=0;i<7;i++)stringTuning=this.readInt32(),stringCount>i&&tuning.push(stringTuning);newTrack.tuning=tuning.slice(0);var port=this.readInt32(),index=this.readInt32()-1,effectChannel=this.readInt32()-1;this._data.skip(4);index>=0&&index<this._playbackInfos.length&&(info=this._playbackInfos[index],info.port=port,info.isSolo=(flags&16)!=0,info.isMute=(flags&32)!=0,info.secondaryChannel=effectChannel,newTrack.playbackInfo=info);newTrack.capo=this.readInt32();newTrack.color=this.readColor();this._versionNumber>=500&&(this._data.readByte(),this._data.readByte(),this._data.skip(43));this._versionNumber>=510&&(this._data.skip(4),this.readStringIntByte(),this.readStringIntByte())},readBars:function(){for(var t,i=0;i<this._barCount;i++)for(t=0;t<this._trackCount;t++)this.readBar(this._score.tracks[t])},readBar:function(track){var newBar=new AlphaTab.Model.Bar,voiceCount,v;for(track.isPercussion&&(newBar.clef=Bridge.get(AlphaTab.Model.Clef).neutral),track.addBar(newBar),voiceCount=1,this._versionNumber>=500&&(this._data.readByte(),voiceCount=2),v=0;v<voiceCount;v++)this.readVoice(track,newBar)},readVoice:function(track,bar){var beatCount=this.readInt32(),newVoice,i;if(beatCount!==0)for(newVoice=new AlphaTab.Model.Voice,bar.addVoice(newVoice),i=0;i<beatCount;i++)this.readBeat(track,bar,newVoice)},readBeat:function(track,bar,voice){var newBeat=new AlphaTab.Model.Beat,flags=this._data.readByte(),type,duration,stringFlags,i,flag;(flags&1)!=0&&(newBeat.dots=1);(flags&64)!=0&&(type=this._data.readByte(),newBeat.isEmpty=(type&2)==0);voice.addBeat(newBeat);duration=AlphaTab.Platform.Std.readSignedByte(this._data);switch(duration){case-2:newBeat.duration=Bridge.get(AlphaTab.Model.Duration).whole;break;case-1:newBeat.duration=Bridge.get(AlphaTab.Model.Duration).half;break;case 0:newBeat.duration=Bridge.get(AlphaTab.Model.Duration).quarter;break;case 1:newBeat.duration=Bridge.get(AlphaTab.Model.Duration).eighth;break;case 2:newBeat.duration=Bridge.get(AlphaTab.Model.Duration).sixteenth;break;case 3:newBeat.duration=Bridge.get(AlphaTab.Model.Duration).thirtySecond;break;case 4:newBeat.duration=Bridge.get(AlphaTab.Model.Duration).sixtyFourth;break;default:newBeat.duration=Bridge.get(AlphaTab.Model.Duration).quarter}if((flags&32)!=0){newBeat.tupletNumerator=this.readInt32();switch(newBeat.tupletNumerator){case 1:newBeat.tupletDenominator=1;break;case 3:newBeat.tupletDenominator=2;break;case 5:case 6:case 7:newBeat.tupletDenominator=4;break;case 9:case 10:case 11:case 12:case 13:newBeat.tupletDenominator=8;break;case 2:case 4:case 8:break;default:newBeat.tupletNumerator=1;newBeat.tupletDenominator=1}}for((flags&2)!=0&&this.readChord(newBeat),(flags&4)!=0&&(newBeat.text=this.readStringIntUnused()),(flags&8)!=0&&this.readBeatEffects(newBeat),(flags&16)!=0&&this.readMixTableChange(newBeat),stringFlags=this._data.readByte(),i=6;i>=0;i--)(stringFlags&1<<i)!=0&&6-i<track.tuning.length&&this.readNote(track,bar,voice,newBeat,6-i);this._versionNumber>=500&&(this._data.readByte(),flag=this._data.readByte(),(flag&8)!=0&&this._data.readByte())},readChord:function(beat){var chord=new AlphaTab.Model.Chord,chordId=Bridge.get(AlphaTab.Platform.Std).newGuid(),i,fret,i1,fret1,i2,fret2,strings,i3,fret3;if(this._versionNumber>=500){for(this._data.skip(17),chord.name=this.readStringByteLength(21),this._data.skip(4),chord.firstFret=this.readInt32(),i=0;i<7;i++)fret=this.readInt32(),i<chord.strings.length&&chord.strings.push(fret);this._data.skip(32)}else if(this._data.readByte()!==0)if(this._versionNumber>=400){for(this._data.skip(16),chord.name=this.readStringByteLength(21),this._data.skip(4),chord.firstFret=this.readInt32(),i1=0;i1<7;i1++)fret1=this.readInt32(),i1<chord.strings.length&&chord.strings.push(fret1);this._data.skip(32)}else{for(this._data.skip(25),chord.name=this.readStringByteLength(34),chord.firstFret=this.readInt32(),i2=0;i2<6;i2++)fret2=this.readInt32(),chord.strings.push(fret2);this._data.skip(36)}else if(strings=this._versionNumber>=406?7:6,chord.name=this.readStringIntByte(),chord.firstFret=this.readInt32(),chord.firstFret>0)for(i3=0;i3<strings;i3++)fret3=this.readInt32(),i3<chord.strings.length&&chord.strings.push(fret3);Bridge.String.isNullOrEmpty(chord.name)||(beat.chordId=chordId,beat.voice.bar.track.chords[beat.chordId]=chord)},readBeatEffects:function(beat){var flags=this._data.readByte(),flags2=0,slapPop,slapPop1,strokeUp,strokeDown;if(this._versionNumber>=400&&(flags2=this._data.readByte()),beat.fadeIn=(flags&16)!=0,((flags&1)!=0||(flags&2)!=0)&&(beat.vibrato=Bridge.get(AlphaTab.Model.VibratoType).slight),beat.hasRasgueado=(flags2&1)!=0,(flags&32)!=0&&this._versionNumber>=400){slapPop=AlphaTab.Platform.Std.readSignedByte(this._data);switch(slapPop){case 1:beat.tap=!0;break;case 2:beat.slap=!0;break;case 3:beat.pop=!0}}else if((flags&32)!=0){slapPop1=AlphaTab.Platform.Std.readSignedByte(this._data);switch(slapPop1){case 1:beat.tap=!0;break;case 2:beat.slap=!0;break;case 3:beat.pop=!0}this._data.skip(4)}if((flags2&4)!=0&&this.readTremoloBarEffect(beat),(flags&64)!=0&&(this._versionNumber<500?(strokeDown=this._data.readByte(),strokeUp=this._data.readByte()):(strokeUp=this._data.readByte(),strokeDown=this._data.readByte()),strokeUp>0?(beat.brushType=Bridge.get(AlphaTab.Model.BrushType).brushUp,beat.brushDuration=Bridge.get(AlphaTab.Importer.Gp3To5Importer).toStrokeValue(strokeUp)):strokeDown>0&&(beat.brushType=Bridge.get(AlphaTab.Model.BrushType).brushDown,beat.brushDuration=Bridge.get(AlphaTab.Importer.Gp3To5Importer).toStrokeValue(strokeDown))),(flags2&2)!=0)switch(AlphaTab.Platform.Std.readSignedByte(this._data)){case 0:beat.pickStroke=Bridge.get(AlphaTab.Model.PickStrokeType).none;break;case 1:beat.pickStroke=Bridge.get(AlphaTab.Model.PickStrokeType).up;break;case 2:beat.pickStroke=Bridge.get(AlphaTab.Model.PickStrokeType).down}},readTremoloBarEffect:function(beat){var pointCount,i,point;if(this._data.readByte(),this.readInt32(),pointCount=this.readInt32(),pointCount>0)for(i=0;i<pointCount;i++)point=new AlphaTab.Model.BendPoint,point.offset=this.readInt32(),point.value=Bridge.Int.div(this.readInt32(),Bridge.get(AlphaTab.Importer.Gp3To5Importer).BendStep),this.readBool(),beat.whammyBarPoints.push(point)},readMixTableChange:function(beat){var tableChange=new AlphaTab.Importer.MixTableChange,volumeAutomation,balanceAutomation,instrumentAutomation,tempoAutomation;tableChange.instrument=this._data.readByte();this._versionNumber>=500&&this._data.skip(16);tableChange.volume=AlphaTab.Platform.Std.readSignedByte(this._data);tableChange.balance=AlphaTab.Platform.Std.readSignedByte(this._data);var chorus=AlphaTab.Platform.Std.readSignedByte(this._data),reverb=AlphaTab.Platform.Std.readSignedByte(this._data),phaser=AlphaTab.Platform.Std.readSignedByte(this._data),tremolo=AlphaTab.Platform.Std.readSignedByte(this._data);this._versionNumber>=500&&(tableChange.tempoName=this.readStringIntByte());tableChange.tempo=this.readInt32();tableChange.volume>=0&&this._data.readByte();tableChange.balance>=0&&this._data.readByte();chorus>=0&&this._data.readByte();reverb>=0&&this._data.readByte();phaser>=0&&this._data.readByte();tremolo>=0&&this._data.readByte();tableChange.tempo>=0&&(tableChange.duration=AlphaTab.Platform.Std.readSignedByte(this._data),this._versionNumber>=510&&this._data.readByte());this._versionNumber>=400&&this._data.readByte();this._versionNumber>=500&&this._data.readByte();this._versionNumber>=510&&(this.readStringIntByte(),this.readStringIntByte());tableChange.volume>=0&&(volumeAutomation=new AlphaTab.Model.Automation,volumeAutomation.isLinear=!0,volumeAutomation.type=Bridge.get(AlphaTab.Model.AutomationType).volume,volumeAutomation.value=tableChange.volume,beat.automations.push(volumeAutomation));tableChange.balance>=0&&(balanceAutomation=new AlphaTab.Model.Automation,balanceAutomation.isLinear=!0,balanceAutomation.type=Bridge.get(AlphaTab.Model.AutomationType).balance,balanceAutomation.value=tableChange.balance,beat.automations.push(balanceAutomation));tableChange.instrument>=0&&(instrumentAutomation=new AlphaTab.Model.Automation,instrumentAutomation.isLinear=!0,instrumentAutomation.type=Bridge.get(AlphaTab.Model.AutomationType).instrument,instrumentAutomation.value=tableChange.instrument,beat.automations.push(instrumentAutomation));tableChange.tempo>=0&&(tempoAutomation=new AlphaTab.Model.Automation,tempoAutomation.isLinear=!0,tempoAutomation.type=Bridge.get(AlphaTab.Model.AutomationType).tempo,tempoAutomation.value=tableChange.tempo,beat.automations.push(tempoAutomation),beat.voice.bar.getMasterBar().tempoAutomation=tempoAutomation)},readNote:function(track,bar,voice,beat,stringIndex){var newNote=new AlphaTab.Model.Note,flags,noteType,dynamicNumber,flags2;newNote.string=track.tuning.length-stringIndex;flags=this._data.readByte();(flags&2)!=0?newNote.accentuated=Bridge.get(AlphaTab.Model.AccentuationType).heavy:(flags&64)!=0&&(newNote.accentuated=Bridge.get(AlphaTab.Model.AccentuationType).normal);newNote.isGhost=(flags&4)!=0;(flags&32)!=0&&(noteType=this._data.readByte(),noteType===3?newNote.isDead=!0:noteType===2&&(newNote.isTieDestination=!0));(flags&1)!=0&&this._versionNumber<500&&(this._data.readByte(),this._data.readByte());(flags&16)!=0&&(dynamicNumber=AlphaTab.Platform.Std.readSignedByte(this._data),newNote.dynamic=this.toDynamicValue(dynamicNumber),beat.dynamic=newNote.dynamic);(flags&32)!=0&&(newNote.fret=AlphaTab.Platform.Std.readSignedByte(this._data));(flags&128)!=0&&(newNote.leftHandFinger=AlphaTab.Platform.Std.readSignedByte(this._data),newNote.rightHandFinger=AlphaTab.Platform.Std.readSignedByte(this._data),newNote.isFingering=!0);this._versionNumber>=500&&((flags&1)!=0&&(newNote.durationPercent=this.readDouble()),flags2=this._data.readByte(),newNote.accidentalMode=(flags2&2)!=0?Bridge.get(AlphaTab.Model.NoteAccidentalMode).swapAccidentals:Bridge.get(AlphaTab.Model.NoteAccidentalMode).$default);beat.addNote(newNote);(flags&8)!=0&&this.readNoteEffects(track,voice,beat,newNote)},toDynamicValue:function(value){switch(value){case 1:return Bridge.get(AlphaTab.Model.DynamicValue).pPP;case 2:return Bridge.get(AlphaTab.Model.DynamicValue).pP;case 3:return Bridge.get(AlphaTab.Model.DynamicValue).p;case 4:return Bridge.get(AlphaTab.Model.DynamicValue).mP;case 5:return Bridge.get(AlphaTab.Model.DynamicValue).mF;case 6:return Bridge.get(AlphaTab.Model.DynamicValue).f;case 7:return Bridge.get(AlphaTab.Model.DynamicValue).fF;case 8:return Bridge.get(AlphaTab.Model.DynamicValue).fFF;default:return Bridge.get(AlphaTab.Model.DynamicValue).f}},readNoteEffects:function(track,voice,beat,note){var flags=this._data.readByte(),flags2=0;this._versionNumber>=400&&(flags2=this._data.readByte());(flags&1)!=0&&this.readBend(note);(flags&16)!=0&&this.readGrace(voice,note);(flags2&4)!=0&&this.readTremoloPicking(beat);(flags2&8)!=0?this.readSlide(note):this._versionNumber<400&&(flags&4)!=0&&(note.slideType=Bridge.get(AlphaTab.Model.SlideType).shift);(flags2&16)!=0?this.readArtificialHarmonic(note):this._versionNumber<400&&((flags&4)!=0&&(note.harmonicType=Bridge.get(AlphaTab.Model.HarmonicType).natural,note.harmonicValue=this.deltaFretToHarmonicValue(note.fret)),(flags&8)!=0&&(note.harmonicType=Bridge.get(AlphaTab.Model.HarmonicType).artificial));(flags2&32)!=0&&this.readTrill(note);note.isLetRing=(flags&8)!=0;note.isHammerPullOrigin=(flags&2)!=0;(flags2&64)!=0&&(note.vibrato=Bridge.get(AlphaTab.Model.VibratoType).slight);note.isPalmMute=(flags2&2)!=0;note.isStaccato=(flags2&1)!=0},readBend:function(note){var pointCount,i,point;if(this._data.readByte(),this.readInt32(),pointCount=this.readInt32(),pointCount>0)for(i=0;i<pointCount;i++)point=new AlphaTab.Model.BendPoint,point.offset=this.readInt32(),point.value=Bridge.Int.div(this.readInt32(),Bridge.get(AlphaTab.Importer.Gp3To5Importer).BendStep),this.readBool(),note.bendPoints.push(point)},readGrace:function(voice,note){var graceBeat=new AlphaTab.Model.Beat,graceNote=new AlphaTab.Model.Note,transition,flags;graceNote.string=note.string;graceNote.fret=AlphaTab.Platform.Std.readSignedByte(this._data);graceBeat.duration=Bridge.get(AlphaTab.Model.Duration).thirtySecond;graceBeat.dynamic=this.toDynamicValue(AlphaTab.Platform.Std.readSignedByte(this._data));transition=AlphaTab.Platform.Std.readSignedByte(this._data);switch(transition){case 1:graceNote.slideType=Bridge.get(AlphaTab.Model.SlideType).legato;graceNote.slideTarget=note;break;case 3:graceNote.isHammerPullOrigin=!0}graceNote.dynamic=graceBeat.dynamic;this._data.skip(1);this._versionNumber<500?graceBeat.graceType=Bridge.get(AlphaTab.Model.GraceType).beforeBeat:(flags=this._data.readByte(),graceNote.isDead=(flags&1)!=0,graceBeat.graceType=(flags&2)!=0?Bridge.get(AlphaTab.Model.GraceType).onBeat:Bridge.get(AlphaTab.Model.GraceType).beforeBeat);graceBeat.addNote(graceNote);voice.addGraceBeat(graceBeat)},readTremoloPicking:function(beat){var speed=this._data.readByte();switch(speed){case 1:beat.tremoloSpeed=Bridge.get(AlphaTab.Model.Duration).eighth;break;case 2:beat.tremoloSpeed=Bridge.get(AlphaTab.Model.Duration).sixteenth;break;case 3:beat.tremoloSpeed=Bridge.get(AlphaTab.Model.Duration).thirtySecond}},readSlide:function(note){var type,type1;if(this._versionNumber>=500){type=AlphaTab.Platform.Std.readSignedByte(this._data);switch(type){case 1:note.slideType=Bridge.get(AlphaTab.Model.SlideType).shift;break;case 2:note.slideType=Bridge.get(AlphaTab.Model.SlideType).legato;break;case 4:note.slideType=Bridge.get(AlphaTab.Model.SlideType).outDown;break;case 8:note.slideType=Bridge.get(AlphaTab.Model.SlideType).outUp;break;case 16:note.slideType=Bridge.get(AlphaTab.Model.SlideType).intoFromBelow;break;case 32:note.slideType=Bridge.get(AlphaTab.Model.SlideType).intoFromAbove;break;default:note.slideType=Bridge.get(AlphaTab.Model.SlideType).none}}else{type1=AlphaTab.Platform.Std.readSignedByte(this._data);switch(type1){case 1:note.slideType=Bridge.get(AlphaTab.Model.SlideType).shift;break;case 2:note.slideType=Bridge.get(AlphaTab.Model.SlideType).legato;break;case 3:note.slideType=Bridge.get(AlphaTab.Model.SlideType).outDown;break;case 4:note.slideType=Bridge.get(AlphaTab.Model.SlideType).outUp;break;case-1:note.slideType=Bridge.get(AlphaTab.Model.SlideType).intoFromBelow;break;case-2:note.slideType=Bridge.get(AlphaTab.Model.SlideType).intoFromAbove;break;default:note.slideType=Bridge.get(AlphaTab.Model.SlideType).none}}},readArtificialHarmonic:function(note){var type=this._data.readByte();if(this._versionNumber>=500)switch(type){case 1:note.harmonicType=Bridge.get(AlphaTab.Model.HarmonicType).natural;note.harmonicValue=this.deltaFretToHarmonicValue(note.fret);break;case 2:var harmonicTone=this._data.readByte(),harmonicKey=this._data.readByte(),harmonicOctaveOffset=this._data.readByte();note.harmonicType=Bridge.get(AlphaTab.Model.HarmonicType).artificial;break;case 3:note.harmonicType=Bridge.get(AlphaTab.Model.HarmonicType).tap;note.harmonicValue=this.deltaFretToHarmonicValue(this._data.readByte());break;case 4:note.harmonicType=Bridge.get(AlphaTab.Model.HarmonicType).pinch;note.harmonicValue=12;break;case 5:note.harmonicType=Bridge.get(AlphaTab.Model.HarmonicType).semi;note.harmonicValue=12}else if(this._versionNumber>=400)switch(type){case 1:note.harmonicType=Bridge.get(AlphaTab.Model.HarmonicType).natural;break;case 3:note.harmonicType=Bridge.get(AlphaTab.Model.HarmonicType).tap;break;case 4:note.harmonicType=Bridge.get(AlphaTab.Model.HarmonicType).pinch;break;case 5:note.harmonicType=Bridge.get(AlphaTab.Model.HarmonicType).semi;break;case 15:note.harmonicType=Bridge.get(AlphaTab.Model.HarmonicType).artificial;break;case 17:note.harmonicType=Bridge.get(AlphaTab.Model.HarmonicType).artificial;break;case 22:note.harmonicType=Bridge.get(AlphaTab.Model.HarmonicType).artificial}},deltaFretToHarmonicValue:function(deltaFret){switch(deltaFret){case 2:return 2.4;case 3:return 3.2;case 4:case 5:case 7:case 9:case 12:case 16:case 17:case 19:case 24:return deltaFret;case 8:return 8.2;case 10:return 9.6;case 14:case 15:return 14.7;case 21:case 22:return 21.7;default:return 12}},readTrill:function(note){note.trillValue=this._data.readByte()+note.getStringTuning();switch(this._data.readByte()){case 1:note.trillSpeed=Bridge.get(AlphaTab.Model.Duration).sixteenth;break;case 2:note.trillSpeed=Bridge.get(AlphaTab.Model.Duration).thirtySecond;break;case 3:note.trillSpeed=Bridge.get(AlphaTab.Model.Duration).sixtyFourth}},readDouble:function(){var bytes=new Uint8Array(8);this._data.read(bytes,0,bytes.length);var sign=1-(bytes[0]>>7<<1),exp=(bytes[0]<<4&2047|bytes[1]>>4)-1023,sig=this.getDoubleSig(bytes);return sig===0&&exp===-1023?0:sign*(1+Math.pow(2,-52)*sig)*Math.pow(2,exp)},getDoubleSig:function(bytes){return((bytes[1]&15)<<16|bytes[2]<<8|bytes[3])*4294967296+(bytes[4]>>7)*2147483648+((bytes[4]&127)<<24|bytes[5]<<16|bytes[6]<<8|bytes[7])},readColor:function(){var r=this._data.readByte(),g=this._data.readByte(),b=this._data.readByte();return this._data.skip(1),new AlphaTab.Platform.Model.Color(r,g,b)},readBool:function(){return this._data.readByte()!==0},readInt32:function(){var bytes=new Uint8Array(4);return this._data.read(bytes,0,4),bytes[0]|bytes[1]<<8|bytes[2]<<16|bytes[3]<<24},readStringIntUnused:function(){return this._data.skip(4),this.readString(this._data.readByte())},readStringInt:function(){return this.readString(this.readInt32())},readStringIntByte:function(){var length=this.readInt32()-1;return this._data.readByte(),this.readString(length)},readString:function(length){var b=new Uint8Array(length);return this._data.read(b,0,b.length),Bridge.get(AlphaTab.Platform.Std).toString(b)},readStringByteLength:function(length){var stringLength=this._data.readByte(),s=this.readString(stringLength);return stringLength<length&&this._data.skip(length-stringLength),s}});Bridge.define("AlphaTab.Importer.AlphaTexImporter",{inherits:[AlphaTab.Importer.ScoreImporter],statics:{Eof:0,config:{init:function(){this.trackChannels=[0,1]}},isLetter:function(code){return!Bridge.get(AlphaTab.Importer.AlphaTexImporter).isTerminal(code)&&(code>=33&&code<=47||code>=58&&code<=126||code>128)},isTerminal:function(ch){return ch===46||ch===123||ch===125||ch===91||ch===93||ch===40||ch===41||ch===124||ch===39||ch===34||ch===92}},_score:null,_track:null,_ch:0,_curChPos:0,_sy:0,_syData:null,_allowNegatives:!1,_currentDuration:0,readScore:function(){try{return this.createDefaultScore(),this._curChPos=0,this._currentDuration=Bridge.get(AlphaTab.Model.Duration).quarter,this.nextChar(),this.newSy(),this.score(),this._score.finish(),this._score}catch($e){$e=Bridge.Exception.create($e);var e;if(Bridge.is($e,AlphaTab.Importer.AlphaTexException))throw $e;else{e=$e;throw new AlphaTab.Importer.UnsupportedFormatException;}}},error:function(nonterm,expected,symbolError){if(symbolError===void 0&&(symbolError=!0),symbolError)throw new AlphaTab.Importer.AlphaTexException(this._curChPos,nonterm,expected,this._sy);throw new AlphaTab.Importer.AlphaTexException(this._curChPos,nonterm,expected,expected,this._syData);},createDefaultScore:function(){this._score=new AlphaTab.Model.Score;this._score.tempo=120;this._score.tempoLabel="";this._track=new AlphaTab.Model.Track;this._track.playbackInfo.program=25;this._track.playbackInfo.primaryChannel=Bridge.get(AlphaTab.Importer.AlphaTexImporter).trackChannels[0];this._track.playbackInfo.secondaryChannel=Bridge.get(AlphaTab.Importer.AlphaTexImporter).trackChannels[1];this._track.tuning=Bridge.get(AlphaTab.Model.Tuning).getDefaultTuningFor(6).tunings;this._score.addTrack(this._track)},parseClef:function(str){switch(str.toLowerCase()){case"g2":case"treble":return Bridge.get(AlphaTab.Model.Clef).g2;case"f4":case"bass":return Bridge.get(AlphaTab.Model.Clef).f4;case"c3":case"tenor":return Bridge.get(AlphaTab.Model.Clef).c3;case"c4":case"alto":return Bridge.get(AlphaTab.Model.Clef).c4;default:return Bridge.get(AlphaTab.Model.Clef).g2}},parseKeySignature:function(str){switch(str.toLowerCase()){case"cb":return-7;case"gb":return-6;case"db":return-5;case"ab":return-4;case"eb":return-3;case"bb":return-2;case"f":return-1;case"c":return 0;case"g":return 1;case"d":return 2;case"a":return 3;case"e":return 4;case"b":return 5;case"f#":return 6;case"c#":return 7;default:return 0}},parseTuning:function(str){var tuning=Bridge.get(AlphaTab.Model.TuningParser).getTuningForText(str);return tuning<0&&this.error("tuning-value",Bridge.get(AlphaTab.Importer.AlphaTexSymbols).string,!1),tuning},nextChar:function(){var b=this._data.readByte();b===-1?this._ch=Bridge.get(AlphaTab.Importer.AlphaTexImporter).Eof:(this._ch=b,this._curChPos++)},newSy:function(){var s,number,name,number1,name1;this._sy=Bridge.get(AlphaTab.Importer.AlphaTexSymbols).no;do if(this._ch===Bridge.get(AlphaTab.Importer.AlphaTexImporter).Eof)this._sy=Bridge.get(AlphaTab.Importer.AlphaTexSymbols).eof;else if(Bridge.get(AlphaTab.Platform.Std).isWhiteSpace(this._ch))this.nextChar();else if(this._ch===47)if(this.nextChar(),this._ch===47)while(this._ch!==13&&this._ch!==10&&this._ch!==Bridge.get(AlphaTab.Importer.AlphaTexImporter).Eof)this.nextChar();else if(this._ch===42)while(this._ch!==Bridge.get(AlphaTab.Importer.AlphaTexImporter).Eof)if(this._ch===42){if(this.nextChar(),this._ch===47){this.nextChar();break}}else this.nextChar();else this.error("symbol",Bridge.get(AlphaTab.Importer.AlphaTexSymbols).string,!1);else if(this._ch===34||this._ch===39){for(this.nextChar(),s=[],this._sy=Bridge.get(AlphaTab.Importer.AlphaTexSymbols).string;this._ch!==34&&this._ch!==39&&this._ch!==Bridge.get(AlphaTab.Importer.AlphaTexImporter).Eof;)s.push(String.fromCharCode(this._ch)),this.nextChar();this._syData=s.join("");this.nextChar()}else this._ch===45?this._allowNegatives&&this.isDigit(this._ch)?(number=this.readNumber(),this._sy=Bridge.get(AlphaTab.Importer.AlphaTexSymbols).number,this._syData=number):(this._sy=Bridge.get(AlphaTab.Importer.AlphaTexSymbols).string,this._syData=this.readName()):this._ch===46?(this._sy=Bridge.get(AlphaTab.Importer.AlphaTexSymbols).dot,this.nextChar()):this._ch===58?(this._sy=Bridge.get(AlphaTab.Importer.AlphaTexSymbols).doubleDot,this.nextChar()):this._ch===40?(this._sy=Bridge.get(AlphaTab.Importer.AlphaTexSymbols).lParensis,this.nextChar()):this._ch===92?(this.nextChar(),name=this.readName(),this._sy=Bridge.get(AlphaTab.Importer.AlphaTexSymbols).metaCommand,this._syData=name):this._ch===41?(this._sy=Bridge.get(AlphaTab.Importer.AlphaTexSymbols).rParensis,this.nextChar()):this._ch===123?(this._sy=Bridge.get(AlphaTab.Importer.AlphaTexSymbols).lBrace,this.nextChar()):this._ch===125?(this._sy=Bridge.get(AlphaTab.Importer.AlphaTexSymbols).rBrace,this.nextChar()):this._ch===124?(this._sy=Bridge.get(AlphaTab.Importer.AlphaTexSymbols).pipe,this.nextChar()):this._ch===42?(this._sy=Bridge.get(AlphaTab.Importer.AlphaTexSymbols).multiply,this.nextChar()):this.isDigit(this._ch)?(number1=this.readNumber(),this._sy=Bridge.get(AlphaTab.Importer.AlphaTexSymbols).number,this._syData=number1):Bridge.get(AlphaTab.Importer.AlphaTexImporter).isLetter(this._ch)?(name1=this.readName(),Bridge.get(AlphaTab.Model.TuningParser).isTuning(name1)?(this._sy=Bridge.get(AlphaTab.Importer.AlphaTexSymbols).tuning,this._syData=name1.toLowerCase()):(this._sy=Bridge.get(AlphaTab.Importer.AlphaTexSymbols).string,this._syData=name1)):this.error("symbol",Bridge.get(AlphaTab.Importer.AlphaTexSymbols).string,!1);while(this._sy===Bridge.get(AlphaTab.Importer.AlphaTexSymbols).no)},isDigit:function(code){return code>=48&&code<=57||code===45&&this._allowNegatives},readName:function(){var str=[];do str.push(String.fromCharCode(this._ch)),this.nextChar();while(Bridge.get(AlphaTab.Importer.AlphaTexImporter).isLetter(this._ch)||this.isDigit(this._ch));return str.join("")},readNumber:function(){var str=[];do str.push(String.fromCharCode(this._ch)),this.nextChar();while(this.isDigit(this._ch));return parseInt(str.join(""))},score:function(){this.metaData();this.bars()},metaData:function(){for(var anyMeta=!1,syData,tuning,instrument,instrumentName;this._sy===Bridge.get(AlphaTab.Importer.AlphaTexSymbols).metaCommand;)if(syData=this._syData.toString().toLowerCase(),syData==="title")this.newSy(),this._sy===Bridge.get(AlphaTab.Importer.AlphaTexSymbols).string?this._score.title=this._syData.toString():this.error("title",Bridge.get(AlphaTab.Importer.AlphaTexSymbols).string),this.newSy(),anyMeta=!0;else if(syData==="subtitle")this.newSy(),this._sy===Bridge.get(AlphaTab.Importer.AlphaTexSymbols).string?this._score.subTitle=this._syData.toString():this.error("subtitle",Bridge.get(AlphaTab.Importer.AlphaTexSymbols).string),this.newSy(),anyMeta=!0;else if(syData==="artist")this.newSy(),this._sy===Bridge.get(AlphaTab.Importer.AlphaTexSymbols).string?this._score.artist=this._syData.toString():this.error("artist",Bridge.get(AlphaTab.Importer.AlphaTexSymbols).string),this.newSy(),anyMeta=!0;else if(syData==="album")this.newSy(),this._sy===Bridge.get(AlphaTab.Importer.AlphaTexSymbols).string?this._score.album=this._syData.toString():this.error("album",Bridge.get(AlphaTab.Importer.AlphaTexSymbols).string),this.newSy(),anyMeta=!0;else if(syData==="words")this.newSy(),this._sy===Bridge.get(AlphaTab.Importer.AlphaTexSymbols).string?this._score.words=this._syData.toString():this.error("words",Bridge.get(AlphaTab.Importer.AlphaTexSymbols).string),this.newSy(),anyMeta=!0;else if(syData==="music")this.newSy(),this._sy===Bridge.get(AlphaTab.Importer.AlphaTexSymbols).string?this._score.music=this._syData.toString():this.error("music",Bridge.get(AlphaTab.Importer.AlphaTexSymbols).string),this.newSy(),anyMeta=!0;else if(syData==="copyright")this.newSy(),this._sy===Bridge.get(AlphaTab.Importer.AlphaTexSymbols).string?this._score.copyright=this._syData.toString():this.error("copyright",Bridge.get(AlphaTab.Importer.AlphaTexSymbols).string),this.newSy(),anyMeta=!0;else if(syData==="tempo")this.newSy(),this._sy===Bridge.get(AlphaTab.Importer.AlphaTexSymbols).number?this._score.tempo=this._syData:this.error("tempo",Bridge.get(AlphaTab.Importer.AlphaTexSymbols).number),this.newSy(),anyMeta=!0;else if(syData==="capo")this.newSy(),this._sy===Bridge.get(AlphaTab.Importer.AlphaTexSymbols).number?this._track.capo=this._syData:this.error("capo",Bridge.get(AlphaTab.Importer.AlphaTexSymbols).number),this.newSy(),anyMeta=!0;else if(syData==="tuning"){if(this.newSy(),this._sy===Bridge.get(AlphaTab.Importer.AlphaTexSymbols).tuning){tuning=[];do tuning.push(this.parseTuning(this._syData.toString().toLowerCase())),this.newSy();while(this._sy===Bridge.get(AlphaTab.Importer.AlphaTexSymbols).tuning);this._track.tuning=tuning.slice(0)}else this.error("tuning",Bridge.get(AlphaTab.Importer.AlphaTexSymbols).tuning);anyMeta=!0}else syData==="instrument"?(this.newSy(),this._sy===Bridge.get(AlphaTab.Importer.AlphaTexSymbols).number?(instrument=this._syData,instrument>=0&&instrument<=128?this._track.playbackInfo.program=this._syData:this.error("instrument",Bridge.get(AlphaTab.Importer.AlphaTexSymbols).number,!1)):this._sy===Bridge.get(AlphaTab.Importer.AlphaTexSymbols).string?(instrumentName=this._syData.toString().toLowerCase(),this._track.playbackInfo.program=Bridge.get(AlphaTab.Audio.GeneralMidi).getValue(instrumentName)):this.error("instrument",Bridge.get(AlphaTab.Importer.AlphaTexSymbols).number),this.newSy(),anyMeta=!0):this.error("metaDataTags",Bridge.get(AlphaTab.Importer.AlphaTexSymbols).string,!1);anyMeta&&(this._sy!==Bridge.get(AlphaTab.Importer.AlphaTexSymbols).dot&&this.error("song",Bridge.get(AlphaTab.Importer.AlphaTexSymbols).dot),this.newSy())},bars:function(){for(this.bar();this._sy!==Bridge.get(AlphaTab.Importer.AlphaTexSymbols).eof;)this._sy!==Bridge.get(AlphaTab.Importer.AlphaTexSymbols).pipe&&this.error("bar",Bridge.get(AlphaTab.Importer.AlphaTexSymbols).pipe),this.newSy(),this.bar()},bar:function(){var master=new AlphaTab.Model.MasterBar,bar,voice,emptyBeat;for(this._score.addMasterBar(master),bar=new AlphaTab.Model.Bar,this._track.addBar(bar),master.index>0&&(master.keySignature=master.previousMasterBar.keySignature,master.timeSignatureDenominator=master.previousMasterBar.timeSignatureDenominator,master.timeSignatureNumerator=master.previousMasterBar.timeSignatureNumerator,bar.clef=bar.previousBar.clef),this.barMeta(bar),voice=new AlphaTab.Model.Voice,bar.addVoice(voice);this._sy!==Bridge.get(AlphaTab.Importer.AlphaTexSymbols).pipe&&this._sy!==Bridge.get(AlphaTab.Importer.AlphaTexSymbols).eof;)this.beat(voice);voice.beats.length===0&&(emptyBeat=new AlphaTab.Model.Beat,emptyBeat.isEmpty=!0,voice.addBeat(emptyBeat))},beat:function(voice){var duration,beat,duration1,beatRepeat,i;if(this._sy===Bridge.get(AlphaTab.Importer.AlphaTexSymbols).doubleDot){this.newSy();this._sy!==Bridge.get(AlphaTab.Importer.AlphaTexSymbols).number&&this.error("duration",Bridge.get(AlphaTab.Importer.AlphaTexSymbols).number);duration=this._syData;switch(duration){case 1:case 2:case 4:case 8:case 16:case 32:case 64:this._currentDuration=this.parseDuration(this._syData);break;default:this.error("duration",Bridge.get(AlphaTab.Importer.AlphaTexSymbols).number,!1)}this.newSy();return}if(beat=new AlphaTab.Model.Beat,voice.addBeat(beat),voice.bar.getMasterBar().tempoAutomation!==null&&voice.beats.length===1&&beat.automations.push(voice.bar.getMasterBar().tempoAutomation),this._sy===Bridge.get(AlphaTab.Importer.AlphaTexSymbols).lParensis){for(this.newSy(),this.note(beat);this._sy!==Bridge.get(AlphaTab.Importer.AlphaTexSymbols).rParensis&&this._sy!==Bridge.get(AlphaTab.Importer.AlphaTexSymbols).eof;)this.note(beat);this._sy!==Bridge.get(AlphaTab.Importer.AlphaTexSymbols).rParensis&&this.error("note-list",Bridge.get(AlphaTab.Importer.AlphaTexSymbols).rParensis);this.newSy()}else this._sy===Bridge.get(AlphaTab.Importer.AlphaTexSymbols).string&&this._syData.toString().toLowerCase()==="r"?this.newSy():this.note(beat);if(this._sy===Bridge.get(AlphaTab.Importer.AlphaTexSymbols).dot){this.newSy();this._sy!==Bridge.get(AlphaTab.Importer.AlphaTexSymbols).number&&this.error("duration",Bridge.get(AlphaTab.Importer.AlphaTexSymbols).number);duration1=this._syData;switch(duration1){case 1:case 2:case 4:case 8:case 16:case 32:case 64:this._currentDuration=this.parseDuration(this._syData);break;default:this.error("duration",Bridge.get(AlphaTab.Importer.AlphaTexSymbols).number,!1)}this.newSy()}for(beat.duration=this._currentDuration,beatRepeat=1,this._sy===Bridge.get(AlphaTab.Importer.AlphaTexSymbols).multiply&&(this.newSy(),this._sy!==Bridge.get(AlphaTab.Importer.AlphaTexSymbols).number?this.error("multiplier",Bridge.get(AlphaTab.Importer.AlphaTexSymbols).number):beatRepeat=this._syData,this.newSy()),this.beatEffects(beat),i=0;i<beatRepeat-1;i++)voice.addBeat(beat.clone())},beatEffects:function(beat){if(this._sy===Bridge.get(AlphaTab.Importer.AlphaTexSymbols).lBrace){for(this.newSy();this._sy===Bridge.get(AlphaTab.Importer.AlphaTexSymbols).string;)this._syData=this._syData.toString().toLowerCase(),this.applyBeatEffect(beat)||this.error("beat-effects",Bridge.get(AlphaTab.Importer.AlphaTexSymbols).string,!1);this._sy!==Bridge.get(AlphaTab.Importer.AlphaTexSymbols).rBrace&&this.error("beat-effects",Bridge.get(AlphaTab.Importer.AlphaTexSymbols).rBrace);this.newSy()}},applyBeatEffect:function(beat){var syData=this._syData.toString().toLowerCase(),tuplet;if(syData==="f")return beat.fadeIn=!0,this.newSy(),!0;if(syData==="v")return beat.vibrato=Bridge.get(AlphaTab.Model.VibratoType).slight,this.newSy(),!0;if(syData==="s")return beat.slap=!0,this.newSy(),!0;if(syData==="p")return beat.pop=!0,this.newSy(),!0;if(syData==="dd")return beat.dots=2,this.newSy(),!0;if(syData==="d")return beat.dots=1,this.newSy(),!0;if(syData==="su")return beat.pickStroke=Bridge.get(AlphaTab.Model.PickStrokeType).up,this.newSy(),!0;if(syData==="sd")return beat.pickStroke=Bridge.get(AlphaTab.Model.PickStrokeType).down,this.newSy(),!0;if(syData==="tu"){if(this.newSy(),this._sy!==Bridge.get(AlphaTab.Importer.AlphaTexSymbols).number)return this.error("tuplet",Bridge.get(AlphaTab.Importer.AlphaTexSymbols).number),!1;tuplet=this._syData;switch(tuplet){case 3:beat.tupletDenominator=3;beat.tupletNumerator=2;break;case 5:beat.tupletDenominator=5;beat.tupletNumerator=4;break;case 6:beat.tupletDenominator=6;beat.tupletNumerator=4;break;case 7:beat.tupletDenominator=7;beat.tupletNumerator=4;break;case 9:beat.tupletDenominator=9;beat.tupletNumerator=8;break;case 10:beat.tupletDenominator=10;beat.tupletNumerator=8;break;case 11:beat.tupletDenominator=11;beat.tupletNumerator=8;break;case 12:beat.tupletDenominator=12;beat.tupletNumerator=8}return this.newSy(),!0}if(syData==="tb"){if(this.newSy(),this._sy!==Bridge.get(AlphaTab.Importer.AlphaTexSymbols).lParensis)return this.error("tremolobar-effect",Bridge.get(AlphaTab.Importer.AlphaTexSymbols).lParensis),!1;for(this._allowNegatives=!0,this.newSy();this._sy!==Bridge.get(AlphaTab.Importer.AlphaTexSymbols).rParensis&&this._sy!==Bridge.get(AlphaTab.Importer.AlphaTexSymbols).eof;){if(this._sy!==Bridge.get(AlphaTab.Importer.AlphaTexSymbols).number)return this.error("tremolobar-effect",Bridge.get(AlphaTab.Importer.AlphaTexSymbols).number),!1;beat.whammyBarPoints.push(new AlphaTab.Model.BendPoint(0,this._syData));this.newSy()}while(beat.whammyBarPoints.length>60)beat.whammyBarPoints.splice(beat.whammyBarPoints.length-1,1);for(var count=beat.whammyBarPoints.length,step=Bridge.Int.div(60,count),i=0;i<count;)beat.whammyBarPoints[i].offset=Math.min(60,i*step),i++;return(this._allowNegatives=!1,this._sy!==Bridge.get(AlphaTab.Importer.AlphaTexSymbols).rParensis)?(this.error("tremolobar-effect",Bridge.get(AlphaTab.Importer.AlphaTexSymbols).rParensis),!1):(this.newSy(),!0)}return!1},note:function(beat){var syData=this._syData.toString().toLowerCase(),string,note;this._sy===Bridge.get(AlphaTab.Importer.AlphaTexSymbols).number||this._sy===Bridge.get(AlphaTab.Importer.AlphaTexSymbols).string&&(syData==="x"||syData==="-")||this.error("note-fret",Bridge.get(AlphaTab.Importer.AlphaTexSymbols).number);var isDead=syData==="x",isTie=syData==="-",fret=isDead||isTie?0:this._syData;this.newSy();this._sy!==Bridge.get(AlphaTab.Importer.AlphaTexSymbols).dot&&this.error("note",Bridge.get(AlphaTab.Importer.AlphaTexSymbols).dot);this.newSy();this._sy!==Bridge.get(AlphaTab.Importer.AlphaTexSymbols).number&&this.error("note-string",Bridge.get(AlphaTab.Importer.AlphaTexSymbols).number);string=this._syData;(string<1||string>this._track.tuning.length)&&this.error("note-string",Bridge.get(AlphaTab.Importer.AlphaTexSymbols).number,!1);this.newSy();note=new AlphaTab.Model.Note;this.noteEffects(note);note.string=this._track.tuning.length-(string-1);note.isDead=isDead;note.isTieDestination=isTie;isTie||(note.fret=fret);beat.addNote(note)},noteEffects:function(note){var syData,bendValue,fret,duration,duration1;if(this._sy===Bridge.get(AlphaTab.Importer.AlphaTexSymbols).lBrace){for(this.newSy();this._sy===Bridge.get(AlphaTab.Importer.AlphaTexSymbols).string;)if(syData=this._syData.toString().toLowerCase(),this._syData=syData,syData==="b"){for(this.newSy(),this._sy!==Bridge.get(AlphaTab.Importer.AlphaTexSymbols).lParensis&&this.error("bend-effect",Bridge.get(AlphaTab.Importer.AlphaTexSymbols).lParensis),this.newSy();this._sy!==Bridge.get(AlphaTab.Importer.AlphaTexSymbols).rParensis&&this._sy!==Bridge.get(AlphaTab.Importer.AlphaTexSymbols).eof;)this._sy!==Bridge.get(AlphaTab.Importer.AlphaTexSymbols).number&&this.error("bend-effect-value",Bridge.get(AlphaTab.Importer.AlphaTexSymbols).number),bendValue=this._syData,note.bendPoints.push(new AlphaTab.Model.BendPoint(0,Math.abs(bendValue))),this.newSy();while(note.bendPoints.length>60)note.bendPoints.splice(note.bendPoints.length-1,1);for(var count=note.bendPoints.length,step=Bridge.Int.div(60,count),i=0;i<count;)note.bendPoints[i].offset=Math.min(60,i*step),i++;this._sy!==Bridge.get(AlphaTab.Importer.AlphaTexSymbols).rParensis&&this.error("bend-effect",Bridge.get(AlphaTab.Importer.AlphaTexSymbols).rParensis);this.newSy()}else if(syData==="nh")note.harmonicType=Bridge.get(AlphaTab.Model.HarmonicType).natural,this.newSy();else if(syData==="ah")note.harmonicType=Bridge.get(AlphaTab.Model.HarmonicType).artificial,this.newSy();else if(syData==="th")note.harmonicType=Bridge.get(AlphaTab.Model.HarmonicType).tap,this.newSy();else if(syData==="ph")note.harmonicType=Bridge.get(AlphaTab.Model.HarmonicType).pinch,this.newSy();else if(syData==="sh")note.harmonicType=Bridge.get(AlphaTab.Model.HarmonicType).semi,this.newSy();else if(syData==="gr")this.newSy(),note.beat.graceType=this._syData.toString().toLowerCase()==="ob"?Bridge.get(AlphaTab.Model.GraceType).onBeat:Bridge.get(AlphaTab.Model.GraceType).beforeBeat,this.newSy();else if(syData==="tr"){if(this.newSy(),this._sy!==Bridge.get(AlphaTab.Importer.AlphaTexSymbols).number&&this.error("trill-effect",Bridge.get(AlphaTab.Importer.AlphaTexSymbols).number),fret=this._syData,this.newSy(),duration=Bridge.get(AlphaTab.Model.Duration).sixteenth,this._sy===Bridge.get(AlphaTab.Importer.AlphaTexSymbols).number){switch(this._syData){case 16:duration=Bridge.get(AlphaTab.Model.Duration).sixteenth;break;case 32:duration=Bridge.get(AlphaTab.Model.Duration).thirtySecond;break;case 64:duration=Bridge.get(AlphaTab.Model.Duration).thirtySecond;break;default:duration=Bridge.get(AlphaTab.Model.Duration).sixteenth}this.newSy()}note.trillValue=fret+note.getStringTuning();note.trillSpeed=duration}else if(syData==="tp"){if(this.newSy(),duration1=Bridge.get(AlphaTab.Model.Duration).eighth,this._sy===Bridge.get(AlphaTab.Importer.AlphaTexSymbols).number){switch(this._syData){case 8:duration1=Bridge.get(AlphaTab.Model.Duration).eighth;break;case 16:duration1=Bridge.get(AlphaTab.Model.Duration).sixteenth;break;case 32:duration1=Bridge.get(AlphaTab.Model.Duration).thirtySecond;break;default:duration1=Bridge.get(AlphaTab.Model.Duration).eighth}this.newSy()}note.beat.tremoloSpeed=duration1}else syData==="v"?(this.newSy(),note.vibrato=Bridge.get(AlphaTab.Model.VibratoType).slight):syData==="sl"?(this.newSy(),note.slideType=Bridge.get(AlphaTab.Model.SlideType).legato):syData==="ss"?(this.newSy(),note.slideType=Bridge.get(AlphaTab.Model.SlideType).shift):syData==="h"?(this.newSy(),note.isHammerPullOrigin=!0):syData==="g"?(this.newSy(),note.isGhost=!0):syData==="ac"?(this.newSy(),note.accentuated=Bridge.get(AlphaTab.Model.AccentuationType).normal):syData==="hac"?(this.newSy(),note.accentuated=Bridge.get(AlphaTab.Model.AccentuationType).heavy):syData==="pm"?(this.newSy(),note.isPalmMute=!0):syData==="st"?(this.newSy(),note.isStaccato=!0):syData==="lr"?(this.newSy(),note.isLetRing=!0):this.applyBeatEffect(note.beat)||this.error(syData,Bridge.get(AlphaTab.Importer.AlphaTexSymbols).string,!1);this._sy!==Bridge.get(AlphaTab.Importer.AlphaTexSymbols).rBrace&&this.error("note-effect",Bridge.get(AlphaTab.Importer.AlphaTexSymbols).rBrace,!1);this.newSy()}},parseDuration:function(duration){switch(duration){case 1:return Bridge.get(AlphaTab.Model.Duration).whole;case 2:return Bridge.get(AlphaTab.Model.Duration).half;case 4:return Bridge.get(AlphaTab.Model.Duration).quarter;case 8:return Bridge.get(AlphaTab.Model.Duration).eighth;case 16:return Bridge.get(AlphaTab.Model.Duration).sixteenth;case 32:return Bridge.get(AlphaTab.Model.Duration).thirtySecond;case 64:return Bridge.get(AlphaTab.Model.Duration).sixtyFourth;default:return Bridge.get(AlphaTab.Model.Duration).quarter}},barMeta:function(bar){for(var master=bar.getMasterBar(),syData,tempoAutomation;this._sy===Bridge.get(AlphaTab.Importer.AlphaTexSymbols).metaCommand;)syData=this._syData.toString().toLowerCase(),syData==="ts"?(this.newSy(),this._sy!==Bridge.get(AlphaTab.Importer.AlphaTexSymbols).number&&this.error("timesignature-numerator",Bridge.get(AlphaTab.Importer.AlphaTexSymbols).number),master.timeSignatureNumerator=this._syData,this.newSy(),this._sy!==Bridge.get(AlphaTab.Importer.AlphaTexSymbols).number&&this.error("timesignature-denominator",Bridge.get(AlphaTab.Importer.AlphaTexSymbols).number),master.timeSignatureDenominator=this._syData):syData==="ro"?master.isRepeatStart=!0:syData==="rc"?(this.newSy(),this._sy!==Bridge.get(AlphaTab.Importer.AlphaTexSymbols).number&&this.error("repeatclose",Bridge.get(AlphaTab.Importer.AlphaTexSymbols).number),master.repeatCount=this._syData-1):syData==="ks"?(this.newSy(),this._sy!==Bridge.get(AlphaTab.Importer.AlphaTexSymbols).string&&this.error("keysignature",Bridge.get(AlphaTab.Importer.AlphaTexSymbols).string),master.keySignature=this.parseKeySignature(this._syData.toString().toLowerCase())):syData==="clef"?(this.newSy(),this._sy!==Bridge.get(AlphaTab.Importer.AlphaTexSymbols).string&&this._sy!==Bridge.get(AlphaTab.Importer.AlphaTexSymbols).tuning&&this.error("clef",Bridge.get(AlphaTab.Importer.AlphaTexSymbols).string),bar.clef=this.parseClef(this._syData.toString().toLowerCase())):syData==="tempo"?(this.newSy(),this._sy!==Bridge.get(AlphaTab.Importer.AlphaTexSymbols).number&&this.error("tempo",Bridge.get(AlphaTab.Importer.AlphaTexSymbols).number),tempoAutomation=new AlphaTab.Model.Automation,tempoAutomation.isLinear=!0,tempoAutomation.type=Bridge.get(AlphaTab.Model.AutomationType).tempo,tempoAutomation.value=this._syData,master.tempoAutomation=tempoAutomation):this.error("measure-effects",Bridge.get(AlphaTab.Importer.AlphaTexSymbols).string,!1),this.newSy()}});Bridge.define("AlphaTab.Importer.ScoreLoader",{statics:{loadScoreAsync:function(path,success,error){var loader=Bridge.get(AlphaTab.Environment).fileLoaders.default();loader.loadBinaryAsync(path,function(data){var score=null;try{score=Bridge.get(AlphaTab.Importer.ScoreLoader).loadScoreFromBytes(data)}catch(e){e=Bridge.Exception.create(e);error(e)}score!==null&&success(score)},error)},loadScore:function(path){var loader=Bridge.get(AlphaTab.Environment).fileLoaders.default(),data=loader.loadBinary(path);return Bridge.get(AlphaTab.Importer.ScoreLoader).loadScoreFromBytes(data)},loadScoreFromBytes:function(data){for(var importers=Bridge.get(AlphaTab.Importer.ScoreImporter).buildImporters(),score=null,bb=Bridge.get(AlphaTab.IO.ByteBuffer).fromBuffer(data),importer,$t=Bridge.getEnumerator(importers);$t.moveNext();){importer=$t.getCurrent();bb.reset();try{importer.init(bb);score=importer.readScore();break}catch($e){if($e=Bridge.Exception.create($e),!Bridge.is($e,AlphaTab.Importer.UnsupportedFormatException))throw $e;}}if(score!==null)return score;throw new AlphaTab.Importer.NoCompatibleReaderFoundException;}}});Bridge.define("AlphaTab.Rendering.Effects.LetRingEffectInfo",{inherits:[AlphaTab.Rendering.Effects.NoteEffectInfoBase],getSizingMode:function(){return Bridge.get(AlphaTab.Rendering.EffectBarGlyphSizing).groupedOnBeatToPostBeat},shouldCreateGlyphForNote:function(renderer,note){return note.isLetRing},getHeight:function(renderer){return 15*renderer.getScale()},createNewGlyph:function(){return new AlphaTab.Rendering.Glyphs.LineRangedGlyph(0,0,"LetRing")}});Bridge.define("AlphaTab.Rendering.Effects.FingeringEffectInfo",{inherits:[AlphaTab.Rendering.Effects.NoteEffectInfoBase],_maxGlyphCount:0,getSizingMode:function(){return Bridge.get(AlphaTab.Rendering.EffectBarGlyphSizing).singleOnBeatOnly},shouldCreateGlyph:function(renderer,beat){var result=AlphaTab.Rendering.Effects.NoteEffectInfoBase.prototype.shouldCreateGlyph.call(this,renderer,beat);return this.lastCreateInfo.length>=this._maxGlyphCount&&(this._maxGlyphCount=this.lastCreateInfo.length),result},shouldCreateGlyphForNote:function(renderer,note){return note.leftHandFinger!==Bridge.get(AlphaTab.Model.Fingers).noOrDead&&note.leftHandFinger!==Bridge.get(AlphaTab.Model.Fingers).unknown||note.rightHandFinger!==Bridge.get(AlphaTab.Model.Fingers).noOrDead&&note.rightHandFinger!==Bridge.get(AlphaTab.Model.Fingers).unknown},getHeight:function(renderer){return this._maxGlyphCount*20*renderer.getScale()},createNewGlyph:function(){return new AlphaTab.Rendering.Effects.DummyEffectGlyph(0,0,this.lastCreateInfo.length+"fingering")}});Bridge.init();
>>>>>>> 2f0ca88... Fixed wrong alternate ending parsing in GPX parser, adjusted alternate ending renderer to also use correct siging mechanism. (fixes #76)
